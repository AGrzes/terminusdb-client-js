{"version":3,"sources":["webpack://TerminusClient/webpack/bootstrap","webpack://TerminusClient/./lib/utils.js","webpack://TerminusClient/./node_modules/axios/lib/utils.js","webpack://TerminusClient/./lib/woqlRule.js","webpack://TerminusClient/./lib/viewer/viewConfig.js","webpack://TerminusClient/./lib/errorMessage.js","webpack://TerminusClient/./lib/frameRule.js","webpack://TerminusClient/./lib/const.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/bind.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/buildURL.js","webpack://TerminusClient/./node_modules/axios/lib/cancel/isCancel.js","webpack://TerminusClient/./node_modules/axios/lib/defaults.js","webpack://TerminusClient/./node_modules/axios/lib/adapters/xhr.js","webpack://TerminusClient/./node_modules/axios/lib/core/createError.js","webpack://TerminusClient/./node_modules/axios/lib/core/mergeConfig.js","webpack://TerminusClient/./node_modules/axios/lib/cancel/Cancel.js","webpack://TerminusClient/./lib/connectionCapabilities.js","webpack://TerminusClient/./lib/connectionConfig.js","webpack://TerminusClient/./lib/terminusIDParser.js","webpack://TerminusClient/./lib/woqlResult.js","webpack://TerminusClient/./lib/woql.js","webpack://TerminusClient/./lib/terminusRule.js","webpack://TerminusClient/./lib/viewer/tableConfig.js","webpack://TerminusClient/./lib/viewer/woqlTable.js","webpack://TerminusClient/./lib/viewer/chooserConfig.js","webpack://TerminusClient/./lib/viewer/woqlChooser.js","webpack://TerminusClient/./lib/viewer/graphConfig.js","webpack://TerminusClient/./lib/viewer/woqlGraph.js","webpack://TerminusClient/./lib/viewer/chartConfig.js","webpack://TerminusClient/./lib/viewer/woqlChart.js","webpack://TerminusClient/./lib/viewer/streamConfig.js","webpack://TerminusClient/./lib/viewer/woqlStream.js","webpack://TerminusClient/./lib/viewer/frameConfig.js","webpack://TerminusClient/./lib/viewer/documentFrame.js","webpack://TerminusClient/./index.js","webpack://TerminusClient/./lib/woqlClient.js","webpack://TerminusClient/./lib/dispatchRequest.js","webpack://TerminusClient/./node_modules/buffer/index.js","webpack://TerminusClient/(webpack)/buildin/global.js","webpack://TerminusClient/./node_modules/base64-js/index.js","webpack://TerminusClient/./node_modules/ieee754/index.js","webpack://TerminusClient/./node_modules/isarray/index.js","webpack://TerminusClient/./node_modules/axios/index.js","webpack://TerminusClient/./node_modules/axios/lib/axios.js","webpack://TerminusClient/./node_modules/axios/lib/core/Axios.js","webpack://TerminusClient/./node_modules/axios/lib/core/InterceptorManager.js","webpack://TerminusClient/./node_modules/axios/lib/core/dispatchRequest.js","webpack://TerminusClient/./node_modules/axios/lib/core/transformData.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://TerminusClient/./node_modules/axios/lib/core/settle.js","webpack://TerminusClient/./node_modules/axios/lib/core/enhanceError.js","webpack://TerminusClient/./node_modules/axios/lib/core/buildFullPath.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/combineURLs.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/cookies.js","webpack://TerminusClient/./node_modules/axios/lib/cancel/CancelToken.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/spread.js","webpack://TerminusClient/./lib/woqlView.js","webpack://TerminusClient/./lib/objectFrame.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Utils","rdf","rdfs","xsd","owl","tcs","xdd","v","terminus","vio","payload","encodeURIComponent","payloadArr","keys","keyElement","valueElement","push","join","prefix","url","this","standard_urls","obj","length","Math","random","toString","substring","Date","getTime","link","pref","full","ida","idb","unshorten","sha","getShorthand","shb","prefixes","validURL","bits","split","str","nurl","urlFragment","lastIndexOf","replace","charAt","toUpperCase","slice","window","location","href","urlStr","ext","vars","nvars","addNamespaceToVariable","mvar","removeNamespaceFromVariable","val","row","rad","TypeHelper","isStringType","stype","isDatatype","sh","shorten","numberWithCommas","separator","parts","datatypes","parseRangeValue","dividor","vals","indexOf","DateHelper","parseXsdTime","tz","extractXsdTimezone","hour","minute","second","timezone","parseXsdDate","year","parsed","abs","month","parseInt","day","parseDate","ty","parseXsdDateTime","addXsdPadding","nparsed","xsdFromParsed","ret","xparsed","convertTimestampToXsd","a","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","datetime","ptime","isArray","isUndefined","isObject","isFunction","forEach","fn","isArrayBuffer","isBuffer","constructor","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","buffer","isString","isNumber","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","document","merge","result","assignValue","arguments","deepMerge","extend","b","thisArg","trim","TerminusRule","require","UTILS","WOQLRule","pattern","WOQLPattern","TerminusPattern","setVariables","variables","addNamespacesToVariables","current_variable","varlist","edge","source","target","scope","vs","rownum","constraints","list","filter","tester","matchRow","rules","action","matches","rule","matchCell","matchColumn","matchNode","nid","matchPair","keya","keyb","matchEdge","prettyPrint","type","literal","unpack","json","numberMatch","testVariableConstraints","testBasics","k","testVariableConstraint","testValue","setPattern","ViewConfig","WOQLViewRule","render","func","view_render","renderer","view_renderer","getRulesJSON","jr","getBasicJSON","loadBasicJSON","getBasicprettyPrint","color","hidden","size","icon","JSON","stringify","text","border","args","click","hover","mjson","rend","onClick","onHover","getErrorAsMessage","api","err","response","data","formatErrorMessage","body","status","method","msg","nmsg","getAPIErrorMessage","getAccessDeniedMessage","accessDenied","db","server","getInvalidURIMessage","parseAPIError","e","error","headers","redirected","FrameRule","FramePattern","testRules","frame","onmatch","matched_rules","patternMatchesFrame","checkFrame","prop","frame_type","label","subject","subjectClass","range","depth","index","parent","par","children","kid","rtype","getRendererType","illegalRuleType","checkFrameType","checkLabel","checkSubject","checkSubjectClass","checkProperty","checkDepth","checkRange","checkValue","checkType","checkLiteral","checkParent","checkChildren","checkIndex","checkStatus","frameType","kids","rsubj","IDsMatch","found","properties","j","values","isUpdated","isNew","propertyIDsMatch","Array","isDatatypeProperty","valuesMatch","rangeIDsMatch","rcls","classIDsMatch","ftype","getLabel","console","log","Error","stringMatch","isProperty","isData","renderer_type","freeze","CONNECT","GET_SCHEMA","UPDATE_SCHEMA","UPDATE_DOCUMENT","CLASS_FRAME","WOQL_SELECT","TERMINUS_MESSAGE","GET_DOCUMENT","DELETE_DATABASE","DELETE_DOCUMENT","CREATE_DATABASE","CREATE_DOCUMENT","WOQL_UPDATE","apply","utils","encode","params","paramsSerializer","serializedParams","toISOString","hashmarkIndex","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","adapter","defaults","XMLHttpRequest","process","transformRequest","transformResponse","parse","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","common","settle","buildURL","buildFullPath","parseHeaders","isURLSameOrigin","createError","config","Promise","resolve","reject","requestData","requestHeaders","request","auth","username","password","Authorization","btoa","fullPath","baseURL","open","onreadystatechange","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseType","responseText","statusText","onabort","onerror","ontimeout","timeoutErrorMessage","cookies","xsrfValue","withCredentials","read","undefined","toLowerCase","setRequestHeader","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","then","cancel","abort","send","enhanceError","message","code","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","axiosKeys","concat","otherKeys","Cancel","CONST","ErrorMessage","ConnectionCapabilities","connectionConfig","connection","setClientKey","getClientKey","serverURL","curl","addConnection","capabilities","capabilitiesKeys","pred","auths","actions","actionsArr","map","item","nrec","getJSONContext","dbid","con","ncon","doc","scm","serverConnected","getServerRecord","srvr","connectionObj","oid","getDBRecord","dbCapabilityID","getServerDBRecords","dbrecs","removeDB","dbidCap","capabilitiesPermit","rec","IDParser","ConnectionConfig","newParams","docid","setServer","setDB","setDocument","include_key","inputStr","context","parser","parseServerURL","parseDBID","dbURL","setSchemaURL","parseSchemaURL","schemaURL","setQueryURL","parseQueryURL","queryURL","setClassFrameURL","parseClassFrameURL","frameURL","parseDocumentURL","docURL","includeKey","server_url","setContext","validPrefixedURL","expandPrefixed","validIDString","stripOptionalPath","bit","WOQL","WOQLResult","results","query","bindings","cursor","no_compress","compress","getContext","nprop","nval","hasBindings","count","getBindings","getVariableList","first","last","next","res","prev","sort","asc_or_desc","compareValues","WOQLQuery","chain_ended","contains_update","paging_transitive_properties","vocab","loadDefaultVocabulary","tripleBuilder","nspaces","spaces","TripleBuilder","g","when","Query","Update","opt","from","dburl","into","limit","start","select","or","and","not","triple","quad","sub","isa","eq","JSON_or_IRI","delete_triple","S","P","O","delete_quad","G","add_triple","add_quad","cols","put","as","file","graph","vari","remote","opts","post","order_by","asc","varlist_or_var","desc","group_by","gvarlist","groupedvar","groupquery","output","lower","u","pad","input","len","glue","member","El","List","unique","idgen","typecast","vara","varb","cast","re","test","less","v1","v2","greater","eval","arith","plus","sum","minus","times","divide","exp","div","comment","arg","var1","star","node","nodeid","add_class","classid","add_property","propid","boxClasses","classes","except","libs","generateChoiceList","cls","clslabel","clsdesc","choices","delete_class","delete_property","insert","Node","Type","Graph","q","cleanType","doctype","arr1","arr2","buildAsClauses","gid","remq","subq","clauses","va","vb","ovars","sq","nvaris","vr","packString","nlist","packStrings","upd","advanceCursor","embedquery","queries","nquery","cleanSubject","cleanPredicate","cleanObject","chainable","cleanGraph","cleanClass","last_index","varname","gname","lastUpdate","Subject","Predicate","Object_or_Literal","chainableUpdate","update","woql","adding_class","subs","nsubs","idgens","description","domain","confs","clist","listid","lastid","nextid","oneof","loadXDD","loadXDDBoxes","loadXSDBoxes","addDatatype","boxDatatype","id","descr","dt","datatype","box_class_id","box_prop_id","box_class","box_prop","asArray","max","card","cardinality","min","addPO","lang","pn","entity","relationship","nwoql","GraphIRI","Subj","Pred","Obj","getEverything","getAllDocuments","documentMetadata","concreteDocumentClasses","propertyMetadata","elementMetadata","classMetadata","getDataOfClass","chosen","getDataOfProperty","documentProperties","getDocumentConnections","getAllDocumentConnections","getInstanceMeta","simpleGraphQuery","loadVocabulary","client","execute","spl","setVocabulary","getVocabulary","getLimit","getPagingProperty","setLimit","setPagingProperty","isPaged","getPage","psize","hasStart","getStart","setPage","pagenum","pstart","setStart","addStart","nextPage","firstPage","previousPage","npage","setPageSize","hasSelect","getSelectVariables","nq","fileList","nv","defaultContext","DB_IRI","def","subj","pageprop","nc","indent","show_context","fluent","newlining_operators","operator","getWOQLPrelude","isChainable","uncleanArguments","hasShortcut","inline","lastArg","getShortcut","argIsSubQuery","myas","lhs","rhs","uncleanArgument","allArgs","unclean","cstr","oval","uncleanObjectArgument","nstr","part","suff","printLine","ttype","evstr","unit","addEntry","getO","clause","alert","which","os","od","cardcls","tb","tf","njson","constraint","vundertest","arr","nonstring","compareIDs","vala","valb","RegExp","Config","WOQLTable","WOQLTableConfig","WOQLTableRule","conf","column_order","pagesize","pager","page","changesize","loadJSON","nr","x","trenderer","order","show_pager","change_pagesize","show_pagesize","show_pagenumber","column","header","hdr","DataValue","datavalue","options","setResult","canAdvancePage","canChangePage","canRetreatPage","getPageSize","getColumnsToRender","hasColumnOrder","getColumnOrder","self","col","getColumnHeaderContents","colid","hr","h","createTextNode","clab","labelFromURL","nresult","notify","hasDefinedEvent","getDefinedEvent","getRowClick","getCellClick","getRowHover","getCellHover","hasCellClick","hasRowClick","hasCellHover","hasRowHover","getRenderer","getSpecificRender","getRendererForDatatype","createRenderer","renderValue","dv","nvalue","WOQLChooser","WOQLChooserConfig","WOQLChooserRule","getBasicPrettyPrint","change","show_empty","labels","titles","direction","onChange","placeholder","value_variable","label_variable","title_variable","sort_variable","sort_direction","title","selected","set","ch","rows","includeRow","rowToChoice","choice","getRowID","getLabelFromBinding","getTitleFromBinding","getSelectedFromBinding","rval","sp","getSpecialRenderer","renderSpecial","lab","setRenderer","WOQLGraph","WOQLGraphConfig","WOQLGraphRule","literals","show_literals","source_variable","fontfamily","fontfam","show_force","force","fix_nodes","fixed","explode_out","explode","selected_grows","bigsel","width","gwidth","height","gheight","edges","nedges","show_edges","estrs","charge","collisionRadius","arrow","distance","symmetric","weight","w","nodes","calculateVariableTypes","extractFromBinding","combineEdges","combineNodes","lits","includeNode","includeLiteralNode","genBNID","getLiteralOwner","addAdornedNode","addAdornedEdge","createEdgesFromIDs","ndid","ks","kt","hid","radius","getConfigValue","nodetype","cs","es","getEdges","nnodes","nodes_referenced_by_edges","fedges","k2","getNodes","num","WOQLChartConfig","WOQLChartRule","margin","layout","_title","_description","_layout","marginObj","_margin","xAxis","woqlRule","legend","yAxis","bar","line","point","area","style","legendType","fillOpacity","fill","stroke","strokeWidth","dot","isVisible","labelRotate","angle","padding","paddingObj","labelDateInput","labelDateOutput","stackId","axisDomain","domainArr","colorEntry","propValue","customColors","colorsObj","barSize","WOQLChart","WOQLStream","WOQLStreamConfig","WOQLStreamRule","wqt","template","mtemplate","wqrs","DocumentFrame","FrameConfig","DocumentRule","load_schema","json_rules","get_schema","show_all","all","show_parts","fp","setFrameDisplayOptions","display_options","view","showDisabledButtons","show_disabled_buttons","collapse","headerStyle","header_style","features","setFrameFeatures","headerFeatures","header_features","showEmpty","dataviewer","setFrameArgs","existing","fresh","got","fkey","rep","props","compare","hf","f","feats","applyFeatureProperty","nfeats","nfeat","unpackFeatures","extensions","fstr","fid","ObjectFrame","FrameHelper","load","loadComplete","loadDocument","loadSchema","encoding","getDocument","loadDataFrames","ncls","getClassFrame","loadSchemaFrames","loadDocumentSchema","clsid","dataframes","classframes","loadClassFrames","subjid","newDoc","fillFromSchema","applyRules","mymatch","WOQLClient","View","DispatchRequest","use_fetch","return_full_response","connect","URIError","dispatch","createDatabase","details","makeDocumentConsistentWithURL","addOptionsToDocument","deleteDatabase","getSchema","schurl","updateSchema","createDocument","docurl","updateDocument","deleteDocument","qurl","addOptionsToWOQL","serverLog","endpoint","cfurl","pdoc","_","addKeyToPayload","dispatchFetch","redirect","referrer","hdrs","URIEncodePayload","cache","Headers","fetch","ok","axios","btoaImplementation","Buffer","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","encodingOrOffset","allocUnsafe","TypeError","array","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","isEncoding","actual","write","fromString","checked","copy","fromObject","assertSize","loweredCase","utf8ToBytes","base64ToBytes","slowToString","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","indexSize","arrLength","valLength","String","buf","readUInt16BE","foundIndex","hexWrite","offset","Number","remaining","strLen","substr","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","allocUnsafeSlow","_isBuffer","y","pos","swap16","swap32","swap64","equals","inspect","match","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","src","dst","Function","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","Axios","mergeConfig","createInstance","defaultConfig","instance","instanceConfig","CancelToken","isCancel","promises","spread","default","InterceptorManager","dispatchRequest","interceptors","chain","interceptor","unshift","fulfilled","rejected","shift","getUri","handlers","use","eject","transformData","throwIfCancellationRequested","throwIfRequested","reason","fns","normalizedName","isAxiosError","number","fileName","lineNumber","columnNumber","stack","isAbsoluteURL","combineURLs","requestedURL","relativeURL","ignoreDuplicateOf","originURL","msie","userAgent","urlParsingNode","createElement","resolveURL","setAttribute","protocol","host","search","hash","hostname","port","pathname","requestURL","expires","path","secure","cookie","toGMTString","decodeURIComponent","remove","now","executor","resolvePromise","token","callback","table","chooser","chart","stream","parentframe","empty","originalFrames","PropertyFrame","cframe","predicate","DataFrame","ClassFrame","Restriction","restriction","loadRestriction","jsonld_context","cf","isValid","hasSchema","frames","domainValue","getPropertyClassFrame","isClassChoice","getChosenClassFrame","isLogic","getChosenFrame","addFrame","getAsFrame","ff","getAsFrames","restrictions","reset","clear","getProperties","filled","missing","getMissingPropertyList","nmissing","newb","getFilledPropertyList","newid","pf","clone","cloned","getChild","childid","pframe","getProperty","addProperty","ndata","createEmpty","createEmptyChoice","clss","getClassChoices","addValueFrame","addPropertyValue","addValue","removeProperty","removePropertyValue","removeValue","extract","extracts","extracted","extractJSONLD","parentObject","root","renderProperties","sortProperties","nprops","unsorted","standardCompare","cardControlAllows","hasRestriction","rest","currentnum","getSummary","propcount","df","oframe","nframe","updated","childUpdated","getComment","hasCardinalityRestriction","getRestriction","deletePropertyValue","gets","cvalues","fs","renderValues","sortedVals","sortValues","rangeValue","save","originalValue","nrend","setNew","isValidType","hasCardRestriction","getType","isObjectProperty","isRestriction","isDocument","isChoice","getStdURL","getChoiceOptions","elements","option","getTypeShorthand","contents","normalizer","objlit","loadFromObjectFrame","child","getChosenClassFrames","objframe","operands","dataframe","cloneDataFrame","other","domcls","operand","maxCardinality","minCardinality","nrest"],"mappings":"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","file":"terminus-client.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n","/**\n * @file Terminus Client Utility Functions\n * @license Apache Version 2\n * Object for bunding up common Terminus Utility Functions \n */\nconst Utils = {}\n\n\n/**\n * default set of prefixes that will be used for URL compression\n */\nUtils.standard_urls = {\n\trdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n\trdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n\txsd: 'http://www.w3.org/2001/XMLSchema#',\n\towl: 'http://www.w3.org/2002/07/owl#',\n\ttcs: 'http://terminusdb.com/schema/tcs#',\n\txdd: 'http://terminusdb.com/schema/xdd#',\n\tv: 'http://terminusdb.com/woql/variable/',\n\tterminus: 'http://terminusdb.com/schema/terminus#',\n\tvio: 'http://terminusdb.com/schema/vio#'\n}\n\n/**\n * Encode document payload for GET  \n */\nUtils.URIEncodePayload = function(payload) {\n\tif (typeof payload === 'string') return encodeURIComponent(payload);\n\tconst payloadArr = [];\n\tfor (const key of Object.keys(payload)) {\n\t\tif (typeof payload[key] === 'object') {\n\t\t\tfor (const keyElement of Object.keys(payload[key])) {\n\t\t\t\t const valueElement = payload[key][keyElement];\n\t\t\t\t payloadArr.push(`${encodeURIComponent(keyElement)}=${encodeURIComponent(valueElement)}`);\n\t\t\t}\n\t\t} else {\n\t\t\tpayloadArr.push(`${encodeURIComponent(key)}=${encodeURIComponent(payload[key])}`);\n\t\t}\n\t}\n\treturn payloadArr.join('&');\n}\n\n\n\n/**\n * Adds an entry to the list of known standard URL prefixes \n */\nUtils.addURLPrefix = function (prefix, url) {\n\tthis.standard_urls[prefix] = url;\n};\n\n\n/**\n * is the object empty? \n * returns true if the json object is empty \n */\nUtils.empty = function (obj) {\n\t   // null and undefined are \"empty\"\n\tif (!obj) return true;\n\t// Assume if it has a length property with a non-zero value\n\t// that that property is correct.\n\tif (obj.length > 0) return false;\n\tif (obj.length === 0) return true;\n\t// Otherwise, does it have any properties of its own?\n\t// Note that this doesn't handle\n\t// toString and valueOf enumeration bugs in IE < 9\n\t// for (const key in obj) {\n\tif (typeof obj === 'object') {\n\t\tfor (const key of Object.keys(obj)) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) return false;\n\t\t}\n\t}\n\treturn true;\n};\n\n/**\n * Generates a unique blank node id \n */\nUtils.genBNID = function () {\n\tconst r = Math.random().toString(36).substring(7);\n\tconst d = new Date();\n\tconst bnid = `_:${r}${d.getTime()}`;\n\treturn bnid;\n};\n\n/**\n * Returns the shorthand version (compressed to prefix:id ) of a url or false if there is none known for that URL\n */\nUtils.getShorthand = function (link) {\n\tif (typeof link === 'object' && link.length) link = link[0];\n\tif (link && typeof link === 'string') {\n\t\tfor (const pref of Object.keys(this.standard_urls)) {\n\t\t\tconst full = this.standard_urls[pref];\n\t\t\tif (link.substring(0, full.length) === full) {\n\t\t\t\tconst sh = `${pref}:${link.substring(full.length)}`;\n\t\t\t\treturn sh;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\n/**\n * Compares 2 IRIs for equality by checking compressed and expanded versions of both sides\n */\nUtils.compareIDs = function (ida, idb) {\n\tif (ida === idb) return true;\n\tif (this.unshorten(ida) === idb) return true;\n\tif (this.unshorten(ida) === this.unshorten(idb)) return true;\n\tconst sha = this.getShorthand(ida);\n\tconst shb = this.getShorthand(idb);\n\tif (sha && ((sha === idb) || (sha === shb))) return true;\n\tif (shb && shb === ida) return true;\n\treturn false;\n};\n\n\n/**\n * Shortens a URL to its compressed format - returns the full URL if not possible\n */\nUtils.shorten = function (url, prefixes) {\n\tprefixes = prefixes || this.standard_urls;\n\tfor (const pref in prefixes) {\n\t\tif (prefixes[pref] == url.substring(0, prefixes[pref].length)) {\n\t\t\treturn (`${pref}:${url.substring(prefixes[pref].length)}`);\n\t\t}\n\t}\n\treturn url;\n};\n\n/**\n * Expands a URL to its full URL format - returns the passed string if not possible to expand\n */\nUtils.unshorten = function (url) {\n\tif (this.validURL(url)) return url;\n\tif (!url) return url;\n\tconst bits = url.split(':');\n\tif (bits[1]) {\n\t\tif (this.standard_urls[bits[0]]) {\n\t\t\treturn this.standard_urls[bits[0]] + bits[1];\n\t\t}\n\t}\n\treturn url;\n};\n\n/**\n * Tests a string to see if it is a valid URL - \n * Valid URLs are those that start with http:// or https://\n */\nUtils.validURL = function (str) {\n\tif (str && (str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://')) return true;\n\treturn false;\n};\n\n\n/**\n * Generates a text label from a URL\n */\nUtils.labelFromURL = function (url) {\n\tlet nurl = this.urlFragment(url);\n\tnurl = (nurl || url);\n\tif (nurl.lastIndexOf('/') < nurl.length - 1) {\n\t\tnurl = nurl.substring(nurl.lastIndexOf('/') + 1);\n\t}\n\tnurl = nurl.replace(/_/g, ' ');\n\treturn nurl.charAt(0).toUpperCase() + nurl.slice(1);\n};\n\n/**\n * returns the fragment part of a URL (whether compressed or not)\n */\nUtils.urlFragment = function (url) {\n\turl = (typeof url !== 'string') ? window.location.href : url;\n\tlet bits = url.split('#');\n\tif (bits.length <= 1) {\n\t\tif (!this.validURL(url)) {\n\t\t\tbits = url.split(':');\n\t\t}\n\t}\n\tif (bits.length >= 1) {\n\t\tconst [, urlStr] = bits;\n\n\t\tif (urlStr) {\n\t\t\tconst [baseUrl] = urlStr.split('?');\n\t\t\turl = baseUrl;\n\t\t}\n\t}\n\treturn url;\n};\n\n/**\n * returns the last part of a URL after the last /\n */\nUtils.lastURLBit = function (url) {\n\turl = (typeof url === 'undefined') ? window.location.href : url;\n\tconst [urlFirst] = url.split('#');\n\tconst [urlTmp] = urlFirst.split('?');\n\turl = urlTmp.substring(url.lastIndexOf('/') + 1);\n\treturn url;\n};\n\n/**\n * returns the a standard URL associated with a given prefix and extension\n */\nUtils.getStdURL = function (pref, ext, url) {\n\tif (this.standard_urls[pref]) {\n\t\tif (url) {\n\t\t\tif (url === this.standard_urls[pref] + ext) return url;\n\t\t} else {\n\t\t\treturn this.standard_urls[pref] + ext;\n\t\t}\n\t}\n\treturn false;\n};\n\n/*\n * Utility function adds v: to variables...\n */\nUtils.addNamespacesToVariables = function(vars){\n\tvar nvars = [];\n\tfor(var i = 0; i<vars.length; i++){\n\t\tif(vars[i]) nvars.push(this.addNamespaceToVariable(vars[i]));\t\t\n\t}\n\treturn nvars;\n}\n\nUtils.addNamespaceToVariable = function(v){\n\tif(typeof v == \"string\" && v.substring(0, 2) != \"v:\") return \"v:\" + v;\n\treturn v;\n}\n\n/*\n * Utility function removes v: prefix from a variable...\n */\nUtils.removeNamespaceFromVariable = function(mvar){\n\tif(mvar.substring(0, 2) == \"v:\") return mvar.substring(2)\n\treturn mvar;\n}\n\n/*\n * Utility function removes v: prefix from an array of variables\n */\nUtils.removeNamespacesFromVariables = function(vars){\n\tvar nvars = [];\n\tfor(var i = 0; i<vars.length; i++){\n\t\tnvars.push(this.removeNamespaceFromVariable(vars[i]));\n\t}\n\treturn nvars;\n}\n\n/*\n * Utility function to extract a value from a config rule - if the value is a variable, take the value of that variable instead\n */\nUtils.getConfigValue = function(val, row){\n    if(typeof val == \"string\" && val.substring(0, 2) == \"v:\"){\n\t    var rad = row[val];\n\t    if(rad && rad['@value']) return rad['@value'];\n\t    return rad;\n   }\n   else {\n\t   return val;\n   }\n}\n\n\n/**\n * TypeHelper bundles together utility functions dealing with datatypes\n */\nUtils.TypeHelper = {};\n\n/**\n * Returns true if the passed type is an xsd:string (compressed or not)\n */\nUtils.TypeHelper.isStringType = function (stype) {\n\tif (stype === 'http://www.w3.org/2001/XMLSchema#string') return true;\n\tif (stype === 'xsd:string') return true;\n\treturn false;\n};\n\nUtils.TypeHelper.isDatatype = function (stype) {\n\tvar sh = Utils.shorten(stype);\n\tif(sh.substring(0, 4) == \"xsd:\" || sh.substring(0, 4) == \"xdd:\") return true;\n\treturn false;\n};\n\n/** \n * Adds 3 order magnitude separators ( default ,) into big numbers for legibility\n */\nUtils.TypeHelper.numberWithCommas = function (value, separator) {\n\tseparator = separator || \",\";\n\tif (value >= 1000 || value <= -1000) {\n\t    const parts = value.toString().split('.');\n\t    if (value <= -1000) parts[0] = parts[0].substring(1);\n\t    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, separator);\n\t    if (value <= -1000) value = `-${parts.join('.')}`;\n\t    else value = parts.join('.');\n\t}\n\treturn value;\n};\n\n/**\n * List of supported datatypes\n */\nUtils.TypeHelper.datatypes = [\n\t'xdd:coordinate', 'xdd:coordinatePolyline',\n\t'xdd:coordinatePolygon', 'xdd:dateRange', 'xdd:gYearRange', 'xdd:integerRange',\n\t'xdd:decimalRange', 'xdd:cc', 'xdd:email', 'xdd:html', 'xdd:url', 'xsd:anySimpleType',\n\t'xsd:string', 'xsd:boolean', 'xsd:decimal', 'xsd:double', 'xsd:float', 'xsd:time', 'xsd:date',\n\t'xsd:dateTime', 'xsd:dateTimeStamp', 'xsd:gYear', 'xsd:gMonth', 'xsd:gDay', 'xsd:gYearMonth',\n\t'xsd:gMonthDay', 'xsd:duration', 'xsd:yearMonthDuration', 'xsd:dayTimeDuration',\n\t'xsd:byte', 'xsd:short', 'xsd:integer', 'xsd:long', 'xsd:unsignedByte',\t'xsd:unsignedInt',\n\t'xsd:unsignedLong',\t'xsd:nonNegativeInteger', 'xsd:positiveInteger', 'xsd:negativeInteger',\n\t'xsd:nonPositiveInteger', 'xsd:base64Binary', 'xsd:anyURI', 'xsd:language', 'xsd:normalizedString',\n\t'xsd:token', 'xsd:NMTOKEN',\t'xsd:Name',\t'xsd:NCName', 'xsd:NOTATION', 'xsd:QName', 'xsd:ID',\n\t'xsd:IDREF', 'xsd:ENTITY', 'rdf:XMLLiteral', 'rdf:PlainLiteral', 'rdfs:Literal', 'xdd:json'\n];\n\nUtils.TypeHelper.parseRangeValue = function (val, dividor) {\n\tdividor = (dividor || ',');\n\tlet vals = [];\n\tif (typeof val === 'object' && val.length) {\n\t\tvals = val;\n\t} else if (val) {\n\t\tif (typeof val !== 'string') {\n\t\t\tval = `${val}`;\n\t\t}\n\t\tif (val.length && (val.charAt(0) === '[') && val.charAt(val.length - 1) === ']') {\n\t\t\tvals.push(val.substring(1, val.indexOf(dividor)));\n\t\t\tvals.push(val.substring(val.indexOf(dividor) + 1, val.length - 1));\n\t\t} else {\n\t\t\tvals.push(val);\n\t\t}\n\t}\n\treturn vals;\n};\n\n/**\n * DateHelper bundles together utility functions dealing with xsd date types\n */\nUtils.DateHelper = {};\n\n/**\n * Takes an xsd time string and returns a structure {hour: HH, minute: MM, second ss.ssssss, timezone: tz}\n */\nUtils.DateHelper.parseXsdTime = function (val) {\n\tif (!val) return {};\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst parsed = {\n\t\thour: val.substring(0, 2),\n\t\tminute: val.substring(3, 5),\n\t\tsecond: val.substring(6),\n\t\ttimezone: tz\n\t};\n\treturn parsed;\n};\n\n/**\n * Takes an xsd time string and returns a structure {year: [-]YYYY, month: MM, day: dd}\n */\nUtils.DateHelper.parseXsdDate = function (val) {\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tlet year;\n\tif (val.substring(0, 1) === '-') {\n\t\tyear = val.substring(0, 5);\n\t} else {\n\t\tyear = val.substring(0, 4);\n\t}\n\tlet parsed;\n\tif (year && Math.abs(year) < 10000) {\n\t\tlet month = val.substring(year.length + 1, year.length + 3);\n\t\tif (month) { month = parseInt(month, 10); } else return false;\n\t\tlet day = val.substring(year.length + 4);\n\t\tif (day) day = parseInt(day, 10);\n\t\telse return false;\n\t\tparsed = {\n\t\t\tyear,\n\t\t\t   month,\n\t\t\t   day,\n\t\t\t   timezone: tz\n\t\t};\n\t}\n\treturn parsed;\n};\n\n/**\n * Parses a date string of type ty\n */\nUtils.DateHelper.parseDate = function (ty, value) {\n\tlet parsed;\n\tif (ty === 'xsd:date') {\n\t\tparsed = this.parseXsdDate(value);\n\t} else if (ty === 'xsd:time') {\n\t\tparsed = this.parseXsdTime(value);\n\t} else if (ty === 'xsd:dateTime') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t} else if (ty === 'xsd:gYear') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gYearRange') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gMonth') {\n\t\tparsed = { month: value.substring(2) };\n\t} else if (ty === 'xsd:gDay') {\n\t\tparsed = { day: value };\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { year: bits[0], month: bits[1] };\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { month: bits[0], day: bits[1] };\n\t} else if (ty === 'xsd:dateTimeStamp') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t}\n\treturn parsed;\n};\n\n/**\n * adds appropriate padding to date type for xsd rules\n */\nUtils.DateHelper.addXsdPadding = function (parsed) {\n\tconst nparsed = {};\n\tif (typeof parsed.year !== 'undefined' && parsed.year !== false && parsed.year < 1000) {\n\t\tif (Math.abs(parsed.year) < 10) nparsed.year = (parsed.year < 0 ? `-000${Math.abs(parsed.year)}` : `000${parsed.year}`);\n\t\telse if (Math.abs(parsed.year) < 100) nparsed.year = (parsed.year < 0 ? `-00${Math.abs(parsed.year)}` : `00${parsed.year}`);\n\t\telse nparsed.year = (parsed.year < 0 ? `-0${Math.abs(parsed.year)}` : `0${parsed.year}`);\n\t} else if (parsed.year) {\n\t\tnparsed.year = parsed.year;\n\t}\n\tif (typeof parsed.month !== 'undefined' && parsed.month !== false && parsed.month < 10) {\n\t\tnparsed.month = `0${parsed.month}`;\n\t} else if (parsed.month) {\n\t\tnparsed.month = parsed.month;\n\t}\n\tif (typeof parsed.day !== 'undefined' && parsed.day !== false && parsed.day < 10) {\n\t\tnparsed.day = `0${parsed.day}`;\n\t} else if (parsed.day) {\n\t\tnparsed.day = parsed.day;\n\t}\n\tif (typeof parsed.hour !== 'undefined' && parsed.hour !== false && parsed.hour < 10) {\n\t\tnparsed.hour = `0${parsed.hour}`;\n\t} else if (parsed.hour) {\n\t\tnparsed.hour = parsed.hour;\n\t}\n\tif (typeof parsed.minute !== 'undefined' && parsed.minute !== false && parsed.minute < 10) {\n\t\tnparsed.minute = `0${parsed.minute}`;\n\t} else if (parsed.minute) {\n\t\tnparsed.minute = parsed.minute;\n\t}\n\tif (typeof parsed.second !== 'undefined' && parsed.second !== false && parsed.second < 10) {\n\t\tnparsed.second = `0${parsed.second}`;\n\t} else if (parsed.second) {\n\t\tnparsed.second = parsed.second;\n\t}\n\treturn nparsed;\n};\n\n/**\n * generates an xsd string of type ty for the passed parsed structure (year, month, day, hour, minute, second, timezone)\n */\nUtils.DateHelper.xsdFromParsed = function (parsed, ty) {\n\tconst xparsed = this.addXsdPadding(parsed);\n\tlet ret;\n\tif (ty === 'xsd:gYear') {\n\t\tret = (xparsed.year ? xparsed.year : false);\n\t} else if (ty === 'xsd:time') {\n\t\treturn (xparsed.hour && xparsed.minute && xparsed.second) ? `${xparsed.hour}:${xparsed.minute}:${xparsed.second}` : false;\n\t} else if (ty === 'xsd:date') {\n\t\treturn (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}` : false;\n\t} else if (ty === 'xsd:dateTime' || ty === 'xsd:dateTimeStamp') {\n\t\tret = (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}T` : false;\n\t\tif (ret) ret += `${xparsed.hour ? xparsed.hour : '12'}:${xparsed.minute ? xparsed.minute : '00'}:${xparsed.second ? xparsed.second : '00'}`;\n\t} else if (ty === 'xsd:gMonth') {\n\t\tret = (xparsed.month ? `--${xparsed.month}` : false);\n\t} else if (ty === 'xsd:gDay') {\n\t\tret = (xparsed.day ? `---${xparsed.day}` : false);\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tret = (xparsed.year && xparsed.month) ? `${xparsed.year}-${xparsed.month}` : false;\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tret = (xparsed.day && xparsed.month) ? `--${xparsed.month}-${xparsed.day}` : false;\n\t}\n\tif (xparsed.timezone) {\n\t\tret += xparsed.timezone;\n\t}\n\treturn ret;\n};\n\n/**\n * Converts between a unix timestamp and a parsed structure \n */\nUtils.DateHelper.convertTimestampToXsd = function (val) {\n\t  const a = new Date(val * 1000);\n\t  const parsed = {\n\t\tyear: a.getFullYear(),\n\t\tmonth: a.getMonth() + 1,\n\t\tday: a.getDate(),\n\t\thour: a.getHours(),\n\t\tminute: a.getMinutes(),\n\t\tsecond: a.getSeconds()\n\t  };\n\t  return parsed;\n};\n\n/**\n * Parses an xsd date time into a structure\n */\nUtils.DateHelper.parseXsdDateTime = function (val) {\n\tif (!val) return {};\n\tif (typeof val === 'number') {\n\t\treturn this.convertTimestampToXsd(val);\n\t}\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst datetime = this.parseXsdDate(val);\n\tconst ptime = this.parseXsdTime(val.substring(val.indexOf('T') + 1));\n\n\tfor (const i of Object.keys(ptime)) {\n\t\tdatetime[i] = ptime[i];\n\t}\n\tdatetime.timezone = tz;\n\treturn datetime;\n};\n\n/**\n * Extracts the timezone data from an xsd date string\n */\nUtils.DateHelper.extractXsdTimezone = function (val) {\n\tif (val && val.charAt(val.length - 1) === 'Z') {\n\t\treturn 'Z';\n\t}\n\tif (val && (val.charAt(val.length - 6) === '+' || val.charAt(val.length - 6) === '-')) {\n\t\tval.substring(val.length - 6);\n\t}\n\treturn false;\n};\n\nmodule.exports = Utils;\n\n\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n","const TerminusRule = require('./terminusRule.js');\nconst UTILS = require('./utils.js');\n\n/**\n * @file WOQL Rules \n * @license Apache Version 2\n * WOQL Rules support pattern matching on results of WOQL Queries \n */\n\nfunction WOQLRule(){\n\tTerminusRule.TerminusRule.call(this); \n\tthis.pattern = new WOQLPattern();\n}\nWOQLRule.prototype = Object.create(TerminusRule.TerminusRule.prototype);\nWOQLRule.prototype.constructor = TerminusRule.TerminusRule;\n\n/** \n * Specifies that the rule only applies to specific variables returned by the WOQL query\n * @param {[String]} - array of strings, each representing a variable name, variable prefixes (\"v:\") are added automatically if absent\n */\nWOQLRule.prototype.setVariables = function(vars){\n\tif(vars && vars.length){\n\t\tthis.pattern.variables = UTILS.addNamespacesToVariables(vars);\n\t\tthis.current_variable = this.pattern.variables[this.pattern.variables.length - 1];\n\t}\n\treturn this;\n}\n\n/**\n * Shorthand to the above using spread operator\n */\nWOQLRule.prototype.vars = function(...varlist){\n\treturn this.setVariables(varlist);\n}\n\n/**\n * Specifies that the rule applies to a specific variable, variable prefix (\"v:\") is added automatically if absent\n */\nWOQLRule.prototype.v = function(v){\n\tif(v){\n\t\tthis.current_variable = UTILS.addNamespaceToVariable(v);\n\t\treturn this;\n\t}\n\treturn this.current_variable;\n}\n\n\n/**\n * Specifies that the rule applies to a specific edge, a source -> target pair of variables\n */\nWOQLRule.prototype.edge = function(source, target){\n\tthis.scope(\"edge\");\n\tif(source){\n\t\tlet vs = UTILS.addNamespaceToVariable(source);\n\t\tthis.setVariables([vs]);\n\t\tthis.pattern.source = vs;\n\t} \n\tif(target){\n\t\tlet vs = UTILS.addNamespaceToVariable(target);\n\t\tif(!source) this.setVariables([vs]);\n\t\tthis.pattern.target = vs;\n\t}\n\treturn this;\n}\n\n/**\n * Specifies that the rule applies to a specific edge, a source -> target pair of variables\n */\nWOQLRule.prototype.rownum = function(rownum){\n\tif(typeof rownum == \"undefined\") return this.pattern.rownum; \n\tthis.pattern.rownum = rownum;\n\treturn this;\n}\n\n/**\n * Specifies that the value of a variable must be one of the values contained in the list\n * @param {[String|Number]} list - parameters are any atomic value (string | number) - the rule will match only cells that have one of these values\n */\nWOQLRule.prototype.in = function(...list){\n\tif(this.current_variable){\n\t\tif(!this.pattern.constraints) this.pattern.constraints = {};\n\t\tif(!this.pattern.constraints[this.current_variable]) this.pattern.constraints[this.current_variable] = [];\n\t\tthis.pattern.constraints[this.current_variable].push(list);\n\t}\n\treturn this;\n}\n\n/**\n * Specifies a filter function to apply to each element - only those values that return true when this filter is invoked will be matched\n * @param {function} tester - test function that will be used to filter values\n */\nWOQLRule.prototype.filter = function(tester){\n\tif(this.current_variable){\n\t\tif(!this.pattern.constraints) this.pattern.constraints = {};\n\t\tif(!this.pattern.constraints[this.current_variable]) this.pattern.constraints[this.current_variable] = [];\n\t\tthis.pattern.constraints[this.current_variable].push(tester);\n\t}\n\treturn this;\n}\n\nWOQLRule.prototype.matchRow = function(rules, row, rownum, action){\n\tvar matches = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tif(action && this.rule && typeof this.rule[action] == \"undefined\") continue;\n\t\tif(rules[i].pattern.matchRow(row, rownum)){\n\t\t\tmatches.push(rules[i]);\n\t\t}\n\t}\n\treturn matches;\n}\n\nWOQLRule.prototype.matchCell = function(rules, row, key, rownum, action){\n\tvar matches = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tif(action && this.rule && typeof this.rule[action] == \"undefined\") continue;\n\t\tif(rules[i].pattern.matchCell(row, key, rownum)){\n\t\t\tmatches.push(rules[i]);\n\t\t}\n\t}\n\treturn matches;\n}\n\nWOQLRule.prototype.matchColumn = function(rules, key, action){\n\tvar matches = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tif(action && this.rule && typeof this.rule[action] == \"undefined\") continue;\n\t\tif(rules[i].pattern.matchColumn(key)){\n\t\t\tmatches.push(rules[i]);\n\t\t}\n\t}\n\treturn matches;   \n}\n\nWOQLRule.prototype.matchNode = function(rules, row, key, nid, action){\n\tvar matches = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tif(action && this.rule && typeof this.rule[action] == \"undefined\") continue;\n\t\tif(rules[i].pattern.matchNode(row, key, nid)){\n\t\t\tmatches.push(rules[i]);\n\t\t}\n\t}\n\treturn matches;\n}\n\nWOQLRule.prototype.matchPair = function(rules, row, keya, keyb, action){\n\tvar matches = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tif(action && this.rule && typeof this.rule[action] == \"undefined\") continue;\n\t\tif(rules[i].pattern.matchPair(row, keya, keyb)){\n\t\t\tmatches.push(rules[i]);\n\t\t}\n\t}\n\treturn matches;\n}\n\n//alias\nWOQLRule.prototype.matchEdge = WOQLRule.prototype.matchPair;\n\n\n/**\n * Object to encapsulate the matching of woql result patterns - inherits from TerminusRule\n * @param {Object} pattern \n */\nfunction WOQLPattern(pattern){\n\tTerminusRule.TerminusPattern.call(this,pattern); \n};\nWOQLPattern.prototype = Object.create(TerminusRule.TerminusPattern.prototype);\nWOQLPattern.prototype.constructor = TerminusRule.TerminusPattern;\n\nWOQLPattern.prototype.prettyPrint = function(type){\n\t//starts with obj. ...\n\tvar str = this.scope + \"('\";\n\tif(this.variables){\n\t\tstr += this.variables.join(\"', '\");\n\t }\n\t str += \"')\";\n\tif(typeof this.literal != \"undefined\"){\n\t\tstr += \".literal(\" + this.literal + \")\";\n\t}\n\tif(typeof this.type != \"undefined\"){\n\t\tstr += \".type(\" + this.unpack(this.type) + \")\";\n\t}\n\tif(typeof this.value != \"undefined\"){\n\t\tstr += \".value(\" + this.unpack(this.value, true) + \")\";\n\t}\n\tfor(var v in this.constraints){\n\t\tstr += \".v('\" + v + \"')\";\n\t\tfor(var i = 0; i<this.constraints[v].length; i++){\n\t\t\tif(typeof(this.constraints[v][i]) == \"function\"){\n\t\t\t\tstr += \".filter(\" + this.constraints[v][i] + \")\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstr += \".in(\" + json.unpack(this.constraints[v][i]) + \")\";\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n\n/**\n * @param {String|Object} data\n * @param {String|[String, String]} [key] - a variable or an array of two variables (in the case of edge scope) which constitutes the key being tested\n * @param {String} [scope] - the scope in which the test is being carried out (row, column, cell)\n */\n\nWOQLPattern.prototype.matchRow = function(row, rownum){\n\tif(typeof this.rownum != \"undefined\" && typeof rownum != \"undefined\"){\n\t\tif(!this.numberMatch(this.rownum, rownum)) return false;\n\t}\n\tif(this.scope && this.scope != \"row\") return false;\n\tif(!this.testVariableConstraints(row)) return false;\n\treturn true;\n}\n\nWOQLPattern.prototype.matchCell = function(row, key, rownum){\n\tif(typeof this.rownum != \"undefined\" && typeof rownum != \"undefined\"){\n\t\tif(!this.numberMatch(this.rownum, rownum)) return false;\n\t}\n\tif(!this.testBasics(\"column\", row[key])) return false;\n\tif(this.variables && this.variables.length && this.variables.indexOf(key) == -1) return false;\n\tif(!this.testVariableConstraints(row)) return false;\n\treturn true;\t\n}\n\nWOQLPattern.prototype.matchNode = function(row, key, nid){\n\tif(!this.testBasics(\"node\", row[key])) return false;\n\tif(this.variables && this.variables.length && this.variables.indexOf(key) == -1) return false;\n\tif(!this.testVariableConstraints(row)) return false;\n\treturn true;\t\n}\n\nWOQLPattern.prototype.matchColumn = function(key){\n\tif(this.scope && this.scope != \"column\") return false;\t\n\tif(this.variables && this.variables.length && this.variables.indexOf(key) == -1) return false;\n\treturn true;\n}\n\nWOQLPattern.prototype.matchPair = function(row, keya, keyb){\n\tif(this.scope && this.scope != \"edge\") return false;\t\n\tif(this.source && this.source != keya) return false;\n\tif(this.target && this.target != keyb) return false;\n\tif(!this.testVariableConstraints(row)) return false;\n\treturn true;\n}\n\nWOQLPattern.prototype.testVariableConstraints = function(row){\n\tfor(var k in this.constraints){\n\t\tif(!this.testVariableConstraint(k, row[k])) return false;\n\t}\n\treturn true;\n}\n\nWOQLPattern.prototype.testVariableConstraint = function(name, val){\n\tif(!this.constraints[name]) return true;\n\tfor(var i = 0; i<this.constraints[name].length; i++){\n\t\tif(!this.testValue(val, this.constraints[name][i])){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nWOQLPattern.prototype.setPattern = function(pattern){\n\tfor(var key in pattern){\n\t\tthis[key] = pattern[key];\n\t}\n}\n\nWOQLPattern.prototype.json = function(){\n\tvar json = {};\n\tif(this.scope){\n\t\tjson.scope = this.scope;\n\t}\n\tif(this.value){\n\t\tjson.value = this.value;\n\t}\n\tif(this.rownum) json.rownum = this.rownum;\n\tif(this.variables) json.variables = this.variables;\n\tif(this.literal) json.literal = this.literal;\n\tif(this.type) json.type = this.type;\n\tif(this.constraints) json.constraints = this.constraints;\n\tif(this.source) json.source = this.source;\n\tif(this.target) json.target = this.target;\n\treturn json;\n}\n\n\nmodule.exports = WOQLRule ;\n","\nconst WOQLRule = require(\"../woqlRule\");\n\n/**\n * Generic functions / configs that are available to all config types\n */\nfunction ViewConfig(){\n    this.rules = [];\n}\n\nViewConfig.prototype.render = function(func){\n\tif(func) this.view_render = func;\n\treturn this.view_render;\n}\n\nViewConfig.prototype.renderer = function(val){\n\tif(val) this.view_renderer = val;\n\treturn this.view_renderer;\n}\n\nViewConfig.prototype.getRulesJSON = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\treturn jr;\n}\n\nViewConfig.prototype.getBasicJSON = function(){\n\tlet jr = {};\n\tif(this.view_render) jr.render = this.view_render;\n\tif(this.view_renderer) jr.renderer = this.view_renderer;\n\treturn jr;\n}\n\nViewConfig.prototype.loadBasicJSON = function(json){\n\tif(json.render) this.view_render = json.view_render;\n\tif(json.renderer) this.view_renderer = json.view_renderer;\n}\n\nViewConfig.prototype.getBasicprettyPrint = function(){\n\tlet str = \"\";\n\tif(typeof this.render() != \"undefined\"){\n\t\tstr += \"view.render(\" + this.render() + \")\\n\";\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \"view.renderer('\" + this.renderer() + \"')\\n\";\n\t}\n\treturn str;\n}\n\n\nfunction WOQLViewRule(){\n\tWOQLRule.call(this);\n\tthis.rule = {}; \n};\n\t\nWOQLViewRule.prototype = Object.create(WOQLRule.prototype);\nWOQLViewRule.prototype.constructor = WOQLRule;\n\nWOQLViewRule.prototype.prettyPrint = function(type){\n\tlet str = \"\";\n\tif(this.pattern){\n\t\tstr = this.pattern.prettyPrint(type);\n\t}\n\tif(typeof this.color() != \"undefined\"){\n\t\tstr += \".color([\" + this.color().join(\",\") + \"])\";\n\t}\n\tif(typeof this.hidden() != \"undefined\"){\n\t\tstr += \".hidden(\" + this.hidden() + \")\";\n\t}\n\tif(typeof this.size() != \"undefined\"){\n\t\tstr += \".size('\" + this.size() + \"')\";\n\t}\n\tif(typeof this.icon() != \"undefined\"){\n\t\tstr += \".icon(\" + JSON.stringify(this.icon()) + \")\";\n\t}\n\tif(typeof this.text() != \"undefined\"){\n\t\tstr += \".text(\" + JSON.stringify(this.text()) + \")\";\n\t}\n\tif(typeof this.border() != \"undefined\"){\n\t\tstr += \".border(\" + JSON.stringify(this.border()) + \")\";\n\t}\n\tif(typeof this.args() != \"undefined\"){\n\t\tstr += \".args(\" + JSON.stringify(this.args()) + \")\";\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \".renderer('\" + this.renderer() + \"')\";\n\t}\n\tif(typeof this.render() != \"undefined\"){\n\t\tstr += \".render(\" + this.render() + \")\";\n\t}\n\tif(typeof this.click() != \"undefined\"){\n\t\tstr += \".click(\" + this.click() + \")\";\n\t}\n\tif(typeof this.hover() != \"undefined\"){\n\t\tstr += \".hover(\" + this.hover() + \")\";\n\t}\n\treturn str;\n}\n\nWOQLViewRule.prototype.json = function(mjson){\n\tif(!mjson) {\n\t\tvar json = { }\n\t\tif(this.pattern) json.pattern = this.pattern.json();\n\t\tjson.rule = this.rule;\n\t    return json;\n\t}\n\tthis.rule = mjson.rule || {};\n\tif(mjson.pattern) this.pattern.setPattern(mjson.pattern);\n\treturn this;\n}\n\n\nWOQLViewRule.prototype.size = function(size){\n\tif(typeof size == \"undefined\"){\n\t\treturn this.rule.size;\n\t}\n\tthis.rule.size = size;\n\treturn this;\n}\n\nWOQLViewRule.prototype.color = function(color){\n\tif(typeof color == \"undefined\"){\n\t\treturn this.rule.color;\n\t}\n\tthis.rule.color = color;\n\treturn this;\n}\n\nWOQLViewRule.prototype.icon = function(json){\n\tif(json){\n\t\tthis.rule.icon = json;\n\t\treturn this;\n\t}\n\treturn this.rule.icon;\n}\n\nWOQLViewRule.prototype.text = function(json){\n\tif(json){\n\t\tthis.rule.text = json;\n\t\treturn this;\n\t}\n\treturn this.rule.text;\n}\n\nWOQLViewRule.prototype.border = function(json){\n\tif(json){\n\t\tthis.rule.border = json;\n\t\treturn this;\n\t}\n\treturn this.rule.border;\n}\n\nWOQLViewRule.prototype.renderer = function(rend){\n\tif(typeof rend == \"undefined\"){\n\t\treturn this.rule.renderer;\n\t}\n\tthis.rule.renderer = rend;\n\treturn this;\n}\n\n\nWOQLViewRule.prototype.render = function(func){\n\tif(typeof func == \"undefined\"){\n\t\treturn this.rule.render;\n\t}\n\tthis.rule.render = func;\n\treturn this;\n}\n\nWOQLViewRule.prototype.click = function(onClick){\n\tif(onClick){\n\t\tthis.rule.click = onClick;\n\t\treturn this;\n\t}\n\treturn this.rule.click;\n}\n\nWOQLViewRule.prototype.hover = function(onHover){\n\tif(onHover){\n\t\tthis.rule.hover = onHover;\n\t\treturn this;\n\t}\n\treturn this.rule.hover;\n}\n\nWOQLViewRule.prototype.hidden = function(hidden){\n\tif(typeof hidden == \"undefined\"){\n\t\treturn this.rule.hidden;\n\t}\n\tthis.rule.hidden = hidden;\n\treturn this;\n}\n\nWOQLViewRule.prototype.args = function(args){\n\tif(typeof args == \"undefined\"){\n\t\treturn this.rule.args;\n\t}\n\tthis.rule.args = args;\n\treturn this;\n}\n\nmodule.exports = {WOQLViewRule, ViewConfig}\n\n","function getErrorAsMessage(url, api, err) {\n\tlet str = '';\n\tif (err.response) {\n\t\terr = err.response;\n\t\tif (err.data) str += `${formatErrorMessage(err.data)}`;\n\t} else if (err.body) str += `${formatErrorMessage(err.body)}`;\n\turl = url.split(\"?\")[0];\n\n\tif (err.status) str += `Code: ${err.status}`;\n\tif (err.action) str += ` Action: ${err.action}`;\n\tif (err.type) str += ` Type: ${err.type}`;\n\tif (url) str += ` url: ${url}`;\n\tif (api && api.method) str += ` method: ${api.method}`;\n\treturn str;\n}\n\nfunction formatErrorMessage(msg) {\n\tif (typeof msg === 'object') {\n\t\tlet nmsg = '';\n\t\tfor (const key of Object.keys(msg)) {\n\t\t\tif(msg[key] && typeof msg[key] != \"object\")\n\t\t\tnmsg += `${key} ${msg[key]} `;\n\t\t}\n\t\treturn nmsg;\n\t}\n\treturn msg;\n}\n\nfunction accessDenied(action, db, server) {\n\tconst err = {};\n\terr.status = 403;\n\terr.url = (server || '') + (db || '');\n\terr.type = 'client';\n\terr.action = action;\n\terr.body = `${err.action} not permitted for ${err.url}`;\n\treturn err;\n}\n\nfunction getAPIErrorMessage(url, api, err) {\n\treturn `API Error ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getAccessDeniedMessage(url, api, err) {\n\treturn `Access Denied ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getInvalidURIMessage(url, call) {\n\tconst str = `Invalid argument to\n            ${call}. \n            ${url}\n            is not a valid Terminus DB API endpoint`;\n\treturn str;\n}\n\n/**\n * Utility functions for generating and retrieving error messages\n * and storing error state\n */\n\nfunction parseAPIError(response) {\n\tconst err = {};\n\terr.status = response.status;\n\terr.type = response.type;\n\tif (response.data && typeof response.data === 'object') {\n\t\tlet msg;\n\t\ttry {\n\t\t\tmsg = response.text();\n\t\t} catch (e) {\n\t\t\ttry {\n\t\t\t\tmsg = response.json();\n\t\t\t} catch (error) {\n\t\t\t\tmsg = response.toString();\n\t\t\t}\n\t\t}\n\t\terr.body = msg;\n\t} else if (response.data) err.body = response.data;\n\terr.url = response.url;\n\terr.headers = response.headers;\n\terr.redirected = response.redirected;\n\treturn err;\n}\n\n\nmodule.exports = {\n\tgetErrorAsMessage,\n\tgetAPIErrorMessage,\n\tgetAccessDeniedMessage,\n\taccessDenied,\n\tgetInvalidURIMessage,\n\tparseAPIError\n};\n","const TerminusRule = require('./terminusRule.js');\n\n/**\n * @file Frame Rule\n * @license Apache Version 2\n */\n\nfunction FrameRule(){\n\tTerminusRule.TerminusRule.call(this); \n\tthis.pattern = new FramePattern();\n}\nFrameRule.prototype = Object.create(TerminusRule.TerminusRule.prototype);\nFrameRule.prototype.constructor = TerminusRule.TerminusRule;\n\n/**\n * Returns an array of rules that match the paased frame\n * @param {[FrameRule]} rules - array of rules to be tested\n * @param {Frame} frame - object frame, property frame or data from to be tested\n * @param {function} [onmatch] - optional function to be called with args (frame, rule) on each match \n */\nFrameRule.prototype.testRules = function(rules, frame, onmatch){\n\tvar matched_rules = [];\n\tif(rules && rules.length){\n\t\tfor(var i = 0; i<rules.length; i++){\n\t\t\tvar match = (!rules[i].pattern || this.patternMatchesFrame(rules[i].pattern, frame));\n\t\t\tif(match){\n\t\t\t\tmatched_rules.push(rules[i]);\n\t\t\t\tif(onmatch && typeof onmatch == \"function\"){\n\t\t\t\t\tonmatch(frame, rules[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn matched_rules;\n}\n\n/**\n * Determines whether a given pattern matches a given frame\n */\nFrameRule.prototype.patternMatchesFrame = function(pattern, frame){\n\tif(pattern.checkFrame) {\n\t\treturn pattern.checkFrame(frame);\n\t}\n\telse {\n\t\tvar fp = new FramePattern().setPattern(pattern);\n\t\treturn fp.checkFrame(frame);\n\t}\n}\n\n/**\n * Specifies that only one from among the list of properties will match \n */\nFrameRule.prototype.property = function(...prop){\n    if(!prop || prop.length == 0) return this.pattern.property;\n    this.pattern.property = prop;\n    return this;\n}\n\n/**\n * Specifies that only one from among the list of frame_types will match\n * frame_types are: data, oneOf, document, object? \n */\nFrameRule.prototype.frame_type = function(...frame_type){\n    if(!frame_type || frame_type.length == 0) return this.pattern.frame_type;\n    this.pattern.frame_type = frame_type;\n    return this;\n}\n\n/**\n * Specifies that only one from among the list of labels will match\n */\nFrameRule.prototype.label = function(...prop){\n    if(!prop || prop.length == 0) return this.pattern.label;\n    this.pattern.label = prop;\n    return this;\n}\n\n/**\n * Specifies that only one from among the list of subject ids will match\n */\nFrameRule.prototype.subject = function(...prop){\n    if(!prop|| prop.length == 0) return this.pattern.subject;\n    this.pattern.subject = prop;\n    return this;\n}\n\n/**\n * Specifies that only one from among the list of subject classes will match\n */\nFrameRule.prototype.subjectClass = function(...prop){\n    if(!prop || prop.length == 0) return this.pattern.subjectClass;\n    this.pattern.subjectClass = prop;\n    return this;\n}\n\n/**\n * Specifies that only one from among the list of range types will match\n */\nFrameRule.prototype.range = function(...prop){\n    if(!prop || prop.length == 0) return this.pattern.range;\n    this.pattern.range = prop;\n    return this;\n}\n\n/**\n * Specifies that only frames of the specified depth will match the rule\n */\nFrameRule.prototype.depth = function(depth){\n    if(typeof depth == \"undefined\") return this.pattern.depth;\n    this.pattern.depth=depth;\n    return this;\n}\n\n/**\n * Specifies that only frames of the specified index will match the rule (index is the order of a value in the property frame)\n */\nFrameRule.prototype.index = function(...index){\n    if(!index || index.length == 0) return this.pattern.index;\n    this.pattern.index=index;\n    return this;\n}\n\n/**\n * Specifies that only frames with the given statuses will match the rule\n */\nFrameRule.prototype.status = function(...status){\n    if(!status || status.length == 0) return this.pattern.status;\n    this.pattern.status=status;\n    return this;\n}\n\n/**\n * Specifies that the frame will only match if its parent matches the pattern passed as par\n */\nFrameRule.prototype.parent = function(par){\n    if(!par) return this.pattern.parent;\n    this.pattern.parent = par;\n    return this;\n}\n\nFrameRule.prototype.children = function(...children){\n\tif(typeof children == \"undefined\" || children.length == 0) return this.pattern.children;\n\tif(typeof this.pattern.children == \"undefined\"){\n\t\tthis.pattern.children = [];\n\t}\n\tfor (let i = 0; i < children.length; i++) {\n\t\tthis.pattern.children.push(children[i]);\n\t}\n\treturn this;\n};\n\n\n/**\n * @file Frame Pattern\n * A frame pattern can have the following variables\n * scope : object, property, data, * - matches a specific part of the frame\n * label : matches the label of a property\n * frame_type: object, data, document, id, oneOf\n * subject: id of the subject\n * subjectClass: class of the subject\n * range: type of a property (applies to property and data)\n * property: property id or list of property ids (parent property if it is an object or data)\n * value: value of the property\n * parent: a pattern relating to the parent of this frame\n * children: patterns for matching on the children of a frame\n * depth: how deep are we in the document? starts from 0\n * index: the index of a value in an array\n * status: updated, error, new, ok,\n */\n\nfunction FramePattern(){\n\tTerminusRule.TerminusPattern.call(this); \n};\n\nFramePattern.prototype = Object.create(TerminusRule.TerminusPattern.prototype);\nFramePattern.prototype.constructor = TerminusRule.TerminusPattern;\n\n\n\nFramePattern.prototype.setPattern = function(pattern){\n\tif(pattern.scope) this.scope = pattern.scope;\n\tif(typeof pattern.literal != \"undefined\") this.literal = pattern.literal;\n\tif(typeof pattern.type != \"undefined\") this.type = pattern.type;\n\tif(typeof pattern.label != \"undefined\") this.label = pattern.label;\n\tif(typeof pattern.frame_type != \"undefined\") this.frame_type = pattern.frame_type ;\n\tif(typeof pattern.subject != \"undefined\") this.subject = pattern.subject;\n\tif(typeof pattern.subjectClass != \"undefined\") this.subjectClass = pattern.subjectClass;\n\tif(typeof pattern.range != \"undefined\") this.range = pattern.range;\n\tif(typeof pattern.property != \"undefined\") this.property = pattern.property;\n\tif(typeof pattern.value != \"undefined\") this.value = pattern.value;\n\tif(typeof pattern.parent != \"undefined\"){\n\t\tlet parent = pattern.parent;\n\t\tif(typeof parent.json != \"function\"){ \n\t\t\tparent = new FramePattern().setPattern(parent);\n\t\t}\n\t\tthis.parent = parent;\n\t} \n\tif (pattern.children) {\n\t\tthis.children = [];\n\t\tfor (let i = 0; i < pattern.children.length; i++) {\n\t\t\tvar kid = pattern.children[i];\n\t\t\tif(typeof kid.json != \"function\"){ \n\t\t\t\tkid = new FramePattern().setPattern(kid);\n\t\t\t}\n\t\t\tthis.children.push(kid);\n\t\t}\n\t}\n\tif(typeof pattern.depth != \"undefined\") this.depth = pattern.depth;\n\tif(typeof pattern.index != \"undefined\") this.index = pattern.index;\n\tif(typeof pattern.status != \"undefined\") this.status = pattern.status;\n}\n\nFramePattern.prototype.json = function(){\n    var json = {};\n\tif(typeof this.literal != \"undefined\") json.literal = this.literal;\n\tif(this.type) json.type = this.type;\n    if(this.scope) json.scope = this.scope;\n    if(typeof this.value != \"undefined\") json.value = this.value;\n    if(typeof this.label != \"undefined\") json.label = this.label;\n    if(typeof this.frame_type != \"undefined\") json.frame_type = this.frame_type;\n    if(typeof this.subject != \"undefined\") json.subject = this.subject;\n    if(typeof this.subjectClass != \"undefined\") json.subjectClass = this.subjectClass;\n    if(typeof this.range != \"undefined\") json.range = this.range;\n    if(typeof this.property != \"undefined\") json.property = this.property;\n    if(typeof this.parent != \"undefined\") json.parent = (this.parent.json ? this.parent.json() : this.parent);\n    if(typeof this.children != \"undefined\") {\n\t\tjson.children = [];\n\t\tfor(var i = 0; i<this.children.length; i++){\n\t\t\tjson.children.push((this.children[i].json ? this.children[i].json() : this.children[i]));\n\t\t}\n\t}\n    if(typeof this.depth != \"undefined\") json.depth = this.depth;\n    if(typeof this.index != \"undefined\") json.index = this.index;\n    if(typeof this.status != \"undefined\") json.status = this.status;\n    return json;\n}\n\nFramePattern.prototype.checkFrame = function(frame){\n\tvar rtype = this.getRendererType(frame);\n\tif(!rtype) return false;\n\tif(this.scope && (this.scope != rtype) && (this.scope != \"*\" )) return false;\n\tif(this.illegalRuleType(rtype)) return false;\n\tif(this.frame_type && !this.checkFrameType(rtype, frame)) return false;\n\tif(this.label && !this.checkLabel(rtype, frame)) return false;\n\tif(this.subject && !this.checkSubject(rtype, frame)) return false;\n\tif(this.subjectClass && !this.checkSubjectClass(rtype, frame)) return false;\n\tif(this.property && !this.checkProperty(rtype, frame)) return false;\n\tif(typeof this.depth !== \"undefined\" && !this.checkDepth(rtype, frame)) return false;\n\tif(this.range && !this.checkRange(rtype, frame)) return false;\n\tif(typeof this.value != \"undefined\" && !this.checkValue(rtype, frame)) return false;\n\tif(this.type && !this.checkType(rtype, frame)) return false;\n\tif(typeof this.literal != \"undefined\" && !this.checkLiteral(rtype, frame)) return false;\n\tif(this.parent && !this.checkParent(rtype, frame)) return false;\n\tif(this.children && this.children.length && !this.checkChildren(rtype, frame)) return false;\n\tif(this.index && !this.checkIndex(rtype, frame)) return false;\n\tif(this.status && !this.checkStatus(rtype, frame)) return false;\n\treturn true;\n};\n\nFramePattern.prototype.prettyPrint = function(type){\n\t//starts with obj. ...\n\tif(this.scope == \"*\"){\n\t\tvar str = \"all()\";\n\t}\n\telse {\n\t\tvar str = this.scope + \"()\";\n    }\n    if(typeof this.literal != \"undefined\"){\n\t\tstr += \".literal(\" + this.literal + \")\";\n\t}\n\tif(typeof this.type != \"undefined\"){\n\t\tstr += \".type(\" + this.unpack(this.type) + \")\";\n\t}\n\tif(typeof this.range != \"undefined\"){\n\t\tstr += \".range(\" + this.unpack(this.range) + \")\";\n\t}\n\tif(typeof this.frame_type != \"undefined\"){\n\t\tstr += \".frame_type(\" + this.unpack(this.frameType) + \")\";\n\t}\n\tif(typeof this.label != \"undefined\"){\n\t\tstr += \".label(\" + this.unpack(this.label) + \")\";\n\t}\n\tif(typeof this.subject != \"undefined\"){\n\t\tstr += \".subject(\" + this.unpack(this.subject) + \")\";\n\t}\n\tif(typeof this.subjectClass != \"undefined\"){\n\t\tstr += \".subjectClass(\" + this.unpack(this.subjectClass) + \")\";\n\t}\n\tif(typeof this.property != \"undefined\"){\n\t\tstr += \".property(\" + this.unpack(this.property) + \")\";\n\t}\n\tif(typeof this.value != \"undefined\"){\n\t\tstr += \".value(\" + this.unpack(this.value, true) + \")\";\n\t}\n\tif(typeof this.children != \"undefined\" && this.children.length > 0){\n\t\tstr += \".children(\\n\";\n\t\tvar kids = this.children;\n\t\tfor(var i = 0; i< kids.length; i++){\n\t\t\tstr += \"View.pattern().\" + kids[i].prettyPrint();\n\t\t\tif(i < kids.length-1) str += \",\";\n\t\t\tstr += \"\\n\";\n\t\t}\n\t\tstr += \")\";\n\t}\n\tif(typeof this.parent != \"undefined\"){\n\t\tstr += \".parent(View.pattern().\" + this.parent.prettyPrint() + \")\";\n\t}\n\tif(typeof this.depth != \"undefined\"){\n\t\tstr += \".depth(\" + this.unpack(this.depth, true) + \")\";\n\t}\n\tif(typeof this.index != \"undefined\"){\n\t\tstr += \".index(\" + this.unpack(this.index, true) + \")\";\n\t}\n\tif(typeof this.status != \"undefined\"){\n\t\tstr += \".status(\" + this.unpack(this.status) + \")\";\n\t}\n\treturn str;\n}\n\nFramePattern.prototype.illegalRuleType = function (rtype) {\n\t// data frames have no children\n\tif (rtype == 'data' && this.children && this.children.length) return true;\n\t// object frames have no range\n\tif (rtype == 'object' && this.range) return true;\n\treturn false;\n};\n\n/* subject is an id or an array of ids,\n/* match is positive if the renderer's subject appears in the array or is the id\n */\nFramePattern.prototype.checkSubject = function (subject, frame) {\n\tif (typeof this.subject !== 'object' || !this.subject.length) this.subject = [this.subject];\n\tconst rsubj = frame.subject();\n\tfor (let i = 0; i < this.subject.length; i++) {\n\t\tif (this.IDsMatch(subject[i], rsubj)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n// at least one child must match all child rules\nFramePattern.prototype.checkChildren = function (rtype, frame) {\n\tfor (let i = 0; i < this.children.length; i++) {\n\t\tlet found = false;\n\t\tif (rtype == 'object') {\n\t\t\tfor (const prop in frame.properties) {\n\t\t\t\tif (this.children[i].checkFrame(frame.properties[prop])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (rtype == 'property') {\n\t\t\tfor (let j = 0; j <= renderer.values.length; j++) {\n\t\t\t\tif (this.children[j].checkFrame(frame.values[j])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!found) return false;\n\t}\n\treturn true;\n};\n\nFramePattern.prototype.checkStatus = function (rtype, frame) {\n\tif (typeof this.status !== 'object' || this.status.length == 0) this.status = [this.status];\n\tfor (let i = 0; i < this.status.length; i++) {\n\t\tif (this.status[i] == 'updated' && !frame.isUpdated()) return false;\n\t\tif (this.status[i] == 'new' && !frame.isNew()) return false;\n\t\tif (this.status[i] == 'unchanged' && frame.isUpdated()) return false;\n\t}\n\treturn true;\n};\n\nFramePattern.prototype.checkDepth = function (rtype, frame) {\n\treturn this.numberMatch(this.depth, frame.depth());\n};\n\nFramePattern.prototype.checkParent = function (rtype, frame) {\n\treturn this.parent.checkFrame(frame.parent);\n};\n\nFramePattern.prototype.checkIndex = function (rtype, frame) {\n\tif (rtype == 'data') {\n\t\treturn this.index == frame.index;\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkProperty = function (rtype, frame) {\n\tif (typeof this.property !== 'object' || !this.property.length) this.property = [this.property];\n\tfor (let i = 0; i < this.property.length; i++) {\n\t\tif (this.propertyIDsMatch(frame.property(), this.property[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n\n/**\n * Checks to make sure the frame is among the specified types \n */\nFramePattern.prototype.checkType = function (rtype, frame) {\n\tif(rtype == \"object\") var vs = frame.subjectClass();\n\telse var vs = frame.range();\n\tif(!Array.isArray(this.type)) this.type = [this.type];\n\tif(this.type.indexOf(vs) === -1) return false;\n\treturn true;\n}\n\nFramePattern.prototype.checkLiteral = function (rtype, frame) {\n\tif(rtype == \"object\") return false;\n\tif(rtype == \"property\") return false;\n\tif(rtype == \"data\") return frame.isDatatypeProperty();\n\treturn true;\n}\n\n\n// returns true if any of the values are found\nFramePattern.prototype.checkValue = function (rtype, frame) {\n\tif (typeof this.value !== 'object' || !this.value.length) this.value = [this.value];\n\tfor (let i = 0; i < this.value.length; i++) {\n\t\tif (rtype == 'data') {\n\t\t\tif (this.valuesMatch(frame.value(), this.value[i])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if (rtype == 'property') {\n\t\t\tfor (let j = 0; j <= frame.values.length; j++) {\n\t\t\t\tif (this.getRendererType(frame.values[i]) == 'data'\n\t\t\t\t\t\t&& this.valuesMatch(frame.values[i].get(), this.value[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (rtype == 'object') {\n\t\t\tfor (const prop in frame.properties) {\n\t\t\t\tif (this.checkValue(this.getRendererType(frame.properties[prop]), frame.properties[prop])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkRange = function (rtype, frame) {\n\tif (typeof this.range !== 'object' || !this.range.length) this.range = [this.range];\n\tfor (let i = 0; i < this.range.length; i++) {\n\t\tif (this.rangeIDsMatch(frame.range(), this.range[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkSubjectClass = function (rtype, frame) {\n\tif (typeof this.subjectClass !== 'object' || !this.subjectClass.length) this.subjectClass = [this.subjectClass];\n\tconst rcls = frame.subjectClass();\n\tfor (let i = 0; i < this.subjectClass.length; i++) {\n\t\tif (this.classIDsMatch(this.subjectClass[i], rcls)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkFrameType = function (rtype, frame) {\n\tif (rtype == 'object') return (this.frame_type.indexOf('object') != -1);\n\tif (rtype == 'data') {\n\t\tif (frame.frame) {\n\t\t\treturn (this.frame_type.indexOf(frame.frame.ftype()) != -1);\n\t\t}\n\t}\n\tif (rtype == 'property') return false;\n};\n\nFramePattern.prototype.checkLabel = function (rtype, frame) {\n\tif (typeof frame.getLabel !== 'function') {\n\t\tconsole.log(new Error('Rule passed to check label with broken renderer object - no getLabel'));\n\t\treturn false;\n\t}\n\tfor (let i = 0; i < this.label.length; i++) {\n\t\tif(this.stringMatch(this.label[i], frame.getLabel())) return true;\n\t}\n\treturn false;\n};\n\n\nFramePattern.prototype.getRendererType = function (frame) {\n\tif (frame.isProperty()) return 'property';\n\tif (frame.isObject()) return 'object';\n\tif (frame.isData()) return 'data';\n\tif (frame.renderer_type) return frame.renderer_type;\n\tconsole.log(new Error(`frame configuration passed non-renderer type ${frame.constructor.name}`));\n\tconsole.log(renderer);\n\treturn false;\n};\n\nmodule.exports = FrameRule;","/**\n * @file Terminus Constants\n * @license Apache Version 2\n * Constants representing API actions\n */\n\nmodule.exports = Object.freeze({\n\tCONNECT: 'connect',\n\tGET_SCHEMA: 'get_schema',\n\tUPDATE_SCHEMA: 'update_schema',\n\tUPDATE_DOCUMENT: 'update_document',\n\tCLASS_FRAME: 'class_frame',\n\tWOQL_SELECT: 'woql_select',\n    TERMINUS_MESSAGE: 'terminus_message',\n\tGET_DOCUMENT: 'get_document',\n\tDELETE_DATABASE: 'delete_database',\n\tDELETE_DOCUMENT: 'delete_document',\n\tCREATE_DATABASE: 'create_database',\n\tCREATE_DOCUMENT: 'create_document',\n\tWOQL_UPDATE: 'woql_update'\n});\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress',\n    'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath'\n  ];\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys);\n\n  var otherKeys = Object\n    .keys(config2)\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","const CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n\n/**\n * @file Connection Capabilities \n * @license Apache Version 2\n * @description Object which helps manage the capabilities available for a given TerminusDB connection \n * Creates an entry in the connection registry for the server\n * and all the databases that the client has access to\n * maps the input authorties to a per-db array for internal storage and easy\n * access control checks\n * @param {connectionConfig} connectionConfig connectionConfig object containing the connection parameters \n * @param {String} key API key\n */\nfunction ConnectionCapabilities(connectionConfig, key) {\n\tthis.connection = {};\n\tthis.connectionConfig = connectionConfig;\n\tif (this.connectionConfig.server && key) {\n\t\tthis.setClientKey(this.connectionConfig.server, key);\n\t}\n}\n\n/**\n * Retrieves the API key for the given TerminusDB Server\n * @param {String} serverURL optional - URL of TerminusDB - if ommited the current server URL is used\n */\nConnectionCapabilities.prototype.getClientKey = function (serverURL) {\n\tif (!serverURL) serverURL = this.connectionConfig.serverURL();\n\tif (serverURL && this.connection[serverURL]) return this.connection[serverURL].key;\n\treturn false;\n};\n\n\n/*\n * Utility functions for changing the state of connections with Terminus servers\n */\n\n/**\n * sets the api key for the given url\n * @param {String} curl a valid terminusDB server URL\n * @param {String} key an optional API key\n */\nConnectionCapabilities.prototype.setClientKey = function (curl, key) {\n\tif (typeof key === 'string' && key.trim()) {\n\t\tif (typeof this.connection[curl] === 'undefined') {\n\t\t\tthis.connection[curl] = {};\n\t\t}\n\t\tthis.connection[curl].key = key.trim();\n\t}\n};\n\n\n/**\n * @param {string} curl a valid terminusDB server URL\n * @param {object} capabilities the JSON object returned by the connect API call \n */\nConnectionCapabilities.prototype.addConnection = function (curl, capabilities) {\n\tif (typeof this.connection[curl] === 'undefined') {\n\t\tthis.connection[curl] = {};\n\t}\n\tconst capabilitiesKeys = capabilities ? Object.keys(capabilities) : [];\n\n\tfor (const pred of capabilitiesKeys) {\n\t    if (pred === 'terminus:authority' && capabilities[pred]) {\n\t      const auths = Array.isArray(capabilities[pred]) === true\n\t        ? capabilities[pred]\n\t        : [capabilities[pred]];\n\n\t      for (let i = 0; i < auths.length; i += 1) {\n\t        let scope = auths[i]['terminus:authority_scope'];\n\t        const actions = auths[i]['terminus:action'];\n\n\t\t\tif (Array.isArray(scope) === false) scope = [scope];\n\t\t\tconst actionsArr = ((Array.isArray(actions)) ? actions.map(item => item['@id']) : [] );\n\t        for (let j = 0; j < scope.length; j += 1) {\n\t          const nrec = scope[j];\n\t          if (typeof this.connection[curl][nrec['@id']] === 'undefined') {\n\t            this.connection[curl][nrec['@id']] = nrec;\n\t          }\n\t\t\t  this.connection[curl][nrec['@id']]['terminus:authority'] = actionsArr;\n\t        }\n\t      }\n\t    } else {\n\t      this.connection[curl][pred] = capabilities[pred];\n\t    }\n\t}\n};\n\nConnectionCapabilities.prototype.getJSONContext = function (serverURL, dbid) {\n\tif (!serverURL) serverURL = this.connectionConfig.serverURL();\n\tif (!dbid) dbid = this.connectionConfig.dbid;\n\tif (serverURL && this.connection[serverURL] && this.connection[serverURL][\"@context\"]){\n\t\tlet con = this.connection[serverURL][\"@context\"];\n\t\tvar ncon = {};\n\t\tlet db = con.doc.substring(0, (con.doc.length - \"terminus/document/\".length)) + dbid + \"/\";\n\t\tvar ncon = { doc : db + \"document/\", scm: db + \"schema#\", db: db};\n\t\tfor(var k in con){\n\t\t\tif(typeof ncon[k] == \"undefined\") ncon[k] = con[k];\n\t\t}\n\t\treturn ncon;\n\t}\n\treturn false;\n};\n\n\n/**\n * returns true if the client is currently connected to a server\n * @returns {Boolean}\n */\nConnectionCapabilities.prototype.serverConnected = function () {\n\treturn typeof this.connection[this.connectionConfig.server] !== 'undefined';\n};\n\n\n/**\n * retrieves the meta-data record returned by connect for a particular server\n * @param {String} [srvr] optional server URL - if omitted current connection config will be used\n * @returns {terminus:Server} JSON server record as returned by WOQLClient.connect\n */\nConnectionCapabilities.prototype.getServerRecord = function (srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tconst connectionObj = this.connection[url] || {};\n\tconst okeys = Object.keys(connectionObj);\n\n\tfor (const oid of okeys) {\n\t\tif (this.connection[url][oid]['@type'] === 'terminus:Server') {\n\t\t\treturn this.connection[url][oid];\n\t\t}\n\t}\n\treturn false;\n};\n\n/**\n * retrieves the meta-data record returned by connect for a particular database\n * @param {String} [dbid] optional database id - if omitted current connection config db will be used\n * @param {String} [srvr] optional server URL - if omitted current connection config server will be used\n * @returns {terminus:Database} terminus:Database JSON document as returned by WOQLClient.connect\n */\nConnectionCapabilities.prototype.getDBRecord = function (dbid, srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tdbid = (dbid || this.connectionConfig.dbid);\n\tif (typeof this.connection[url] !== 'object') {\n\t\treturn false;\n\t}\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\tdbid = this.dbCapabilityID(dbid);\n\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\treturn undefined;\n};\n\n/**\n * retrieves all the db meta-data records returned by connect for a particular server\n * @param {String} [srvr] optional server URL - if omitted current connection config server will be used\n * @returns {[terminus:Database]} array of terminus:Database JSON documents as returned by WOQLClient.connect\n */\nConnectionCapabilities.prototype.getServerDBRecords = function (srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tconst dbrecs = {};\n\tconst connectionObj = this.connection[url] || {};\n\n\tfor (const oid of Object.keys(connectionObj)) {\n\t\tif (this.connection[url][oid]['@type'] === 'terminus:Database') {\n\t\t\tdbrecs[oid] = this.connection[url][oid];\n\t\t}\n\t}\n\treturn dbrecs;\n};\n\n/**\n * removes a database record from the connection registry (after deletion, for example)\n * @param {String} [dbid] optional DB ID - if omitted current connection config db will be used\n * @param {String} [srvr] optional server URL - if omitted current connection config server will be used\n * @returns {[terminus:Database]} array of terminus:Database JSON documents as returned by WOQLClient.connect\n */\nConnectionCapabilities.prototype.removeDB = function (dbid, srvr) {\n\tdbid = dbid || this.connectionConfig.dbid;\n\n\tif (dbid && this.connectionConfig.dbid && this.connectionConfig.dbid === dbid) {\n\t\tthis.connectionConfig.dbid = false;\n\t}\n\n\tconst url = srvr || this.connectionConfig.server;\n\tconst dbidCap = this.dbCapabilityID(dbid);\n\tif (dbidCap && this.connection[url] && this.connection[url][dbidCap]) {\n\t\tdelete this.connection[url][dbidCap];\n\t}\t\n};\n\n/**\n * @param {String} dbid local id of database\n * @returns {String} the id of the terminus:Document describing the DB\n * Generates the ID of the terminus:Database document from the database ID\n */\nConnectionCapabilities.prototype.dbCapabilityID = function (dbid) {\n\treturn `doc:${dbid}`;\n};\n\n/**\n * @param {String} action - the action that will be carried out\n * @param {String} [dbid] optional DB ID - if omitted current connection config db will be used\n * @param {String} [srvr] optional server URL - if omitted current connection config server will be used\n * @returns {Boolean} true if the client's capabilities allow the action on the given server / db\n * supports client side access control checks (in addition to server side)\n */\nConnectionCapabilities.prototype.capabilitiesPermit = function (action, dbid, server) {\n\tserver = server || this.connectionConfig.server;\n\tdbid = dbid || this.connectionConfig.dbid;\n\n\tlet rec;\n\n\tif (action === CONST.CREATE_DATABASE) {\n\t\trec = this.getServerRecord(server);\n\t} else if (dbid) rec = this.getDBRecord(dbid);\n\telse console.log('no dbid provided in capabilities check ', server, dbid);\n\tif (rec) {\n\t\tconst auths = rec['terminus:authority'];\n\t\tif (auths && auths.indexOf(`terminus:${action}`) !== -1) return true;\n\t} else {\n\t\tconsole.log('No record found for connection: ', this.connection, action, server, dbid);\n\t}\n\tthis.error = ErrorMessage.accessDenied(action, dbid, server);\n\treturn false;\n};\n\n\nmodule.exports = ConnectionCapabilities;\n","\nconst IDParser = require('./terminusIDParser');\n\n/**\n * @file Terminus DB connection configuration\n * @license Apache Version 2\n * @description Object representing the state of a connection to a terminus db - server url, current dbid, document id\n * along with some configuration information (key, connected mode, client_side_access_control)\n * provides methods for getting and setting connection parameters\n */\nfunction ConnectionConfig(params) {\n\tconst newParams = params || {};\n\tthis.server = false;\n\tthis.dbid = false;\n\tthis.docid = false;\n\tif (newParams.server) this.setServer(newParams.server);\n\tif (newParams.db) this.setDB(newParams.db);\n\tif (newParams.doc) this.setDocument(newParams.doc);\n\t/*\n     * client configuration options - connected_mode = connected\n     * tells the client to first connect to the server before invoking other services\n     */\n\n\t// include a terminus:user_key API key in the calls\n\tthis.include_key = newParams.include_key || true;\n}\n\n/**\n * Server URL will always end in a / character - automatically appended if missing\n */\nConnectionConfig.prototype.setServer = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseServerURL(inputStr)) {\n\t\tthis.server = parser.server();\n\t\tthis.dbid = false;\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n\nConnectionConfig.prototype.serverURL = function () {\n\treturn this.server;\n};\n\n/**\n * Database URL does not have a trailing slash \"/\" character and it will be chopped if it is passed in at the end of the input string\n * @param {String} inputStr - URL of DB or local id of DB\n */\nConnectionConfig.prototype.setDB = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseDBID(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.dbURL = function () {\n\treturn this.server + this.dbid;\n};\n\n\n/**\n * sets the connection to point at the schema api URL\n */\nConnectionConfig.prototype.setSchemaURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseSchemaURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.schemaURL = function () {\n\treturn `${this.dbURL()}/schema`;\n};\n\n/**\n * @param {String} inputStr - the URL of a Terminus DB base install or schema endpoint\n * @param {Object} [context] optional json-ld context\n * sets the connection to point at the query api URL\n */\nConnectionConfig.prototype.setQueryURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseQueryURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.queryURL = function () {\n\treturn `${this.dbURL()}/woql`;\n};\n\n\n\n/**\n * @param {String} inputStr - the URL of a Terminus DB base install or frame endpoint\n * @param {Object} [context] optional json-ld context\n * sets the connection to point at the class frame api URL\n */\nConnectionConfig.prototype.setClassFrameURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseClassFrameURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.frameURL = function () {\n\treturn `${this.dbURL()}/frame`;\n};\n\n/**\n * @param {String} inputStr - the URL of a Terminus DB base install or document endpoint\n * @param {Object} [context] optional json-ld context\n * sets the connection to point at the document api URL\n */\nConnectionConfig.prototype.setDocument = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseDocumentURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tif (parser.dbid()) this.dbid = parser.dbid();\n\t\tif (parser.docid()) this.docid = parser.docid();\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.docURL = function () {\n\treturn `${this.dbURL()}/document/${this.docid ? this.docid : ''}`;\n};\n\n/**\n * will a key be used in this connnection?\n */\nConnectionConfig.prototype.includeKey = function () {\n\treturn this.include_key === true;\n};\n\nmodule.exports = ConnectionConfig;\n","/**\n * @file Terminus ID Parser\n * @license Apache Version 2\n * Object representing a terminus ID / URL \n * Helper methods for parsing and decomposing Terminus URLs \n * and dealing with namespace prefixed URLs\n * @param {Object} context JSON-LD context to be used for prefixes\n */\n function IDParser(context) {\n\tthis.context = context;\n\tthis.server_url = false;\n\tthis.db = false;\n\tthis.doc = false;\n}\n\nIDParser.prototype.server = function () {\n\treturn this.server_url;\n};\n\nIDParser.prototype.dbid = function () {\n\treturn this.db;\n};\n\nIDParser.prototype.docid = function () {\n\treturn this.doc;\n};\n\nIDParser.prototype.setContext = function (context) {\n\tthis.context = context;\n};\n\n/**\n * parses a Terminus Server URL and appends a trailing slash if not present\n */\nIDParser.prototype.parseServerURL = function (str) {\n\tthis.server_url = false;\n\n\tif (this.validURL(str)) {\n\t\tthis.server_url = str;\n\t} else if (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tthis.server_url = this.expandPrefixed(str, this.context);\n\t}\n\n\tif (this.server_url && this.server_url.lastIndexOf('/') !== this.server_url.length - 1\n\t) {\n\t\tthis.server_url += '/';\n\t}\n\treturn this.server_url;\n};\n\nIDParser.prototype.parseDBID = function (str) {\n\tthis.db = false;\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tif (str.lastIndexOf('/') === str.length - 1) {\n\t\t\t// trim trailing slash\n\t\t\tstr = str.substring(0, str.length - 1);\n\t\t}\n\t\tconst index = str.lastIndexOf('/');\n\n\t\tconst serverURL = str.substring(0, index);\n\t\t// only dbNamer\n\t\tstr = str.substring(index + 1);\n\n\t\tif (this.parseServerURL(serverURL) === false) return false;\n\t}\n\n\tif (this.validIDString(str)) {\n\t\tthis.db = str;\n\t}\n\treturn this.db;\n};\n\nIDParser.prototype.parseDocumentURL = function (str) {\n\tthis.doc = false;\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\n\tif (this.validURL(str)) {\n\t\tlet dbURL = str;\n\t\tif (str.lastIndexOf('/document/') !== -1) {\n\t\t\t// get dbURL\n\t\t\tdbURL = str.substring(0, str.lastIndexOf('/document/'));\n\t\t\tstr = str.substring(str.lastIndexOf('/document/') + 10);\n\t\t}\n\t\tif (this.parseDBID(dbURL) === false) return false;\n\t}\n\tif (str.substring(0, 4) === 'doc:') str = str.substring(4);\n\t// check if the document's name hasn't space or '/'\n\tif (this.validIDString(str)) {\n\t\tthis.doc = str;\n\t}\n\treturn this.doc;\n};\n\nIDParser.prototype.parseSchemaURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'schema');\n\t}\n\treturn this.parseDBID(str);\n};\n\nIDParser.prototype.parseQueryURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'woql');\n\t\tstr = this.stripOptionalPath(str, 'query');\n\t}\n\treturn this.parseDBID(str);\n};\n\nIDParser.prototype.stripOptionalPath = function (str, bit) {\n\tif (str.indexOf(`/${bit}`) !== -1) str = str.substring(0, str.indexOf(`/${bit}`));\n\treturn str;\n};\n\nIDParser.prototype.parseClassFrameURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'frame');\n\t}\n\treturn this.parseDBID(str);\n};\n\n// Valid URLs are those that start with http:// or https://\nIDParser.prototype.validURL = function (str) {\n\tif (str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://') return true;\n\treturn false;\n};\n\nIDParser.prototype.validPrefixedURL = function (str, context) {\n\tif (typeof str !== 'string' || typeof context !== 'object') return false;\n\tconst parts = str.split(':');\n\tif (parts.length !== 2) return false;\n\tif (parts[0].length < 1 || parts[1].length < 1) return false;\n\tif (context && context[parts[0]] && this.validIDString(parts[1])) return true;\n\treturn false;\n};\n\nIDParser.prototype.validIDString = function (str) {\n\tif (typeof str !== 'string') return false;\n\tif (str.indexOf(':') !== -1 || str.indexOf(' ') !== -1 || str.indexOf('/') !== -1) return false;\n\treturn true;\n};\n\nIDParser.prototype.expandPrefixed = function (str, context) {\n\tconst parts = str.split(':');\n\treturn context[parts[0]] + parts[1];\n};\n\nmodule.exports = IDParser;\n","\nconst UTILS = require('./utils.js');\nconst WOQL = require('./woql.js');\n\n\n/**\n * @file WOQL Result Object\n * @license Apache Version 2\n * Object representing the result of a WOQL Query\n * @param {Object} results result JSON object as returned by WOQL query\n * @param {WOQLQuery} query the query object that generated the result\n * @param {Object} [config] optional result configuration options object\n *                 [config.no_compress] by default all URLs are compressed where possible (v:X rather than http://.../variable/x) set to true to return non-compressed values \n *                 [config.context] specify the JSON-LD context to use for compressing results - by default the query context will be used\n */\nfunction WOQLResult(results, query, config) {\n\tthis.bindings = (results ? results.bindings : []);\n\tthis.query = (query ? query : WOQL.query());\n\tthis.cursor = 0;\n\tif (!(config && config.no_compress)) {\n\t\tconst context = (config && config.context ? config.context : false);\n\t\tthis.compress(context);\n\t}\n}\n\n/**\n * @param {Object} [context] optional context to use for compression - if ommitted query context is used\n */\nWOQLResult.prototype.compress = function (context) {\n\tcontext = (context || this.query.getContext());\n\tfor (let i = 0; i < this.bindings.length; i++) {\n\t\tfor (const prop of Object.keys(this.bindings[i])) {\n\t\t\tconst nprop = UTILS.shorten(prop, context);\n\t\t\tconst nval = ((typeof this.bindings[i][prop] === 'string')\n\t\t\t\t? UTILS.shorten(this.bindings[i][prop], context)\n\t\t\t\t: this.bindings[i][prop]\n\t\t\t);\n\t\t\tdelete (this.bindings[i][prop]);\n\t\t\tthis.bindings[i][nprop] = nval;\n\t\t}\n\t}\n\treturn this;\n}\n\n/**\n * Returns true if there are any results \n */\nWOQLResult.prototype.hasBindings = function () {\n\tif(this.bindings && this.count()) return true;\n\treturn false;\n};\n\n/**\n * Returns original array of bindings returned by API\n */\nWOQLResult.prototype.getBindings = function () {\n\treturn this.bindings;\n};\n\n/**\n * Returns list of variables returned in bindings from API\n */\nWOQLResult.prototype.getVariableList = function () {\n\tif (this.bindings && this.bindings[0]) {\n\t\treturn Object.keys(this.bindings[0]);\n\t}\n\treturn [];\n};\n\n/**\n * Number of rows in bound results\n */\nWOQLResult.prototype.count = function () {\n\treturn this.bindings.length;\n};\n\n/**\n * Result set navigation\n */\nWOQLResult.prototype.first = function () {\n\tthis.cursor = 0;\n\treturn this.bindings[0];\n};\n\nWOQLResult.prototype.last = function(){\n\tthis.cursor = this.bindings.length-1;\n\treturn this.bindings[this.bindings.length-1];\n}\n\nWOQLResult.prototype.next = function () {\n\tif(this.cursor >= this.bindings.length) return false;\n\tconst res = this.bindings[this.cursor];\t\n\tthis.cursor++;\n\treturn res;\n};\n\nWOQLResult.prototype.prev = function () {\n\tif (this.cursor > 0) {\n\t\tthis.cursor--;\n\t\treturn this.bindings[this.cursor];\n\t}\n};\n\n/**\n * Normally sorting of results is the job of the query - this is just in case you want to resort results according to some key (variable)\n */\nWOQLResult.prototype.sort = function(key, asc_or_desc){\n\tthis.bindings.sort((a, b) => {\n\t\treturn this.compareValues(a[key], b[key], asc_or_desc);\n\t});\n\tthis;\n}\n\n/**\n * Compares results a, b according to \"asc\" or \"desc\" order\n */\nWOQLResult.prototype.compareValues = function(a, b, asc_or_desc=\"asc\"){\n\tif(!a || !b) return 0;\n\tif(typeof a['@value'] != \"undefined\" && typeof b['@value'] != \"undefined\"){\n\t\ta = a['@value'];\n\t\tb = b['@value'];\n\t}\n\tif (a > b) {\n\t\treturn (asc_or_desc && asc_or_desc == 'asc' ? 1 : -1);\n\t}\n\tif (b > a) {\n\t\treturn (asc_or_desc && asc_or_desc == 'asc' ? -1 : 1);\n\t}\n};\n\nmodule.exports = WOQLResult;\n","const UTILS = require('./utils');\n\n/**\n * The WOQL object is a wrapper around the WOQLQuery object\n * Syntactic sugar to allow writing WOQL.triple()... instead of new WOQLQuery().triple()\n * Every function matches one of the public api functions of the woql query object\n */\nlet WOQL = {};\n\n/*\n * We expose all the real woql predicates via the WOQL object,\n * for ease of typing all return a WOQL query object\n */\n\n /**\n * When the sub-query in Condition is met, the Update query is executed\n * @param {object or boolean} Query - WOQL Query object or bool\n * @param {object} Update - WOQL Query object, optional\n * @return {object} WOQLQuery\n *\n * Functions which take a query as an argument advance the cursor to make the chaining of queries fall into the corrent place in the encompassing json.\n */\nWOQL.when = function(Query, Update){ return new WOQLQuery().when(Query, Update);}\n\n/**\n * The Query in the Optional argument is specified as optional\n * @param {object} query - WOQL Query object\n * @example\n * WOQL.opt(WOQL.triple(\"v:optionalSubject\", \"v:optionalObject\", \"v:optionalValue\"))\n * @return {object} WOQLQuery\n */\nWOQL.opt = function(query){ return new WOQLQuery().opt(query); }\n\n/**\n * Specifies the database URL that will be the default database for the enclosed query\n * @param {string} dburl - url of the database\n * @param {object} query - WOQL Query object, optional\n * @return {object} WOQLQuery\n */\nWOQL.from = function(dburl, query){ return new WOQLQuery().from(dburl, query); }\n\n/**\n * Sets the current output graph for writing output to.\n * @param {string} dburl - url of the database\n * @param {object} query - WOQL Query object, optional\n * @return {object} WOQLQuery\n */\nWOQL.into = function(dburl, query){ return new WOQLQuery().into(dburl, query); }\n\n/**\n * Specifies that only the first Number of rows will be returned\n * @param {integer} limit - number of maximum results returned\n * @param {object} query - WOQL Query object, optional\n * @return {object} WOQLQuery\n */\nWOQL.limit = function(limit, query){ return new WOQLQuery().limit(limit, query); }\n\n/**\n * Specifies that the start of the query returned\n * @param {integer} start - index of the frist result got returned\n * @param {object} query - WOQL Query object, optional\n * @return {object} WOQLQuery\n */\nWOQL.start = function(start, query){ return new WOQLQuery().start(start, query); }\n\n/**\n * Filters the query so that only the variables included in [V1...Vn] are returned in the bindings\n * @param list - only these variables are returned\n * @return {object} WOQLQuery\n */\nWOQL.select = function(...list){ return new WOQLQuery().select(...list); }\n\n/**\n * Filter the query so only those triples that match any of the subqueries are included\n * @param queries - WOQL Query objects\n * @return {object} WOQLQuery\n *\n *\n * @example\n * // find triples that are of type scm:Journey, and have\n * // a start_station v:Start, and that start_station is labeled\n * // v:Start_Label\n *\n * WOQL.and(\n *      WOQL.triple(\"v:Journey\", \"type\", \"scm:Journey\"),\n *      WOQL.or(\n *          WOQL.triple(\"v:Journey\", \"scm:start_station\", \"doc:Station31007\"),\n *          WOQL.triple(\"v:Journey\", \"scm:start_station\", \"doc:Station31114\")),\n *      WOQL.triple(\"v:Journey\", \"scm:start_station\", \"v:Start\"),\n *      WOQL.triple(\"v:Start\", \"label\", \"v:Start_Label\"))\n *\n * @see WOQLQuery().woql_or for WOQL.py version of the same function\n */\nWOQL.or = function(...queries){\treturn new WOQLQuery().or(...queries); }\n\n/**\n * Filter the query so only those triples that match all of the subqueries are included\n * @param queries - WOQL Query objects\n * @return {object} WOQLQuery\n *\n * @example\n * // find triples that are of type scm:Journey, and have\n * // a start_station v:Start, and that start_station is labeled\n * // v:Start_Label\n *\n * WOQL.and(\n *      WOQL.triple(\"v:Journey\", \"type\", \"scm:Journey\"),\n *      WOQL.triple(\"v:Journey\", \"start_station\", \"v:Start\"),\n *      WOQL.triple(\"v:Start\", \"label\", \"v:Start_Label\"))\n *\n * @see WOQLQuery().woql_and for WOQL.py version of the same function\n */\nWOQL.and = function(...queries){ return new WOQLQuery().and(...queries); }\n\n/**\n * Include only triples that do not match the single contained query\n * @param queries - WOQL Query objects\n * @return {object} WOQLQuery\n */\nWOQL.not = function(query){ return new WOQLQuery().not(query); }\n\n/**\n * Creates a triple pattern matching rule for the triple [S, P, O] (Subject, Predicate, Object)\n * @param {string} a - Subject\n * @param {string} b - Predicate\n * @param {string} c - Object\n * @return {object} WOQLQuery\n */\nWOQL.triple = function(a, b, c){ return new WOQLQuery().triple(a, b, c); }\n\n/**\n * Creates a pattern matching rule for the quad [S, P, O, G] (Subject, Predicate, Object, Graph)\n * @param {string} a - Subject\n * @param {string} b - Predicate\n * @param {string} c - Object\n * @param {string} d - Graph\n * @return {object} WOQLQuery\n */\nWOQL.quad = function(a, b, c, d){ return new WOQLQuery().quad(a, b, c, d); }\n\n/**\n * Returns true if ClassA is a sub-class of ClassB, according to the current DB schema\n * @param {string} a - classA\n * @param {string} b - classB, optional\n * @return {boolean} WOQLQuery\n */\nWOQL.sub = function(a, b){ return new WOQLQuery().sub(a, b); }\n\n/**\n * Matches if Instance is a member of Class, according to the current state of the DB\n * @param {string} a - classA\n * @param {string} b - classB, optional\n * @return {boolean} WOQLQuery\n */\nWOQL.isa = function(a, b){\treturn new WOQLQuery().isa(a, b);\t}\n\n/**\n * Matches if a is equal to b\n * @param {string} a - object in the graph\n * @param {string} b - object in the graph\n * @return {object} WOQLQuery\n */\nWOQL.eq = function(a, b){ return new WOQLQuery().eq(a, b);}\n\n/**\n * A trimmed version of StringA (with leading and trailing whitespace removed) is copied into VariableA\n * @param {string} a - StringA\n * @param {string} b - VariableA\n * @return {object} WOQLQuery\n */\nWOQL.trim = function(a, b){\treturn new WOQLQuery().trim(a, b);\t}\n\n/**\n * Deletes a node identified by an IRI or a JSON-LD document\n * @param {string} JSON_or_IRI - IRI or a JSON-LD document\n * @return {object} WOQLQuery\n */\nWOQL.delete = function(JSON_or_IRI){ return new WOQLQuery().delete(JSON_or_IRI);\t}\n\n/**\n * Deletes any triples that match the rule [S,P,O]\n * @param {string} S - Subject\n * @param {string} P - Predicate\n * @param {string} O - Object\n * @return {object} WOQLQuery\n */\nWOQL.delete_triple = function( S, P, O ){ return new WOQLQuery().delete_triple (S, P, O);\t}\n\n/**\n * Deletes any quads that match the rule [S, P, O, G] (Subject, Predicate, Object, Graph)\n * @param {string} S - Subject\n * @param {string} P - Predicate\n * @param {string} O - Object\n * @param {string} G - Graph\n * @return {object} WOQLQuery\n */\nWOQL.delete_quad = function( S, P, O, G ){ return new WOQLQuery().delete_quad (S, P, O, G); }\n\n/**\n * Adds triples according to the the pattern [S,P,O]\n * @param {string} S - Subject\n * @param {string} P - Predicate\n * @param {string} O - Object\n * @return {object} WOQLQuery\n */\nWOQL.add_triple = function( S, P, O ){ return new WOQLQuery().add_triple (S, P, O); }\n\n/**\n * Adds quads according to the pattern [S,P,O,G]\n * @param {string} S - Subject\n * @param {string} P - Predicate\n * @param {string} O - Object\n * @param {string} G - Graph\n * @return {object} WOQLQuery\n */\nWOQL.add_quad = function( S, P, O, G ){ \treturn new WOQLQuery().add_quad (S, P, O, G);}\n\n/**\n * Imports the Target Resource to the variables defined in vars\n * @param {object or array} vars - If WQOLQuery object, cols will replace the target. If list, its column names of the source csv\n * @param {array or string} cols - List, if arr1 is list and it will take the variable names for the input. Str, if arr1 is WQOLQuery, it will be the target\n * @param {string} target - optional, target of the source data, used only if vars and cols is list\n * @return {object} WOQLQuery\n */\nWOQL.get = function(vars, cols, target){\treturn new WOQLQuery().get(vars, cols, target); }\n\n/**\n * Exports the Target Resource to the file file, with the variables defined in as\n * @param {object or array} as - WQOLQuery as object\n * @param {array or string} cols - List, if arr1 is list and it will take the variable names for the input. Str, if arr1 is WQOLQuery, it will be the target\n * @param {string} target - optional, target of the source data, used only if vars and cols is list\n * @return {object} WOQLQuery\n */\nWOQL.put = function(as, query, file){\treturn new WOQLQuery().put(as, query, file); }\n\n\n/**\n * Reads source into a temporary in-memory graph and runs the query on it.\n * @param {string} graph - graph id\n * @param {object} source - WOQLQuery object\n * @param {object} query - WOQLQuery object, optional\n * @return {object} WOQLQuery\n */\nWOQL.with = function(graph, source, query){\treturn new WOQLQuery().with(graph, source, query); }\n\n/**\n * Imports the value identified by Source to a Target variable\n * @param {string} map - Source\n * @param {string} vari - Target\n * @return {object} WOQLQuery\n */\nWOQL.as = function(map, vari, ty){\treturn new WOQLQuery().as(map, vari, ty); }\n\n/**\n * Provides details of a remote data source in a JSON format that includes a URL property\n * @param {object} url - remote data source in a JSON format\n * @param {object} opts - imput options, optional\n * @return {object} WOQLQuery\n */\nWOQL.remote = function(url, opts){\treturn new WOQLQuery().remote(url, opts); }\n\n/**\n * Provides details of a file source in a JSON format that includes a URL property\n * @param {object} url - file data source in a JSON format\n * @param {object} opts - imput options, optional\n * @return {object} WOQLQuery\n */\nWOQL.file = function(url, opts){\treturn new WOQLQuery().file(url, opts); }\n\n\n/**\n * Provides details of a file source in a JSON format that includes a URL property\n * @param {object} url - file data source in a JSON format\n * @param {object} opts - imput options, optional\n * @return {object} WOQLQuery\n */\nWOQL.post = function(url, opts){\treturn new WOQLQuery().post(url, opts); }\n\n\n/**\n * Create a list of variables for WOQL\n * @param vars - variables to be put in the list\n * @return {object} WOQLQuery\n */\nWOQL.list = function(...vars){\treturn new WOQLQuery().list(...vars); }\n\n/**\n * Orders the results by the list of variables including in gvarlist, asc_or_desc is a WOQL.asc or WOQ.desc list of variables\n * @param {array or object} gvarlist - list of variables to order\n * @param {object} asc_or_desc - WOQL.asc or WOQ.desc, optional, default is asc\n * @param {object} query - WOQLQuery object, optional\n * @return {object} WOQLQuery\n */\nWOQL.order_by = function(asc_or_desc, query){\treturn new WOQLQuery().order_by(asc_or_desc, query); }\n\n/**\n * Orders the list by ascending order\n * @param {array or string} varlist_or_var - list of variables to order\n * @return {object} WOQLQuery\n */\nWOQL.asc = function(varlist_or_var){\treturn new WOQLQuery().asc(varlist_or_var); }\n\n/**\n * Orders the list by descending value\n * @param {array or string} varlist_or_var - list of variables to order\n * @return {object} WOQLQuery\n */\nWOQL.desc = function(varlist_or_var){\treturn new WOQLQuery().desc(varlist_or_var); }\n\n/**\n * Groups the results of groupquery together by the list of variables gvarlist, using the variable groupedvar as a grouping and saves the result into variable output.\n * @param {array or object} gvarlist - list of variables to group\n * @param {array or string} groupedvar - grouping variable(s)\n * @param {object} groupquery - WOQLQuery object\n * @param {string} output - output variable, optional\n * @return {object} WOQLQuery\n */\nWOQL.group_by = function(gvarlist, groupedvar, groupquery, output){\treturn new WOQLQuery().group_by(gvarlist, groupedvar, groupquery, output); }\n\n/* String and other processing functions */\n\n/**\n * Concatenates the list of variables into a string and saves the result in v\n * @param {array} list - list of variables to concatenate\n * @param {string} v - saves the results\n * @return {object} WOQLQuery\n */\nWOQL.concat = function(list, v){\treturn new WOQLQuery().concat(list, v); }\n\n/**\n * Changes a string to lower-case - input is in u, output in l\n * @param {string} u - input string\n * @param {string} l - stores output\n * @return {object} WOQLQuery\n */\nWOQL.lower = function(u, l){\treturn new WOQLQuery().lower(u, l); }\n\n/**\n * Pads out the string input to be exactly len long by appending the pad character pad to form output\n * @param {string} input - input string\n * @param {string} pad - padding character(s)\n * @param {integer} len - length to pad\n * @param {string} output - stores output\n * @return {object} WOQLQuery\n */\nWOQL.pad = function(input, pad, len, output){\treturn new WOQLQuery().pad(input, pad, len, output); }\n\n/**\n * Joins a list variable together (input) into a string variable (output) by glueing the strings together with glue\n * @param {array} input - a list of variables\n * @param {string} glue - joining character(s)\n * @param {string} output - variable that stores output\n * @return {object} WOQLQuery\n */\nWOQL.join = function(input, glue, output){\treturn new WOQLQuery().join(input, glue, output); }\n\n/**\n * Splits a variable apart (input) into a list of variables (output) by separating the strings together with separator\n * @param {string} input - a string or variable\n * @param {string} separator - character string to separate string into list\n * @param {string} output - variable that stores output list\n * @return {object} WOQLQuery\n */\nWOQL.split = function(input, separator, output){\treturn new WOQLQuery().split(input, separator, output); }\n\n/**\n * Iterates through a list and returns a value for each member\n * @param {string} El - a variable representing an element of the list\n * @param {string} List - A list variable\n * @return {object} WOQLQuery\n */\nWOQL.member = function(El, List){\treturn new WOQLQuery().member(El, List); }\n\n/**\n * Generates an ID for a node as a function of the passed VariableList with a specific prefix (URL base). If the values of the passed variables are the same, the output will be the same\n * @param {string} prefix - prefix for the id\n * @param {string} vari - variable to generate id for\n * @param {string} type - the variable to hold the id\n * @return {object} WOQLQuery\n */\nWOQL.unique = function(prefix, vari, type){\treturn new WOQLQuery().unique(prefix, vari, type); }\n\n/**\n * Generates an ID for a node as a function of the passed VariableList with a specific prefix (URL base). If the values of the passed variables are the same, the output will be the same\n * @param {string} prefix - prefix for the id\n * @param {string or array} vari - variable to generate id for\n * @param {string} type - the variable to hold the id\n * @param {string} output - idgen mode\n * @return {object} WOQLQuery\n */\nWOQL.idgen = function(prefix, vari, type, output){\treturn new WOQLQuery().idgen(prefix, vari, type, output); }\n\n/**\n * Changes the type of va to type and saves the return in vb\n * @param {string} vara - original variable\n * @param {string} type - type to be changed\n * @param {string} varb - save the return variable\n * @return {object} WOQLQuery\n */\nWOQL.typecast = function(vara, type, varb){\treturn new WOQLQuery().typecast(vara, type, varb); }\nWOQL.cast = WOQL.typecast;\n\n/**\n * Regular Expression Call\n * @param {string} pattern - regex pattern\n * @param {string} test - string to be matched\n * @param {string or array or object} matches - store list of matches\n * @return {object} WOQLQuery\n *\n * p is a regex pattern (.*) using normal regular expression syntax, the only unusual thing is that special characters have to be escaped twice, s is the string to be matched and m is a list of matches:\n * e.g. WOQL.re(\"(.).*\", \"hello\", [\"v:All\", \"v:Sub\"])\n */\nWOQL.re = function(pattern, test, matches){\treturn new WOQLQuery().re(pattern, test, matches); }\n\n\n/**\n * Compares the value of v1 against v2 and returns true if v1 is less than v2\n * @param {string} v1 - first variable to compare\n * @param {string} v2 - second variable to compare\n * @return {object} WOQLQuery\n */\nWOQL.less = function(v1, v2){\treturn new WOQLQuery().less(v1, v2); }\n\n/**\n * Compares the value of v1 against v2 and returns true if v1 is greater than v2\n * @param {string} v1 - first variable to compare\n * @param {string} v2 - second variable to compare\n * @return {object} WOQLQuery\n */\nWOQL.greater = function(v1, v2){\treturn new WOQLQuery().greater(v1, v2); }\n\n\n/* Mathematical Processing */\n\n/**\n * Evaluates the Arithmetic Expression Arith and copies the output to variable V\n * @param {object} arith - query or JSON-LD representing the query\n * @param {string} v - output variable\n * @return {object} WOQLQuery\n */\nWOQL.eval = function(arith, v){\treturn new WOQLQuery().eval(arith, v);}\n\n/**\n * Adds numbers N1...Nn together\n * @param args - numbers to add together\n * @return {object} WOQLQuery\n */\nWOQL.plus = function(...args){\treturn new WOQLQuery().plus(...args);}\n\n/**\n * Adds a list of numbers together\n * @param input - input list variable\n * @param output - output numeric\n * @return {object} WOQLQuery\n */\nWOQL.sum = function(input, output){\treturn new WOQLQuery().sum(input, output);}\n\n\n/**\n * Subtracts Numbers N1..Nn\n * @param args - numbers to be subtracted\n * @return {object} WOQLQuery\n */\nWOQL.minus = function(...args){\treturn new WOQLQuery().minus(...args); }\n\n/**\n * Multiplies numbers N1...Nn together\n * @param args - numbers to be multiplied\n * @return {object} WOQLQuery\n */\nWOQL.times = function(...args){\treturn new WOQLQuery().times(...args); }\n\n/**\n * Divides numbers N1...Nn by each other left, to right precedence\n * @param args - numbers to tbe divided\n * @return {object} WOQLQuery\n */\nWOQL.divide = function(...args){ return new WOQLQuery().divide(...args); }\n\n/**\n * Raises A to the power of B\n * @param {integer or double} a - base number\n * @param {integer or double} b - power of\n * @return {object} WOQLQuery\n */\nWOQL.exp = function(a, b){\treturn new WOQLQuery().exp(a, b); }\n\n/**\n * Division - integer division - args are divided left to right\n * @param args - numbers for division\n * @return {object} WOQLQuery\n */\nWOQL.div = function(...args){\treturn new WOQLQuery().div(...args); }\n\n/**\n * Adds a text comment to a query - can also be used to wrap any part of a query to turn it off\n * @param {string} arg - text comment\n * @return {object} WOQLQuery\n */\nWOQL.comment = function(arg){\treturn new WOQLQuery().comment(arg); }\n\n/**\n * Calculates the length of the value in va and stores it in vb\n * @param {string} var1 - value to calculate length\n * @param {string} res - stores result\n * @return {object} WOQLQuery\n */\nWOQL.length = function(var1, res){\treturn new WOQLQuery().length(var1, res);}\n\n\n//language extensions that can be chained after 'grounded' stuff (clauses with a specific subject) sub, isa, delete_triple, add_triple, delete_quad, add_quad, node\n//WOQL.value = function(vars){\treturn new WOQLQuery().list(vars); }\n\n/**\n * Selects everything as triples in the graph identified by GraphIRI into variables Subj, Pred, Obj - by default they are \"v:Subject\", \"v:Predicate\", \"v:Object\"\n * @param {string} G - graphIRI\n * @param {string} S - target subject\n * @param {string} P - target predicate\n * @param {string} O - target object\n * @return {object} WOQLQuery\n */\nWOQL.star = function(G, S, P, O){\treturn new WOQLQuery().star(G, S, P, O); }\n\n/**\n * Selects nodes with the ID NodeID as the subject of subsequent sub-queries. The second argument PatternType specifies what type of sub-queries are being constructed, options are: triple, quad, update_triple, update_quad, delete_triple, delete_quad\n * @param {string} nodeid - node to be selected\n * @param {string} type - pattern type, optional (default is triple)\n * @return {object} WOQLQuery\n */\nWOQL.node = function(nodeid, type){\treturn new WOQLQuery().node(nodeid, type); }\n//These ones are special ones for dealing with the schema only...\n\n/**\n * Generates a new Class with the given ClassID and writes it to the DB schema\n * @param {string} classid - class to be added\n * @param {string} graph - target graph\n * @return {object} WOQLQuery\n */\nWOQL.add_class = function(classid, graph){\treturn new WOQLQuery().add_class(classid, graph); }\n\n/**\n * Generates a new Property with the given PropertyID and a range of type type and writes it to the DB schema\n * @param {string} propid - property id to be added\n * @param {string} type - type of the proerty\n * @param {string} graph - target graph, optional\n * @return {object} WOQLQuery\n */\nWOQL.add_property = function(propid, type, graph){\treturn new WOQLQuery().add_property(propid, type, graph); }\n\n/**\n * Generates a box class around a class (a property that has a name derived from the class which points at the class and a new class with name Scoped[ClassID]\n * This allows providing termporal scoping, etc to \n * @param {string} prefix - url prefix that will be applied to new classes (default scm:)\n * @param {[classes]} classes - array of classnames, all non-abstract sub-classes will be boxed\n * @param {string} graph - target graph, optional - default is db:schema\n * @return {object} WOQLQuery\n */\nWOQL.boxClasses = function(prefix, classes, except, graph){\treturn new WOQLQuery().boxClasses(prefix, classes, except, graph); }\n\nWOQL.libs = function(...libs){ return new WOQLQuery().libs(...libs)}\n\nWOQL.generateChoiceList = function(cls, clslabel, clsdesc, choices, graph, parent){ return new WOQLQuery().generateChoiceList(cls, clslabel, clsdesc, choices, graph, parent)}\n\n/**\n * Deletes the Class with the passed ID form the schema (and all references to it)\n * @param {string} classid - class to be added\n * @param {string} graph - target graph\n * @return {object} WOQLQuery\n */\nWOQL.delete_class = function(classid, graph){\treturn new WOQLQuery().delete_class(classid, graph); }\n\n/**\n * Deletes the property with the passed ID from the schema (and all references to it)\n * @param {string} propid - property id to be added\n * @param {string} graph - target graph, optional\n * @return {object} WOQLQuery\n */\nWOQL.delete_property = function(propid, graph){\treturn new WOQLQuery().delete_property(propid, graph); }\n\n\n/**\n * Insert a node with a specific type in a graph\n * @param {string} Node - node to be insert\n * @param {string} Type - type of the node\n * @param {string} Graph - target graph, optional\n * @return {object} WOQLQuery\n */\nWOQL.insert = function(Node, Type, Graph){\n\tvar q = new WOQLQuery();\n\tif(Graph){\n\t\treturn q.add_quad(Node, \"rdf:type\", q.cleanType(Type), Graph);\n\t}\n\telse {\n\t\treturn q.add_triple(Node, \"rdf:type\", q.cleanType(Type));\n\t}\n}\n\n/**\n * Creates a new document class in the schema - equivalent to: add_quad(type, \"rdf:type\", \"owl:Class\", graph), add_quad(type, subclassof, tcs:Document, graph)\n * @param {string} Type - type of the docuemnt\n * @param {string} Graph - target graph, optional\n * @return {object} WOQLQuery\n */\nWOQL.doctype = function(Type, Graph){\n\treturn new WOQLQuery().add_class(Type, Graph).parent(\"Document\");\n}\n\n\n/*\n * Beneath here are pseudo predicates - they belong to the javascript object\n * but not to the WOQL language\n */\n//returns empty query object\n\n/**\n * Creates a new Empty Query object\n * @return {object} WOQLQuery\n */\nWOQL.query = function(){\treturn new WOQLQuery(); }\n\n//loads query from json\n\n/**\n * Generates a WOQLQuery object from the passed WOQL JSON\n * @param {object} json - JSON-LD object, optional\n * @return {object} WOQLQuery\n *\n * json version of query for passing to api\n */\nWOQL.json = function(json){\treturn new WOQLQuery().json(json); }\n\n\n\n\n/**\n * The WOQL Query object implements the WOQL language via the fluent style\n * @param query - json version of query\n * @returns WOQLQuery object\n */\nfunction WOQLQuery(query){\n\tthis.query = (query ? query : {});\n\tthis.cursor = this.query;\n\tthis.chain_ended = false;\n\tthis.contains_update = false;\n\t// operators which preserve global paging\n\tthis.paging_transitive_properties = ['select', 'from', 'start', 'when', 'opt', 'limit'];\n\tthis.vocab = this.loadDefaultVocabulary();\n\t//object used to accumulate triples from fragments to support usage like node(\"x\").label(\"y\");\n\tthis.tripleBuilder = false;\n\treturn this;\n}\n\n/**\n * Takes an array of variables, an optional array of column names\n */\nWOQLQuery.prototype.get = function(arr1, arr2, target){\n\tif(arr1.json){\n\t\tvar map = arr1.json();\n\t\ttarget = arr2;\n\t}\n\telse {\n\t\tvar map = this.buildAsClauses(arr1, arr2);\n\t}\n\tif(target){\n\t\tif(target.json) target = target.json();\n\t\tthis.cursor['get'] = [map, target];\n\t}\n\telse {\n\t\tthis.cursor['get'] = [map, {}];\n\t\tthis.cursor = this.cursor[\"get\"][1];\n\t}\n\treturn this;\n}\n\n/**\n * Takes an array of variables, an optional array of column names\n */\nWOQLQuery.prototype.put = function(arr1, query, target){\n\tif(arr1.json){\n\t\tarr1 = arr1.json();\n\t}\n\tif(query.json){\n\t\tquery = query.json();\n\t}\n\tthis.cursor['put'] = [arr1, query];\n\tif(target){\n\t\tif(target.json) target = target.json();\n\t\tthis.cursor['put'].push(target);\n\t}\n\telse {\t\n\t\tthis.cursor['put'].push({});\n\t\tthis.cursor = this.cursor[\"put\"][2];\n\t}\n\treturn this;\n}\n\n\n/**\n * Takes an array of variables, an optional array of column names\n */\nWOQLQuery.prototype.with = function(gid, remq, subq){\n\tthis.cursor['with'] = [gid];\n\tif(remq){\n\t\tremq = (remq.json ? remq.json() : remq);\n\t\tif(subq){\n\t\t\tif(subq.json) subq = subq.json();\n\t\t\tthis.cursor['with'] = [gid, remq, subq];\n\t\t}\n\t\telse {\n\t\t\tthis.cursor['with'] = [gid, remq];\n\t\t\t//this.cursor = this.cursor[\"with\"][2];\n\t\t}\n\t}\n\telse {\n\t\tthis.cursor['with'][1] = remq;\n\t\tthis.cursor = this.cursor[\"with\"][2]; \n\t}\n\treturn this;\n}\n\n\nWOQLQuery.prototype.buildAsClauses = function(vars, cols){\n\tvar clauses = [];\n\tif(vars && typeof vars == \"object\" && vars.length){\n\t\tfor(var i = 0; i<vars.length; i++){\n\t\t\tvar v = vars[i];\n\t\t\tif(cols && typeof cols == \"object\" && cols.length){\n\t\t\t\tvar c = cols[i];\n\t\t\t\tif(typeof c == \"string\"){\n\t\t\t\t\tc = {\"@value\": c};\n\t\t\t\t}\n\t\t\t\tclauses.push({as: [c, v]});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tv.as ? clauses.push(v) : clauses.push({as: [v]});\n\t\t\t}\n\t\t}\n\t}\n\treturn clauses;\n}\n\nWOQLQuery.prototype.typecast = function(va, type, vb){\n\tthis.cursor['typecast'] = [va, type, vb];\n\treturn this;\n}\n\n/**\n * Shorthand of above\n */\nWOQLQuery.prototype.cast = WOQLQuery.prototype.typecast;\n\n\nWOQLQuery.prototype.length = function(va, vb){\n\tthis.cursor['length'] = [va, vb];\n\treturn this;\n}\n\nWOQLQuery.prototype.remote = function(json, opts){\n\tthis.cursor['remote'] = (opts ? [json, opts] : [json]);\n\treturn this;\n}\n\nWOQLQuery.prototype.post = function(json, opts){\n\tthis.cursor['post'] = (opts ? [json, opts] : [json]);\n\treturn this;\n}\n\nWOQLQuery.prototype.file = function(json, opts){\n\tthis.cursor['file'] = (opts ? [json, opts] : [json]);\n\treturn this;\n}\n\nWOQLQuery.prototype.order_by = function(asc_or_desc, query){\n\tlet ovars = [];\n\tif(Array.isArray(asc_or_desc)){\n\t\tfor(var i = 0; i<asc_or_desc.length; i++){\n\t\t\tovars.push(asc_or_desc[i].json ? asc_or_desc[i].json() : asc_or_desc[i])\n\t\t}\n\t}\n\telse if(typeof asc_or_desc == \"string\"){\n\t\tovars.push({\"asc\": [asc_or_desc]});\n\t}\n\telse {\n\t\tovars.push(asc_or_desc.json ? asc_or_desc.json() : asc_or_desc)\n\t}\n\tthis.cursor[\"order_by\"] = [ovars]\n\tif(query){\n\t\tthis.cursor[\"order_by\"] .push(query.json ? query.json() : query);\n\t}\n\telse {\n\t\tthis.cursor[\"order_by\"].push({});\n\t\tthis.cursor = this.cursor[\"order_by\"][1]\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.asc = function(varlist_or_var){\n\tif(!Array.isArray(varlist_or_var)){\n\t\tvarlist_or_var = [varlist_or_var];\n\t}\n\tthis.cursor[\"asc\"] = varlist_or_var;\n\treturn this;\n}\n\nWOQLQuery.prototype.desc = function(varlist_or_var){\n\tif(!Array.isArray(varlist_or_var)){\n\t\tvarlist_or_var = [varlist_or_var];\n\t}\n\tthis.cursor[\"desc\"] = varlist_or_var;\n\treturn this;\n}\n\nWOQLQuery.prototype.group_by = function(gvarlist, groupedvar, groupquery, output){\n\tvar args = [];\n\tthis.cursor['group_by'] = args;\n\tif(gvarlist.json){\n\t\targs.push(gvarlist.json());\n\t}\n\tif(gvarlist['list']){\n\t\targs.push(gvarlist);\n\t}\n\telse {\n\t\targs.push({'list': gvarlist});\n\t}\n\tif(typeof groupedvar == \"object\" && Array.isArray(groupedvar)){\n\t\tconst ng = UTILS.addNamespacesToVariables(groupedvar);\n\t\tgroupedvar = {\"list\": ng};\n\t}\n\telse if(typeof groupedvar == \"string\"){\n\t\tgroupedvar = UTILS.addNamespaceToVariable(groupedvar);\n\t}\n\targs.push(groupedvar);\n\tif(output){\n\t\tgroupquery = groupquery.json ? groupquery.json() : groupquery;\n\t\targs.push(groupquery);\n\t}\n\telse {\n\t\toutput = groupquery;\n\t\tvar sq = {};\n\t\tthis.cursor = sq;\n\t\targs.push(sq);\n\t}\n\targs.push(UTILS.addNamespaceToVariable(output));\n\treturn this;\n}\n\nWOQLQuery.prototype.idgen = function(prefix, vari, type, mode){\n\tthis.cursor['idgen'] = [prefix];\n\tif(vari.json){\n\t\tthis.cursor['idgen'].push(vari.json());\n\t}\n\telse if(vari.list){\n\t\tthis.cursor['idgen'].push(vari);\n\t}\n\telse {\n\t\tif(!Array.isArray(vari)) vari = [vari];\n\t\tlet nvaris = [];\n\t\tfor(var i = 0 ; i<vari.length; i++){\n\t\t\tlet vr = vari[i];\n\t\t\tif(typeof vr == \"string\"){\n\t\t\t\tif(vr.substring(0,2) != \"v:\"){\n\t\t\t\t\tvr = {\"@value\" : vr, \"@type\": \"xsd:string\"}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnvaris.push(vr);\n\t\t}\n\t\tthis.cursor['idgen'].push({\"list\": nvaris})\n\t}\n\tif(mode){\n\t\tthis.cursor['idgen'].push(mode);\n\t}\n\tthis.cursor['idgen'].push(type);\n\treturn this;\n}\n\n\nWOQLQuery.prototype.unique = function(prefix, vari, type){\n\tthis.cursor['unique'] = [prefix];\n\tif(vari.json){\n\t\tthis.cursor['unique'].push(vari.json());\n\t}\n\telse if(vari.list){\n\t\tthis.cursor['unique'].push(vari);\n\t}\n\telse {\n\t\tlet nvaris = [];\n\t\tif(!Array.isArray(vari)) vari = [vari];\n\t\tfor(var i = 0 ; i<vari.length; i++){\n\t\t\tlet vr = vari[i];\n\t\t\tif(typeof vr == \"string\"){\n\t\t\t\tif(vr.substring(0,2) != \"v:\"){\n\t\t\t\t\tvr = {\"@value\" : vr, \"@type\": \"xsd:string\"}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnvaris.push(vr);\n\t\t}\n\t\tthis.cursor['unique'].push({\"list\": nvaris})\n\t}\n\tthis.cursor['unique'].push(type);\n\treturn this;\n}\n\nWOQLQuery.prototype.re = function(p, s, m){\n\tp = this.packString(p)\n\ts = this.packString(s)\n\tif(typeof m == \"string\") m = [m];\n\tif(!m.list){\n\t\tm = {list: m};\n\t}\n\tthis.cursor['re'] = [p, s, m];\n\treturn this;\n}\n\n\nWOQLQuery.prototype.concat = function(list, v){\n\tif(typeof list == \"string\"){\n\t\tvar nlist = list.split(/(v:[\\w_]+)\\b/);\n\t\tfor(var i = 1; i<nlist.length; i++){\n\t\t\tif(nlist[i-1].substring(nlist[i-1].length-1) == \"v\" && nlist[i].substring(0, 1) == \":\"){\n\t\t\t\tnlist[i-1] = nlist[i-1].substring(0, nlist[i-1].length-1);\n\t\t\t\tnlist[i] = nlist[i].substring(1);\n\t\t\t}\n\t\t}\n\t}\n\telse if(list.list){\n\t\tvar nlist = list.list;\n\t}\n\telse if(typeof list == \"object\"){\n\t\tvar nlist = list;\n\t}\n\tvar args = this.packStrings(nlist);\n\tif(v.indexOf(\":\") == -1) v = \"v:\" + v;\n\tthis.cursor['concat'] = [{\"list\": args}, v];\n\treturn this;\n};\n\nWOQLQuery.prototype.lower = function(u, l){\n\tthis.cursor['lower'] = [u, l];\n\treturn this;\n};\n\nWOQLQuery.prototype.pad = function(input, pad, len, output){\n\tpad = this.packString(pad)\n\tthis.cursor['pad'] = [input, pad, len, output];\n\treturn this;\n}\n\nWOQLQuery.prototype.member = function(El, List){\n\tthis.cursor['member'] = [El, List];\n\treturn this;\n}\n\nWOQLQuery.prototype.join = function(input, glue, output){\n\tglue = this.packString(glue);\n\tthis.cursor['join'] = [input, glue, output];\n\treturn this;\n}\n\nWOQLQuery.prototype.split = function(input, glue, output){\n\tglue = this.packString(glue);\n\tinput = this.packString(input);\n\tthis.cursor['split'] = [input, glue, output];\n\treturn this;\n}\n\n\nWOQLQuery.prototype.less = function(v1, v2){\n\tv1 = (v1.json ? v1.json() : v1);\n\tv2 = (v2.json ? v2.json() : v2);\n\tthis.cursor['less'] = [v1, v2];\n\treturn this;\n}\n\nWOQLQuery.prototype.greater = function(v1, v2){\n\tv1 = (v1.json ? v1.json() : v1);\n\tv2 = (v2.json ? v2.json() : v2);\n\tthis.cursor['greater'] = [v1, v2];\n\treturn this;\n}\n\nWOQLQuery.prototype.list  = function(...vars){\n\tthis.cursor['list'] = vars;\n\treturn this;\n}\n\n\n/*\n * json version of query for passing to api\n */\nWOQLQuery.prototype.json = function(json){\n\tif(json){\n\t\tthis.query = json;\n\t\treturn this;\n\t}\n\treturn this.query;\n}\n\n/*\n * Functions which take a query as an argument advance the cursor to make the chaining of queries fall\n * into the corrent place in the encompassing json\n */\nWOQLQuery.prototype.when = function(Query, Update){\n\tif(typeof Query == 'boolean'){\n\t\tif(Query){\n\t\t\tthis.cursor[\"when\"] = [{\"true\": []}, {}];\n\t\t}\n\t\telse {\n\t\t\tthis.cursor[\"when\"] = [{\"false\": []}, {}];\n\t\t}\n\t}\n\telse {\n\t\tvar q = (Query.json ? Query.json() : Query);\n\t\tthis.cursor['when'] = [q, {}];\n\t}\n\tif(Update){\n\t\tvar upd = (Update.json ? Update.json() : Update);\n\t\tthis.cursor[\"when\"][1] = upd;\n\t}\n\tthis.cursor = this.cursor[\"when\"][1];\n\treturn this;\n}\n\nWOQLQuery.prototype.opt = function(query){\n\tif(query){\n\t\tvar q = ((typeof query.json == \"function\") ? query.json() : query);\n\t\tthis.cursor[\"opt\"] = [q];\n\t}\n\telse {\n\t\tthis.cursor['opt'] = [{}];\n\t\tthis.cursor = this.cursor[\"opt\"][0];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.from = function(dburl, query){\n\tthis.advanceCursor(\"from\", dburl);\n\tif(query){\n\t\tthis.cursor = (query.json ? query.json() : query);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.into = function(dburl, query){\n\tthis.advanceCursor(\"into\", dburl);\n\tif(query){\n\t\tthis.cursor = (query.json ? query.json() : query);\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.limit = function(limit, query){\n\tthis.advanceCursor(\"limit\", limit);\n\tif(query){\n\t\tthis.cursor = (query.json ? query.json() : query);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.start = function(start, query){\n\tthis.advanceCursor(\"start\", start);\n\tif(query){\n\t\tthis.cursor = (query.json ? query.json() : query);\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.select = function (...list) {\n\tthis.cursor.select = list;\n\tconst index = list.length;\n\tif (typeof this.cursor.select[index - 1] === 'object') {\n\t\tlet embedquery = this.cursor.select[index - 1];\n\t\tthis.cursor.select[index - 1] = (embedquery.json ? embedquery.json() : embedquery);\n\t} else {\n\t\tthis.cursor.select[index] = {};\n\t\tthis.cursor = this.cursor.select[index];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.and = function (...queries) {\n\tthis.cursor.and = this.cursor.and || [];\n\tfor (let i = 0; i < queries.length; i++) {\n\t\tif (queries[i].contains_update) this.contains_update = true;\n\t\tvar nquery = (queries[i].json ? queries[i].json() : queries[i]);\n\t\tif(nquery['and']){\n\t\t\tthis.cursor.and = this.cursor.and.concat(nquery['and']);\n\t\t}\n\t\telse {\n\t\t\tthis.cursor.and.push(nquery);\n\t\t}\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.or = function (...queries) {\n\tthis.cursor.or = this.cursor.or || [];\n\tfor (let i = 0; i < queries.length; i++) {\n\t\tif (queries[i].contains_update) this.contains_update = true;\n\t\tvar nquery = (queries[i].json ? queries[i].json() : queries[i]);\n\t\tif(nquery['or']){\n\t\t\tthis.cursor.and = this.cursor.or.concat(nquery['or']);\n\t\t}\n\t\telse {\n\t\t\tthis.cursor.or.push(nquery);\n\t\t}\n\t}\n\treturn this;\n};\n\n/**\n * Negation of passed or chained query\n */\nWOQLQuery.prototype.not = function (query) {\n\tif (query) {\n\t\tif (query.contains_update) this.contains_update = true;\n\t\tif(query.json) query = query.json();\n\t\tthis.cursor.not = [query];\n\t} else {\n\t\tthis.cursor.not = [{}];\n\t\tthis.cursor = this.cursor.not[0];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.triple = function(a, b, c){\n\tthis.cursor[\"triple\"] = [this.cleanSubject(a),this.cleanPredicate(b),this.cleanObject(c)];\n\treturn this.chainable(\"triple\", this.cleanSubject(a));\n}\n\nWOQLQuery.prototype.quad = function(a, b, c, g){\n\tthis.cursor[\"quad\"] = [this.cleanSubject(a),this.cleanPredicate(b),this.cleanObject(c),this.cleanGraph(g)];\n\treturn this.chainable(\"quad\", this.cleanSubject(a));\n}\n\nWOQLQuery.prototype.eq = function(a, b){\n\tthis.cursor[\"eq\"] = [this.cleanObject(a),this.cleanObject(b)];\n\treturn this.last();\n};\n\nWOQLQuery.prototype.sub = function(a, b){\n\tif(!b && this.tripleBuilder){\n\t\tthis.tripleBuilder.sub(this.cleanClass(a));\n\t\treturn this;\n\t}\n\tthis.cursor[\"sub\"] = [this.cleanClass(a),this.cleanClass(b)];\n\treturn this.last(\"sub\", a);\n}\n\nWOQLQuery.prototype.comment = function(val){\n\tif(val && val.json){\n\t\tthis.cursor['comment'] = [val.json()];\n\t}\n\telse if(typeof val == \"string\"){\n\t\tthis.cursor['comment'] = [{\"@value\": val, \"@language\": \"en\"}];\n\t}\n\telse if(typeof val == \"object\"){\n\t\tif(val.length) this.cursor['comment'] = val;\n\t\telse this.cursor['comment'] = [val];\n\t}\n\telse {\n\t\tthis.cursor['comment'] = [];\n\t}\n\tvar last_index = this.cursor['comment'].length;\n\tthis.cursor['comment'][last_index] = {};\n\tthis.cursor = this.cursor['comment'][last_index];\n\treturn this;\n}\n\n\nWOQLQuery.prototype.abstract = function(varname, gname){\n\tif(varname){\n\t\tgname = gname || \"db:schema\";\n\t\treturn this.quad(varname, \"tcs:tag\", \"tcs:abstract\", gname);\n\t}\n\telse if(this.tripleBuilder){\n\t\tthis.tripleBuilder.abstract();\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.isa = function(a, b){\n\tif(!b && this.tripleBuilder){\n\t\tthis.tripleBuilder.isa(this.cleanClass(a));\n\t\treturn this;\n\t}\n\tif(b){\n\t\tthis.cursor[\"isa\"] = [this.cleanClass(a),this.cleanClass(b)];\n\t\treturn this.chainable(\"isa\", a);\n\t}\n}\n\nWOQLQuery.prototype.trim = function(a, b){\n\tthis.cursor['trim'] = [a, b];\n\treturn this.chainable('trim', b);\n}\n\nWOQLQuery.prototype.eval = function(arith, v){\n\tarith = arith.json ? arith.json() : arith;\n\tthis.cursor['eval'] = [arith, v];\n\treturn this.chainable('eval', v);\n}\n\nWOQLQuery.prototype.plus = function (...args) {\n\tthis.cursor.plus = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.plus.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.sum = function (input, output) {\n\tthis.cursor.sum = [input, output];\n\treturn this.last();\n}\n\nWOQLQuery.prototype.minus = function (...args) {\n\tthis.cursor.minus = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.minus.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.times = function (...args) {\n\tthis.cursor.times = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.times.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.divide = function (...args) {\n\tthis.cursor.divide = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.divide.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.div = function (...args) {\n\tthis.cursor.div = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.div.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.exp = function (a, b) {\n\ta = (a.json ? a.json() : a);\n\tb = (b.json ? b.json() : b);\n\tthis.cursor.exp = [a, b];\n\treturn this.last();\n};\n\nWOQLQuery.prototype.delete = function (JSON_or_IRI) {\n\tthis.cursor.delete = [JSON_or_IRI];\n\treturn this.lastUpdate();\n};\n\nWOQLQuery.prototype.delete_triple = function( Subject, Predicate, Object_or_Literal ){\n\tthis.cursor['delete_triple'] = [this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal)];\n\treturn this.chainableUpdate('delete_triple', Subject);\n}\n\nWOQLQuery.prototype.add_triple = function( Subject, Predicate, Object_or_Literal ){\n\tthis.cursor['add_triple'] =[this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal)];\n\treturn this.chainableUpdate('add_triple', Subject);\n}\n\nWOQLQuery.prototype.delete_quad = function( Subject, Predicate, Object_or_Literal, Graph ){\n\tthis.cursor['delete_quad'] =[this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal),this.cleanGraph(Graph)];\n\treturn this.chainableUpdate('delete_quad', Subject);\n}\n\nWOQLQuery.prototype.add_quad = function( Subject, Predicate, Object_or_Literal, Graph){\n\tthis.cursor['add_quad'] = [this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal),this.cleanGraph(Graph)];\n\treturn this.chainableUpdate(\"add_quad\", Subject);\n}\n\nWOQLQuery.prototype.update = function(woql){\n\tthis.cursor['update'] = [ woql.json() ];\n\treturn this.lastUpdate();\n}\n\n/**\n * Schema manipulation shorthand\n */\nWOQLQuery.prototype.add_class = function(c, graph){\n\tif(c){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tc = (c.indexOf(\":\") == -1) ? \"scm:\" + c : c;\n\t\tthis.adding_class = c;\n\t\tthis.add_quad(c,\"rdf:type\",\"owl:Class\",graph);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.add_property = function(p, t, g){\n\tt = (t ? t : \"xsd:string\");\n\tif(p){\n\t\tvar graph = (g ? this.cleanGraph(g) : \"db:schema\");\n\t\tp = (p.indexOf(\":\") == -1) ?  \"scm:\" + p : p;\n\t\tt = (t.indexOf(\":\") == -1) ? this.cleanType(t) : t ;\n\t\tvar tc = this.cursor;\n\t\tvar pref = t.split(\":\");\n\t\tif(pref[0] && (pref[0] == \"xdd\" || pref[0] == \"xsd\")) {\n\t\t    this.and(\n\t\t\t\tWOQL.add_quad(p, \"rdf:type\", \"owl:DatatypeProperty\", graph),\n\t\t\t\tWOQL.add_quad(p, \"rdfs:range\", t, graph)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tthis.and(\n\t\t\t\tWOQL.add_quad(p, \"rdf:type\", \"owl:ObjectProperty\", graph),\n\t\t\t\tWOQL.add_quad(p, \"rdfs:range\", t, graph)\n\t\t\t);\n\t\t}\n\t}\n\treturn this.chainableUpdate(\"add_quad\", p);\n}\n\nWOQLQuery.prototype.delete_class = function(c, graph){\n\tif(c){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tc = (c.indexOf(\":\") == -1) ?  \"scm:\" + c : c;\n\t\treturn this.and(\n\t\t\tWOQL.delete_quad(c, \"v:All\", \"v:Al2\", graph),\n\t\t\tWOQL.opt().delete_quad(\"v:Al3\", \"v:Al4\", c, graph)\n\t\t);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.delete_property = function(p, graph){\n\tif(p){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tp = (p.indexOf(\":\") == -1) ? \"scm:\" + p : p;\n\t\treturn this.and(\n\t\t\tWOQL.delete_quad(p, \"v:All\", \"v:Al2\", graph),\n\t\t\tWOQL.delete_quad(\"v:Al3\", \"v:Al4\", p, graph)\n\t\t);\n\t}\n\treturn this;\n}\n\n//requires classes to have first character capitalised\nWOQLQuery.prototype.boxClasses = function(prefix, classes, except, graph){\t\n\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\tprefix = prefix || \"scm:\";\n\tvar subs = [];\n\tfor(var i = 0; i<classes.length; i++){\n\t\tsubs.push(WOQL.sub(\"v:Cid\", this.cleanClass(classes[i])));\n\t}\n\tvar nsubs = [];\n\tfor(var i = 0; i<except.length; i++){\n\t\tnsubs.push(WOQL.not().sub(\"v:Cid\", this.cleanClass(except[i])));\n\t}\n\t//property punning\n\t//generate a property id that is the same as the classname but starting with a lowercase letter\n\tlet idgens = [\n\t\tWOQL.re(\"#(.)(.*)\", \"v:Cid\", [\"v:AllB\", \"v:FirstB\", \"v:RestB\"]),\n        WOQL.lower(\"v:FirstB\", \"v:Lower\"),\n        WOQL.concat([\"v:Lower\", \"v:RestB\"], \"v:Propname\"),\n        WOQL.concat([\"Scoped\", \"v:FirstB\", \"v:RestB\"], \"v:Cname\"),\n        WOQL.idgen(prefix, [\"v:Cname\"], \"v:ClassID\"),\n        WOQL.idgen(prefix, [\"v:Propname\"], \"v:PropID\")\n\t];\n\n    const filter = WOQL.and(\n\t\tWOQL.quad(\"v:Cid\", \"rdf:type\", \"owl:Class\", graph),\n\t\tWOQL.not().abstract(\"v:Cid\", graph),\n\t\tWOQL.or(...subs),\n\t\tWOQL.and(...nsubs),\n\t\tWOQL.and(...idgens),\n        WOQL.quad(\"v:Cid\", \"rdfs:label\", \"v:Label\", graph),\n\t\tWOQL.quad(\"v:Cid\", \"rdfs:comment\", \"v:Desc\", graph)\n    )\n    return WOQL.when(filter, WOQL.and(\n        WOQL.add_class(\"v:ClassID\")\n            .label(\"v:Label\")\n            .description(\"v:Desc\"),\n        WOQL.add_property(\"v:PropID\", \"v:Cid\")\n            .label(\"v:Label\")\n            .description(\"v:Desc\")\n\t\t    .domain(\"v:ClassID\")\n    ));\n}\n\nWOQLQuery.prototype.generateChoiceList = function(cls, clslabel, clsdesc, choices, graph, parent){\n    parent = parent || \"scm:Enumerated\";\n    graph = graph || \"db:schema\";\n    var confs = [\n        WOQL.add_class(cls, graph)\n            .label(clslabel)\n            .description(clsdesc)\n            .parent(parent)\n    ]; \n    for(var i = 0; i<choices.length; i++){\n        if(!choices[i]) continue;\n        confs.push(WOQL.insert(choices[i][0], cls, graph)\n            .label(choices[i][1])\n            .description(choices[i][2])\n        )\n    }\n    //generate one of list\n    var clist = [];\n    var listid = \"_:\" + cls.split(\":\")[1];\n    var lastid = listid;\n    for(var i = 0; i <= choices.length; i++){\n        if(!choices[i]) continue;\n        var nextid = (i < (choices.length -1) ? listid + \"_\" + i : \"rdf:nil\");\n        clist.push( WOQL.add_quad(lastid, \"rdf:first\", choices[i][0], graph))\n        clist.push( WOQL.add_quad(lastid, \"rdf:rest\", nextid, graph));\n        lastid = nextid;\n    }\n    //do the owl oneof\n    let oneof = WOQL.and(\n        WOQL.add_quad(cls, \"owl:oneOf\", listid, graph),\n        ...clist\n    )\n    return WOQL.and(...confs, oneof);\n}\n\n\nWOQLQuery.prototype.libs = function(...libs){\n\tvar bits = [];\n\tif(libs.indexOf(\"xdd\") != -1){\n\t\tbits.push(this.loadXDD());\n\t\tif(libs.indexOf(\"box\") != -1) {\n\t\t\tbits.push(this.loadXDDBoxes());\n\t\t\tbits.push(this.loadXSDBoxes());\n\t\t}\n\t}\n\telse if(libs.indexOf(\"box\") != -1){\n\t\tbits.push(this.loadXSDBoxes());\n\t}\n\tif(bits.length > 1) return WOQL.and(...bits);\n\treturn bits[0];\n}\n\nWOQLQuery.prototype.loadXDD = function(graph){\n\treturn WOQL.and(\n\t\t//geograhpic datatypes\n\t\tthis.addDatatype(\"xdd:coordinate\", \"Coordinate\", \n\t\t\t\"A latitude / longitude pair making up a coordinate, encoded as: [lat,long]\", graph),\n\t\tthis.addDatatype(\"xdd:coordinatePolygon\", \"Coordinate Polygon\", \n\t\t\t\"A JSON list of [[lat,long]] coordinates forming a closed polygon.\", graph),\n\t\tthis.addDatatype(\"xdd:coordinatePolyline\", \"Coordinate Polyline\", \n\t\t\t\"A JSON list of [[lat,long]] coordinates.\", graph),\n\t\t\n\t\t//uncertainty range datatypes\n\t\tthis.addDatatype(\"xdd:dateRange\", \"Date Range\", \n\t\t\t`A date (YYYY-MM-DD) or an uncertain date range [YYYY-MM-DD1,YYYY-MM-DD2]. \n\t\t\tEnables uncertainty to be encoded directly in the data`, graph),\n\t\tthis.addDatatype(\"xdd:decimalRange\", \"Decimal Range\", \n\t\t\t`Either a decimal value (e.g. 23.34) or an uncertain range of decimal values \n\t\t\t(e.g.[23.4, 4.143]. Enables uncertainty to be encoded directly in the data`),\n\t\tthis.addDatatype(\"xdd:integerRange\", \"Integer Range\", \n\t\t\t`Either an integer (e.g. 30) or an uncertain range of integers [28,30]. \n\t\t\tEnables uncertainty to be encoded directly in the data`, graph),\n\t\tthis.addDatatype(\"xdd:gYearRange\", \"Year Range\", \n\t\t\t`A year (e.g. 1999) or an uncertain range of years: (e.g. [1999,2001]). \n\t\t\tEnables uncertainty to be encoded directly in the data`, graph),\n\t\n\t\t//string refinement datatypes\n\t\tthis.addDatatype(\"xdd:email\", \"Email\", \"A valid email address\", graph),\n\t\tthis.addDatatype(\"xdd:html\", \"HTML\", \"A string with embedded HTML\", graph),\n\t\tthis.addDatatype(\"xdd:json\", \"JSON\", \"A JSON encoded string\", graph),\n\t\tthis.addDatatype(\"xdd:url\", \"URL\", \"A valid http(s) URL\", graph)\n\t)\n}\n\nWOQLQuery.prototype.loadXSDBoxes = function(){\n\treturn WOQL.and(\n\t\tthis.boxDatatype(\"xsd:anySimpleType\", \"Any Simple Type\", \"Any basic data type such as string or integer. An xsd:anySimpleType value.\"),\n\t\tthis.boxDatatype(\"xsd:string\", \"String\", \"Any text or sequence of characters\"),\n\t\tthis.boxDatatype(\"xsd:boolean\", \"Boolean\", \"A true or false value. An xsd:boolean value.\"),\n\t   \tthis.boxDatatype(\"xsd:decimal\", \"Decimal\", \"A decimal number. An xsd:decimal value.\"),\n\t   \tthis.boxDatatype(\"xsd:double\",  \"Double\", \"A double-precision decimal number. An xsd:double value.\"),\n\t   \tthis.boxDatatype(\"xsd:float\", \"Float\", \"A floating-point number. An xsd:float value.\"),\n\t   \tthis.boxDatatype(\"xsd:time\", \"Time\", \"A time. An xsd:time value. hh:mm:ss.ssss\"),\n\t   \tthis.boxDatatype(\"xsd:date\", \"Date\", \"A date. An xsd:date value. YYYY-MM-DD\"),\n\t\tthis.boxDatatype(\"xsd:dateTime\", \"Date Time\", \"A date and time. An xsd:dateTime value.\"),\n\t\tthis.boxDatatype(\"xsd:dateTimeStamp\", \"Date-Time Stamp\", \"An xsd:dateTimeStamp value.\"),\n\t\tthis.boxDatatype(\"xsd:gYear\", \"Year\", \" A particular 4 digit year YYYY - negative years are BCE.\"),\n\t\tthis.boxDatatype(\"xsd:gMonth\", \"Month\", \"A particular month. An xsd:gMonth value. --MM\"),\n\t\tthis.boxDatatype(\"xsd:gDay\", \"Day\", \"A particular day. An xsd:gDay value. ---DD\"),\n\t\tthis.boxDatatype(\"xsd:gYearMonth\", \"Year / Month\", \"A year and a month. An xsd:gYearMonth value.\"),\n\t\tthis.boxDatatype(\"xsd:gMonthDay\", \"Month / Day\", \"A month and a day. An xsd:gMonthDay value.\"),\n\t\tthis.boxDatatype(\"xsd:duration\", \"Duration\", \"A period of time. An xsd:duration value.\"),\n\t\tthis.boxDatatype(\"xsd:yearMonthDuration\", \"Year / Month Duration\", \"A duration measured in years and months. An xsd:yearMonthDuration value.\"),\n\t\tthis.boxDatatype(\"xsd:dayTimeDuration\", \"Day / Time Duration\", \"A duration measured in days and time. An xsd:dayTimeDuration value.\"),\n\t\tthis.boxDatatype(\"xsd:byte\", \"Byte\", \"An xsd:byte value.\"),\n\t\tthis.boxDatatype(\"xsd:short\", \"Short\", \"An xsd:short value.\"),\n\t\tthis.boxDatatype(\"xsd:integer\", \"Integer\", \"A simple number. An xsd:integer value.\"),\n\t\tthis.boxDatatype(\"xsd:long\", \"Long\", \"An xsd:long value.\"),\n\t\tthis.boxDatatype(\"xsd:unsignedByte\", \"Unsigned Byte\", \"An xsd:unsignedByte value.\"),\n\t\tthis.boxDatatype(\"xsd:unsignedInt\", \"Unsigned Integer\", \"An xsd:unsignedInt value.\"),\n\t\tthis.boxDatatype(\"xsd:unsignedLong\", \"Unsigned Long Integer\", \"An xsd:unsignedLong value.\"),\n\t\tthis.boxDatatype(\"xsd:positiveInteger\", \"Positive Integer\", \"A simple number greater than 0. An xsd:positiveInteger value.\"),\n\t\tthis.boxDatatype(\"xsd:nonNegativeInteger\", \"Non-Negative Integer\", \"A simple number that can't be less than 0. An xsd:nonNegativeInteger value.\"),\n\t\tthis.boxDatatype(\"xsd:negativeInteger\", \"Negative Integer\", \"A negative integer. An xsd:negativeInteger value.\"),\n\t\tthis.boxDatatype(\"xsd:nonPositiveInteger\", \"Non-Positive Integer\", \"A number less than or equal to zero. An xsd:nonPositiveInteger value.\"),\n\t\tthis.boxDatatype(\"xsd:base64Binary\", \"Base 64 Binary\",\"An xsd:base64Binary value.\"),\n\t\tthis.boxDatatype(\"xsd:anyURI\", \"Any URI\", \"Any URl. An xsd:anyURI value.\"),\n\t\tthis.boxDatatype(\"xsd:language\", \"Language\", \"A natural language identifier as defined by by [RFC 3066] . An xsd:language value.\"),\n\t\tthis.boxDatatype(\"xsd:normalizedString\", \"Normalized String\", \"An xsd:normalizedString value.\"),\n\t\tthis.boxDatatype(\"xsd:token\", \"Token\", \"An xsd:token value.\"),\n\t\tthis.boxDatatype(\"xsd:NMTOKEN\", \"NMTOKEN\", \"An xsd:NMTOKEN value.\"),\n\t\tthis.boxDatatype(\"xsd:Name\", \"Name\", \"An xsd:Name value.\"),\n\t\tthis.boxDatatype(\"xsd:NCName\", \"NCName\", \"An xsd:NCName value.\"),\n\t\tthis.boxDatatype(\"xsd:NOTATION\", \"NOTATION\", \"An xsd:NOTATION value.\"),\n\t\tthis.boxDatatype(\"xsd:QName\", \"QName\", \"An xsd:QName value.\"),\n\t\tthis.boxDatatype(\"xsd:ID\", \"ID\", \"An xsd:ID value.\"),\n\t\tthis.boxDatatype(\"xsd:IDREF\", \"IDREF\", \"An xsd:IDREF value.\"),\n\t\tthis.boxDatatype(\"xsd:ENTITY\", \"ENTITY\", \"An xsd:ENTITY value.\"),\n\t\t//this.boxDatatype(\"rdf:XMLLiteral\", \"XML Literal\", \"An rdf:XMLLiteral value.\"),\n\t\t//this.boxDatatype(\"rdf:PlainLiteral\", \"Plain Literal\", \"An rdf:PlainLiteral value.\"),\n\t\t//this.boxDatatype(\"rdfs:Literal\", \"Literal\", \"An rdfs:Literal value.\")\t\n\t)\n}\n\nWOQLQuery.prototype.loadXDDBoxes = function(){\n\treturn WOQL.and(\n\t\tthis.boxDatatype(\"xdd:coordinate\", \"Coordinate\", \"A particular location on the surface of the earth, defined by latitude and longitude . An xdd:coordinate value.\"),\n\t\tthis.boxDatatype(\"xdd:coordinatePolygon\", \"Geographic Area\", \"A shape on a map which defines an area. within the defined set of coordinates   An xdd:coordinatePolygon value.\"),\n\t\tthis.boxDatatype(\"xdd:coordinatePolyline\", \"Coordinate Path\", \"A set of coordinates forming a line on a map, representing a route. An xdd:coordinatePolyline value.\"),\n\t\tthis.boxDatatype(\"xdd:url\", \"URL\", \"A valid url.\"),\n\t\tthis.boxDatatype(\"xdd:email\", \"Email\", \"A valid email address.\"), \n\t\tthis.boxDatatype(\"xdd:html\", \"HTML\", \"A safe HTML string\"), \n\t\tthis.boxDatatype(\"xdd:json\", \"JSON\", \"A JSON Encoded String\"), \n\t\tthis.boxDatatype(\"xdd:gYearRange\", \"Year\", \"A 4-digit year, YYYY, or if uncertain, a range of years. An xdd:gYearRange value.\"), \n\t\tthis.boxDatatype(\"xdd:integerRange\", \"Integer\", \"A simple number or range of numbers. An xdd:integerRange value.\"), \n\t\tthis.boxDatatype(\"xdd:decimalRange\", \"Decimal Number\", \"A decimal value or, if uncertain, a range of decimal values. An xdd:decimalRange value.\"), \n\t\tthis.boxDatatype(\"xdd:dateRange\", \"Date Range\",\"A date or a range of dates YYYY-MM-DD\")\n\t)\n}\n\n/* utility function for creating a datatype in woql */\nWOQLQuery.prototype.addDatatype = function(id, label, descr, graph){\n\tgraph = graph || \"db:schema\";\n\tvar dt = WOQL.insert(id, \"rdfs:Datatype\", graph).label(label);\n\tif(descr) dt.description(descr);\n\treturn dt;\n}\n\n/* utility function for creating a datatype in woql */\nWOQLQuery.prototype.boxDatatype = function(datatype, label, descr, graph, prefix){\n\tgraph = graph || \"db:schema\";\n\tprefix = prefix || \"scm:\";\n\tlet ext = datatype.split(\":\")[1];\n\tlet box_class_id = prefix + ext.charAt(0).toUpperCase() + ext.slice(1);\n\tlet box_prop_id = prefix + ext.charAt(0).toLowerCase() + ext.slice(1);\n\tvar box_class = WOQL.add_class(box_class_id).label(label).parent(\"scm:Box\");\n\tif(descr) box_class.description(descr);\n\tvar box_prop = WOQL.add_property(box_prop_id, datatype).label(label).domain(box_class_id)\n\tif(descr) box_prop.description(descr);\n\treturn WOQL.and(box_class, box_prop);\n}\n\n\nWOQLQuery.prototype.as = function(a, b, c){\n\tif(!a) return;\n\tif(!this.asArray){\n\t\tthis.asArray = true;\n\t\tthis.query = [];\n\t}\n\tif(b){\n\t\tb = (b.indexOf(\":\") == -1 ? \"v:\" + b : b);\n\t\tvar val = (typeof a == \"object\" ? a : { \"@value\" : a});\n\n        if(c){\n\t\t    this.query.push({as: [val, b, c]});\n        }else{\n            this.query.push({as: [val, b]});\n        }\n\t}\n\telse {\n\t\ta = (a.indexOf(\":\") == -1 ? \"v:\" + a : a);\n\t\tthis.query.push({as: [a]});\n\t}\n\treturn this;\n}\n\n\n\n/**\n * Internal Triple-builder functions which allow chaining of sub-queries\n */\n\nWOQLQuery.prototype.node = function(node, type){\n\ttype = (type ? type : \"triple\");\n\tthis.tripleBuilder = new TripleBuilder(type, this.cursor, node);\n\treturn this;\n}\n\nWOQLQuery.prototype.max = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"max\");\n\treturn this;\n}\n\nWOQLQuery.prototype.cardinality = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"cardinality\");\n\treturn this;\n}\n\nWOQLQuery.prototype.min = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"min\");\n\treturn this;\n}\n\nWOQLQuery.prototype.graph = function(g){\n\tg = this.cleanGraph(g);\n\tvar t = (this.type == \"triple\") ? \"quad\" : false;\n\tif(this.type == \"add_triple\") t = \"add_quad\";\n\tif(this.type == \"delete_triple\") t = \"delete_quad\";\n\tif(!this.tripleBuilder){\n\t\tthis.tripleBuilder = new TripleBuilder(t, this.cursor);\n\t}\n\tthis.tripleBuilder.graph(g);\n\treturn this;\n}\n\nWOQLQuery.prototype.domain = function(d){\n\td = this.cleanClass(d);\n\tif(this.tripleBuilder) this.tripleBuilder.addPO('rdfs:domain',d);\n\treturn this;\n}\n\nWOQLQuery.prototype.label = function(l, lang){\n\tif(this.tripleBuilder) this.tripleBuilder.label(l, lang);\n\treturn this;\n}\n\nWOQLQuery.prototype.description = function(c, lang){\n\tif(this.tripleBuilder) this.tripleBuilder.description(c, lang);\n\treturn this;\n}\n\nWOQLQuery.prototype.parent = function(...p){\n\tif(this.tripleBuilder){\n\t\tfor(var i = 0 ; i<p.length; i++){\n\t\t\tvar pn = this.cleanClass(p[i]);\n\t\t\tthis.tripleBuilder.addPO('rdfs:subClassOf', pn);\n\t\t}\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.entity = function(...p){\n\treturn this.parent(\"tcs:Entity\");\n}\n\nWOQLQuery.prototype.relationship = function(...p){\n\treturn this.parent(\"tcs:Entity\");\n}\n\nWOQLQuery.prototype.property = function(p,val){\n\tif(this.tripleBuilder) {\n\t\tif(this.adding_class){\n\t\t\tvar nwoql = WOQL.add_property(p, val).domain(this.adding_class);\n\t\t\tnwoql.query.and.push(this.json());\n\t\t\tnwoql.adding_class = this.adding_class;\n\t\t\treturn nwoql;\n\t\t}\n\t\telse {\n\t\t\tp = this.cleanPredicate(p);\n\t\t\tthis.tripleBuilder.addPO(p, val);\n\t\t}\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.star = function(GraphIRI, Subj, Pred, Obj){\n\tSubj = (Subj ? this.cleanSubject(Subj) : \"v:Subject\");\n\tPred = (Pred ? this.cleanPredicate(Pred) : \"v:Predicate\");\n\tObj = (Obj  ? this.cleanObject(Obj) : \"v:Object\");\n\tGraphIRI = (GraphIRI ? this.cleanGraph(GraphIRI) : false);\n\tif(GraphIRI){\n\t\treturn this.quad(Subj, Pred, Obj, GraphIRI);\n\t}\n\telse {\n\t\t//console.log(Subj, Pred, Obj);\n\t\treturn this.triple(Subj, Pred, Obj);\n\t}\n}\n\n/**\n * These are composite functions, the above are primitives\n */\nWOQLQuery.prototype.getEverything = function(GraphIRI){\n\tif(GraphIRI){\n\t\tGraphIRI = this.cleanGraph(GraphIRI);\n\t\treturn this.quad(\"v:Subject\", \"v:Predicate\", \"v:Object\", GraphIRI);\n\t}\n\telse {\n\t\treturn this.triple(\"v:Subject\", \"v:Predicate\", \"v:Object\");\n\t}\n}\n\nWOQLQuery.prototype.getAllDocuments = function(){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", \"rdf:type\", \"v:Type\"),\n\t\tWOQL.sub(\"v:Type\", \"tcs:Document\")\n\t);\n}\n\nWOQLQuery.prototype.documentMetadata = function(){\n\treturn this.and(\n\t\tWOQL.triple(\"v:ID\", \"rdf:type\", \"v:Class\"),\n\t\tWOQL.sub(\"v:Class\", \"tcs:Document\"),\n\t\tWOQL.opt().triple(\"v:ID\", \"rdfs:label\", \"v:Label\"),\n\t\tWOQL.opt().triple(\"v:ID\", \"rdfs:comment\", \"v:Comment\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:label\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:comment\", \"v:Type_Comment\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.concreteDocumentClasses = function(){\n\treturn this.and(\n\t\tWOQL.sub(\"v:Class\", \"tcs:Document\"),\n\t\tWOQL.not().abstract(\"v:Class\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:comment\", \"v:Comment\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.propertyMetadata = function(){\n\treturn this.and(\n\t\tWOQL.or(\n\t\t\tWOQL.quad(\"v:Property\", \"rdf:type\", \"owl:DatatypeProperty\", \"db:schema\"),\n\t\t\tWOQL.quad(\"v:Property\", \"rdf:type\", \"owl:ObjectProperty\", \"db:schema\")\n\t\t),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:range\", \"v:Range\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdf:type\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:domain\", \"v:Domain\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.elementMetadata = function(){\n\treturn this.and(\n\t\tWOQL.quad(\"v:Element\", \"rdf:type\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:subClassOf\", \"v:Parent\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:domain\", \"v:Domain\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:range\", \"v:Range\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.classMetadata = function(){\n\treturn this.and(\n\t\tWOQL.quad(\"v:Element\", \"rdf:type\", \"owl:Class\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getDataOfClass = function(chosen){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", \"rdf:type\", chosen),\n\t\tWOQL.opt().triple(\"v:Subject\", \"v:Property\", \"v:Value\")\n\t);\n}\n\nWOQLQuery.prototype.getDataOfProperty = function(chosen){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", chosen, \"v:Value\"),\n\t\tWOQL.opt().triple(\"v:Subject\", \"rdfs:label\", \"v:Label\")\n\t);\n}\n\nWOQLQuery.prototype.documentProperties = function(id){\n\treturn this.and(\n\t\tWOQL.triple(id, \"v:Property\", \"v:Property_Value\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:label\", \"v:Property_Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdf:type\", \"v:Property_Type\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getDocumentConnections = function(id){\n\treturn this.and(\n\t\tWOQL.eq(\"v:Docid\", id),\n\t\tWOQL.or(\n\t\t\tWOQL.triple(id, \"v:Outgoing\", \"v:Entid\"),\n\t\t\tWOQL.triple(\"v:Entid\", \"v:Incoming\", id)\n\t\t),\n\t\tWOQL.triple(\"v:Entid\", \"type\", \"v:Enttype\"),\n\t\tWOQL.sub(\"v:Enttype\", \"tcs:Document\"),\n\t\tWOQL.opt().triple(\"v:Entid\", \"rdfs:label\", \"v:Label\"),\n\t\tWOQL.opt().quad(\"v:Enttype\", \"rdfs:label\", \"v:Class_Label\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getAllDocumentConnections = function(){\n\treturn this.and(\n\t\tWOQL.sub(\"v:Enttype\", \"tcs:Document\"),\n\t\tWOQL.triple(\"v:doc1\", \"type\", \"v:Enttype\"),\n\t\tWOQL.triple(\"v:doc1\", \"v:Predicate\", \"v:doc2\"),\n\t\tWOQL.triple(\"v:doc2\", \"type\", \"v:Enttype2\"),\n\t\tWOQL.sub(\"v:Enttype2\", \"tcs:Document\"),\n\t\tWOQL.opt().triple(\"v:doc1\", \"rdfs:label\", \"v:Label1\"),\n\t\tWOQL.opt().triple(\"v:doc2\", \"rdfs:label\", \"v:Label2\"),\n\t\tWOQL.not().eq(\"v:doc1\", \"v:doc2\")\n\t);\n}\n\nWOQLQuery.prototype.getInstanceMeta = function(url){\n\treturn this.and(\n\t\tWOQL.triple(url, \"rdf:type\", \"v:InstanceType\"),\n\t\tWOQL.opt().triple(url, \"rdfs:label\", \"v:InstanceLabel\"),\n\t\tWOQL.opt().triple(url, \"rdfs:comment\", \"v:InstanceComment\"),\n\t\tWOQL.opt().quad(\"v:InstanceType\", \"rdfs:label\", \"v:ClassLabel\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.simpleGraphQuery = function(){\n\treturn this.and(\n\t    WOQL.triple(\"v:Source\", \"v:Edge\", \"v:Target\"),\n\t    WOQL.isa(\"v:Source\", \"v:Source_Class\"),\n\t    WOQL.sub(\"v:Source_Class\", \"tcs:Document\"),\n\t    WOQL.isa(\"v:Target\", \"v:Target_Class\"),\n\t    WOQL.sub(\"v:Target_Class\", \"tcs:Document\"),\n\t    WOQL.opt().triple(\"v:Source\", \"rdfs:label\", \"v:Source_Label\"),\n\t    WOQL.opt().triple(\"v:Source\", \"rdfs:comment\", \"v:Source_Comment\"),\n\t    WOQL.opt().quad(\"v:Source_Class\", \"rdfs:label\", \"v:Source_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Source_Class\", \"rdfs:comment\", \"v:Source_Type_Comment\", \"db:schema\"),\n\t    WOQL.opt().triple(\"v:Target\", \"rdfs:label\", \"v:Target_Label\"),\n\t    WOQL.opt().triple(\"v:Target\", \"rdfs:comment\", \"v:Target_Comment\"),\n\t    WOQL.opt().quad(\"v:Target_Class\", \"rdfs:label\", \"v:Target_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Target_Class\", \"rdfs:comment\", \"v:Target_Type_Comment\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Edge\", \"rdfs:label\", \"v:Edge_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Edge\", \"rdfs:comment\", \"v:Edge_Type_Comment\", \"db:schema\")\n\t);\n}\n\n\n/**\n * Queries the schema graph and loads all the ids found there as vocabulary that can be used without prefixes\n * ignoring blank node ids\n */\nWOQLQuery.prototype.loadVocabulary = function(client){\n\tvar nw = new WOQLQuery().quad(\"v:S\", \"v:P\", \"v:O\", \"db:schema\");\n\tnw.execute(client).then( (result) => {\n\t\tif(result.bindings && result.bindings.length > 0){\n\t\t\tfor(var i = 0; i<result.bindings.length; i++){\n\t\t\t\tfor(var k in result.bindings[i]){\n\t\t\t\t\tvar v = result.bindings[i][k]\n\t\t\t\t\tif(typeof v == \"string\"){\n\t\t\t\t\t\tvar spl = v.split(\":\");\n\t\t\t\t\t\tif(spl.length == 2 && spl[1] && spl[0] != \"_\"){\n\t\t\t\t\t\t\tthis.vocab[spl[0]] = spl[1];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\n\n/**\n * Provides the query with a 'vocabulary' a list of well known predicates that can be used without prefixes mapping: id: prefix:id ...\n */\nWOQLQuery.prototype.setVocabulary = function(vocab){\n\tthis.vocab = vocab;\n}\n\nWOQLQuery.prototype.getVocabulary = function(vocab){\n\treturn this.vocab;\n}\n\nWOQLQuery.prototype.getLimit = function(){\n\treturn this.getPagingProperty(\"limit\");\n}\n\nWOQLQuery.prototype.setLimit = function(l){\n\treturn this.setPagingProperty(\"limit\", l);\n}\n\nWOQLQuery.prototype.isPaged = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"limit\") return true;\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\treturn this.isPaged(q[prop][q[prop].length-1]);\n\t\t}\n\t}\n\treturn false;\n}\n\nWOQLQuery.prototype.getPage = function(){\n\tif(this.isPaged()){\n\t\tvar psize = this.getLimit();\n\t\tif(this.hasStart()){\n\t\t\tvar s = this.getStart();\n\t\t\treturn (parseInt(s / psize) + 1);\n\t\t}\n\t\telse return 1;\n\t}\n\telse return false;\n}\n\nWOQLQuery.prototype.setPage = function(pagenum){\n\tvar pstart = (this.getLimit() * (pagenum - 1));\n\tif(this.hasStart()){\n\t\tthis.setStart(pstart);\n\t}\n\telse {\n\t\tthis.addStart(pstart);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.nextPage = function(){\n\treturn this.setPage(this.getPage() + 1);\n}\n\nWOQLQuery.prototype.firstPage = function(){\n\treturn this.setPage(1);\n}\n\nWOQLQuery.prototype.previousPage = function(){\n\tconst npage = this.getPage() - 1;\n\tif(npage > 0) this.setPage(npage);\n\treturn this;\n}\n\nWOQLQuery.prototype.setPageSize = function(size){\n\tthis.setPagingProperty(\"limit\", size);\n\tif(this.hasStart()){\n\t\tthis.setStart(0);\n\t}\n\telse {\n\t\tthis.addStart(0);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.hasSelect = function(){\n\treturn (this.getPagingProperty(\"select\") ? true : false);\n}\n\nWOQLQuery.prototype.getSelectVariables = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"select\") {\n\t\t\tvar vars = q[prop].slice(0, q[prop].length - 1);\n\t\t\treturn vars;\n\t\t}\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar val = this.getSelectVariables(q[prop][q[prop].length-1]);\n\t\t\tif(typeof val != \"undefined\"){\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t}\n}\n\nWOQLQuery.prototype.hasStart = function(){\n\treturn (typeof this.getPagingProperty(\"start\") != \"undefined\");\n}\n\nWOQLQuery.prototype.getStart = function(){\n\treturn this.getPagingProperty(\"start\");\n}\n\nWOQLQuery.prototype.setStart = function(start){\n\treturn this.setPagingProperty(\"start\", start);\n}\n\nWOQLQuery.prototype.addStart = function(s){\n\tif(this.hasStart()) this.setStart(s);\n\telse {\n\t\tvar nq = {'start': [s, this.query]};\n\t\tthis.query = nq;\n\t}\n\treturn this;\n}\n\n\n/**\n * Executes the query using the passed client to connect to a server\n */\nWOQLQuery.prototype.execute = function(client,fileList){\n\tif(!this.query[\"@context\"]){\n\t\tthis.query['@context'] = client.connection.getJSONContext();\n\t\tfor(var pref in UTILS.standard_urls){\n\t\t\tif(typeof this.query['@context'][pref] == \"undefined\")\n\t\t\tthis.query['@context'][pref] = UTILS.standard_urls[pref];\n\t\t}\n\t\tthis.query[\"@context\"][\"_\"] = \"_:\";\t\t\n\t\tvar json = this.json();\n\t}\n\telse {\n\t\tvar json = this.json();\n\t}\n\tconst opts=fileList ? {fileList:fileList} : null;\n\tif(this.contains_update){\n\t\t//return client.select(false, json,opts);\n\t\treturn client.update(false, json,opts);\n\t}\n\telse {\n\t\t//return client.select(false, json,opts);\n\t\treturn client.update(false, json,opts);\n\t}\n}\n\n/*\n * Internal State Control Functions\n * Not part of public API -\n */\n\n /**\n  * Wraps literal input in a json carriage \n  */\n WOQLQuery.prototype.packString = function(v){\n\tif(typeof v == \"string\" && v.substring(0,2) != \"v:\"){\n\t\treturn {\"@value\" : v, \"@type\": \"xsd:string\"}\n\t}\n\treturn v;\n }\n\n /**\n  * Wraps an array of literal inputs in a json carriage where appropriate\n  */\n WOQLQuery.prototype.packStrings = function(vs){\n\t let nv = [];\n\t for(var i = 0; i<vs.length; i++){\n\t\tif(vs[i]) nv.push(this.packString(vs[i]))\n\t }\n\t return nv;\n }\n\n /**\n * Advances internal cursor to support chaining of calls: limit(50).start(50). rather than (limit, [50, (start, [50, (lisp-style (encapsulation)))))\n */\nWOQLQuery.prototype.advanceCursor = function(action, value){\n\tthis.cursor[action] = [value];\n\tthis.cursor[action][1] = {};\n\tthis.cursor = this.cursor[action][1];\n}\n\nWOQLQuery.prototype.loadDefaultVocabulary = function(){\n\tvar vocab = {};\n\tvocab.type = \"rdf:type\";\n\tvocab.label = \"rdfs:label\";\n\tvocab.Class = \"owl:Class\";\n\tvocab.DatatypeProperty = \"owl:DatatypeProperty\";\n\tvocab.ObjectProperty = \"owl:ObjectProperty\";\n\tvocab.Entity = \"tcs:Entity\";\n\tvocab.Document = \"tcs:Document\";\n\tvocab.Relationship = \"tcs:Relationship\";\n\tvocab.temporality = \"tcs:temporality\";\n\tvocab.geotemporality = \"tcs:geotemporality\";\n\tvocab.geography = \"tcs:geography\";\n\tvocab.abstract = \"tcs:abstract\";\n\tvocab.comment = \"rdfs:comment\";\n\tvocab.range = \"rdfs:range\";\n\tvocab.domain = \"rdfs:domain\";\n\tvocab.subClassOf = \"rdfs:subClassOf\";\n\tvocab.string = \"xsd:string\";\n\tvocab.integer = \"xsd:integer\";\n\tvocab.decimal = \"xsd:decimal\";\n\tvocab.email = \"xdd:email\";\n\tvocab.json = \"xdd:json\";\n\tvocab.dateTime = \"xsd:dateTime\";\n\tvocab.date = \"xsd:date\";\n\tvocab.coordinate = \"xdd:coordinate\";\n\tvocab.line = \"xdd:coordinatePolyline\";\n\tvocab.polygon = \"xdd:coordinatePolygon\";\n\treturn vocab;\n}\n\nWOQLQuery.prototype.defaultContext = function(DB_IRI){\n\tlet def = {}\n\tfor(var pref in UTILS.standard_urls){\n\t\tdef[pref] = UTILS.standard_urls[pref];\n\t}\n\tdef.scm = DB_IRI + \"/schema#\"\n\tdef.doc = DB_IRI + \"/document/\"\n\tdef.db = DB_IRI + \"/\";\n\treturn def;\n}\n\n\n\n/**\n * Called to indicate that this is the last call in constructing a complete woql query object\n *\n */\nWOQLQuery.prototype.last = function(){\n\tthis.chain_ended = true;\n\treturn this;\n}\n\n/**\n * Called to inidicate that this is the last call in constructing a complete WOQL update query\n */\nWOQLQuery.prototype.lastUpdate = function(){\n\tthis.contains_update = true;\n\tthis.last();\n\treturn this;\n}\n\n/**\n * Called to indicate internally that this is a chainable update - by setting the subject and call of the Triple Builder object which is used to build further triples\n */\nWOQLQuery.prototype.chainable = function(call, subj){\n\tthis.tripleBuilder = new TripleBuilder(call, this.cursor, this.cleanSubject(subj));\n\tthis.last();\n\treturn this;\n}\n\n/**\n * Called to indicate internally that this is a chainable update - by setting the subject and call of the Triple Builder object which is used to build further triples\n */\nWOQLQuery.prototype.chainableUpdate = function(call, subj){\n\tthis.tripleBuilder = new TripleBuilder(call, this.cursor, this.cleanSubject(subj));\n\treturn this.lastUpdate();\n}\n\n\n/**\n * Returns the value of one of the 'paging' related properties (limit, start,...)\n */\nWOQLQuery.prototype.getPagingProperty = function(pageprop, q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == pageprop) return q[prop][0];\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar val = this.getPagingProperty(pageprop, q[prop][q[prop].length-1]);\n\t\t\tif(typeof val != \"undefined\"){\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Sets the value of one of the paging_transitive_properties properties\n */\nWOQLQuery.prototype.setPagingProperty = function(pageprop, val, q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == pageprop) {\n\t\t\tq[prop][0] = val;\n\t\t}\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tthis.setPagingProperty(pageprop, val, q[prop][q[prop].length-1]);\n\t\t}\n\t}\n\treturn this;\n}\n\n/**\n * Retrieves the value of the current json-ld context\n */\nWOQLQuery.prototype.getContext = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"@context\") return q[prop];\n\t\tif(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar nq = q[prop][1];\n\t\t\tvar nc = this.getContext(nq);\n\t\t\tif(nc) return nc;\n\t\t}\n\t}\n}\n\n\n/**\n * Retrieves the value of the current json-ld context\n */\nWOQLQuery.prototype.context = function(c){\n\tthis.cursor['@context'] = c;\n}\n\n\n/*\n* Transforms from internal json representation to human writable WOQL.js format\n*/\nWOQLQuery.prototype.prettyPrint = function(indent, show_context, q, fluent){\n\tif(!this.indent) this.indent = indent;\n\tq = (q ? q : this.query);\n\tvar str = \"\";\n\tconst newlining_operators = [\"get\", \"from\", \"into\"];\n\tfor(var operator in q){\n\t\t//ignore context in pretty print\n\t\tif(operator == \"@context\") {\n\t\t\tif( show_context){\n\t\t\t\tvar c = this.getContext();\n\t\t\t\tif(c) str += \"@context: \" + JSON.stringify(c) + \"\\n\";\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\t//statement starts differently depending on indent and whether it is fluent style or regular function style\n\t\tstr += this.getWOQLPrelude(operator, fluent, indent - this.indent);\n\t\tvar val = q[operator];\n\t\tif(this.isChainable(operator, val[val.length-1])){\n\t\t\t//all arguments up until the last are regular function arguments\n\t\t\tstr += this.uncleanArguments(operator,  val.slice(0, val.length-1), indent, show_context);\n\t\t\tif(newlining_operators.indexOf(operator) !== -1){\n\t\t\t\t//some fluent function calls demand a linebreak..\n\t\t\t\tstr += \"\\n\" + nspaces(indent-this.indent);\n\t\t\t}\n\t\t\t//recursive call to query included in tail\n\t\t\tstr += this.prettyPrint(indent, show_context, val[val.length-1], true);\n\t\t}\n\t\telse {\n\t\t\t//non chainable operators all live inside the function call parameters\n\t\t\tif(!this.hasShortcut(operator, val, indent)){\n\t\t\t\tstr += this.uncleanArguments(operator,  val, indent, show_context);\n\t\t\t}\n\t\t}\n\t}\n\t//remove any trailing dots in the chain (only exist in incompletely specified queries)\n\tif(str.substring(str.length-1) == \".\"){\n\t\tstr = str.substring(0, str.length-1);\n\t}\n\treturn str;\n}\n\n/**\n * Gets the starting characters for a WOQL query - varies depending on how the query is invoked and how indented it is\n */\nWOQLQuery.prototype.getWOQLPrelude = function(operator, fluent, inline){\n\tif(operator === \"true\" || operator === \"false\"){\n\t\treturn operator;\n\t}\n\tif(fluent){\n\t\treturn \".\" + operator;\n\t}\n\treturn (inline ? \"\\n\" + nspaces(inline) : \"\") + \"WOQL.\" + operator;\n}\n\n/**\n * Determines whether a given operator can have a chained query as its last argument\n */\nWOQLQuery.prototype.isChainable = function(operator, lastArg){\n\tconst non_chaining_operators = [\"and\", \"or\", \"remote\", \"file\", \"re\"];\n\tif(lastArg && typeof lastArg == \"object\" && typeof lastArg['@value'] == \"undefined\"  && typeof lastArg['@type'] == \"undefined\"  && typeof lastArg['value'] == \"undefined\" && non_chaining_operators.indexOf(operator) == -1){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Transforms arguments to WOQL functions from the internal (clean) version, to the WOQL.js human-friendly version\n */\nWOQLQuery.prototype.uncleanArguments = function(operator, args, indent, show_context){\n\tif(this.hasShortcut(operator, args)){\n\t\treturn this.getShortcut(operator, args, indent);\n\t}\n\tlet str = '(';\n\tfor(var i = 0; i<args.length; i++){\n\t\tif(this.argIsSubQuery(operator, args[i], i)){\n\t\t\tstr += this.prettyPrint(indent + this.indent, show_context, args[i], false);\n\t\t}\n\t\telse if(operator == \"get\" && i == 0){ // weird one, needs special casing\n\t\t\tstr += \"\\n\" + nspaces(indent-this.indent) + \"WOQL\";\n\t\t\tfor(var j = 0; j < args[0].length; j++){\n\t\t\t\tvar myas = (args[0][j].as ? args[0][j].as : args[0][j]);\n\t\t\t\tvar lhs = myas[0];\n\t\t\t\tvar rhs = myas[1];\n\t\t\t\tif(typeof lhs == \"object\" && lhs['@value']){\n\t\t\t\t\tlhs = lhs['@value'];\n\t\t\t\t}\n\t\t\t\tif(typeof lhs == \"object\") {\n\t\t\t\t\tlhs = JSON.stringify(lhs);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlhs = '\"' + lhs + '\"'\n\t\t\t\t}\n\t\t\t\tstr += '.as(' + lhs;\n\t\t\t\tif(rhs) str += ', \"' + rhs + '\"';\n\t\t\t\tstr += \")\";\n\t\t\t\tstr += \"\\n\" + nspaces(indent);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tstr += this.uncleanArgument(operator, args[i], i, args);\n\t\t}\n\t\tif(i < args.length -1) str +=  ',';\n\t}\n\tconst args_take_newlines = [\"and\", \"or\"];\n\tif(args_take_newlines.indexOf(operator) != -1){\n\t\tstr += \"\\n\" + nspaces(indent-this.indent);\n\t}\n\tstr += \")\";\n\treturn str;\n}\n\n\n/**\n * Passed as arguments: 1) the operator (and, triple, not, opt, etc)\n * 2) the value of the argument\n * 3) the index (position) of the argument.\n */\nWOQLQuery.prototype.uncleanArgument = function(operator, val, index, allArgs){\n\t//numeric values go out untouched...\n\tconst numeric_operators = [\"limit\", \"start\", \"eval\", \"plus\", \"minus\", \"times\", \"divide\", \"exp\", \"div\"];\n\tif(operator == \"isa\"){\n\t\tval = (index == 0 ? this.unclean(val, 'subject') : this.unclean(val, 'class'));\n\t}\n\telse if(operator == \"sub\"){\n\t\tval = this.unclean(val, 'class');\n\t}\n\telse if([\"select\"].indexOf(operator) != -1){\n\t\t//if(val.substring(0, 2) == \"v:\") val = val.substring(2);\n\t}\n\telse if([\"quad\", \"add_quad\", \"delete_quad\", \"add_triple\", \"delete_triple\", \"triple\"].indexOf(operator) != -1){\n\t\tswitch(index){\n\t\t\tcase 0: val = this.unclean(val, \"subject\"); break;\n\t\t\tcase 1: val = this.unclean(val, \"predicate\"); break;\n\t\t\tcase 2: val = this.unclean(val, \"object\"); break;\n\t\t\tcase 3: val = this.unclean(val, \"graph\"); break;\n\t\t}\n\t}\n\tif(typeof val == \"object\"){\n\t\tif(operator == \"concat\" && index == 0){\n\t\t\tvar cstr = \"\";\n\t\t\tif(val.list){\n\t\t\t\tfor(var i = 0 ; i<val.list.length; i++){\n\t\t\t\t\tif(val.list[i]['@value']) cstr += val.list[i]['@value'];\n\t\t\t\t\telse cstr += val.list[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar oval = '\"' + cstr + '\"';\n\t\t}\n\t\telse {\n\t\t\tvar oval = this.uncleanObjectArgument(operator, val, index);\n\t\t}\n\t\treturn oval;\n\t}\n\t//else if(numeric_operators.indexOf(operator) !== -1){\n\t//\treturn val;\n\t//}\n\tif(typeof val == \"string\"){\n\t\treturn '\"' + val + '\"';\n\t}\n\treturn val;\n}\n\nWOQLQuery.prototype.uncleanObjectArgument = function(operator, val, index){\n\tif(val['@value'] && (val['@language'] || (val['@type'] && val['@type'] == \"xsd:string\"))) return '\"' + val['@value'] + '\"';\n\tif(val['@value'] && (val['@type'] && val['@type'] == \"xsd:integer\")) return val['@value'];\n\tif(val['list']) {\n\t\tvar nstr = \"[\";\n\t\tfor(var i = 0 ; i<val['list'].length; i++){\n\t\t\tif(typeof val['list'][i] == \"object\"){\n\t\t\t\tnstr += this.uncleanObjectArgument(\"list\", val['list'][i], i);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnstr += '\"' + val['list'][i] + '\"';\n\t\t\t}\n\t\t\tif(i < val['list'].length-1){\n\t\t\t\tnstr += \",\";\n\t\t\t}\n\t\t}\n\t\tnstr += \"]\";\n\t\treturn nstr;\n\t}\n\treturn JSON.stringify(val);\n}\n\nWOQLQuery.prototype.argIsSubQuery = function(operator, arg, index){\n\tconst squery_operators = [\"and\", \"or\", \"when\", \"not\", \"opt\", \"exp\", \"minus\", \"div\", \"divide\", \"plus\", \"multiply\"];\n\tif(squery_operators.indexOf(operator) !== -1){\n\t\tif(arg && typeof arg != \"object\") return false;\n\t\treturn true;\n\t}\n\tif(operator == \"group_by\" && index == 2) return true;\n\telse return false;\n}\n\n/**\n * Goes from the properly prefixed clean internal version of a variable to the WOQL.js unprefixed form\n */\nWOQLQuery.prototype.unclean = function(s, part){\n\tif(typeof s != \"string\") return s;\n\tif(s.indexOf(\":\") == -1) return s;\n\tif(s.substring(0,4) == \"http\") return s;\n\tvar suff = s.split(\":\")[1];\n\tif(this.vocab && this.vocab[suff] && this.vocab[suff] == s){\n\t\treturn suff;\n\t}\n\tif(!part) return s;\n\tif(part == \"subject\" && (s.split(\":\")[0] == \"doc\")) return suff;\n\tif(part == \"class\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"predicate\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"type\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"graph\" && (s.split(\":\")[0] == \"db\")) return suff;\n\treturn s;\n}\n\nWOQLQuery.prototype.hasShortcut = function(operator, args, indent){\n\tif(operator == \"true\") return true;\n\treturn false;\n}\n\nWOQLQuery.prototype.getShortcut = function(operator, args, indent){\n\tif(operator == \"true\") return true;\n}\n\nfunction nspaces(n){\n\tlet spaces = \"\";\n\tfor(var i = 0; i<n; i++){\n\t\tspaces += \" \";\n\t}\n\treturn spaces;\n}\n\nWOQLQuery.prototype.printLine = function(indent, clauses){\n\treturn \"(\\n\" + nspaces(indent) + \"WOQL.\" + clauses.join(\",\\n\"+ nspaces(indent) + \"WOQL.\") + \"\\n\" + nspaces(indent - this.indent) + \")\";\n}\n\nWOQLQuery.prototype.cleanSubject = function(s){\n\tif(typeof s != \"string\") return s;\n\tif(s.indexOf(\":\") != -1) return s;\n\tif(this.vocab && this.vocab[s]) return this.vocab[s];\n\treturn \"doc:\" + s;\n}\n\nWOQLQuery.prototype.cleanPredicate = function(p){\n\tif(p.indexOf(\":\") != -1) return p;\n\tif(this.vocab && this.vocab[p]) return this.vocab[p];\n\treturn \"scm:\" + p;\n}\nWOQLQuery.prototype.cleanType = function(t){\n\tif(t.indexOf(\":\") != -1) return t;\n\tif(this.vocab && this.vocab[t]) return this.vocab[t];\n\treturn \"scm:\" + t;\n}\n\nWOQLQuery.prototype.cleanObject = function(o){\n\tif(typeof o != \"string\" || o.indexOf(\":\") != -1) return o;\n\tif(this.vocab && this.vocab[o]) return this.vocab[o];\n\treturn { \"@value\": o, \"@language\": \"en\"};\n}\n\nWOQLQuery.prototype.cleanGraph = function(g){\n\tif(g.indexOf(\":\") != -1) return g;\n\tif(this.vocab && this.vocab[g]) return this.vocab[g];\n\treturn \"db:\" + g;\n}\n\nWOQLQuery.prototype.cleanClass = function(c){\n\tif(c.indexOf(\":\") != -1) return c;\n\tif(this.vocab && this.vocab[c]) return this.vocab[c];\n\treturn \"scm:\" + c;\n}\n\n/**\n * @file Triple Builder\n * higher level composite queries - not language or api elements\n * Class for enabling building of triples from pieces\n * type is add_quad / remove_quad / add_triple / remove_triple\n */\nfunction TripleBuilder(type, cursor, s){\n\t//what accumulation type are we\n\tthis.type = type;\n\tthis.cursor = cursor;\n\tthis.subject = (s ? s : false);\n\tthis.g = false;\n}\n\nTripleBuilder.prototype.label = function(l, lang){\n\tlang = (lang ? lang : \"en\");\n\tif(l.substring(0, 2) == \"v:\"){\n\t\tvar d = l;//{\"value\": l, \"@language\": lang }\n\t}\n\telse {\n\t\tvar d = {\"@value\": l, \"@language\": lang }\n\t}\n\tvar x = this.addPO('rdfs:label', d);\n\treturn x;\n}\n\nTripleBuilder.prototype.description = function(c, lang){\n\tlang = (lang ? lang : \"en\");\n\tif(c.substring(0, 2) == \"v:\"){\n\t\t//var d = {\"value\": c, \"@language\": lang }\n\t\tvar d = c;\n\t}\n\telse {\n\t\tvar d = {\"@value\": c, \"@language\": lang }\n\t}\n\treturn this.addPO('rdfs:comment', d);\n}\n\nTripleBuilder.prototype.addPO = function(p, o, g){\n\tif(this.type){\n\t\tvar ttype = (this.type == \"isa\" || this.type == \"sub\" ? \"triple\" : this.type);\n\t}\n\telse var ttype = \"triple\";\n\tvar evstr = ttype + '(\"' + this.subject + '\", \"' + p + '\", ';\n\tif(typeof o == \"string\"){\n\t\tevstr += \"'\" + o + \"'\";\n\t}\n\telse if(typeof o == \"object\"){\n\t\tevstr += JSON.stringify(o);\n\t}\n\telse {\n\t\tevstr += o;\n\t}\n\tif(ttype.substring(ttype.length-4) == \"quad\" || this.g){\n\t\tvar g = (g ? g : (this.g ? this.g : \"db:schema\"));\n\t\tevstr += ', \"' + g + '\"';\n\t}\n\tevstr += \")\";\n\ttry {\n\t\tvar unit = eval(\"new WOQLQuery().\" + evstr );\n\t\treturn this.addEntry(unit);\n\t}\n\tcatch(e){\n\t\tconsole.error(e);\n\t\treturn this;\n\t}\n}\n\nTripleBuilder.prototype.getO = function(s, p){\n\tif(this.cursor['and']){\n\t\tfor(var i = 0; i<this.cursor['and'].length; i++){\n\t\t\tvar clause = this.cursor['and'][i];\n\t\t\tvar key = Object.keys(clause)[0];\n\t\t\tif(clause[key][0] == s && clause[key][1] == p && clause[key][2]) return clause[key][2];\n\t\t}\n\t}\n\telse if(Object.keys(this.cursor)) {\n\t\tvar key =  Object.keys(this.cursor)[0];\n\t\tif(this.cursor[key][0] == s && this.cursor[key][1] == p && this.cursor[key][2])  return this.cursor[key][2];\n\t}\n\treturn false;\n}\n\nTripleBuilder.prototype.addEntry = function(unit){\n\tif(this.cursor[this.type]){\n\t\tvar next = {};\n\t\tnext[this.type] = this.cursor[this.type];\n\t\tthis.cursor['and'] = [next];\n\t\tdelete(this.cursor[this.type]);\n\t}\n\tif(this.cursor['and']){\n\t\tthis.cursor['and'].push(unit.json());\n\t}\n\telse {\n\t\tvar j = unit.json();\n\t\tif(j[this.type]) this.cursor[this.type] = j[this.type];\n\t\telse {\n\t\t\talert(JSON.stringify(j));\n\t\t}\n\t}\n\treturn this;\n}\n\nTripleBuilder.prototype.card = function(n, which){\n\tlet os = this.subject;\n\tthis.subject += \"_\" + which;\n\tthis.addPO('rdf:type', \"owl:Restriction\");\n\tthis.addPO(\"owl:onProperty\", os);\n\tswitch(which){\n\t\tcase \"max\": this.addPO(\"owl:maxCardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t\t\tbreak;\n\t\tcase \"min\": this.addPO(\"owl:minCardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t\t\tbreak;\n\t\tdefault: this.addPO(\"owl:cardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t}\n\tlet od = this.getO(os, \"rdfs:domain\");\n\tif(od){\n\t\tvar cardcls = this.subject;\n\t\tthis.subject = od;\n\t\tthis.addPO(\"rdfs:subClassOf\", cardcls);\n\t}\n\tthis.subject = os;\n\treturn this;\n};\n\nTripleBuilder.prototype.isa = function(a){\n\tvar unit = new WOQLQuery.isa(this.subject, a);\n\tthis.tb.addEntry(unit);\n}\n\nTripleBuilder.prototype.graph = function(g){\n\tthis.g = g;\n}\n\nTripleBuilder.prototype.sub = function(s){\n\tvar unit = new WOQLQuery.sub(this.subject, s);\n\treturn this.addEntry(unit);\n}\n\nTripleBuilder.prototype.abstract = function(){\n\treturn this.addPO('tcs:tag', \"tcs:abstract\");\n}\n\nmodule.exports = WOQL;\n","const UTILS = require('./utils.js');\n\n/**\n * @file Terminus Rules\n * @license Apache Version 2\n * Abstract object to support applying matching rules to result sets and documents\n * sub-classes are FrameRule and WOQLRule - this just has common functions\n */\nfunction TerminusRule(){}\n\n/**\n * @param {Boolean} tf - the rule will match all literals or all non-literals\n */\nTerminusRule.prototype.literal = function(tf){\n\tif(typeof tf == \"undefined\"){\n\t\treturn this.pattern.literal;\n\t}\n\tthis.pattern.literal = tf;\n\treturn this;\n}\n\n/**\n * @param {[TYPE_URLS]} list - parameters are types identified by prefixed URLS (xsd:string...)\n */\nTerminusRule.prototype.type = function(...list){\n\tif(typeof list == \"undefined\" || list.length == 0){\n\t\treturn this.pattern.type;\n\t}\n\tthis.pattern.type = list;\n\treturn this;\n}\n\n/**\n * Specifies the scope of a rule - row / cell / object / property / * .. what part of the result does the rule apply to\n */\nTerminusRule.prototype.scope = function(scope){\n\tif(typeof scope == \"undefined\"){\n\t\treturn this.pattern.scope;\n\t}\n\tthis.pattern.scope = scope;\n\treturn this;\n}\n\n/**\n * Specifies that the rule matches a specific value\n */\nTerminusRule.prototype.value = function(...val){\n\tif(typeof val == \"undefined\"){\n\t\treturn this.pattern.value;\n\t}\n\tthis.pattern.value = val;\n\treturn this;\n}\n\n/**\n * Produces a canonical json format to represent the rule\n */\nTerminusRule.prototype.json = function(mjson){\n\tif(!mjson) {\n\t\tvar njson = {};\n\t\tif(this.pattern) njson.pattern = this.pattern.json();\n\t\tif(this.rule) njson.rule = this.rule;\n\t\treturn njson;\n\t}\n\telse {\n\t    if(mjson.pattern) this.pattern.setPattern(mjson.pattern);\n\t\tif(mjson.rule) this.rule = mjson.rule;\n\t}\n\treturn this;\n}\n\n/**\n * Contained Pattern Object to encapsulate pattern matching\n * @param {Object} pattern\n */\nfunction TerminusPattern(pattern){};\n\nTerminusPattern.prototype.setPattern = function(pattern){\n\tif(typeof pattern.literal != \"undefined\") this.literal = pattern.literal;\n\tif(pattern.type) this.type = pattern.type;\n\tif(pattern.scope) this.scope = pattern.scope;\n\tif(pattern.value) this.value = pattern.value;\n}\n\nTerminusPattern.prototype.json = function(){\n    var json = {};\n\tif(typeof this.literal != \"undefined\") json.literal = this.literal;\n\tif(this.type) json.type = this.type;\n    if(this.scope) json.scope = this.scope;\n    if(this.value) json.value = this.value;\n    return json;\n}\n\n/**\n * Tests whether the passed values matches the basic pattern\n */\nTerminusPattern.prototype.testBasics = function(scope, value){\n\tif(this.scope && scope && this.scope != scope) return false;\n\tif(this.type){\n\t\tvar dt = value[\"@type\"];\n\t\tif(!dt || !this.testValue(dt, this.type)) return false;\n\t}\n\tif(typeof this.literal != \"undefined\"){\n\t\tif(!(this.literal == !(typeof value[\"@type\"] == \"undefined\"))) return false;\n\t}\n\tif(typeof this.value != \"undefined\"){\n\t   if(!this.testValue(value, this.value)) return false;\n\t}\n\treturn true;//passed all tests\n}\n\nTerminusPattern.prototype.testValue = function(value, constraint){\n\tvar vundertest = (value['@value'] ? value['@value'] : value);\n\tif(typeof constraint == \"function\") return constraint(vundertest);\n\tif(constraint && !Array.isArray(constraint)) constraint = [constraint];\n\tfor(var i = 0; i<constraint.length; i++){\n\t\tvar nc = constraint[i];\n\t\tif(typeof vundertest == \"string\"){\n\t\t\tif(this.stringMatch(nc, vundertest)) return true;\n\t\t}\n\t\telse if(typeof vundertest == \"number\"){\n\t\t\tif(this.numberMatch(nc, vundertest)) return true;\n\t\t}\n\t}\n\treturn false;\n}\n\n/**\n * Unpacks an array into a list of arguments\n * @param {Boolean} nonstring - if set, the values will be double-quoted only when they are strings, otherwise, all will be quoted as strings\n */\nTerminusPattern.prototype.unpack = function(arr, nonstring){\n\tvar str = \"\";\n\tif(nonstring){\n\t\tfor(var i = 0 ; i<arr.length; i++){\n\t\t\tif(typeof arr[i] == \"string\"){\n\t\t\t\tstr += '\"' + arr[i] + '\"';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstr += arr[i];\n\t\t\t}\n\t\t\tif(i < (arr.length - 1)) str += \", \";\n\t\t}\n\t}\n\telse {\n\t\tstr = '\"' + arr.join('\",\"') + '\"';\n\t}\n\treturn str;\n}\n\n\nTerminusPattern.prototype.IDsMatch = function (ida, idb) {\n\treturn UTILS.compareIDs(ida, idb);\n};\n\nTerminusPattern.prototype.classIDsMatch = function (ida, idb) {\n\treturn this.IDsMatch(ida, idb);\n};\n\nTerminusPattern.prototype.propertyIDsMatch = function (ida, idb) {\n\tconst match = this.IDsMatch(ida, idb);\n\treturn match;\n};\n\nTerminusPattern.prototype.rangeIDsMatch = function (ida, idb) {\n\treturn this.IDsMatch(ida, idb);\n};\n\nTerminusPattern.prototype.valuesMatch = function (vala, valb) {\n\treturn vala == valb;\n};\nTerminusPattern.prototype.numberMatch = function (vala, valb) {\n\tif (typeof vala === 'string') {\n\t\ttry {\n\t\t\treturn eval(valb + vala);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn vala === valb;\n};\n\nTerminusPattern.prototype.stringMatch = function (vala, valb) {\n\tif(vala.substring(0,1) == \"/\"){\n\t\tconst pat = new RegExp(vala.substring(1));\n\t\treturn pat.test(valb);\n\t}\n\telse {\n\t\treturn vala === valb;\n\t}\n};\n\n\n module.exports = {TerminusRule, TerminusPattern};\n","const Config  = require('./viewConfig.js');\nconst WOQLTable  = require('./woqlTable.js');\nconst UTILS  = require('../utils.js');\n\n\nfunction WOQLTableConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"table\";\n}\n\nWOQLTableConfig.prototype = Object.create(Config.ViewConfig.prototype);\nWOQLTableConfig.prototype.constructor = Config.ViewConfig;\n\nWOQLTableConfig.prototype.create = function(client){\n\tvar wqt = new WOQLTable(client, this);\n\treturn wqt;\n}\n\nWOQLTableConfig.prototype.json = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\tvar conf = {};\n\tif(typeof this.column_order() != \"undefined\"){\n\t\tconf['column_order'] = this.column_order();\n\t}\n\tif(typeof this.pagesize() != \"undefined\"){\n\t\tconf['pagesize'] = this.pagesize();\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tconf['renderer'] = this.renderer();\n\t}\n\tif(typeof this.pager() != \"undefined\"){\n\t\tconf['pager'] = this.pager();\n\t}\n\tif(typeof this.page() != \"undefined\"){\n\t\tconf['page'] = this.page();\n\t}\n\tif(typeof this.changesize() != \"undefined\"){\n\t\tconf['changesize'] = this.changesize();\n\t}\n\tlet mj = {\"table\" :conf, \"rules\": jr};\n\treturn mj;\n}\n\nWOQLTableConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLTableRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(typeof config.column_order != \"undefined\"){\n\t\tthis.column_order(...config.column_order);\n\t}\n\tif(typeof config.pagesize != \"undefined\"){\n\t\tthis.pagesize(config.pagesize);\n\t}\n\tif(typeof config.renderer != \"undefined\"){\n\t\tthis.renderer(config.renderer);\n\t}\n\tif(typeof config.pager != \"undefined\"){\n\t\tthis.pager(config.pager);\n\t}\n\tif(typeof config.page != \"undefined\"){\n\t\tthis.page(config.page);\n\t}\n\tif(typeof config.changesize != \"undefined\"){\n\t\tthis.changesize(config.changesize);\n    }\n    return this;\n}\n\nWOQLTableConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = View.table();\\n\";\n\tif(typeof this.column_order() != \"undefined\"){\n\t\tstr += \"view.column_order('\" + this.column_order() + \"')\\n\";\n\t}\n\tif(typeof this.pagesize() != \"undefined\"){\n\t\tstr += \"view.pagesize(\" + this.pagesize() + \")\\n\";\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \"view.renderer('\" + this.renderer() + \"')\\n\";\n\t}\n\tif(typeof this.pager() != \"undefined\"){\n\t\tstr += \"view.pager(\" + this.pager() + \")\\n\";\n\t}\n\tif(typeof this.page() != \"undefined\"){\n\t\tstr += \"view.page(\" + this.page() + \")\\n\";\n\t}\n    if(typeof this.changesize() != \"undefined\"){\n        str += \"view.changesize(\" + this.changesize() + \")\\n\";\n    }\n    \n    for(var i = 0; i<this.rules.length ; i++){\n\t\tlet x = this.rules[i].prettyPrint();\n\t\tif(x) str += \"view.\" + x + \"\\n\";\t\t\n\t}\n\treturn str;\n}\n\nWOQLTableConfig.prototype.renderer = function(rend){\n\tif(!rend) return this.trenderer;\n\tthis.trenderer = rend;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.column_order = function(...val){\n\tif(typeof val == \"undefined\" || val.length == 0){\n\t\treturn this.order;\n\t}\n\tthis.order = UTILS.addNamespacesToVariables(val);\n\treturn this;\n}\n\nWOQLTableConfig.prototype.pager = function(val){\n\tif(typeof val == \"undefined\"){\n\t\treturn this.show_pager;\n\t}\n\tthis.show_pager = val;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.changesize = function(val){\n    if(typeof val == \"undefined\") return this.change_pagesize;\n    this.change_pagesize = val;\n    return this;\n}\n\n\nWOQLTableConfig.prototype.pagesize = function(val){\n\tif(typeof val == \"undefined\"){\n\t\treturn this.show_pagesize;\n\t}\n\tthis.show_pagesize = val;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.page = function(val){\n\tif(typeof val == \"undefined\"){\n\t\treturn this.show_pagenumber;\n\t}\n\tthis.show_pagenumber = val;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.column = function(...cols){\n\tlet nr = new WOQLTableRule().scope(\"column\");\n\tnr.setVariables(cols);\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\nWOQLTableConfig.prototype.row = function(){\n\tlet nr = new WOQLTableRule().scope(\"row\");\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\n/*\n * Table\n */\n\n \nfunction WOQLTableRule(){\n\tConfig.WOQLViewRule.call(this); \n};\n\nWOQLTableRule.prototype = Object.create(Config.WOQLViewRule.prototype);\nWOQLTableRule.prototype.constructor = Config.WOQLViewRule;\n\nWOQLTableRule.prototype.header = function(hdr){\n\tif(typeof hdr == \"undefined\"){\n\t\treturn this.rule.header;\n\t}\n\tthis.rule.header = hdr;\n\treturn this;\n}\n\nWOQLTableRule.prototype.prettyPrint = function(type){\n\tvar str = Config.WOQLViewRule.prototype.prettyPrint.apply(this);\n    if(typeof this.header() != \"undefined\"){\n\t    str += \".header(\" + this.header() + \")\";\n\t}\n\treturn str;\n}\n\nmodule.exports = WOQLTableConfig;","const WOQLTableConfig = require(\"./tableConfig\");\nconst UTILS = require('../utils');\nconst WOQLRule = require('../woqlRule');\nconst WOQLResult = require('../woqlResult');\n\n/**\n * @file WOQL Table \n * @license Apache Version 2 \n */\n\nfunction WOQLTable(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new WOQLTableConfig());\n\treturn this;\n}\n\nWOQLTable.prototype.options = function(config){\n\tthis.config = config;\n\treturn this;\n}\n\nWOQLTable.prototype.setResult = function(res){\n\tthis.result = res;\n\treturn this;\n}\n\nWOQLTable.prototype.count = function(){\n\treturn this.result.count();\n}\n\nWOQLTable.prototype.first = function(){\n\treturn this.result.first();\n}\n\nWOQLTable.prototype.prev = function(){\n\treturn this.result.prev();\n}\n\nWOQLTable.prototype.next = function(){\n\treturn this.result.next();\n}\n\nWOQLTable.prototype.canAdvancePage = function(){\n\treturn (this.result.count() == this.result.query.getLimit()); \n}\n\nWOQLTable.prototype.canChangePage = function(){\n\treturn this.canAdvancePage() || this.canRetreatPage();\n}\n\nWOQLTable.prototype.canRetreatPage = function(){\n\treturn (this.result.query.getPage() > 1);\n}\n\nWOQLTable.prototype.getPageSize = function(){\n\treturn this.result.query.getLimit() ;\t\n}\n\nWOQLTable.prototype.setPage = function(l){\n\treturn this.result.query.setPage(l);\t\n}\n\nWOQLTable.prototype.getPage = function(){\n\treturn this.result.query.getPage();\t\n}\n\nWOQLTable.prototype.setPageSize = function(l){\n\treturn this.update(this.result.query.setPageSize(l));\n}\n\nWOQLTable.prototype.nextPage = function(){\n\treturn this.update(this.result.query.nextPage());\n}\n\nWOQLTable.prototype.firstPage = function(){\n\treturn this.update(this.result.query.firstPage());\n}\n\nWOQLTable.prototype.previousPage = function(){\n\treturn this.update(this.result.query.previousPage());\n}\n\nWOQLTable.prototype.getColumnsToRender = function(){\n\tif(this.hasColumnOrder()){\n\t\tvar cols = this.getColumnOrder();\n\t}\n\telse if(this.result.query.hasSelect()){\n\t\tvar cols = this.result.query.getSelectVariables();\n\t}\n\telse {\n\t\tvar cols = this.result.getVariableList();\n\t}\n\tvar self = this;\n\treturn (cols ? cols.filter(col => !self.hidden(col)) : []);\n}\n\nWOQLTable.prototype.getColumnHeaderContents = function(colid){\n\tcolid = UTILS.addNamespaceToVariable(colid);\n\tlet hr = new WOQLRule().matchColumn(this.config.rules, colid, \"header\");\n\tif(hr && hr.length){\n\t\tlet h = hr[hr.length-1].rule.header;\n\t\tif(typeof h == \"string\"){\n\t\t\treturn document.createTextNode(h);\t\t\t\n\t\t}\n\t\telse if(typeof h == \"function\"){\n\t\t\treturn h(colid);\n\t\t}\n\t\telse return h;\n\t}\n\tvar clab = UTILS.labelFromURL(colid);\n\treturn document.createTextNode(clab);\n}\n\n\nWOQLTable.prototype.hidden = function(col){\n\tcolid = UTILS.addNamespaceToVariable(col);\n\tlet matched_rules = new WOQLRule().matchColumn(this.config.rules, colid, \"hidden\");\n\tif(matched_rules.length){\n\t\treturn matched_rules[matched_rules.length-1].rule.hidden;\n\t}\n\treturn false;\n}\n\n/**\n * Called when you want to change the query associated with the table. \n */\nWOQLTable.prototype.update = function(nquery){\n\treturn nquery.execute(this.client).then((results) => {\n\t\tvar nresult = new WOQLResult(results, nquery);\n\t\tthis.setResult(nresult);\n\t\tif(this.notify) this.notify(nresult);\n\t\treturn nresult;\n\t});\t\n}\n\nWOQLTable.prototype.hasDefinedEvent = function(row, key, scope, action, rownum){\n\tif(scope == \"row\"){\n\t\tvar matched_rules = new WOQLRule().matchRow(this.config.rules, row, this.result.cursor, action);\t\n\t}\n\telse {\n\t\tvar matched_rules = new WOQLRule().matchCell(this.config.rules, row, key, this.result.cursor, action);\t\n\t}\n\tif(matched_rules && matched_rules.length) return true;\n\treturn false;\n}\n\nWOQLTable.prototype.getDefinedEvent = function(row, key, scope, action, rownum){\n\tif(scope == \"row\"){\n\t\tvar matched_rules = new WOQLRule().matchRow(this.config.rules, row, this.result.cursor, action);\t\n\t}\n\telse {\n\t\tvar matched_rules = new WOQLRule().matchCell(this.config.rules, row, key, this.result.cursor, action);\t\n\t}\n\tif(matched_rules && matched_rules.length) {\n\t\tvar l = (matched_rules.length - 1);\n\t\treturn matched_rules[l].rule[action];\n\t}\n}\n\nWOQLTable.prototype.getRowClick = function(row){\n\tlet re = this.getDefinedEvent(row, false, \"row\", \"click\");\n\treturn re;\n}\n\nWOQLTable.prototype.getCellClick = function(row, col){\n\tlet cc = this.getDefinedEvent(row, col, \"column\", \"click\");\n\treturn cc;\n}\n\nWOQLTable.prototype.getRowHover = function(row){\n\treturn this.getDefinedEvent(row, false, \"row\", \"hover\");\n}\n\nWOQLTable.prototype.getCellHover = function(row, key){\n\treturn this.getDefinedEvent(row, key, \"column\", \"hover\");\n}\n\nWOQLTable.prototype.getColumnOrder = function(){\n\treturn this.config.column_order();\n}\n\nWOQLTable.prototype.hasColumnOrder = WOQLTable.prototype.getColumnOrder;\nWOQLTable.prototype.hasCellClick = WOQLTable.prototype.getCellClick;\nWOQLTable.prototype.hasRowClick = WOQLTable.prototype.getRowClick;\nWOQLTable.prototype.hasCellHover = WOQLTable.prototype.getCellHover;\nWOQLTable.prototype.hasRowHover = WOQLTable.prototype.getRowHover;\n\nWOQLTable.prototype.getRenderer = function(key, row, rownum){\n\tvar rend = this.getSpecificRender(key, row);\n\tif(rend) return rend;\n\tlet renderer = this.getDefinedEvent(row, key, \"column\", \"renderer\", rownum);\n\tlet args =  this.getDefinedEvent(row, key, \"column\", \"args\", rownum);\n\tif(!renderer){\n\t\tlet r = this.getRendererForDatatype(row[key]);\n\t\trenderer = r.name;\n\t\tif(!args) args = r.args;\n\t}\n\tif(renderer){\n\t\treturn this.datatypes.createRenderer(renderer, args);\t\t\n\t}\n}\n\nWOQLTable.prototype.renderValue = function(renderer, val, key, row){\n\tif(val && val['@type']){\n\t\trenderer.type = val['@type'];\n\t\tvar dv = new DataValue(val['@value'], val['@type'], key, row);\n\t}\t\n\telse if(val && val['@language']){\n\t\trenderer.type = \"xsd:string\";\n\t\tvar dv = new DataValue(val['@value'], renderer.type, key, row);\n\t}\n\telse if(val && typeof val == \"string\"){\n\t\trenderer.type = \"id\";\n\t\tvar dv = new DataValue(val, \"id\", key, row);\n\t}\n\tif(dv) return renderer.renderValue(dv);\n\treturn \"\";\n}\n\nfunction DataValue(val, type){\n\tthis.datavalue = (val == \"unknown\" ? \"\" : val);\n\tthis.datatype = type;\n}\n\nDataValue.prototype.value = function(nvalue){\n\tif(nvalue) {\n\t\tthis.datavalue = nvalue; \n\t\treturn this;\n\t}\n\treturn this.datavalue;\n}\n\n\nWOQLTable.prototype.getRendererForDatatype = function(val){\n\tif(val && val['@type']){\n\t\treturn this.datatypes.getRenderer(val['@type'], val['@value']);\n\t}\n\telse if(val && val['@language']){\n\t\treturn this.datatypes.getRenderer(\"xsd:string\", val['@value']);\n\t}\n\telse if(val && typeof val == \"string\"){\n\t\treturn this.datatypes.getRenderer(\"id\", val);\t\t\n\t}\n\treturn false;\n}\n\nWOQLTable.prototype.getSpecificRender = function(key, row){\n\tlet rend = this.getDefinedEvent(row, key, \"column\", \"render\");\n\treturn rend;\n}\n\nmodule.exports = WOQLTable;","const Config  = require('./viewConfig.js');\nconst WOQLChooser  = require('./woqlChooser.js');\nconst UTILS = require('../utils');\n\nfunction WOQLChooserConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"chooser\";\n}\n\nWOQLChooserConfig.prototype = Object.create(Config.ViewConfig.prototype);\nWOQLChooserConfig.prototype.constructor = Config.ViewConfig;\n\nWOQLChooserConfig.prototype.create = function(client){\n\tvar wqt = new WOQLChooser(client, this);\n\treturn wqt;\n}\n\nWOQLChooserConfig.prototype.prettyPrint = function(){\n    var str = \"view = View.chooser();\\n\";\n    str += this.getBasicPrettyPrint();\n\tif(typeof this.change() != \"undefined\"){\n\t\tstr += \"view.change(\" + this.change() + \")\\n\";\n\t}\n\tif(typeof this.show_empty() != \"undefined\"){\n\t\tstr += \"view.show_empty('\" + this.show_empty() + \"')\\n\";\n\t}\n\tif(typeof this.values() != \"undefined\"){\n\t\tstr += \"view.values('\" + UTILS.removeNamespaceFromVariable(this.values()) + \"')\\n\";\n\t}\n\tif(typeof this.labels() != \"undefined\"){\n\t\tstr += \"view.labels('\" + UTILS.removeNamespaceFromVariable(this.labels()) + \"')\\n\";\n\t}\n\tif(typeof this.titles() != \"undefined\"){\n\t\tstr += \"view.titles('\" + UTILS.removeNamespaceFromVariable(this.titles()) + \"')\\n\";\n\t}\n\tif(typeof this.sort() != \"undefined\"){\n\t\tstr += \"view.sort(\" + this.sort() + \")\\n\";\n\t}\n\tif(typeof this.direction() != \"undefined\"){\n\t\tstr += \"view.direction('\" + this.direction() + \"')\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint(\"chooser\") + \"\\n\";\n\t}\n\treturn str;\n}\n\nWOQLChooserConfig.prototype.json = function(){\n\tvar conf = this.getBasicJSON();\n\tif(typeof this.change() != \"undefined\"){\n\t\tconf['change'] = this.change();\n\t}\n\tif(typeof this.show_empty() != \"undefined\"){\n\t\tconf['show_empty'] = this.show_empty();\n\t}\n\tif(typeof this.values() != \"undefined\"){\n\t\tconf['values'] = this.values();\n\t}\n\tif(typeof this.labels() != \"undefined\"){\n\t\tconf['labels'] = this.labels();\n\t}\n\tif(typeof this.titles() != \"undefined\"){\n\t\tconf['titles'] = this.titles();\n\t}\n\tif(typeof this.sort() != \"undefined\"){\n\t\tconf['sort'] = this.sort();\n\t}\n\tif(typeof this.direction() != \"undefined\"){\n\t\tconf['direction'] = this.direction();\n\t}\n\tlet mj = {\"chooser\" :conf, \"rules\": this.getRulesJSON()};\n\treturn mj;\n}\n\nWOQLChooserConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLChooserRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n    this.rules = jr;\n    this.loadBasicJSON(config);\n\tif(typeof config.change != \"undefined\"){\n\t\tthis.change(config.change);\n\t}\n\tif(typeof config.show_empty != \"undefined\"){\n\t\tthis.show_empty(config.show_empty);\n\t}\n\tif(typeof config.values != \"undefined\"){\n\t\tthis.values(config.values);\n\t}\n\tif(typeof config.labels != \"undefined\"){\n\t\tthis.labels(config.labels);\n\t}\n\tif(typeof config.titles != \"undefined\"){\n\t\tthis.titles(config.titles);\n\t}\n\tif(typeof config.sort != \"undefined\"){\n\t\tthis.sort(config.sort);\n\t}\n\tif(typeof config.direction != \"undefined\"){\n\t\tthis.direction(config.direction);\n\t}\n}\n\nWOQLChooserConfig.prototype.change = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.onChange = v;\n\t\treturn this;\n\t}\n\treturn this.onChange;\n}\n\nWOQLChooserConfig.prototype.show_empty = function(p){\n\tif(typeof p != \"undefined\"){\n\t\tthis.placeholder = p;\n\t\treturn this;\n\t}\n\treturn this.placeholder;\n}\n\nWOQLChooserConfig.prototype.rule = function(v){\n\tlet nr = new WOQLChooserRule().scope(\"row\");\n    this.rules.push(nr);\n    if(v) nr.vars(v);\n    //if(v) nr.v(v);\n    return nr;\n}\n\nWOQLChooserConfig.prototype.values = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tif(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.value_variable = v;\n\t\treturn this;\n\t}\n\treturn this.value_variable;\n}\n\nWOQLChooserConfig.prototype.labels = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.label_variable = v;\n\t\treturn this;\n\t}\n\treturn this.label_variable;\n}\n\nWOQLChooserConfig.prototype.titles = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.title_variable = v;\n\t\treturn this;\n\t}\n\treturn this.title_variable;\n}\n\nWOQLChooserConfig.prototype.sort = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.sort_variable = v;\n\t\treturn this;\n\t}\n\treturn this.sort_variable;\n}\n\nWOQLChooserConfig.prototype.direction = function(v){\n\tif(v){\n\t\tthis.sort_direction = v;\n\t\treturn this;\n\t}\n\treturn this.sort_direction;\n}\n\n\nfunction WOQLChooserRule(scope){\n\tConfig.WOQLViewRule.call(this,scope); \n};\n\nWOQLChooserRule.prototype = Object.create(Config.WOQLViewRule.prototype);\nWOQLChooserRule.prototype.constructor = Config.WOQLViewRule;\n\nWOQLChooserRule.prototype.label = function(l){\n\tif(l){\n\t\tthis.rule.label = l;\n\t\treturn this;\n\t}\n\treturn this.rule.label;\n}\n\nWOQLChooserRule.prototype.title = function(l){\n\tif(l){\n\t\tthis.rule.title = l;\n\t\treturn this;\n\t}\n\treturn this.rule.title;\n}\n\nWOQLChooserRule.prototype.values = function(l){\n\tif(l){\n\t\tthis.rule.values = l;\n\t\treturn this;\n\t}\n\treturn this.rule.values;\n}\n\nWOQLChooserRule.prototype.selected = function(s){\n\tif(typeof s != \"undefined\"){\n\t\tthis.rule.selected = s;\n\t\treturn this;\n\t}\n\treturn this.rule.selected;\n}\n\nWOQLChooserRule.prototype.prettyPrint = function(type){\n\tvar str = WOQLViewRule.prototype.prettyPrint.apply(this);\n    if(typeof this.selected() != \"undefined\"){\n\t    str += \".selected(\" + this.selected() + \")\";\n    }\n    if(typeof this.label() != \"undefined\"){\n\t    str += \".label(\\\"\" + this.label() + \"\\\")\";\n    }\n    if(typeof this.title() != \"undefined\"){\n\t    str += \".title(\\\"\" + this.title() + \"\\\")\";\n    }\n    if(typeof this.values() != \"undefined\"){\n\t    str += \".values(\\\"\" + this.values() + \"\\\")\";\n\t}\n\treturn str;\n}\n\nmodule.exports = WOQLChooserConfig;","const WOQLChooserConfig = require(\"./chooserConfig\");\nconst UTILS = require('../utils');\nconst WOQLRule = require('../woqlRule');\n\n/*\n * Very simple implementation of a WOQL backed chooser\n * Makes a drop down from a WOQL query - configuration tells it which columns to use...\n */\nfunction WOQLChooser(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new WOQLChooserConfig());\n\tthis.selected = false;\n\tthis.cursor = 0;\n\treturn this;\n}\n\nWOQLChooser.prototype.options = function(config){\n\tthis.config = config;\n\treturn this;\n}\n\nWOQLChooser.prototype.set = function(id){\n\tif(this.selected != id){\n\t\tthis.selected = id;\n\t\tlet ch = this.config.change;\n\t\tif(ch) ch(id);\n\t}\n}\n\n/*\n * Sets up the required variables from the result / config\n */\nWOQLChooser.prototype.setResult = function(result){\n\tthis.result = result;\n\tthis.choices = [];\n\tlet rows = 0;\n\tconst variables = result.getVariableList();\n\tif(!this.config.values() && variables.length){\n\t\tthis.config.values(variables[0]);\n\t}\n\t//sort it \n\tif(this.config.sort()){\n\t\tthis.result.sort(this.config.sort(), this.config.direction());\n\t}\n\twhile(row = this.result.next()){\n\t\tif(row && this.includeRow(row, this.result.cursor)){\n\t\t\tthis.choices.push(this.rowToChoice(row, rows++));\n\t\t}\t\t\n\t}\n\treturn this;\n}\n\nWOQLChooser.prototype.includeRow = function(row, index){\n\tconst matched_rules = new WOQLRule().matchRow(this.config.rules, row, index, \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].rule.hidden) return false;\n\t}\n\treturn true;\n}\n\nWOQLChooser.prototype.rowToChoice = function(row, rownum){\n\tvar choice = { \n\t\tid: this.getRowID(row) \n\t};\n\tchoice.label = this.getLabelFromBinding(row, rownum);\n\tchoice.title = this.getTitleFromBinding(row, rownum);\n\tchoice.selected = this.getSelectedFromBinding(row, rownum);\n\treturn choice;\n}\n\nWOQLChooser.prototype.getRowID = function(row){\n\tvar rval = row[this.config.values()];\n\tif(rval['@value']) return rval['@value'];\n\treturn rval;\n}\n\nWOQLChooser.prototype.getLabelFromBinding = function(row, rownum){\n\tlet sp = this.getSpecialRenderer(row, rownum, \"label\");\n\tif(sp) return this.renderSpecial(sp, row, rownum);\n\tif(this.config.labels()){\n\t\tif(row[this.config.labels()]){\n\t\t\tvar lab = row[this.config.labels()];\n\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\n\t\t\tif(lab != \"unknown\") return lab;\n\t\t}\n\t}\n\treturn UTILS.labelFromURL(this.getRowID(row));\n}\n\nWOQLChooser.prototype.getTitleFromBinding = function(row, rownum){\n\tlet sp = this.getSpecialRenderer(row, rownum, \"title\");\n\tif(sp) return this.renderSpecial(sp, row, rownum);\n\tif(this.config.titles()){\n\t\tif(row[this.config.titles()]){\n\t\t\tvar lab = row[this.config.titles()];\n\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\n\t\t\tif(lab != \"unknown\") return lab;\n\t\t}\n\t}\n\treturn false;\n}\n\nWOQLChooser.prototype.getSelectedFromBinding = function(row, rownum){\n\tconst matched_rules =  new WOQLRule().matchRow(this.config.rules, row, rownum, \"selected\");\n\tif(matched_rules && matched_rules.length){\n\t\treturn matched_rules[matched_rules.length - 1].rule.selected;\n\t}\n\treturn false;\n}\n\nWOQLChooser.prototype.render = function(){\n\tif(this.renderer) return this.renderer.render(this);\n}\n\nWOQLChooser.prototype.setRenderer = function(rend){\n\tthis.renderer = rend;\n\treturn this;\n}\n\nWOQLChooser.prototype.getSpecialRenderer = function(row, index, type){\n\tconst matched_rules =  new WOQLRule().matchRow(this.config.rules, row, index, type);\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].rule[type]) return matched_rules[i].rule[type];\n\t}\n\treturn false;\n}\n\nWOQLChooser.prototype.renderSpecial = function(rule, row, rownum){\n\tif(rule && typeof rule == \"function\"){\n\t\treturn rule(row);\n\t}\n\tif(rule && typeof rule == \"string\"){\n\t\treturn rule;\n\t}\n}\n\nWOQLChooser.prototype.count = function(){\n\treturn this.result.count();\n}\n\nWOQLChooser.prototype.first = function(){\n\tthis.cursor = 0;\n\treturn this.choices[this.cursor];\n}\n\nWOQLChooser.prototype.next = function () {\n\tconst res = this.choices[this.cursor];\n\tthis.cursor++;\n\treturn res;\n};\n\nWOQLChooser.prototype.prev = function () {\n\tif (this.cursor > 0) {\n\t\tthis.cursor--;\n\t\treturn this.choices[this.cursor];\n\t}\n};\n\nmodule.exports = WOQLChooser;","const Config  = require('./viewConfig.js');\nconst WOQLGraph  = require('./woqlGraph.js');\nconst UTILS  = require('../utils.js');\n\nfunction WOQLGraphConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"graph\";\n}\n\nWOQLGraphConfig.prototype = Object.create(Config.ViewConfig.prototype);\nWOQLGraphConfig.prototype.constructor = Config.ViewConfig;\n\nWOQLGraphConfig.prototype.create = function(client){\n\tvar wqt = new WOQLGraph(client, this);\n\treturn wqt;\n}\n\nWOQLGraphConfig.prototype.literals = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.show_literals = v;\n\t\treturn this;\n\t}\n\treturn this.show_literals;\n}\n\nWOQLGraphConfig.prototype.source = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.source_variable = v;\n\t\treturn this;\n\t}\n\treturn this.source_variable;\n}\n\nWOQLGraphConfig.prototype.fontfamily = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.fontfam = v;\n\t\treturn this;\n\t}\n\t//return 'Font Awesome 5 Free';\n\treturn this.fontfam;\n}\n\nWOQLGraphConfig.prototype.show_force = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.force = v;\n\t\treturn this;\n\t}\n\treturn this.force;\n}\n\nWOQLGraphConfig.prototype.fix_nodes = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.fixed = v;\n\t\treturn this;\n\t}\n\treturn this.fixed;\n}\n\nWOQLGraphConfig.prototype.explode_out = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.explode = v;\n\t\treturn this;\n\t}\n\treturn this.explode;\n}\n\nWOQLGraphConfig.prototype.selected_grows = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.bigsel = v;\n\t\treturn this;\n\t}\n\treturn this.bigsel;\n}\n\n/**\n * no parameter get the graph width or\n * set the graph width and return the WOQLGraphConfig\n * @param {size} Number\n */\n\nWOQLGraphConfig.prototype.width = function(size){\n\tif(typeof size != \"undefined\"){\n\t\tthis.gwidth = size;\n\t\treturn this;\n\t}\n\treturn this.gwidth;\n}\n\n/**\n * no parameter get the graph height or\n * set the graph height and return the WOQLGraphConfig\n * @param {size} Number\n */\n\nWOQLGraphConfig.prototype.height = function(size){\n\tif(typeof size != \"undefined\"){\n\t\tthis.gheight = size;\n\t\treturn this;\n\t}\n\treturn this.gheight;\n}\n\nWOQLGraphConfig.prototype.edges = function(...edges){\n\tif(edges && edges.length){\n\t\tvar nedges = [];\n\t\tfor(var i = 0; i<edges.length; i++){\n\t\t\tnedges.push(UTILS.addNamespacesToVariables(edges[i]));\n\t\t}\n\t\tthis.show_edges = nedges;\n\t\treturn this;\n\t}\n\treturn this.show_edges;\n}\n\nWOQLGraphConfig.prototype.edge = function(source, target){\n\tlet nr = new WOQLGraphRule().edge(source, target);\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\nWOQLGraphConfig.prototype.node = function(...cols){\n\tlet nr = new WOQLGraphRule();\n\tif(cols && cols.length){\n\t\tnr.scope(\"node\").setVariables(cols);\n\t}\n\telse {\n\t\tnr.scope(\"row\");\n\t}\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\nWOQLGraphConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLGraphRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(typeof config.literals != \"undefined\"){\n\t\tthis.literals(config.literals);\n\t}\n\tif(typeof config.source != \"undefined\"){\n\t\tthis.source(config.source);\n\t}\n\tif(typeof config.fontfamily != \"undefined\"){\n\t\tthis.fontfamily(config.fontfamily);\n\t}\n\tif(typeof config.show_force != \"undefined\"){\n\t\tthis.show_force(config.show_force);\n\t}\n\tif(typeof config.fix_nodes != \"undefined\"){\n\t\tthis.fix_nodes(config.fix_nodes);\n\t}\n\tif(typeof config.explode_out != \"undefined\"){\n\t\tthis.explode_out(config.explode_out);\n\t}\n\tif(typeof config.selected_grows != \"undefined\"){\n\t\tthis.selected_grows(config.selected_grows);\n\t}\n\tif(typeof config.width != \"undefined\"){\n\t\tthis.width(config.width);\n\t}\n\tif(typeof config.height != \"undefined\"){\n\t\tthis.height(config.height);\n\t}\n\tif(typeof config.edges != \"undefined\"){\n\t\tthis.edges(...config.edges);\n\t}\n}\n\nWOQLGraphConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = View.graph();\\n\";\n\tif(typeof this.literals() != \"undefined\"){\n\t\tstr += \"view.literals('\" + this.literals() + \"')\\n\";\n\t}\n\tif(typeof this.source() != \"undefined\"){\n\t\tstr += \"view.source('\" + UTILS.removeNamespaceFromVariable(this.source()) + \"')\\n\";\n\t}\n\tif(typeof this.fontfamily() != \"undefined\"){\n\t\tstr += \"view.fontfamily('\" + this.fontfamily() + \"')\\n\";\n\t}\n\tif(typeof this.show_force() != \"undefined\"){\n\t\tstr += \"view.show_force('\" + this.show_force() + \"')\\n\";\n\t}\n\tif(typeof this.fix_nodes() != \"undefined\"){\n\t\tstr += \"view.fix_nodes('\" + this.fix_nodes() + \"')\\n\";\n\t}\n\tif(typeof this.explode_out() != \"undefined\"){\n\t\tstr += \"view.explode_out('\" + this.explode_out() + \"')\\n\";\n\t}\n\tif(typeof this.selected_grows() != \"undefined\"){\n\t\tstr += \"view.selected_grows('\" + this.selected_grows() + \"')\\n\";\n\t}\n\tif(typeof this.width() != \"undefined\"){\n\t\tstr += \"view.width('\" + this.width() + \"')\\n\";\n\t}\n\tif(typeof this.height() != \"undefined\"){\n\t\tstr += \"view.height('\" + this.height() + \"')\\n\";\n\t}\n\tif(typeof this.edges() != \"undefined\"){\n\t\tvar nedges = this.edges();\n\t\tvar estrs = [];\n\t\tfor(var i = 0; i<nedges.length; i++){\n\t\t\testrs.push(\"['\" + nedges[i][0] + \", \" + nedges[i][1] + \"']\");\n\t\t}\n\t\tstr += \"view.edges('\" + estrs.join(\", \") + \"')\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tlet x = this.rules[i].prettyPrint();\n\t\tif(x) str += \"view.\" + x + \"\\n\";\t\t\n\t}\n\treturn str;\n}\n\nWOQLGraphConfig.prototype.json = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\tvar json = {};\n\tif(typeof this.literals() != \"undefined\"){\n\t\tjson['literals'] = this.literals();\n\t}\n\tif(typeof this.source() != \"undefined\"){\n\t\tjson['source'] = this.source();\n\t}\n\tif(typeof this.fontfamily() != \"undefined\"){\n\t\tjson['fontfamily'] = this.fontfamily();\n\t}\n\tif(typeof this.show_force() != \"undefined\"){\n\t\tjson['show_force'] = this.show_force();\n\t}\n\tif(typeof this.fix_nodes() != \"undefined\"){\n\t\tjson['fix_nodes'] = this.fix_nodes();\n\t}\n\tif(typeof this.explode_out() != \"undefined\"){\n\t\tjson['explode_out'] = this.explode_out();\n\t}\n\tif(typeof this.selected_grows() != \"undefined\"){\n\t\tjson['selected_grows'] = this.selected_grows();\n\t}\n\tif(typeof this.width() != \"undefined\"){\n\t\tjson['width'] = this.width();\n\t}\n\tif(typeof this.height() != \"undefined\"){\n\t\tjson['height'] = this.height();\n\t}\n\tif(typeof this.edges() != \"undefined\"){\n\t\tjson['edges'] = this.edges();\n\t}\n\tlet mj = {\"graph\" :json, \"rules\": jr};\n\treturn mj;\n}\n\nfunction WOQLGraphRule(scope){\n\tConfig.WOQLViewRule.call(this,scope); \n};\n\nWOQLGraphRule.prototype = Object.create(Config.WOQLViewRule.prototype);\nWOQLGraphRule.prototype.constructor = Config.WOQLViewRule;\n\nWOQLGraphRule.prototype.charge = function(v){\n\tif(typeof v == \"undefined\"){\n\t\treturn this.rule.charge;\n\t}\n\tthis.rule.charge = v;\n\treturn this;\n}\n\nWOQLGraphRule.prototype.collisionRadius = function(v){\n\tif(typeof v == \"undefined\"){\n\t\treturn this.rule.collisionRadius;\n\t}\n\tthis.rule.collisionRadius = v;\n\treturn this;\n}\n\nWOQLGraphRule.prototype.arrow = function(json){\n\tif(json){\n\t\tthis.rule.arrow = json;\n\t\treturn this;\n\t}\n\treturn this.rule.arrow;\n}\n\nWOQLGraphRule.prototype.distance = function(d){\n\tif(typeof d != \"undefined\"){\n\t\tthis.rule.distance = d;\n\t\treturn this;\n\t}\n\treturn this.rule.distance;\n}\n\nWOQLGraphRule.prototype.symmetric = function(d){\n\tif(typeof d != \"undefined\"){\n\t\tthis.rule.symmetric = d;\n\t\treturn this;\n\t}\n\treturn this.rule.symmetric ;\n}\n\n\nWOQLGraphRule.prototype.weight = function(w){\n\tif(typeof w != \"undefined\"){\n\t\tthis.rule.weight = w;\n\t\treturn this;\n\t}\n\treturn this.rule.weight;\n}\n\nWOQLGraphRule.prototype.prettyPrint = function(type){\n\tvar str = Config.WOQLViewRule.prototype.prettyPrint.apply(this);\n\tif(typeof this.charge() != \"undefined\"){\n\t\tstr += \".charge('\" + this.charge() + \"')\";\n\t}\n\tif(typeof this.distance() != \"undefined\"){\n\t\tstr += \".distance('\" + this.distance() + \"')\";\n\t}\n\tif(typeof this.weight() != \"undefined\"){\n\t\tstr += \".weight('\" + this.weight() + \"')\";\n\t}\n\tif(typeof this.symmetric() != \"undefined\"){\n\t\tstr += \".symmetric(\" + this.symmetric() + \")\";\n\t}\n\tif(typeof this.collisionRadius() != \"undefined\"){\n\t\tstr += \".collisionRadius(\" + this.collisionRadius() + \")\";\n\t}\t\n\tif(typeof this.arrow() != \"undefined\"){\n\t\tstr += \".arrow(\" + JSON.stringify(this.arrow()) + \")\";\n\t}\n\treturn str;\n}\n\nmodule.exports = WOQLGraphConfig;","const WOQLGraphConfig = require(\"./graphConfig\");\nconst UTILS = require('../utils');\nconst WOQLRule = require('../woqlRule');\n\nfunction WOQLGraph(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new WOQLGraphConfig());\n\tthis.nodes = [];\n\tthis.edges = [];\n}\n\nWOQLGraph.prototype.options = function(config){\n\tthis.config = config;\n\treturn this;\n}\n\nWOQLGraph.prototype.setResult = function(result){\n\tthis.result = result;\n\tthis.calculateVariableTypes(result);\n}\n\nWOQLGraph.prototype.calculateVariableTypes = function(){\n\tvar bindings = this.result.getBindings();\n\tif(bindings && bindings.length){\n\t\tfor(var i = 0; i<bindings.length; i++){\n\t\t\tthis.extractFromBinding(bindings[i], i);\n\t\t}\n\t}\n\tthis.edges = this.combineEdges(this.edges);\n\tthis.nodes = this.combineNodes(this.nodes);\n}\n\nWOQLGraph.prototype.extractFromBinding = function(row, rownum){\n\t//\n\tif(this.includeRow(row, rownum)){\n\t\t//get all the nodes (ids - non literals) //\n\t\t//see which nodes are excluded ...\n\t\tvar nodes = [];\n\t\tvar lits = [];\n\t\tfor(var k in row){\n\t\t\tif(typeof row[k] == \"string\"){\n\t\t\t\tif(row[k] && row[k] != \"unknown\" && this.includeNode(k, row)) nodes.push(k);\n\t\t\t}\n\t\t\telse if(row[k][\"@value\"] && this.includeLiteralNode(k, row)){\n\t\t\t\tlits.push(k);\n\t\t\t}\n\t\t}\n\t\tif(nodes.length == 0) return;\n\t\t//first of all we need to make the literal nodes targets of \n\t\tfor(var i = 0; i<lits.length; i++){\n\t\t\t//make an edge and put the lit in as a node...\n\t\t\tvar nid = UTILS.genBNID().substring(2);\n\t\t\tlet source = this.getLiteralOwner(nodes, lits[i], row);\n\t\t\tif(source) {\n\t\t\t\tthis.addAdornedNode(nid, lits[i], row);\n\t\t\t\tthis.addAdornedEdge(row[source], nid, source, lits[i], row);\n\t\t\t}\n\t\t}\n\t\tthis.createEdgesFromIDs(nodes, row);\n\t\tfor(var i = 0; i<nodes.length; i++){\n\t\t\tvar ndid = row[nodes[i]];\n\t\t\tthis.addAdornedNode(ndid, nodes[i], row);\n\t\t}\n\t}\n}\n\nWOQLGraph.prototype.addAdornedEdge = function(source, target, ks, kt, row){\n\tvar edge = { type: \"link\", target: target, source: source, text: kt};\n\tconst matched_rules = new WOQLRule().matchEdge(this.config.rules, row, ks, kt);\n\tvar hid = false;\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tvar rule = matched_rules[i].rule;\n\t\tif(typeof rule.hidden != \"undefined\"){\n\t\t\thid = rule.hidden;\n\t\t}\n\t\tif(rule.size){\n\t\t\tedge.radius = UTILS.getConfigValue(rule.size, row);\n\t\t}\n\t\tif(rule.text){\n\t\t\tedge.text = UTILS.getConfigValue(rule.text, row);\n\t\t}\n\t\tif(rule.color){\n\t\t\tedge.color = UTILS.getConfigValue(rule.color, row);\n\t\t}\n\t\tif(rule.distance){\n\t\t\tedge.distance = UTILS.getConfigValue(rule.distance, row);\n\t\t}\n\t\tif(rule.arrow){\n\t\t\tedge.arrow = UTILS.getConfigValue(rule.arrow, row);\n\t\t}\n\t\tif(rule.symmetric){\n\t\t\tedge.symmetric = UTILS.getConfigValue(rule.symmetric, row);\n\t\t}\n\t\tif(rule.weight){\n\t\t\tedge.weight = UTILS.getConfigValue(rule.weight, row);\n\t\t}\n\t}\n\tif(!hid) this.edges.push(edge);\t\n}\n\nWOQLGraph.prototype.addAdornedNode = function(nid, k, row){\n\tvar node = { type: \"node\", id: nid, nodetype: k };\n\tconst matched_rules = new WOQLRule().matchNode(this.config.rules, row, k, nid);\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tvar rule = matched_rules[i].rule;\n\t\tif(rule.size){\n\t\t\tnode.radius = UTILS.getConfigValue(rule.size, row);\n\t\t}\n\t\tif(rule.color){\n\t\t\tnode.color = UTILS.getConfigValue(rule.color, row);\n\t\t}\n\t\tif(rule.charge){\n\t\t\tnode.charge = UTILS.getConfigValue(rule.charge, row);\n\t\t}\n\t\tif(rule.collisionRadius ){\n\t\t\tnode.collisionRadius = UTILS.getConfigValue(rule.collisionRadius, row);\n\t\t}\n\t\tif(rule.icon ){\n\t\t\tnode.icon = UTILS.getConfigValue(rule.icon, row);\n\t\t}\n\t\tif(rule.text){\n\t\t\tnode.text = UTILS.getConfigValue(rule.text, row);\n\t\t}\n\t\tif(rule.border){\n\t\t\tnode.border = UTILS.getConfigValue(rule.border, row);\n\t\t}\n\t}\n\tif(!node.text){\n\t\tif(typeof row[k] == \"string\") node.text = row[k];\n\t\telse if(row[k]['@value']) node.text = row[k]['@value'];\n\t}\n\tthis.nodes.push(node);\n}\n\nWOQLGraph.prototype.getLiteralOwner = function(nodes, v, row){\n\tvar cs = this.config.source();\n\tif(cs && row[cs]){\n\t\treturn cs;\n\t}\n\tvar edges = this.config.edges();\n\tif(edges){\n\t\tfor(var i = 0; i < edges.length; i++){\n\t\t\tif(edges[i][1] == v){\n\t\t\t\treturn edges[i][0];\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\treturn nodes[0];\n}\n\nWOQLGraph.prototype.createEdgesFromIDs = function(nodes, row){\n\tif(nodes.length < 2) return;\n\tvar cs = this.config.source();\n\tlet es = this.config.edges();\n\tif(!cs && es && es.length){\n\t\tfor(var i = 0; i< es.length; i++){\n\t\t\tif(nodes.indexOf(es[i][0]) != -1 && nodes.indexOf(es[i][1]) != -1 ){\n\t\t\t\tthis.addAdornedEdge(row[es[i][0]], row[es[i][1]], es[i][0], es[i][1], row);\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\tvar s = (cs && nodes.indexOf(cs) != -1) ? cs : nodes[0];\n\tfor(var i = 0; i<nodes.length; i++){\n\t\tif(nodes[i] == s) continue;\n\t\tthis.addAdornedEdge(row[s], row[nodes[i]], s, nodes[i], row);\n\t}\n}\n\n\nWOQLGraph.prototype.getEdges = function(){\n\treturn this.edges;\n}\n\nWOQLGraph.prototype.combineNodes = function(nodes){\n\tvar nnodes = {};\n\tfor(var i = 0; i<nodes.length; i++){\n\t\tvar n = nodes[i];\n\t\tif(this.nodes_referenced_by_edges.indexOf(n.id) == -1) continue;\n\t\tif(typeof nnodes[n.id] == \"undefined\"){\n\t\t\tnnodes[n.id] = n;\n\t\t}\n\t\telse {\n\t\t\tfor(var k in n){\n\t\t\t\tif(typeof nnodes[n.id][k] == \"undefined\"){\n\t\t\t\t\tnnodes[n.id][k] = n[k];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn Object.values(nnodes);\n}\n\n\nWOQLGraph.prototype.combineEdges = function(edges){\n\tthis.nodes_referenced_by_edges = [];\n\tvar nedges = {};\n\tfor(var i = 0; i<edges.length; i++){\n\t\tvar e = edges[i];\n\t\tif(typeof nedges[e.source] == \"undefined\"){\n\t\t\tnedges[e.source] = {};\n\t\t}\n\t\tif(typeof nedges[e.source][e.target] == \"undefined\"){\n\t\t\tnedges[e.source][e.target] = e;\n\t\t}\n\t\telse {\n\t\t\tfor(var k in e){\n\t\t\t\tif(typeof nedges[e.source][e.target][k] == \"undefined\") nedges[e.source][e.target][k] = e[k];\n\t\t\t}\n\t\t}\n\t\tif(this.nodes_referenced_by_edges.indexOf(e.source) == -1) this.nodes_referenced_by_edges.push(e.source);\n\t\tif(this.nodes_referenced_by_edges.indexOf(e.target) == -1) this.nodes_referenced_by_edges.push(e.target);\n\t}\n\tvar fedges = [];\n\tfor(var k in nedges){\n\t\tfor(var k2 in nedges[k]){\n\t\t\tfedges.push(nedges[k][k2]);\n\t\t}\n\t}\n\treturn fedges;\n}\n\n\n\nWOQLGraph.prototype.getNodes = function(){\n\treturn  this.nodes;\n}\n\n\n\nWOQLGraph.prototype.includeNode = function(v, row){\n\tconst matched_rules = new WOQLRule().matchNode(this.config.rules, row, v, false, \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].rule.hidden) return false;\n\t}\n\treturn true;\n}\n\nWOQLGraph.prototype.includeLiteralNode = function(v, row){\n\tlet l = this.config.literals();\n\tif(typeof l != \"undefined\" && !l) return false;\n\tconst matched_rules = new WOQLRule().matchNode(this.config.rules, row, v, false, \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].rule.hidden) return false;\n\t}\n\treturn true;\n}\n\n\nWOQLGraph.prototype.includeRow = function(row, num){\n\tconst matched_rules = new WOQLRule().matchRow(this.config.rules, row, num, \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].rule.hidden) return false;\n\t}\n\treturn true;\n}\n\n\n\nmodule.exports = WOQLGraph;","\nconst Config  = require('./viewConfig.js');\nconst WOQLChart  = require('./woqlChart.js');\n\nfunction WOQLChartConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"chart\";\n}\n\nWOQLChartConfig.prototype = Object.create(Config.ViewConfig.prototype);\nWOQLChartConfig.prototype.constructor = Config.ViewConfig;\n\n\nWOQLChartConfig.prototype.prettyPrint = function(){\n    var str = \"view = View.chart();\\n\";\n    for(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint() + \"\\n\";\n\t}\n\tif(typeof this.margin() != \"undefined\"){\n\t\tstr += \"view.margin(\" + this.margin() + \")\\n\";\n\t}\n\tif(typeof this.title() != \"undefined\"){\n\t\tstr += \"view.title('\" + this.title() + \"')\\n\";\n\t}\n\tif(typeof this.description() != \"undefined\"){\n\t\tstr += \"view.description('\" + this.description() + \"')\\n\";\n\t}\n\tif(typeof this.layout() != \"undefined\"){\n\t\tstr += \"view.layout('\" + this.layout() + \"')\\n\";\n\t}\n\t\n    str += this.getBasicPrettyPrint();\n\treturn str;\n}\n\nWOQLChartConfig.prototype.json = function(){\n\t/*\n\t*general properties \n\t*/\n\tvar conf = {};\n\tif(typeof this.margin() != \"undefined\"){\n\t\tconf['margin'] = this.margin();\n\t}\n\tif(typeof this.title() != \"undefined\"){\n\t\tconf['title'] = this.title();\n\t}\n\tif(typeof this.description() != \"undefined\"){\n\t\tconf['description'] = this.description();\n\t}\n\tif(typeof this.layout() != \"undefined\"){\n\t\tconf['layout'] = this.layout();\n\t}\n\n\tlet mj = {\"chart\" :conf, \"rules\": this.getRulesJSON()};\n\treturn mj;\n}\n\nWOQLChartConfig.prototype.loadJSON = function(config, rules){\n    this.loadBasicJSON(config);\n    var jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLChartRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(typeof config.margin != \"undefined\"){\n\t\tthis.margin(config.margin);\n\t}\n\tif(typeof config.title != \"undefined\"){\n\t\tthis.title(config.title);\n\t}\n\tif(typeof config.description != \"undefined\"){\n\t\tthis.description(config.description);\n\t}\n\tif(typeof config.layout != \"undefined\"){\n\t\tthis.layout(config.layout);\n\t}\n}\n\nWOQLChartConfig.prototype.title = function(title){\n\tif(typeof title == \"undefined\"){\n\t\treturn this._title;\n\t}\n\tthis._title = title;\n\treturn this;\n}\n\nWOQLChartConfig.prototype.description=function(description){\n\tif(description){\n\t\tthis._description=description;\n\t\treturn this\n\t}\n\treturn this._description;\n}\n\n//layout \"vertical\" | \"horizontal\"\nWOQLChartConfig.prototype.layout=function(layout){\n\tif(layout){\n\t\tthis._layout=layout;\n\t\treturn this\n\t}\n\treturn this._layout;\n}\n\n\n//default is { top: 10, right: 30, left: 0, bottom: 80 }\nWOQLChartConfig.prototype.margin=function(marginObj){\n\tif(marginObj){\n\t\tthis._margin=marginObj;\n\t\treturn this\n\t}\n\n\treturn this._margin;\n}\n\n\nWOQLChartConfig.prototype.create = function(client){\n\tvar wqt = new WOQLChartConfig(client, this);\n\treturn wqt;\n}\n\n/*\n{\"XAxis\":{dataKey:\"date_i\",type:'number'}\n\t\t\t\t\t\t\t,\"chartObj\":\n\t\t\t\t\t\t\t[{'label':'Confident','dataKey':'conf',\"chartType\":\"Area\",\n\t\t\t\t\t\t\t\"style\":{\"stroke\":\"#82ca9d\", \"fillOpacity\":1, \"fill\":\"#82ca9d\"}},\n\t\t\t\t\t\t\t {'label':'Predictions','dataKey':'predictions',\"chartType\":\"Line\",\n\t\t\t\t\t\t\t \"style\":{\"strokeWidth\":2, \"stroke\":\"#ff8000\"}},\n\t\t\t\t\t\t\t {'label':'Picks','dataKey':'picks',\"chartType\":\"Point\",\"style\": \n\t\t\t\t\t\t\t {\"stroke\": '#8884d8', \"fill\": '#8884d8'}},\n\t\t\t\t\t\t\t {'label':'Stock','dataKey':'stock',\"chartType\":\"Line\",\"style\":\n\t\t\t\t\t\t\t  {\"stroke\": '#0000ff', \"fill\": '#0000ff'}}]}\n\n{\"XAxis\":{dataKey:\"v:Date\",\"label\":{rotate:\"-50\"}},\"chartObj\":\n\t\t\t\t\t\t\t  \t[{'dot':true, 'label':'Quantity','dataKey':'v:Quantity',\"chartType\":\"Line\",  \n\t\t\t\t\t\t\t  \t  \"style\": {\"stroke\": '#FF9800', \"fill\": '#FF9800'}}]\n\t\t\t\t\t\t\t  }\n*/\n\n\nWOQLChartConfig.prototype.xAxis = function(...vars){\n\tlet woqlRule = new WOQLChartRule().scope(\"XAxis\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.legend = function(...vars){\n\tlet woqlRule = new WOQLChartRule().scope(\"Legend\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.yAxis = function(...vars){\n\tlet woqlRule = new WOQLChartRule().scope(\"YAxis\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.bar = function(...vars){\n\tlet woqlRule=new WOQLChartRule().scope(\"Bar\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.line=function(...vars){\n\tlet woqlRule=new WOQLChartRule().scope(\"Line\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.point=function(...vars){\n\tlet woqlRule=new WOQLChartRule().scope(\"Point\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.area=function(...vars){\n\tlet woqlRule=new WOQLChartRule().scope(\"Area\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\n//fillOpacity\n/**\n * \n * @param {Chart} scope  \n */\nfunction WOQLChartRule(){\n\tConfig.WOQLViewRule.call(this); \n};\n\nWOQLChartRule.prototype = Object.create(Config.WOQLViewRule.prototype);\nWOQLChartRule.prototype.constructor = Config.WOQLViewRule;\n\nWOQLChartRule.prototype.style=function(key,value){\n\tif(value){\n\t\tthis.rule[key]=value;\n\t\treturn this;\n\t}\n\treturn this.rule[key];\n}\n\nWOQLChartRule.prototype.label = function(label){\n\tif(label){\n\t\tthis.rule.label = label;\n\t\treturn this;\n\t}\n\treturn this.rule.label;\n}\n\n/*\n*line is the default value\n* 'line' | 'square' | 'rect'| 'circle' | 'cross' | 'diamond' | 'square' | 'star' | 'triangle' | 'wye' | 'none'\n*/\n\nWOQLChartRule.prototype.legendType = function(legendType){\n\tif(legendType){\n\t\tthis.rule.legendType = legendType;\n\t\treturn this;\n\t}\n\treturn this.rule.legendType;\n}\n\n\nWOQLChartRule.prototype.fillOpacity = function(fillOpacity){\n\tif(fillOpacity || fillOpacity===0){\n\t\tthis.rule.fillOpacity = fillOpacity;\n\t\treturn this;\n\t}\n\treturn this.rule.fillOpacity;\n}\n\n\n\n\nWOQLChartRule.prototype.fill=function(color){\n\tif(color){\n\t\tthis.rule.fill = color;\n\t\treturn this;\n\t}\n\treturn this.rule.fill;\n}\n\nWOQLChartRule.prototype.stroke=function(color){\n\tif(color){\n\t\tthis.rule['stroke'] = color;\n\t\treturn this;\n\t}\n\treturn this.rule['stroke'];\n}\n\n\nWOQLChartRule.prototype.strokeWidth=function(size){\n\tif(typeof size != \"undefined\"){\n\t\tthis.rule.strokeWidth = size;\n\t\treturn this;\n\t}\n\treturn this.rule.strokeWidth;\n}\n\n\nWOQLChartRule.prototype.dot=function(isVisible){\n\tif(typeof isVisible != \"undefined\"){\n\t\tthis.rule.dot = isVisible;\n\t\treturn this;\n\t}\n\treturn this.rule.dot;\n}\n\nWOQLChartRule.prototype.labelRotate=function(angle){\n\tif(angle!==undefined){\n\t\tthis.rule.labelRotate = angle;\n\t\treturn this\n\t}\n\treturn this.rule.labelRotate;\n}\n\n//Specify the padding of x-axis. DEFAULT: { left: 0, right: 0 }\nWOQLChartRule.prototype.padding=function(paddingObj){\n\tif(paddingObj){\n\t\tthis.rule.padding=paddingObj;\n\t\treturn this\n\t}\n\n\treturn this.rule.padding;\n}\n\n/*\n* \n*/\n\nWOQLChartRule.prototype.labelDateInput=function(labelDateInput){\n\tif(labelDateInput){\n\t\tthis.rule.labelDateInput=labelDateInput\n\t\treturn this;\n\t}\n\treturn this.rule.labelDateInput\n}\n\n/*\n* output date example 'YYYY-MM-DD' : 2020:03:11 or ''YYYY [text] YYYY',  2020 mytext 2020' \n*/\n\nWOQLChartRule.prototype.labelDateOutput=function(labelDateOutput){\n\tif(labelDateOutput){\n\t\tthis.rule.labelDateOutput=labelDateOutput\n\t\treturn this;\n\t}\n\treturn this.rule.labelDateOutput\n}\n\nWOQLChartRule.prototype.stackId=function(stackId){\n\tif(stackId){\n\t\tthis.rule.stackId=stackId\n\t\treturn this;\n\t}\n\treturn this.rule.stackId\n}\n\n\n\n/*\n* The type of xAxis 'number' | 'category' default is 'category' \n* The type of yAxis 'number' | 'category' default is 'number' \n* The type of line chart 'basis'|'basisClosed'|'basisOpen'|'linear'|'linearClosed'|'natural'|'monotoneX'|'monotoneY'|'monotone' | 'step' | 'stepBefore' | 'stepAfter' | \n*/\n\n\n\nWOQLChartRule.prototype.type=function(type){\n\tif(type){\n\t\tthis.rule.type=type\n\t\treturn this;\n\t}\n\treturn this.rule.type\n}\n/*\n* works only if type is number\n* domainArr =[min,max];\n*/\nWOQLChartRule.prototype.axisDomain=function(domainArr){\n\tif(domainArr){\n\t\tthis.rule.domain=domainArr\n\t\treturn this;\n\t}\n\treturn this.rule.domain\n}\n\n/*\n* \n* @param {string} name of the variable for the custom color\n*/\n\nWOQLChartRule.prototype.colorEntry=function(propValue){\n\tif(propValue){\n\t\tthis.rule.colorEntry=propValue\n\t\treturn this;\n\t}\n\treturn this.rule.colorEntry\n}\n\n/*\n* \n* @param {object} an object of possible value and color {\"value1\":\"#ff0000\"...}\n*/\n\nWOQLChartRule.prototype.customColors=function(colorsObj){\n\tif(colorsObj){\n\t\tthis.rule.customColors=colorsObj\n\t\treturn this;\n\t}\n\treturn this.rule.customColors\n}\n\n/*\n* @param {array} payload array of the object for descrive the legend [{value:\"legend label\",color:\"#ff0000\",type:\"rect\"}]\n*/\n\nWOQLChartRule.prototype.payload=function(payloadArr){\n\tif(payloadArr){\n\t\tthis.rule.payload=payloadArr\n\t\treturn this;\n\t}\n\treturn this.rule.payload\n}\n\n\nWOQLChartRule.prototype.barSize=function(barSize){\n\tif(barSize){\n\t\tthis.rule.barSize=barSize\n\t\treturn this;\n\t}\n\treturn this.rule.barSize\n}\n\nmodule.exports = WOQLChartConfig;","const WOQLChartConfig = require(\"./chartConfig\");\n\nfunction WOQLChart(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new WOQLChartConfig());\n\treturn this;\n}\n\nWOQLChart.prototype.options = function(config){\n\tthis.config = config;\n\treturn this;\n}\n\nWOQLChart.prototype.setResult = function(res){\n\tthis.result = res;\n\treturn this;\n}","const Config  = require('./viewConfig.js');\nconst WOQLStream  = require('./woqlStream.js');\n\nfunction WOQLStreamConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"stream\";\n}\n\nWOQLStreamConfig.prototype = Object.create(Config.ViewConfig.prototype);\nWOQLStreamConfig.prototype.constructor = Config.ViewConfig;\n\nWOQLStreamConfig.prototype.create = function(client){\n\tvar wqt = new WOQLStream(client, this);\n\treturn wqt;\n}\n\nWOQLStreamConfig.prototype.row = function(){\n    var wqt = new WOQLStreamRule().scope(\"row\");\n    this.rules.push(wqt);    \n\treturn wqt;\n}\n\nWOQLStreamConfig.prototype.template = function(template){\n\tif(!template) return this.mtemplate; \n\tthis.mtemplate = template;\n\treturn this;\n}\n\n\nWOQLStreamConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = View.stream();\\n\";\n\tif(typeof this.template() != \"undefined\"){\n\t\tstr += \"view.template(\" + JSON.stringify(this.template()) + \")\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint() + \"\\n\";\n\t}\n\treturn str;\n}\n\nWOQLStreamConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLStreamRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(config.template){\n\t\tthis.mtemplate = config.template;\n\t}\n}\n\nWOQLStreamConfig.prototype.json = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\tvar conf = {};\n\tif(this.mtemplate){\n\t\tconf.template = this.mtemplate;\n\t}\n\tlet mj = {\"stream\" :conf, \"rules\": jr};\n\treturn mj;\n}\n\nfunction WOQLStreamRule(){\n\tConfig.WOQLViewRule.call(this); \n};\n\nWOQLStreamRule.prototype = Object.create(Config.WOQLViewRule.prototype);\nWOQLStreamRule.prototype.constructor = Config.WOQLViewRule;\n\nWOQLStreamRule.prototype.template = function(template){\n\tif(!template) return this.rule.template; \n\tthis.rule.template = template;\n\treturn this;\n}\n\nmodule.exports = WOQLStreamConfig;","const WOQLStreamConfig = require(\"./streamConfig\");\n\nfunction WOQLStream(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new WOQLStreamConfig());\n\treturn this;\n}\n\nWOQLStream.prototype.options = function(config){\n\tthis.config = config;\n\treturn this;\n}\n\nWOQLStream.prototype.setResult = function(wqrs){\n\tthis.result = wqrs;\n}\n\nmodule.exports = WOQLStream;","\nconst Config  = require('./viewConfig.js');\nconst FrameRule  = require('../frameRule.js');\nconst DocumentFrame  = require('./documentFrame.js');\n\n\n/**\n * @file Frame Config \n * @license Apache Version 2\n */\nfunction FrameConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"document\";\n}\n\nFrameConfig.prototype = Object.create(Config.ViewConfig.prototype);\nFrameConfig.prototype.constructor = Config.ViewConfig;\n\nFrameConfig.prototype.create = function(client){\n\tvar tf = new DocumentFrame(client, this);\n\treturn tf;\n}\n\nFrameConfig.prototype.prettyPrint = function(){\n    var str = \"view = View.document();\\n\";\n    str += this.getBasicPrettyPrint();\n\tif(typeof this.load_schema() != \"undefined\"){\n\t\tstr += \"view.load_schema(\" + this.load_schema() + \")\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint() + \"\\n\";\n\t}\n\treturn str;\n}\n\nFrameConfig.prototype.json = function(){\n\tvar conf = this.getBasicJSON();\n\tif(typeof this.load_schema() != \"undefined\"){\n\t\tconf['load_schema'] = this.load_schema();\n\t}\n\tlet mj = {\"frame\" :conf, \"rules\": this.getRulesJSON()};\n\treturn mj;\n}\n\nFrameConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new DocumentRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n    this.rules = jr;\n    this.loadBasicJSON(config);\n\tif(typeof config.load_schema != \"undefined\"){\n\t\tthis.load_schema(config.load_schema);\n\t}\n\treturn this;\n}\n\nFrameConfig.prototype.json_rules = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\treturn jr;\n}\n\nFrameConfig.prototype.load_schema = function(tf){\n\tif(typeof tf == \"undefined\") return this.get_schema;\n\tthis.get_schema = tf;\n\treturn this;\n}\n\nFrameConfig.prototype.show_all = function(r){\n\tthis.all().renderer(r);\n\treturn this;\n}\n\nFrameConfig.prototype.show_parts = function(o, p, d){\n\tthis.object().renderer(o);\n\tthis.property().renderer(p);\n\tthis.data().renderer(d);\n\treturn this;\n}\n\nFrameConfig.prototype.object = function(){\n\tlet fp = new DocumentRule().scope(\"object\");\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\nFrameConfig.prototype.property = function(){\n\tlet fp = new DocumentRule().scope(\"property\");\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\nFrameConfig.prototype.scope = function(scope){\n\tlet fp = new DocumentRule().scope(scope);\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\nFrameConfig.prototype.data = function(){\n\tlet fp = new DocumentRule().scope(\"data\");\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\nFrameConfig.prototype.all = function(){\n\tlet fp = new DocumentRule().scope(\"*\");\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\n/**\n * Attaches display options to frames from matching rules\n */\nFrameConfig.prototype.setFrameDisplayOptions = function(frame, rule){\n\tif(typeof frame.display_options == \"undefined\") frame.display_options = {};\n\tif(typeof rule.mode() != \"undefined\") {\tframe.display_options.mode = rule.mode();}\n\tif(typeof rule.view() != \"undefined\") frame.display_options.view = rule.view();\n\tif(typeof rule.showDisabledButtons() != \"undefined\") frame.display_options.show_disabled_buttons = rule.showDisabledButtons();\n\tif(typeof rule.hidden() != \"undefined\") frame.display_options.hidden = rule.hidden();\n\tif(typeof rule.collapse() != \"undefined\") frame.display_options.collapse = rule.collapse();\n\tif(typeof rule.style() != \"undefined\") frame.display_options.style = rule.style();\n\tif(typeof rule.headerStyle() != \"undefined\") frame.display_options.header_style = rule.headerStyle();\n\tif(typeof rule.features() != \"undefined\") {\t\tframe.display_options.features = this.setFrameFeatures(frame.display_options.features, rule.features());\t}\n\tif(typeof rule.headerFeatures() != \"undefined\") frame.display_options.header_features = this.setFrameFeatures(frame.display_options.header_features, rule.headerFeatures());\n\tif(typeof rule.header() != \"undefined\") frame.display_options.header = rule.header();\n\tif(typeof rule.showEmpty() != \"undefined\") frame.display_options.show_empty = rule.showEmpty();\n\tif(typeof rule.dataviewer() != \"undefined\") frame.display_options.dataviewer = rule.dataviewer();\n\tif(typeof rule.args() != \"undefined\") frame.display_options.args = this.setFrameArgs(frame.display_options.args, rule.args());\n}\n\n/*\nConsolidates properties of features sent in in different rules\n*/\nFrameConfig.prototype.setFrameFeatures = function(existing, fresh){\n\t//preserve order of existing\n\tif(!existing || !existing.length) return fresh;\n\tif(!fresh || !fresh.length)  return existing;\n\tlet got = [];\n\tfor(var i = 0; i< existing.length; i++){\n\t\tvar key = (typeof existing[i] == \"string\" ? existing[i] : Object.keys(existing[i])[0]);\n\t\tgot.push(key);\n\t}\n\tfor(var j = 0; j< fresh.length; j++){\n\t\tvar fkey = (typeof fresh[j] == \"string\" ? fresh[j] : Object.keys(fresh[j])[0]);\n\t\tvar rep = got.indexOf(fkey);\n\t\tif(rep == -1) existing.push(fresh[j]);\n\t\telse if(typeof fresh[j] == \"object\"){\n\t\t\tvar val = existing[rep];\n\t\t\tif(typeof val == 'string') existing[rep] = fresh[j];\n\t\t\telse if(typeof val == 'object'){\n\t\t\t\tvar props = fresh[j][fkey];\n\t\t\t\tfor(var p in props){\n\t\t\t\t\texisting[rep][fkey][p] = props[p];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn existing;\t\n}\n\nFrameConfig.prototype.setFrameArgs = function(existing, fresh){\n\tif(!existing) return fresh;\n\tif(!fresh) return existing;\n\tfor(var k in fresh){\n\t\texisting[k] = fresh[k];\n\t}\n\treturn existing;\n}\n\n/**\n * @file Document Rule\n * @license Apache Version 2\n */\n\nfunction DocumentRule(){\n\tFrameRule.call(this); \n\tthis.rule = {};\n};\n\nDocumentRule.prototype = Object.create(FrameRule.prototype);\nDocumentRule.prototype.constructor = FrameRule;\n\nDocumentRule.prototype.renderer = function(rend){\n\tif(typeof rend == \"undefined\"){\n\t\treturn this.rule.renderer;\n\t}\n\tthis.rule.renderer = rend;\n\treturn this;\n}\n\nDocumentRule.prototype.compare = function(func){\n\tif(typeof func == \"undefined\"){\n\t\treturn this.rule.compare;\n\t}\n\tthis.rule.compare = func;\n\treturn this;\n}\n\nDocumentRule.prototype.mode = function(mode){\n\tif(typeof mode == \"undefined\"){\n\t\treturn this.rule.mode;\n\t}\n\tthis.rule.mode = mode;\n\treturn this;\n}\n\nDocumentRule.prototype.collapse = function(func){\n\tif(typeof func == \"undefined\"){\n\t\treturn this.rule.collapse;\n\t}\n\tthis.rule.collapse = func;\n\treturn this;\n}\n\nDocumentRule.prototype.view = function(m){\n\tif(!m) return this.rule.view;\n\tthis.rule.view = m;\n\treturn this;\n}\n\n/**\n * Should actions which are disabled in the given context be displayed?\n */\nDocumentRule.prototype.showDisabledButtons = function(m){\n\tif(typeof m == \"undefined\") return this.rule.show_disabled_buttons;\n\tthis.rule.show_disabled_buttons = m;\n\treturn this;\n}\n\nDocumentRule.prototype.header = function(m){\n\tif(!m) return this.rule.header;\n\tthis.rule.header = m;\n\treturn this;\n}\n\nDocumentRule.prototype.headerStyle = function(m){\n\tif(!m) return this.rule.headerStyle;\n\tthis.rule.headerStyle = m;\n\treturn this;\n}\n\nDocumentRule.prototype.showEmpty = function(m){\n\tif(!m) return this.rule.show_empty;\n\tthis.rule.show_empty = m;\n\treturn this;\n}\n\nDocumentRule.prototype.dataviewer = function(m){\n\tif(!m) return this.rule.dataviewer;\n\tthis.rule.dataviewer = m;\n\treturn this;\n}\n\nDocumentRule.prototype.features = function(...m){\n\tif(typeof m == \"undefined\" || m.length == 0) return this.rule.features;\n\tthis.rule.features = m;\n\treturn this;\n}\n\nDocumentRule.prototype.headerFeatures = function(...m){\n\tif(typeof m == \"undefined\" || m.length == 0) return this.rule.header_features;\n\tthis.rule.header_features = m;\n\treturn this;\n}\n\nDocumentRule.prototype.render = function(func){\n\tif(!func) return this.rule.render;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"render\", func);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"render\", func);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.render = func;\n\t}\n\treturn this;\n}\n\nDocumentRule.prototype.style = function(style){\n\tif(typeof style == \"undefined\") return this.rule.style;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"style\", style);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"style\", style);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.style = style;\n\t}\n\treturn this;\n};\n\n/**\n * The frame or feature will be hidden or unhidden (boolean)\n */\nDocumentRule.prototype.hidden = function(m){\n\tif(typeof m == \"undefined\") return this.rule.hidden;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"hidden\", m);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"hidden\", m);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.hidden = m;\n\t}\n\treturn this;\n}\n\n/**\n * Specifies arguments to a renderer \n */\nDocumentRule.prototype.args = function(json){\n\tif(!json) return this.rule.args;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"args\", json);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"args\", json);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.args = json;\n\t}\n\treturn this;\n}\n\n/**\n * Adds a property to a feature array\n */\nDocumentRule.prototype.applyFeatureProperty = function(feats, prop, val){\n\tvar nfeats = [];\n\tfor(var i = 0; i<feats.length; i++){\n\t\tif(typeof feats[i] == \"string\"){\n\t\t\tvar nfeat = {};\n\t\t\tnfeat[feats[i]] = {};\n\t\t\tnfeat[feats[i]][prop] = val;\n\t\t\tnfeats.push(nfeat);\n\t\t}\n\t\telse if(typeof feats[i] == \"object\"){\n\t\t\tlet fkey = Object.keys(feats[i])[0];\n\t\t\tif(fkey){\n\t\t\t\tvar nfeat = feats[i];\n\t\t\t\tnfeat[fkey][prop] = val;\n\t\t\t\tnfeats.push(nfeat);\n\t\t\t}\n\t\t}\n\t}\n\treturn nfeats;\n}\n\nDocumentRule.prototype.unpackFeatures = function(feats){\n\tlet extensions = {};\n\tvar fstr = \"\";\n\tfor(var i = 0; i<feats.length; i++){\n\t\tif(typeof feats[i] == \"string\"){\n\t\t\tfstr += '\"' + feats[i] + '\"';\n\t\t}\n\t\telse if(typeof feats[i] == \"object\"){\n\t\t\tvar fid = Object.keys(feats[i])[0];\n\t\t\tfstr += '\"' +  fid + '\"';\n\t\t\tfor(var prop in feats[i][fid]){\n\t\t\t\textensions[prop] = feats[i][fid][prop];\n\t\t\t}\n\t\t}\n\t\tif(i < feats.length - 1){\n\t\t\tfstr += \", \"\n\t\t}\n\t}\n\tfor(var k = 0; k < Object.keys(extensions).length; k++){\n\t\tvar ext = Object.keys(extensions)[k];\n\t\tvar val = extensions[ext];\n\t\tfstr += \").\" + ext + \"(\";\n\t\tif(typeof val == \"function\"){\n\t\t\tfstr += val;\n\t\t}\n\t\telse if(typeof val == \"string\"){\n\t\t\tfstr += '\"' + val + '\"';\n\t\t}\n\t\telse if(typeof val == \"object\"){\n\t\t\tfstr += JSON.stringify(val);\n\t\t}\n\t}\n\treturn fstr;\n}\n\nDocumentRule.prototype.prettyPrint = function(){\n\tif(this.pattern){\n\t\tstr = this.pattern.prettyPrint();\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \".renderer('\" + this.renderer() + \"')\";\n\t}\n\tif(typeof this.render() != \"undefined\"){\n\t\tstr += \".render(\" + this.render + \")\";\n\t}\n\tif(typeof this.compare() != \"undefined\"){\n\t\tstr += \".compare(\" + this.compare() + \")\";\n\t}\n\tif(typeof this.mode() != \"undefined\"){\n\t\tstr += \".mode('\" + this.mode() + \"')\";\n\t}\n\tif(typeof this.collapse() != \"undefined\"){\n\t\tstr += \".collapse(\" + this.collapse() + \")\";\n\t}\n\tif(typeof this.hidden() != \"undefined\"){\n\t\tstr += \".hidden(\" + this.hidden() + \")\";\n\t}\n\tif(typeof this.view() != \"undefined\"){\n\t\tstr += \".view('\" + this.view() + \"')\";\n\t}\n\tif(typeof this.showDisabledButtons() != \"undefined\"){\n\t\tstr += \".showDisabledButtons(\" + this.showDisabledButtons() + \")\";\n\t}\n\tif(typeof this.header() != \"undefined\"){\n\t\tstr += \".header(\" + this.header() + \")\";\n\t}\n\tif(typeof this.style() != \"undefined\"){\n\t\tstr += \".style(\\\"\" + this.style() + \"\\\")\";\n\t}\n\tif(typeof this.headerStyle() != \"undefined\"){\n\t\tstr += \".headerStyle(\\\"\" + this.headerStyle() + \"\\\")\";\n\t}\n\tif(typeof this.args() != \"undefined\"){\n\t\tstr += \".args(\" + JSON.stringify(this.args()) + \")\";\n\t}\n\tif(typeof this.showEmpty() != \"undefined\"){\n\t\tstr += \".showEmpty(\" + this.show_empty() + \")\";\n\t}\n\tif(typeof this.dataviewer() != \"undefined\"){\n\t\tstr += \".dataviewer(\\\"\" + this.dataviewer() + \"\\\")\";\n\t}\n\tif(typeof this.features() != \"undefined\"){\n\t\tstr += \".features(\" + this.unpackFeatures(this.features()) + \")\";\n\t}\n\tif(typeof this.headerFeatures() != \"undefined\"){\n\t\tstr += \".headerFeatures(\" + this.unpackFeatures(this.headerFeatures()) + \")\";\n\t}\n\treturn str;\n}\n\nmodule.exports = FrameConfig;","const ObjectFrame = require(\"../objectFrame\");\nconst FrameConfig = require(\"./frameConfig\");\nconst FrameHelper = require(\"../utils\");\n\n/**\n * @file Document Frame \n * @license Apache Version 2\n */\n\n\nfunction DocumentFrame(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new FrameConfig());\n\tthis.load_schema = false;\n}\n\nDocumentFrame.prototype.options = function(opts){\n\tthis.config = opts;\n\treturn this;\n}\n\nDocumentFrame.prototype.db = function(dburl){\n    this.client.connectionConfig.setDB(dburl);\n    return this;\n}\n\nDocumentFrame.prototype.load = function(url, cls){\n\tif(url) {\n\t\tif(url.substring(0,4) == \"doc:\"){\n\t\t\turl = url.substring(4);\n\t\t}\n\t\tif(this.config.load_schema()){\n\t\t\treturn this.loadComplete(url, cls)\n\t\t}\n\t\telse {\n\t\t\treturn this.loadDocument(url);\n\t\t}\n\t}\n\tif(cls){\n\t\treturn this.loadSchema(cls);\n\t}\n\t//return Promise.reject\n}\n\n/**\n *  @param {String} url - loads the document frame from the document API in frame form\n *  - loads the frame encapsulates more meta-data in the json and reduces the number of api calls we need to make\n *  @returns {Promise}\n */\nDocumentFrame.prototype.loadDocument = function(url, encoding){\n     encoding = encoding || \"terminus:frame\";\n\t return this.client.getDocument(url, {\"terminus:encoding\": encoding})\n\t.then((response) => {\n\t\t(encoding == \"terminus:frame\" ? this.loadDataFrames(response) : this.loadJSON(response));\n\t});\n}\n\nDocumentFrame.prototype.loadSchema = function(cls, dbURL){\n\tvar ncls = FrameHelper.unshorten(cls);\n\treturn this.client.getClassFrame(dbURL, ncls)\n\t.then((response) => this.loadSchemaFrames(response, ncls));\n}\n\n/**\n *  @param {String} url - loads the document frame along with its class frame\n *  @param {String} [cls] - optional class id of the document - if absent class frames will be loaded from the document class once it is loaded\n *  @returns {Promise}\n *  - loads a document frame and it's class frame in unison\n */\n\nDocumentFrame.prototype.loadComplete = function(url, cls){\n    if(cls){\n        return Promise.all([this.loadDocument(url), this.loadDocumentSchema(cls)]);        \n    }\n    else {\n\t    return this.loadDocument(url)\n        .then((response) =>  {\n\t\t\tthis.loadSchema(this.document.cls);\n\t\t});\n    }\n}\n\nDocumentFrame.prototype.loadJSON = function(json, type){\n    if(this.docid){\n        return this.loadDocument(this.docid);\n    }\n    else if(this.clsid){\n        return this.loadDocumentSchema(this.clsid);\n    }\n    console.error(\"Either docid or clid must be set before load is called\")\n}\n\nDocumentFrame.prototype.loadDataFrames = function(dataframes, cls, classframes){\n\tif(!cls){\n\t\tif(this.document) cls = this.document.cls;\n\t\telse {\n\t\t\tif(dataframes && dataframes.length && dataframes[0] && dataframes[0].domain){\n\t\t\t\tcls = dataframes[0].domain;\n\t\t\t}\n\t\t}\n\t}\n\tif(cls){\n\t\tif(!this.document){\n\t\t\tthis.document = new ObjectFrame(cls, dataframes, classframes);\n\t\t}\n\t\telse {\n\t\t\tthis.document.loadDataFrames(dataframes);\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"Missing Class\" + \" \" + \"Failed to add dataframes due to missing class\");\n\t}\n}\n\nDocumentFrame.prototype.loadSchemaFrames = function(classframes, cls){\n\tif(!cls){\n\t\tif(classframes && classframes.length && classframes[0] && classframes[0].domain){\n\t\t\tcls = classframes[0].domain;\n\t\t}\n\t}\n\tif(cls){\n\t\tif(!this.document){\n\t\t\tthis.document = new ObjectFrame(cls);\n\t\t}\n\t\tif(classframes){\n\t\t\tthis.document.loadClassFrames(classframes);\n\t\t\tif(!this.document.subjid){\n\t\t\t\tthis.document.newDoc = true;\n\t\t\t\tthis.document.fillFromSchema(\"_:\");\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"Missing Class\", \"Failed to add class frames due to missing both class and classframes\");\n\t}\n}\n\n/*\n * adds render and compare functions to object frames\n */\nDocumentFrame.prototype.applyRules = function(doc, config, mymatch){\n\tdoc = (doc ? doc : this.document);\n\tconfig = (config ? config : this.config);\n\tvar self = this;\n\tvar onmatch = function(frame, rule){\n\t\tconfig.setFrameDisplayOptions(frame, rule);\n\t\tif(mymatch) mymatch(frame, rule);\n\t};\n\tdoc.filter(config.rules, onmatch);\n}\n\nmodule.exports = DocumentFrame ;\n","\nmodule.exports = {\n\t         WOQLClient:require('./lib/woqlClient'),\n                 ConnectionCapabilities:require('./lib/connectionCapabilities'),\n                 ConnectionConfig:require('./lib/connectionConfig'),\n                 IDParser:require('./lib/terminusIDParser'),\n                 ErrorMessage:require('./lib/errorMessage'),\n                 UTILS:require('./lib/utils'),\n                 WOQLResult:require('./lib/woqlResult'),\n                 WOQLRule:require('./lib/woqlRule'),\n                 FrameRule:require('./lib/frameRule'),\n                 View:require('./lib/woqlView'),\n                 DocumentFrame:require('./lib/viewer/documentFrame'),\n                 WOQLGraph:require('./lib/viewer/woqlGraph'),\n                 WOQLTable:require('./lib/viewer/woqlTable'),\n                 WOQLChooser:require('./lib/viewer/woqlChooser'),\n                 WOQLChart:require('./lib/viewer/woqlChart'),\n                 WOQLStream:require('./lib/viewer/woqlStream'),\n                 WOQL:require('./lib/woql')};","\nconst CONST = require('./const');\nconst DispatchRequest = require('./dispatchRequest');\nconst ErrorMessage = require('./errorMessage');\nconst ConnectionCapabilities = require('./connectionCapabilities');\nconst ConnectionConfig = require('./connectionConfig');\nconst UTILS = require('./utils.js');\n\n\n/**\n * @file Javascript WOQL client object\n * @license Apache Version 2\n * Simple Javascript Client for accessing the Terminus DB API\n * Constructor - takes an option json list of connection parameters\n * @param {Object} params a json object containing connection parameters\n * which can be:\n * params.server URL of server to connect to\n * params.dbid ID of database to connect to\n * params.docid = ID of document to load;\n */\nfunction WOQLClient(params) {\n\t// current connection context variables\n\tconst key = (params && params.key) ? params.key : undefined;\n\tthis.use_fetch = false;\n\tthis.return_full_response = false;\n\tthis.connectionConfig = new ConnectionConfig(params);\n\tthis.connection = new ConnectionCapabilities(this.connectionConfig, key);\n}\n\nWOQLClient.CONST = CONST;\n\n/**\n * Connect to a Terminus server at the given URI with an API key\n * Stores the terminus:ServerCapability document returned\n * in the connection register which stores, the url, key, capabilities,\n * and database meta-data for the connected server\n *\n * If the curl argument is false or null,\n * this.connectionConfig.server will be used if present,\n * or the promise will be rejected.\n\n * @param  {string} curl Terminus server URI\n * @param  {string} [key] API  key\n * @param  {string} [dbid] Optional DB to connect to by default\n * @return {Promise}\n * @public\n */\nWOQLClient.prototype.connect = function (curl, key, dbid) {\n\tif (curl && !this.connectionConfig.setServer(curl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(curl, CONST.CONNECT))\n\t\t);\n\t}\n\tconst serverURL = this.connectionConfig.serverURL();\n\tif (key) {\n\t\tthis.connection.setClientKey(serverURL, key);\n\t}\n\t// unset the current server setting until successful connect\n\tthis.connectionConfig.server = false;\n\treturn this.dispatch(serverURL, CONST.CONNECT)\n\t.then((response) => {\n\t    this.connectionConfig.server = serverURL;\n\t    if(dbid) this.connectionConfig.dbid = dbid;\n\t    this.connection.addConnection(serverURL, response);\n\t    return response;\n\t});\n};\n\n/**\n * Create a Terminus Database by posting\n * a terminus:Database document to the Terminus API\n *\n * The dburl argument can be\n *    1) a valid URL of a terminus database or\n *    2) a valid Terminus database id or\n *    3) can be omitted\n * \t\tin case 2) the current server will be used,\n * \t\tin case 3) the database id will be set from the @id field of the terminuse:Database document.\n *\n * The second (details) argument contains a terminus:Database document\n * with a mandatory rdfs:label field and an optional rdfs:comment field.\n * The third (key) argument contains an optional API key\n *\n * @param {string} dburl Terminus server URI or a TerminusID\n * @param {object} details\n * @param {string} key\n * @return {Promise}\n * @public\n */\nWOQLClient.prototype.createDatabase = function (dburl, details, key) {\n\tif (dburl && !this.connectionConfig.setDB(dburl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(dburl, 'Create Database'))\n\t\t);\n\t}\n\tif (\n\t\tdetails\n    && details['@id']\n    && !this.connectionConfig.setDB(details['@id'], details['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(details['@id'], 'Create Database'))\n\t\t);\n\t}\n\tdetails = this.makeDocumentConsistentWithURL(details, this.connectionConfig.dbURL());\n\n\tconst opts = {};\n\tif (key) {\n\t\topts.key = key;\n\t}\n\tconst doc = this.addOptionsToDocument(details, opts);\n\treturn this.dispatch(this.connectionConfig.dbURL('create'), CONST.CREATE_DATABASE, doc);\n};\n\n/**\n * Delete a Database\n * @param {String} dburl it is a terminusDB Url or a terminusDB Id\n * @param {String} key an optional API key\n * @return {Promise}\n *\n * if dburl is omitted, the current server and database will be used\n */\nWOQLClient.prototype.deleteDatabase = function (dburl, key) {\n\tif (dburl && !this.connectionConfig.setDB(dburl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(dburl, 'Delete Database'))\n\t\t);\n\t}\n\tconst dbid = this.connectionConfig.dbid\n\tconst opts = {};\n\n\tif (key) {\n\t\topts.key = key;\n\t}\n\n\tconst self = this;\n\treturn this.dispatch(`${this.connectionConfig.dbURL()}`, CONST.DELETE_DATABASE, opts).then(\n\t\t(response) => {\n\t\t\tself.connection.removeDB(dbid);\n\t\t\treturn response;\n\t\t}\n\t);\n};\n\n/**\n * Retrieves the schema of the specified database\n *\n * @param {string} schurl TerminusDB server URL or a valid TerminusDB Id or omitted\n * @param {object} opts is an options object\n * @return {Promise}\n *\n * opts.format is optional and defines which format is requested (*json / turtle)\n * opts.key is an optional API key\n */\nWOQLClient.prototype.getSchema = function (schurl, opts) {\n\tif (schurl && !this.connectionConfig.setSchemaURL(schurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(schurl, 'Get Schema'))\n\t\t);\n\t}\n\treturn this.dispatch(this.connectionConfig.schemaURL(), CONST.GET_SCHEMA, opts);\n};\n\n/**\n * Updates the Schema of the specified database\n *\n * @param {string} schurl TerminusDB server URL or a valid TerminusDB Id or omitted\n * @param {object} doc is a valid owl ontology in json-ld or turtle format\n * @param {object} opts is an options object\n * @return {Promise}\n *\n * if omitted the current server and database will be used\n * opts.format is used to specify which format is being used (*json / turtle)\n * opts.key is an optional API key\n */\nWOQLClient.prototype.updateSchema = function (schurl, doc, opts) {\n\tif (schurl && !this.connectionConfig.setSchemaURL(schurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(schurl, 'Update Schema'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(doc, opts);\n\treturn this.dispatch(this.connectionConfig.schemaURL(), 'update_schema', doc);\n};\n\n/**\n * Creates a new document in the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus database (an id will be randomly assigned) or\n * 2) a valid URL or of a terminus document (the document will be given the passed URL) or\n * 3) a valid terminus document id (the current server and database will be used)\n * 4) can be omitted (the URL will be taken from the document if present)\n * The second argument (doc) is a valid document in json-ld\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.createDocument = function (docurl, doc, opts) {\n\tif (docurl && !this.connectionConfig.setDocument(docurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Create Document'))\n\t\t);\n\t} if (\n\t\tdoc\n    && doc['@id']\n    && !this.connectionConfig.setDocument(doc['@id'], doc['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(doc['@id'], 'Create Document'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(\n\t\tthis.makeDocumentConsistentWithURL(doc, this.connectionConfig.docURL()),\n\t\topts\n\t);\n\treturn this.dispatch(this.connectionConfig.docURL(), 'create_document', doc);\n};\n\n/**\n * Retrieves a document from the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database\n * the second argument (opts) is an options json -\n * \t\topts.key is an optional API key\n * \t\topts.shape is frame | *document\n */\nWOQLClient.prototype.getDocument = function (docurl, opts) {\n\tif (docurl && (!this.connectionConfig.setDocument(docurl) || !this.connectionConfig.docid)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Get Document'))\n\t\t);\n\t}\n\treturn this.dispatch(this.connectionConfig.docURL(), 'get_document', opts);\n};\n\n/**\n * Updates a document in the specified database with a new version\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database or\n * 3) omitted in which case the id will be taken from the document @id field\n * the second argument (doc) is a document in json-ld format\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.updateDocument = function (docurl, doc, opts) {\n\tif (docurl && !this.connectionConfig.setDocument(docurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Update Document'))\n\t\t);\n\t}\n\tif (doc && doc['@id']\n    && !this.connectionConfig.setDocument(doc['@id'], doc['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(doc['@id'], 'Update Document'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(\n\t\tthis.makeDocumentConsistentWithURL(doc, this.connectionConfig.docURL()),\n\t\topts\n\t);\n\treturn this.dispatch(this.connectionConfig.docURL(), 'update_document', doc);\n};\n\n/**\n * Deletes a document from the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database\n * 3) omitted - the current document will be used\n * the second argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.deleteDocument = function (docurl, opts) {\n\tif (docurl && (!this.connectionConfig.setDocument(docurl) || !this.connectionConfig.docid)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Delete Document'))\n\t\t);\n\t}\n\treturn this.dispatch(this.connectionConfig.docURL(), 'delete_document', opts);\n};\n\n/**\n * Executes a read-only WOQL query on the specified database and returns the results\n *\n * @param {string} qurl TerminusDB server URL or omitted (the current DB will be used)\n * @param {string} woql is a \"woql query select statement\"\n * @param {object} opts can contain an API key (opts.key)\n *\n */\nWOQLClient.prototype.select = function (qurl, woql, opts) {\n\tif (qurl && !this.connectionConfig.setQueryURL(qurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(qurl, 'Select'))\n\t\t);\n\t}\n\tconst fileList = opts ? opts.fileList : {};\n\tlet q = {'terminus:query' : JSON.stringify(woql), ...fileList};\n\n\tq = this.addOptionsToWOQL(q, opts);\n\treturn this.dispatch(this.connectionConfig.queryURL(), CONST.WOQL_SELECT, q);\n};\n\n/**\n * Executes a WOQL query on the specified database which updates the state and returns the results\n *\n * The first (qurl) argument can be\n * 1) a valid URL of a terminus database or\n * 2) omitted - the current database will be used\n * the second argument (woql) is a woql select statement encoded as a string\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.update = function (qurl, woql, opts) {\n\tif (qurl && !this.connectionConfig.setQueryURL(qurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(qurl, 'Select'))\n\t\t);\n\t}\n\tconst fileList = opts ? opts.fileList : {};\n\n\t//var formData = new FormData();\n    //formData.set('file', file);\n\t\n\tlet q = {'terminus:query' : JSON.stringify(woql), ...fileList};\n\n\tq = this.addOptionsToWOQL(q, opts);\n\treturn this.dispatch(this.connectionConfig.queryURL(),  CONST.WOQL_UPDATE, q);\n};\n\n/**\n * Executes a WOQL query on the server which keeps log of messages\n *\n * the first argument (payload) will include the message \n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.serverLog = function (payload, opts) {\n\tlet endpoint = this.connectionConfig.server + \"message\";\n\tlet q = {'@type' : \"terminus:APIUpdate\", \"terminus:message\" : payload};\n\n\tq = this.addOptionsToWOQL(q, opts);\n\treturn this.dispatch(endpoint,  CONST.TERMINUS_MESSAGE, q);\n};\n\n\n/**\n * Retrieves a WOQL query on the specified database which updates the state and returns the results\n *\n * The first (cfurl) argument can be\n * 1) a valid URL of a terminus database or\n * 2) omitted - the current database will be used\n * the second argument (cls) is the URL / ID of a document class that exists in the database schema\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.getClassFrame = function (cfurl, cls, opts) {\n\tif (cfurl && !this.connectionConfig.setClassFrameURL(cfurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(cfurl, 'Get Class Frame'))\n\t\t);\n\t}\n\tif (!opts) opts = {};\n\topts['terminus:class'] = cls;\n\treturn this.dispatch(this.connectionConfig.frameURL(), 'class_frame', opts);\n};\n\n/*\n * Utility functions for adding standard fields to API arguments\n */\n\n /**\n  * Adds a key to the passed woql query if it is present in the opts json\n  *\n  */\nWOQLClient.prototype.addOptionsToWOQL = function (woql, opts) {\n\tif (opts && opts.key) {\n\t\twoql.key = opts.key;\n\t}\n\treturn woql;\n};\n\n\n/**\n * Wrapws the passed json document in a valid TerminusDB update document API shell\n */\nWOQLClient.prototype.addOptionsToDocument = function (doc, opts) {\n\tconst pdoc = {};\n\tpdoc['@context'] = doc['@context'];\n\t// add blank node prefix as document base url\n\tif (pdoc['@context'] && doc['@id']) {\n\t\tpdoc['@context']._ = `${doc['@id']}/`;\n\t}\n\tif (opts && opts['terminus:encoding'] && opts['terminus:encoding'] === 'terminus:turtle') {\n\t\tpdoc['terminus:turtle'] = doc;\n\t\tpdoc['terminus:schema'] = this.connectionConfig.schemaURL();\n\t\tdelete pdoc['terminus:turtle']['@context'];\n\t} else {\n\t\tpdoc['terminus:document'] = doc;\n\t\tdelete pdoc['terminus:document']['@context'];\n\t}\n\tpdoc['@type'] = 'terminus:APIUpdate';\n\tif (opts && opts['terminus:user_key']) {\n\t\tpdoc['terminus:user_key'] = opts['terminus:user_key'];\n\t}\n\tif (opts && opts.key) {\n\t\tpdoc['terminus:user_key'] = opts.key;\n\t}\n\treturn pdoc;\n};\n\n/**\n * Adds an api key to the payload\n */\nWOQLClient.prototype.addKeyToPayload = function (payload, url) {\n\tif (typeof payload !== 'object')payload = {};\n\tif (payload.key) {\n\t\tpayload['terminus:user_key'] = payload.key;\n\t\tdelete payload.key;\n\t} else if (this.connection.getClientKey()) {\n\t\tpayload['terminus:user_key'] = this.connection.getClientKey();\n\t} else if (this.connection.getClientKey(url)) {\n\t\tpayload['terminus:user_key'] = this.connection.getClientKey(url);\n\t}\n\treturn payload;\n};\n\n/**\n * Document updates include the URL in both the endpoint and the document itself\n * This ensures that they are the same by using the endpoint URL as the authoritative version\n * and copying it into the embedded document ID\n */\nWOQLClient.prototype.makeDocumentConsistentWithURL = function (doc, dburl) {\n\tdoc['@id'] = dburl;\n\treturn doc;\n};\n\n/**\n * Common request dispatch function\n */\nWOQLClient.prototype.dispatch = function (url, action, payload) {\n\tif (this.connectionConfig.includeKey()) {\n\t\tpayload = this.addKeyToPayload(payload, url);\n\t}\n\tif (this.use_fetch) {\n\t\treturn this.dispatchFetch(url, action, payload);\n\t}\n\treturn DispatchRequest(url, action, payload);\n};\n\n/**\n * If the use_fetch switch is set, the browser's built in fetch will be used rather than the npm axios module\n */\nWOQLClient.prototype.dispatchFetch = function (url, action, payload) {\n\tconst api = {\n\t\t//mode: 'cors',  no-cors, cors, *same-origin\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrer: 'client', // no-referrer, *client\n\t};\n\tlet hdrs = {};\n\tif (payload && payload['terminus:user_key']) {\n\t\thdrs = { Authorization: `Basic ${btoa(`:${payload['terminus:user_key']}`)}` };\n\t\tdelete (payload['terminus:user_key']);\n\t}\n\t// read only API calls - use GET\n\tswitch (action) {\n\tcase CONST.DELETE_DATABASE:\n\tcase CONST.DELETE_DOCUMENT:\n\t\tif (Object.keys(payload).length > 0) url += `?${UTILS.URIEncodePayload(payload)}`;\n\t\tapi.method = 'DELETE';\n\t\tapi.cache = 'no-cache';\n\t\tbreak;\n\tcase CONST.CREATE_DATABASE:\n\tcase CONST.UPDATE_SCHEMA:\n\tcase CONST.CREATE_DOCUMENT:\n\tcase CONST.UPDATE_DOCUMENT:\n\tcase CONST.WOQL_UPDATE:\n\t\tapi.method = 'POST';\n\t\tapi.cache = 'no-cache';\n\t\thdrs['Content-Type'] = 'application/json';\n\t\tapi.body = JSON.stringify(payload);\n\t\tbreak;\n\tcase CONST.GET_SCHEMA:\n\tcase CONST.CONNECT:\n\tcase CONST.CLASS_FRAME:\n\tcase CONST.WOQL_SELECT:\n\tcase CONST.GET_DOCUMENT:\n\tdefault:\n\t\tapi.method = 'GET';\n\t\tif (Object.keys(payload).length > 0) url += `?${UTILS.URIEncodePayload(payload)}`;\n\t}\n\tconst self = this;\n\tif (Object.keys(hdrs).length > 0) {\n\t\tapi.headers = new Headers(hdrs);\n\t}\n\treturn fetch(url, api).then((response) => {\n\t\tif (self.return_full_response) return response;\n\t\tif (response.ok) {\n\t\t\treturn response.json();\n\t\t}\n\t\tself.error = self.parseAPIError(response);\n\t\treturn Promise.reject(new Error(self.getAPIErrorMessage(url, api, self.error)));\n\t});\n};\n\nmodule.exports = WOQLClient;\n","const axios = require('axios');\nconst UTILS = require('./utils.js');\nconst CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n\n\n\n/**\n * base 64 encodes a string using either the btoa implementation if available or the Buffer object.\n * @param {String} str string to be base 64 encoded\n */\nfunction btoaImplementation(str) {\n\ttry {\n\t\treturn btoa(str);\n\t} catch (err) {\n\t\t// console.log('in buffer')\n\t\treturn Buffer.from(str).toString('base64');\n\t}\n}\n\n/**\n * @file Dispatch Request\n * @license Apache Version 2\n * @description Functions for dispatching API requests via the axios library.\n * @param {String} url  API endpoint URL\n * @param {String} action API action\n * @param {Object} payload data to be transmitted to endpoint\n */\nfunction DispatchRequest(url, action, payload) {\n\t/*\n\t*CORS is only required when trying to fetch data from a browser,\n\t*as browsers by default will block requests to different origins\n\t*/\n\tconst options = {\n\t\tmode: 'cors', // no-cors, cors, *same-origin\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrer: 'client',\n\t\t// url:url,\n\t\t// no-referrer, *client\n\t};\n\tif (payload && payload['terminus:user_key']) {\n\t\toptions.headers = { Authorization: `Basic ${btoaImplementation(`:${payload['terminus:user_key']}`)}` };\n\t\tdelete (payload['terminus:user_key']);\n\t}\n\n\tswitch (action) {\n\tcase CONST.DELETE_DATABASE:\n\tcase CONST.DELETE_DOCUMENT:\n\t\tif (payload) {\n\t\t\tconst ext = UTILS.URIEncodePayload(payload);\n\t\t\tif (ext) url += `?${ext}`;\n\t\t}\n\t\treturn axios.delete(url, options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n\t\t\t\tthrow new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t});\n\tcase CONST.CREATE_DATABASE:\n\tcase CONST.UPDATE_SCHEMA:\n\tcase CONST.CREATE_DOCUMENT:\n\tcase CONST.UPDATE_DOCUMENT:\n\tcase CONST.TERMINUS_MESSAGE:\n\tcase CONST.WOQL_UPDATE:\n\t\toptions.headers = options.headers ? options.headers : {};\n\t\toptions.headers['Content-Type'] = 'application/json';\n\t\treturn axios.post(url, JSON.stringify(payload), options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n\t\t\t\tconst e = new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t\tif (err.response && err.response.data) e.data = err.response.data;\n\t\t\t\tthrow e;\n\t\t\t});\n\tcase CONST.GET_SCHEMA:\n\tcase CONST.CONNECT:\n\tcase CONST.CLASS_FRAME:\n\tcase CONST.WOQL_SELECT:\n\tcase CONST.GET_DOCUMENT:\n\tdefault:\n\t\tif (payload) {\n\t\t\tconst ext = UTILS.URIEncodePayload(payload);\n\t\t\tif (ext) url += `?${ext}`;\n\t\t}\n\t\treturn axios.get(url, options)\n\t\t\t.then((response => response.data))\n\t\t\t.catch((err) => {\n\t\t\t\tlet e = new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t\tif(err.response && err.response.data){\n\t\t\t\t\te.data = err.response.data;\n\t\t\t\t}\n\t\t\t\tthrow e;\n\t\t\t});\n\t}\n}\n\nmodule.exports = DispatchRequest;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","const WOQLTableConfig = require('./viewer/tableConfig');\nconst WOQLChooserConfig = require('./viewer/chooserConfig');\nconst WOQLGraphConfig = require('./viewer/graphConfig');\nconst WOQLChartConfig = require('./viewer/chartConfig');\nconst WOQLStreamConfig = require('./viewer/streamConfig');\nconst FrameConfig = require('./viewer/frameConfig');\nconst WOQLRule = require('./woqlRule');\nconst FrameRule = require('./frameRule');\n\n/**\n * @constructor \n * We bundle the useful functions in a View object and just export that for ease of consumption\n */\nconst View = {};\n\nView.table = function(){ return new WOQLTableConfig(); }\nView.chart = function(){ return new WOQLChartConfig(); }\nView.graph = function(){ return new WOQLGraphConfig(); }\nView.chooser = function(){ return new WOQLChooserConfig(); }\nView.stream = function(){ return new WOQLStreamConfig(); }\nView.document = function(){ return new FrameConfig(); }\nView.loadConfig = function(config){\n\tif(config.table){\n\t\tvar view = new WOQLTableConfig();\n\t\tview.loadJSON(config.table, config.rules);\n\t}\n\telse if(config.chooser){\n\t\tvar view = new WOQLChooserConfig();\n\t\tview.loadJSON(config.chooser, config.rules);\n\t}\n\telse if(config.graph){\n\t\tvar view = new WOQLGraphConfig();\n\t\tview.loadJSON(config.graph, config.rules);\n\t}\n\telse if(config.chart){\n\t\tvar view = new WOQLChartConfig();\n\t\tview.loadJSON(config.chart, config.rules);\n\t}\n\telse if(config.stream){\n\t\tvar view = new WOQLStreamConfig();\n\t\tview.loadJSON(config.stream, config.rules);\n\t}\n\telse if(config.frame){\n\t\tvar view = new FrameConfig();\n\t\tview.loadJSON(config.frame, config.rules);\n\t}\n\treturn view;\n}\n\n/**\n * Shorthand functions for accessing the pattern matching capabilities\n */\nView.rule = function(type){ \n\tif(type && type == \"frame\") return new FrameRule(); \n\treturn new WOQLRule(); \n}\n\nView.pattern = function(type){ \n\tif(type && type == \"woql\") return new WOQLRule().pattern;\n\telse return new FrameRule().pattern;\n}\n\n/**\n * Called to match an entire row of results is matched by a set of rules\n * returns array of rules that matched\n */\nView.matchRow = function(rules, row, rownum, action){\n\treturn new WOQLRule().matchRow(rules, row, rownum, action);\n}\n\n/**\n * Called to test whether an entire column of results is matched by a set of rules\n * returns array of rules that matched\n */\nView.matchColumn = function(rules, key, action){\n\treturn new WOQLRule().matchColumn(rules, key, action);\n}\n\n/**\n * Called to test whether a specific cell is matched by a set of rules\n * returns array of rules that matched\n */\nView.matchCell = function(rules, row, key, rownum, action){\n\treturn new WOQLRule().matchCell(rules, row, key, rownum, action);\n}\n\n/**\n * Called to test whether a specific node is matched by a set of rules\n * returns array of rules that matched\n */\nView.matchNode = function(rules, row, key, nid, action){\n\treturn new WOQLRule().matchNode(rules, row, key, nid, action);\n}\n\n/**\n * Called to test whether a specific edge (source -> target) is matched by a set of rules\n * returns array of rules that matched\n */\nView.matchEdge = function(rules, row, keya, keyb, action){\n\treturn new WOQLRule().matchPair(rules, row, keya, keyb, action);\n}\n\n/**\n * Called to test whether a specific frame is matched by a set of rules\n */\nView.matchFrame = function(rules, frame, onmatch){\n\treturn new FrameRule().testRules(rules, frame, onmatch);\n}\n\nmodule.exports = View;\n","const FrameHelper = require('./utils');\nconst FrameRule = require('./frameRule');\n\n/**\n * @file Javascript Terminus Document Classes\n * @license Apache Version 2\n * Helper classes for accessing documents returned by the Terminus DB API programmatically\n * \n * @example\n * let doc = new TerminusDocument(client);\n * \n * //These set the objects document property and return promises:\n *  \n * doc.loadDocument(URL).then(() => console.log(this.document));\n * doc.loadComplete(URL, CLS).then(() => console.log(this.document))\n * doc.loadSchema(cls).then(() => console.log(this.document))\n * \n * //These just set the object's document property \n * doc.loadJSON(json_frames, cls) //console.log(this.document)\n * doc.loadDataFrames(json_frames, cls)\n * doc.loadClassFrames(json_frames, cls)\n * @example \n *\n * @description Represents a frame for programmatic access to object frame, anywhere within a document\n * Recursive data structure where this.children contains an indexed array of object frames\n * and this.dataframes contains a property indexed array of data frames\n * Every object frame carries a reference to its classframe\n * This gives us instructions as to how to create new frames according to the schema\n * After that it's turtles all the way down.\n * @param cls - ID of the class (URL)\n * @param classframe - an array of frames representing a class\n * @param archetypes list of class frames\n * @param parent parent object\n * @returns\n */\n\nfunction ObjectFrame(cls, dataframes, classframes, parent, parentframe) {\n\t// the class of the frame - mandatory\n\tthis.empty();\n\tthis.cls = cls;\n\n\t// array of frames representing the full class frame\n\t// (optional - required to be able to safely add missing properties)\n\tif (classframes && typeof classframes === 'object') {\n\t\tthis.loadClassFrames(classframes);\n\t}\n\tif (dataframes && typeof dataframes === 'object') {\n\t\tthis.originalFrames = dataframes;\n\t\tthis.loadDataFrames(dataframes);\n\t} else {\n\t\tthis.originalFrames = false;\n\t}\n\t// parent object frame\n\tthis.parent = parent;\n\t// original frame used by parent to create me\n\tthis.parentframe = parentframe;\n\t// set to true if this is a newly created document\n\tthis.newDoc = false;\n}\n\n/**\n * Loads class frames for the object's class - the instructions about how to put an object together\n */\nObjectFrame.prototype.loadClassFrames = function (classframes) {\n\tfor (let j = 0; j < classframes.length; j += 1) {\n\t\tif (classframes[j]['@context']) this.jsonld_context = classframes[j]['@context'];\n\n\t\tconst cf = new ClassFrame(classframes[j]);\n\t\tif (cf.isValid()) {\n\t\t\tif(!this.classframes) this.classframes = {};\n\t\t\tif(typeof this.classframes[classframes[j].property] === 'undefined') {\n\t\t\t\tthis.classframes[classframes[j].property] = [];\n\t\t\t}\n\t\t\tthis.classframes[classframes[j].property] = cf;\n\t\t\tif (cf.isObject() && this.properties[classframes[j].property]) {\n\t\t\t\tfor (let i = 0; i < this.properties[classframes[j].property].values.length; i += 1) {\n\t\t\t\t\tthis.properties[classframes[j].property].values[i].loadClassFrames(classframes[j].frame);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n};\n\n/**\n * Does this object have a schema loaded?\n */\nObjectFrame.prototype.hasSchema = function () {\n\treturn !FrameHelper.empty(this.classframes);\n};\n\n/*\n * Loads an array of data frames into the object's internal index\n * {property: [frames]}\n */\nObjectFrame.prototype.loadDataFrames = function (frames) {\n\tif (typeof frames !== 'object' || !frames.length) return undefined;\n\tif (!this.originalFrames) this.originalFrames = frames;\n\tif (!this.subjid && frames[0].domainValue) this.subjid = frames[0].domainValue;\n\tfor (let i = 0; i < frames.length; i += 1) {\n\t\tif (frames[i]['@context']) this.jsonld_context = frames[i]['@context'];\n\t\tlet cframe = this.getPropertyClassFrame(frames[i].property, frames[i]);\n\t\tif (cframe && cframe.isClassChoice()) {\n\t\t\tcframe = cframe.getChosenClassFrame(frames[i].range);\n\t\t\tif (!cframe) {\n\t\t\t\tconsole.log(`no choice frame ${frames[i].range}`);\n\t\t\t}\n\t\t} else if (cframe && cframe.isLogic()) {\n\t\t\tcframe = cframe.getChosenFrame(frames[i]);\n\t\t}\n\t\tif (cframe) {\n\t\t\tif (typeof this.properties[frames[i].property] === 'undefined') {\n\t\t\t\tthis.properties[frames[i].property] = new PropertyFrame(frames[i].property, cframe, this);\n\t\t\t}\n\t\t\tthis.properties[frames[i].property].addFrame(frames[i]);\n\t\t}\n\t}\n\treturn this;\n};\n\n/*\n * Serialises the javascript object as an array of frames\n */\nObjectFrame.prototype.getAsFrame = function (prop, parent) {\n\tif (this.parentframe) return this.parentframe;\n\tconst ff = { type: 'objectProperty', property: prop };\n\tff.range = this.cls;\n\tff.domain = parent.cls;\n\tff.domainValue = parent.subjid;\n\tff.frame = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tff.frame = ff.frame.concat(ff.frame, this.properties[prop].getAsFrames());\n\t}\n\treturn ff;\n};\n\nObjectFrame.prototype.getAsFrames = function (prop, parent) {\n\tvar frames = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tframes = frames.concat(frames, this.properties[prop].getAsFrames());\n\t}\n\treturn frames;\n}\n\n/**\n * Cleans out object and sets everything empty\n */\nObjectFrame.prototype.empty = function () {\n\t// all indexed by property\n\tthis.properties = {};\n\tthis.restrictions = {};\n\tthis.subjid = false;\n\tthis.cls = false;\n};\n\n/*\n * Resets object state to original state\n */\nObjectFrame.prototype.reset = function (prop) {\n\tif (prop) {\n\t\tconst props = [];\n\t\tfor (let i = 0; i < this.originalFrames.length; i += 1) {\n\t\t\tif (this.originalFrames[i].property === prop) {\n\t\t\t\tprops.push(this.originalFrames[i]);\n\t\t\t}\n\t\t}\n\t\tif (this.properties[prop]) this.properties[prop] = [];\n\t\tthis.loadDataFrames(props);\n\t} else {\n\t\tthis.restrictions = {};\n\t\tthis.properties = {};\n\t\tthis.loadDataFrames(this.originalFrames);\n\t}\n};\n\n/*\n * Clears out any specific information from a tree\n */\nObjectFrame.prototype.clear = function () {\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.properties[prop].clear();\n\t}\n\treturn this;\n};\n\n/*\n * Filters the frame and its children\n */\nObjectFrame.prototype.filter = function (rules, onmatch) {\n\tvar hits = new FrameRule().testRules(rules, this, onmatch);\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.properties[prop].filter(rules, onmatch);\n\t}\n\treturn this;\n};\n\n\n/**\n * If a class frame is present, it is returned for the given property\n * If no class frame is present and an instance frame is passed in the\n * this enables make it up as you go along editing\n * second argument a class frame will be created from the instance frame.\n */\nObjectFrame.prototype.getPropertyClassFrame = function (prop, instance) {\n\tif (this.classframes && typeof this.classframes === 'object' && typeof this.classframes[prop] === 'object') {\n\t\treturn this.classframes[prop];\n\t}\n\tif (instance) {\n\t\tconst cf = new ClassFrame(instance);\n\t\treturn cf;\n\t}\n\tif (this.properties[prop]) {\n\t\treturn new ClassFrame(this.properties[prop].values[0]);\n\t}\n\treturn false;\n};\n\n/*\n * Returns a list of properties - type can be filled|missing|all\n */\nObjectFrame.prototype.getProperties = function (type) {\n\tif(type == \"filled\" || !this.classframes){\n\t\treturn Object.keys(this.properties);\n\t}\n\tif (type == 'missing') {\n\t\tconst filled = Object.keys(this.properties);\n\t\tconst all = Object.keys(this.classframes);\n\t\tconst missing = [];\n\t\tfor (let i = 0; i < all.length; i++) {\n\t\t\tif (filled.indexOf(all[i]) == -1 && missing.indexOf(all[i]) == -1) {\n\t\t\t\tmissing.push(all[i]);\n\t\t\t}\n\t\t}\n\t\treturn missing;\n\t}\n\treturn Object.keys(this.classframes);\n};\n\n/**\n * Missing properties are those that are present in the classframe,\n * but not instantiated in the current object frame\n * for this to work we need to load the frame with the associated classframe\n */\nObjectFrame.prototype.getMissingPropertyList = function () {\n\tvar missing = this.getProperties(\"missing\");\n\tconst nmissing = [];\n\tfor (let i = 0; i < missing.length; i++) {\n\t\tconst cframe = this.getPropertyClassFrame(missing[i]);\n\t\tif(cframe){\n\t\t\tvar newb = { label: cframe.getLabel(), value: missing[i] };\n\t\t}\n\t\telse {\n\t\t\tvar newb = { label: missing[i], value: missing[i]};\n\t\t}\n\t\tnmissing.push(newb);\n\t}\n\treturn nmissing;\n};\n\n/**\n * List of properties that are filled in the object\n */\nObjectFrame.prototype.getFilledPropertyList = function () {\n\tvar props = this.getProperties(\"filled\");\n\tconst filled = [];\n\tfor (let i = 0; i < props.length; i++) {\n\t\tconst cframe = this.getPropertyClassFrame(props[i]);\n\t\tif(cframe){\n\t\t\tvar newb = { label: cframe.getLabel(), value: props[i] };\n\t\t}\n\t\telse {\n\t\t\tvar newb = { label: props[i], value: props[i]};\n\t\t}\n\t\tfilled.push(newb);\n\t}\n\treturn filled;\n};\n\n/*\n * Fills the object frame from the schema - adding all the necessary property frames, etc to make it complete\n */\nObjectFrame.prototype.fillFromSchema = function (newid) {\n\tif (newid) this.subjid = newid;\n\tnewid = (newid || FrameHelper.genBNID());\n\tconst properties = {};\n\tif(this.classframes){\n\t\tfor (const prop of Object.keys(this.classframes)) {\n\t\t\tconst pf = this.getPropertyClassFrame(prop);\n\t\t\tproperties[prop] = new PropertyFrame(prop, pf, this);\n\t\t\tproperties[prop].fillFromSchema(newid);\n\t\t}\n\t}\n\tthis.properties = properties;\n\tthis.originalFrames = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.originalFrames.push(this.properties[prop].getAsFrames());\n\t}\n\treturn this;\n};\n\n/*\n * Clones an object frame to be a copy of the current frame\n */\nObjectFrame.prototype.clone = function (newid) {\n\tconst properties = {};\n\tconst cloned = new ObjectFrame(this.cls, false, false, this.parent);\n\tcloned.classframes = this.classframes;\n\tcloned.subjid = newid;\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tproperties[prop] = this.properties[prop].clone();\n\t}\n\tcloned.properties = properties;\n\treturn cloned;\n};\n\n\n/**\n * Returns a child frame with a particular id\n * If the second parameter is included, it will only look in that specific property\n * Otherwise searches all properties for the child\n */\nObjectFrame.prototype.getChild = function (childid, prop) {\n\tlet pframe = this.getProperty(prop);\n\tfor (let i = 0; i < pframe.values.length; pframe++) {\n\t\tif (pframe.values[i].isObject() && pframe.values[i].subject === childid) return pframe.values[i];\n\t}\n\tif (!prop) {\n\t\tfor (const key of Object.keys(this.properties)) {\n\t\t\tfor (let i = 0; i < this.properties[key].values.length; i += 1) {\n\t\t\t\tif (this.properties[key].values[i].subject() === childid) return this.properties[key].values[i];\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.addProperty = function (prop, cls) {\n\tconst cframe = this.getPropertyClassFrame(prop);\n\tvar ndata = false;\n\tif(cframe){\n\t\tconst nprop = new PropertyFrame(prop, cframe, this);\n\t\tif(cframe.isObject()){\n\t\t\tif (!cframe.isClassChoice()) {\n\t\t\t\tndata = cframe.createEmpty(FrameHelper.genBNID());\n\t\t\t}\n\t\t\tif (cls) {\n\t\t\t\tndata = cframe.createEmptyChoice(cls, FrameHelper.genBNID());\n\t\t\t}\n\t\t\tconst clss = cframe.getClassChoices();\n\t\t\tif (clss && clss.length) {\n\t\t\t\tndata = cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tndata = cframe.createEmpty();\n\t\t}\n\t\tif(ndata){\n\t\t\tnprop.addValueFrame(ndata);\n\t\t}\n\t\tif (typeof this.properties[prop] === 'undefined') {\n\t\t\tthis.properties[prop] = [];\n\t\t}\n\t\tthis.properties[prop].push(nprop);\n\t\treturn nprop;\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.addPropertyValue = function (prop, value) {\n\tconst pframe = this.properties[prop];\n\treturn pframe.addValue(value);\n};\n\nObjectFrame.prototype.removeProperty = function (prop) {\n\tif (typeof this.properties[prop] !== 'undefined') {\n\t\tdelete (this.properties[prop]);\n\t}\n};\n\nObjectFrame.prototype.removePropertyValue = function (prop, value, index) {\n\tconst pframe = this.properties[prop];\n\tpframe.removeValue(value, index);\n\tif (pframe.values.length == 0) {\n\t\tthis.removeProperty(prop);\n\t}\n};\n\nObjectFrame.prototype.error = function (msg) {\n\tconsole.error(msg);\n};\n\nObjectFrame.prototype.extract = function(){\n\tvar extracts = {};\n\tfor(var prop in this.properties){\n\t\tfor(var i = 0; i<this.properties[prop].length; i++){\n\t\t\tvar extracted = this.properties[prop][i].extract();\n\t\t\tif(!FrameHelper.empty(extracted)){\n\t\t\t\tif(typeof extracts[prop] == \"undefined\") extracts[prop] = [];\n\t\t\t\textracts[prop] = extracts[prop].concat(extracted);\n\t\t\t}\n\t\t}\n\t}\n\tif(FrameHelper.empty(extracts) && this.parent){\n\t\treturn false;\n\t}\n\telse {\n\t\tvar ext = this.extractJSONLD(extracts);\n\t\treturn ext;\n\t}\n}\n\nObjectFrame.prototype.extractJSONLD = function(extracts){\n\textracts[\"@type\"] = this.cls;\n\tif(this.subject() != \"_:\")\textracts[\"@id\"] = this.subject();\n\tif(this.jsonld_context) extracts['@context'] = this.jsonld_context;\n\treturn extracts;\n}\n\n\nObjectFrame.prototype.subject = function () {\n\treturn this.subjid;\n};\n\nObjectFrame.prototype.get = ObjectFrame.prototype.subject;\nObjectFrame.prototype.set = function(val){\n\tthis.subjid = val;\n}\n\nObjectFrame.prototype.isObject = function () { return true; };\nObjectFrame.prototype.isProperty = function () { return false; };\nObjectFrame.prototype.isData = function () { return false; };\n\n\nObjectFrame.prototype.subjectClass = function () {\n\treturn this.cls;\n};\n\nObjectFrame.prototype.depth = function () {\n\tif (this.parent) return (this.parent.depth() + 1);\n\treturn 0;\n};\n\nObjectFrame.prototype.getProperty = function (prop) {\n\treturn this.properties[prop];\n};\n\nObjectFrame.prototype.first = function (prop) {\n\tif (this.properties && this.properties[prop]) {\n\t\treturn this.properties[prop].first();\n\t}\n};\n\nObjectFrame.prototype.property = function (prop) {\n\tif (this.parent) return this.parent.property();\n\treturn false;\n};\n\nObjectFrame.prototype.parentObject = function () {\n\tif (this.parent && this.parent.parent) {\n\t\treturn this.parent.parent;\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.root = function () {\n\tif (this.parent) return false;\n\treturn true;\n};\n\nObjectFrame.prototype.renderProperties = function () {\n\tconst props = this.sortProperties();\n\tconst nprops = [];\n\tfor (let i = 0; i < props.length; i++) {\n\t\tif (this.properties[props[i]].render) {\n\t\t\tconst rend = this.properties[props[i]].render(this.properties[props[i]]);\n\t\t\tif (rend) nprops.push(rend);\n\t\t}\n\t}\n\treturn nprops;\n};\n\nObjectFrame.prototype.sortProperties = function () {\n\tconst unsorted = Object.keys(this.properties);\n\tif (this.compare) {\n\t\treturn unsorted.sort((a, b) => this.compare(a, b, this));\n\t}\n\treturn unsorted.sort((a, b) => this.standardCompare(a, b, this));\n};\n\n/*\n * Label first, then datatype properties, then object properties\n */\nObjectFrame.prototype.standardCompare = function (a, b, doc) {\n\tif (a == 'rdfs:label') return -1;\n\tif (b == 'rdfs:label') return 1;\n\tif (a == 'rdfs:comment') return -1;\n\tif (b == 'rdfs:comment') return 1;\n\tif (doc.properties[a].isData() && doc.properties[b].isObject()) return -1;\n\tif (doc.properties[b].isData() && doc.properties[a].isObject()) return 1;\n\treturn 0;\n};\n\nObjectFrame.prototype.cardControlAllows = function(action){\n\tif(!this.parent) return true;\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nObjectFrame.prototype.isUpdated = function(){\n\tvar i = 0;\n\tfor(var prop in this.properties){\n\t\tif(this.originalFrames[i] != prop) return true;\n\t\tif(this.properties[prop].isUpdated()) return true;\n\t\ti++;\n\t}\n\tif(i != this.originalFrames.length) return true;\n\treturn false;\n}\n\nObjectFrame.prototype.isNew = function(){\n\treturn (this.subject().substring(0, 2) == \"_:\");\n}\n\nObjectFrame.prototype.getSummary = function(){\n\tvar ret = { status: \"ok\" };\n\tif(this.isUpdated()) ret.status = \"updated\";\n\tif(this.isNew()) ret.status = \"new\";\n\tret.propcount = 0;\n\tfor(var prop in this.properties){\n\t\tret.propcount++;\n\t}\n\tret.long = ret.propcount + \" properties\";\n\treturn ret;\n}\n\nfunction PropertyFrame(property, cframe, parent) {\n\tthis.predicate = property;\n\tthis.cframe = cframe;\n\tthis.parent = parent;\n\tthis.values = [];\n}\n\nPropertyFrame.prototype.addFrame = function (frame) {\n\tif(this.cframe.isData()){\n\t\tvar df = new DataFrame(frame, this, this.values.length);\n\t\tthis.values.push(df);\n\t} else {\n\t\tconst kid = new ObjectFrame(this.range(), this.cframe.frame, frame.frame, this, frame);\n\t\tthis.values.push(kid);\n\t}\n};\n\nPropertyFrame.prototype.addValueFrame = function (oframe) {\n\toframe.parent = this;\n\toframe.index = this.values.length;\n\tthis.values.push(oframe);\n};\n\n\nPropertyFrame.prototype.fillFromSchema = function (newid) {\n\tif (this.isData() || (this.isObject() && !this.isClassChoice())) {\n\t\tvar values = [];\n\t\tif (this.cframe.hasRestriction() && this.cframe.restriction.min) {\n\t\t\tfor (let i = 0; i < this.cframe.restriction.min; i += 1) {\n\t\t\t\tvar nframe = this.createEmpty(newid);\n\t\t\t\tnframe.parent = this;\n\t\t\t\tvalues.push(nframe);\n\t\t\t}\n\t\t} \n\t\telse {\n\t\t\tvar nframe = this.createEmpty(newid);\n\t\t\tnframe.parent = this;\n\t\t\tvalues.push(nframe);\n\t\t}\n\t\tthis.values = values;\n\t}\n\telse if (this.isClassChoice()) {\n\t\tconst clss = this.cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst empty = this.cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\tempty.parent = this;\n\t\t\tthis.values = [empty];\n\t\t}\n\t}\n};\n\nPropertyFrame.prototype.isData = function () {\n\treturn this.cframe.isData();\n};\n\nPropertyFrame.prototype.isObject = function () {\n\treturn this.cframe.isObject();\n};\n\nPropertyFrame.prototype.isProperty = function () {\n\treturn true;\n};\n\nPropertyFrame.prototype.property = function () {\n\treturn this.predicate;\n};\n\nPropertyFrame.prototype.extract = function () {\n \tconst extracts = [];\n \tfor (let i = 0; i < this.values.length; i++) {\n \t\tconst val = this.values[i].extract();\n \t\tif (val !== '' && val !== false && typeof val !== 'undefined') extracts.push(val);\n \t}\n\treturn extracts;\n};\n\nPropertyFrame.prototype.subject = function () {\n\treturn (this.parent ? this.parent.subject() : false);\n};\nPropertyFrame.prototype.subjectClass = function () {\n\treturn (this.parent ? this.parent.subjectClass() : false);\n};\nPropertyFrame.prototype.depth = function () {\n\treturn (this.parent ? this.parent.depth() : false);\n};\nPropertyFrame.prototype.updated = function () {\n\treturn (this.parent ? this.parent.childUpdated() : false);\n};\nPropertyFrame.prototype.range = function () {\n\treturn (this.cframe ? this.cframe.range : '');\n};\nPropertyFrame.prototype.getLabel = function () {\n\treturn (\n\t\tthis.cframe ? this.cframe.getLabel() : '');\n};\nPropertyFrame.prototype.getComment = function () {\n\treturn (this.cframe ? this.cframe.getComment() : false);\n};\nPropertyFrame.prototype.hasCardinalityRestriction = function () {\n\treturn (this.cframe ? this.cframe.hasRestriction() : false);\n};\nPropertyFrame.prototype.getRestriction = function () {\n\treturn (this.cframe ? this.cframe.restriction : false);\n};\nPropertyFrame.prototype.isClassChoice = function () {\n\treturn (this.cframe ? this.cframe.isClassChoice() : false);\n};\n\nPropertyFrame.prototype.deletePropertyValue = function (value, index) {\n\tthis.parent.removePropertyValue(this.property(), value, index);\n};\n\nPropertyFrame.prototype.get = function(){\n\tvar gets = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]) {\n\t\t\tvar x = this.values[i].get();\n\t\t\tif(x) gets.push(x);\n\t\t}\n\t}\n\treturn gets;\n}\n\nPropertyFrame.prototype.set = function(val){\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]) {\n\t\t\tthis.values[i].set(val);\n\t\t}\n\t}\n}\n\n\nPropertyFrame.prototype.clear = function(){\n\tfor(var i = 0 ; i<this.values.length; i++){\n\t\tthis.values[i].clear();\n\t}\n}\n\nPropertyFrame.prototype.clone = function(){\n\tconst cvalues = [];\n\tconst cloned = new PropertyFrame(this.predicate, this.cframe, this.parent);\n\tfor(var i = 0 ; i<this.values.length; i++){\n\t\tcvalues.push(this.values[i].clone());\n\t}\n\tcloned.values = cvalues;\n\treturn cloned;\n\t//\n}\n\nPropertyFrame.prototype.getAsFrames = function(){\n\tvar fs = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]){\n\t\t\tif(this.isData()){\n\t\t\t\tfs.push(this.values[i].getAsFrame());\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfs = fs.concat(this.values[i].getAsFrames());\n\t\t\t}\n\t\t}\n\t}\n\treturn fs;\n}\n\nPropertyFrame.prototype.createEmpty = function(){\n\tif (this.cframe.isData()) {\n\t\tconst df = this.cframe.copy();\n\t\tdf.set('');\n\t\treturn df;\n\t}\n\telse if (this.cframe.isObject()) {\n\t\tif (!this.cframe.isClassChoice()) {\n\t\t\tconst df = this.cframe.createEmpty(FrameHelper.genBNID());\n\t\t\treturn df;\n\t\t}\n\t\tconst clss = this.cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst df = this.cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\treturn df;\n\t\t}\n\t}\n}\n\nPropertyFrame.prototype.filter = function (rules, onmatch) {\n\tvar hits = new FrameRule().testRules(rules, this, onmatch);\n\tfor (var i = 0; i<this.values.length; i++){\n\t\tthis.values[i].filter(rules, onmatch);\n\t}\n\treturn this;\n}\n\n/*\n * Shorthand functions to make it easier to access the underlying data\n */\n\nPropertyFrame.prototype.first = function () {\n\tif (this.values && this.values[0]) {\n\t\treturn this.values[0].get();\n\t}\n};\n\nPropertyFrame.prototype.renderValues = function(){\n\tvar sortedVals = this.sortValues();\n\tvar vals = [];\n\tfor(var i = 0; i<sortedVals.length; i++){\n\t\tif(sortedVals[i] && sortedVals[i].render){\n\t\t\tvar rend = sortedVals[i].render(sortedVals[i]);\n\t\t\tif(rend) vals.push(rend);\n\t\t}\n\t}\n\treturn vals;\n};\n\nPropertyFrame.prototype.sortValues = function () {\n\tif (this.compare) {\n\t\treturn this.values.sort((a, b) => this.compare(a, b, this));\n\t}\n\treturn this.values;\n};\n\nPropertyFrame.prototype.cardControlAllows = function(action){\n\tif(this.cframe.hasRestriction()){\n\t\tvar rest = this.cframe.restriction;\n\t\tvar currentnum = this.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nPropertyFrame.prototype.isUpdated = function(){\n\treturn true;\n\tif(this.values.length != this.originalValues.length) return true;\n\tfor(var i = 0 ; i < this.values.length; i++){\n\t\tif(this.cframe && this.cframe.isData()){\n\t\t\tif(this.values[i].value() != this.originalValues[i]){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif(this.values[i].subject() != this.originalValues[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(this.values[i].isUpdated()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\n\nfunction DataFrame(frame, parent, index) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tthis.index = index;\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nDataFrame.prototype.load = function (frame) {\n\tif (typeof frame !== 'object') {\n\t\tthis.error('No frame passed to load');\n\t\treturn;\n\t}\n\t// all the meta-data carried in frames:\n\tthis.type = frame.type;\n\tthis.predicate = frame.property;\n\tthis.range = frame.range;\n\tthis.rangeValue = frame.rangeValue;\n\tthis.domain = frame.domain;\n\tthis.domainValue = frame.domainValue;\n\tthis.frame = frame.frame;\n\tthis.label = frame.label;\n\tthis.comment = frame.comment;\n\tconst { restriction } = frame;\n\tthis.restriction = false;\n\tif (restriction && typeof restriction === 'object') {\n\t\tthis.restriction = new Restriction(restriction);\n\t}\n};\n\nDataFrame.prototype.filter = function (rules, onmatch) {\n\tvar hits = new FrameRule().testRules(rules, this, onmatch);\n\treturn this;\n};\n\nDataFrame.prototype.delete = function () {\n\tthis.parent.deletePropertyValue(this.get(), this.index);\n};\n\nDataFrame.prototype.save = function () {\n\tif (this.parent) {\n\t\tthis.parent.save();\n\t}\n};\n\nDataFrame.prototype.reset = function () {\n\tthis.set(this.originalValue);\n\t// this.redraw();\n};\n\nDataFrame.prototype.clone = function () {\n\tconst newb = this.parent.addPropertyValue(this.get());\n\tconst nrend = this.copy(newb);\n\tnrend.setNew();\n\tnrend.mode = 'edit';\n\tnrend.index = this.parent.values.length;\n\tthis.parent.values.push(nrend);\n};\n\n\nDataFrame.prototype.depth = function () { return (this.parent ? this.parent.depth() : false); };\nDataFrame.prototype.property = function () { return (this.parent ? this.parent.property() : false); };\nDataFrame.prototype.subject = function () { return (this.parent ? this.parent.subject() : false); };\nDataFrame.prototype.subjectClass = function () { return (this.parent ? this.parent.subjectClass() : false); };\nDataFrame.prototype.type = function () {\treturn (this.range ? this.range : false); };\n\nDataFrame.prototype.isValidType = function (dt) {\n\tconst vtypes = ['datatypeProperty', 'objectProperty', 'restriction '];\n\tif (vtypes.indexOf(dt) === -1) return false;\n\treturn true;\n};\n\n\nDataFrame.prototype.getAsFrame = function () {\n\t const ff = { type: this.type, property: this.property() };\n\t if (this.range) ff.range = this.range;\n\t if (this.rangeValue) ff.rangeValue = this.rangeValue;\n\t if (this.domain) ff.domain = this.domain;\n\t if (this.domainValue) ff.domainValue = this.domainValue;\n\t if (this.frame) ff.frame = this.frame;\n\t if (this.label) ff.label = this.label;\n\t if (this.comment) ff.comment = this.comment;\n\t return ff;\n};\n\nDataFrame.prototype.hasRestriction = function () {\n\t if (this.restriction) {\n\t\t return this.restriction.hasCardRestriction();\n\t }\n\t return false;\n};\n\nDataFrame.prototype.copy = function (newid) {\n\tconst copy = new DataFrame(this, this.parent);\n\tif (newid) copy.domainValue = newid;\n\treturn copy;\n};\n\nDataFrame.prototype.getLabel = function () {\n\tlet lab = '';\n\tif(this.predicate == \"rdfs:label\") return \"Name\";\n\tif(this.predicate == \"rdfs:comment\") return \"Description\";\n\tif (this.label && typeof this.label === 'object') lab = this.label['@value'];\n\tif (this.label && typeof this.label === 'string') lab = this.label;\n\t// always return something\n\tif (!lab && this.property()) lab = FrameHelper.labelFromURL(this.property());\n\tif (!lab) lab = FrameHelper.labelFromURL(this.cls);\n\treturn lab;\n};\n\nDataFrame.prototype.getType = function () {\n\tif (this.range) return this.range;\n\tif (this.rangeValue && this.rangeValue.type) return this.rangeValue.type;\n\treturn false;\n};\n\nObjectFrame.prototype.getLabel = DataFrame.prototype.getLabel;\n\nDataFrame.prototype.getComment = function () {\n\tlet comment = '';\n\tif (this.comment && typeof this.comment === 'object') comment = this.comment['@value'];\n\tif (this.comment && typeof this.comment === 'string') comment = this.comment;\n\treturn comment;\n};\n\nObjectFrame.prototype.getComment = DataFrame.prototype.getComment;\n\n\nDataFrame.prototype.error = function (msg) {\n\tif (msg)\tthis.err = msg;\n\treturn this.err;\n};\n\nDataFrame.prototype.isValid = function () {\n\tif (!(this.type && this.isValidType(this.type))) {\n\t\tthis.error(`Missing or Illegal Frame Type ${this.type}`);\n\t\treturn false;\n\t}\n\tif (!(this.predicate)) {\n\t\tthis.error('Missing Frame Property');\n\t\treturn false;\n\t}\n\tif (!(this.domain)) {\n\t\tthis.error('Missing Frame Domain');\n\t\treturn false;\n\t}\n\tif (!(this.range)) {\n\t\tthis.error('Missing Frame Range');\n\t\treturn false;\n\t}\n\tif (this.isObjectProperty() && !(this.frame && typeof this.frame === 'object')) {\n\t\tthis.error('Missing Object Frame');\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nDataFrame.prototype.isObjectProperty = function () {\n\treturn this.type === 'objectProperty';\n};\n\nDataFrame.prototype.isDatatypeProperty = function () {\n\treturn this.type === 'datatypeProperty';\n};\n\nDataFrame.prototype.isLogic = function () {\n\tif (this.type === 'and' || this.type === 'or' || this.type === 'xor') {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.isRestriction = function () {\n\treturn this.type === 'restriction';\n};\n\nDataFrame.prototype.ftype = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isDatatypeProperty()) return 'data';\n\tif (this.isChoice()) return 'oneOf';\n\tif (this.isObject()) return 'object';\n\tif (this.isLogic()) return 'logic';\n\tif (this.isClassChoice()) return 'class_choice';\n\treturn undefined;\n};\n\n\nDataFrame.prototype.isClassChoice = function () {\n\treturn (this.frame && this.frame.type === 'class_choice');\n};\n\nDataFrame.prototype.isString = function () {\n\tif (this.range === FrameHelper.getStdURL('xsd', 'string')) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.getChoiceOptions = function () {\n\tconst opts = [];\n\tfor (let i = 0; i < this.frame.elements.length; i += 1) {\n\t\tconst option = {};\n\t\tif (this.frame.elements[i].label) {\n\t\t\toption.label = this.frame.elements[i].label['@value'];\n\t\t} else {\n\t\t\toption.label = FrameHelper.labelFromURL(this.frame.elements[i].class);\n\t\t}\n\t\toption.value = this.frame.elements[i].class;\n\t\topts.push(option);\n\t}\n\treturn opts;\n};\n\nDataFrame.prototype.lang = function () {\n\treturn 'en';\n};\n\nDataFrame.prototype.isChoice = function () {\n\treturn (this.frame && this.frame.type === 'oneOf');\n};\n\nDataFrame.prototype.isDocument = function () {\n\treturn (this.frame && this.frame.type === 'document');\n};\n\nDataFrame.prototype.isData = function () {\n\treturn (this.isDocument() || this.isChoice() || this.isDatatypeProperty());\n};\n\nDataFrame.prototype.isObject = function () {\n\treturn (this.isObjectProperty() && this.frame && !(this.isChoice() || this.isDocument()));\n};\n\nDataFrame.prototype.isProperty = function () {\n\treturn false;\n};\n\nDataFrame.prototype.getTypeShorthand = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isChoice()) return 'choice';\n\tconst sh = FrameHelper.getShorthand(this.getType());\n\treturn (sh || this.getType());\n};\n\nDataFrame.prototype.get = function () {\n\tif (this.contents) {\n\t\treturn this.contents;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue && typeof this.rangeValue['@value'] !== 'undefined') {\n\t\treturn this.rangeValue['@value'];\n\t}\n\tif (this.isChoice() || this.isDocument()) {\n\t\treturn this.frame.domainValue;\n\t}\n\treturn '';\n};\n\nDataFrame.prototype.set = function (value, normalizer) {\n\tif (normalizer) value = normalizer(value, this);\n\tthis.contents = value;\n\tif (this.isChoice() || this.isDocument()) {\n\t\tthis.frame.domainValue = value;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue) {\n\t\tthis.rangeValue['@value'] = value;\n\t}\n};\n\nDataFrame.prototype.clear = function () {\n\tif (this.isDocument() || this.isChoice() || this.isDatatypeProperty()) {\n\t\tthis.set('');\n\t}\n};\n\nDataFrame.prototype.cardControlAllows = function(action){\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nDataFrame.prototype.extract = function(){\n\tvar val = this.get();\n\tif(val !== \"\" && val !== false){\n\t\tif(this.isDatatypeProperty()){\n\t\t\tvar objlit = { \"@value\": this.get()}\n\t\t\tif(this.isString()) objlit[\"@language\"] = this.lang();\n\t\t\telse objlit[\"@type\"] = this.getType();\n\t\t\treturn objlit;\n\t\t}\n\t\telse if(this.isChoice() || this.isDocument()){\n\t\t\treturn {\"@id\": val}\n\t\t}\n\t}\n\treturn val;\n}\n\n\n/*\n * Class frames represent the archetypal version of a property frame as returned by the class frame api\n */\nfunction ClassFrame(frame, parent) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nClassFrame.prototype = DataFrame.prototype;\n\nClassFrame.prototype.loadFromObjectFrame = function (par, child) {\n\t// all the meta-data carried in frames:\n\tthis.type = 'objectProperty';\n\tthis.predicate = par.property;\n\tthis.range = par.range;\n\tthis.rangeValue = child.subjid;\n\tthis.domain = par.cls;\n\tthis.domainValue = par.subjid;\n\tthis.label = par.getLabel();\n\tthis.comment = par.getComment();\n\tthis.restriction = par.restriction;\n};\n\nClassFrame.prototype.createEmptyChoice = function (cls, newid) {\n\tconst cf = this.getChosenClassFrames(cls);\n\tconst objframe = new ObjectFrame(cls);\n\tif (newid) objframe.subjid = newid;\n\tobjframe.loadClassFrames(cf);\n\tconst fframe = objframe.fillFromSchema();\n\treturn fframe;\n};\n\nClassFrame.prototype.getChosenClassFrames = function (chosen) {\n\tlet nc = [];\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\tif (chosen === this.frame.operands[i][j].domain) {\n\t\t\t\tnc = nc.concat(this.frame.operands[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\treturn nc;\n};\n\nClassFrame.prototype.createEmpty = function (newid) {\n\tif (this.isObject()) {\n\t\tconst objframe = new ObjectFrame(this.range);\n\t\tif (newid) objframe.subjid = newid;\n\t\tobjframe.loadClassFrames(this.frame);\n\t\tconst fframe = objframe.fillFromSchema();\n\t\treturn fframe;\n\t}\n\tif (this.isData()) {\n\t\tconst dataframe = this.copy();\n\t\tdataframe.set('');\n\t\treturn dataframe;\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.cloneDataFrame = function (newid, other) {\n\treturn other;\n};\n\nClassFrame.prototype.clone = function (newid, other) {\n\tif (this.isObject()) {\n\t\tconsole.log('cannot clone class frame');\n\t} else if (this.isData()) {\n\t\treturn this.cloneDataFrame(newid, other);\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.getClassChoices = function () {\n\tconst choices = [];\n\tif (this.frame.operands) {\n\t\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\t\tconst domcls = this.frame.operands[i][j].domain;\n\t\t\t\tif (domcls && choices.indexOf(domcls) === -1) {\n\t\t\t\t\tchoices.push(domcls);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn choices;\n};\n\nClassFrame.prototype.getChosenClassFrame = function (chosen) {\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tconst operand = this.frame.operands[i];\n\t\tif (operand.length) {\n\t\t\tfor (let j = 0; j < operand.length; j += 1) {\n\t\t\t\tif (operand[j] && (chosen === operand[j].domain)) {\n\t\t\t\t\tconst cf = new ClassFrame(operand);\n\t\t\t\t\treturn cf;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (operand.range && chosen === operand.range) {\n\t\t\tconst cf = new ClassFrame(operand);\n\t\t\treturn cf;\n\t\t}\n\t}\n\treturn false;\n};\n\nClassFrame.prototype.getChosenFrame = function (dataframe) {\n\treturn dataframe;\n};\n\n\nfunction Restriction(restriction) {\n\tthis.min = 0;\n\tthis.max = 0;\n\tif (restriction) this.loadRestriction(restriction);\n}\n\nRestriction.prototype.hasCardRestriction = function () {\n\tif (this.min === 0 && this.max === 0) return false;\n\treturn true;\n};\n\nRestriction.prototype.loadRestriction = function (restriction) {\n\tif (typeof restriction.cardinality !== 'undefined') {\n\t\tthis.max = restriction.cardinality;\n\t\tthis.min = restriction.cardinality;\n\t} else if (typeof restriction.maxCardinality !== 'undefined') {\n\t\tthis.max = restriction.maxCardinality;\n\t} else if (typeof restriction.minCardinality !== 'undefined') {\n\t\tthis.min = restriction.minCardinality;\n\t} else if (typeof restriction.type !== 'undefined' && restriction.type === 'and' && typeof restriction.operands === 'object') {\n\t\tfor (let i = 0; i < restriction.operands.length; i += 1) {\n\t\t\tconst nrest = new Restriction(restriction.operands[i]);\n\t\t\tif (this.max === 0 && nrest.max > 0) this.max = nrest.max;\n\t\t\telse if (this.max > 0 && nrest.max > 0 && nrest.max < this.max) this.max = nrest.max;\n\t\t\tif (this.min === 0 && nrest.min > 0) this.min = nrest.min;\n\t\t\telse if (this.min > 0 && nrest.min > 0 && nrest.min > this.min) this.min = nrest.min;\n\t\t}\n\t}\n};\n\nmodule.exports = ObjectFrame;\n"],"sourceRoot":""}