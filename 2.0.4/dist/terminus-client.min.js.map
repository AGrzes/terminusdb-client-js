{"version":3,"sources":["webpack://TerminusClient/webpack/bootstrap","webpack://TerminusClient/./lib/utils.js","webpack://TerminusClient/./node_modules/axios/lib/utils.js","webpack://TerminusClient/./lib/query/woqlCore.js","webpack://TerminusClient/./lib/woqlRule.js","webpack://TerminusClient/./lib/viewer/viewConfig.js","webpack://TerminusClient/./lib/errorMessage.js","webpack://TerminusClient/./lib/frameRule.js","webpack://TerminusClient/./lib/const.js","webpack://TerminusClient/./lib/axiosInstance.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/bind.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/buildURL.js","webpack://TerminusClient/./node_modules/axios/lib/cancel/isCancel.js","webpack://TerminusClient/./node_modules/axios/lib/defaults.js","webpack://TerminusClient/./node_modules/axios/lib/adapters/xhr.js","webpack://TerminusClient/./node_modules/axios/lib/core/createError.js","webpack://TerminusClient/./node_modules/axios/lib/core/mergeConfig.js","webpack://TerminusClient/./node_modules/axios/lib/cancel/Cancel.js","webpack://TerminusClient/./lib/connectionCapabilities.js","webpack://TerminusClient/./lib/connectionConfig.js","webpack://TerminusClient/./lib/terminusIDParser.js","webpack://TerminusClient/./lib/woqlResult.js","webpack://TerminusClient/./lib/woql.js","webpack://TerminusClient/./lib/query/woqlPrinter.js","webpack://TerminusClient/./lib/query/woqlSchema.js","webpack://TerminusClient/./lib/query/woqlLibrary.js","webpack://TerminusClient/./lib/terminusRule.js","webpack://TerminusClient/./lib/viewer/tableConfig.js","webpack://TerminusClient/./lib/viewer/woqlTable.js","webpack://TerminusClient/./lib/viewer/chooserConfig.js","webpack://TerminusClient/./lib/viewer/woqlChooser.js","webpack://TerminusClient/./lib/viewer/graphConfig.js","webpack://TerminusClient/./lib/viewer/woqlGraph.js","webpack://TerminusClient/./lib/viewer/chartConfig.js","webpack://TerminusClient/./lib/viewer/woqlChart.js","webpack://TerminusClient/./lib/viewer/streamConfig.js","webpack://TerminusClient/./lib/viewer/woqlStream.js","webpack://TerminusClient/./lib/viewer/frameConfig.js","webpack://TerminusClient/./lib/viewer/documentFrame.js","webpack://TerminusClient/./index.js","webpack://TerminusClient/./lib/woqlClient.js","webpack://TerminusClient/./lib/dispatchRequest.js","webpack://TerminusClient/./node_modules/buffer/index.js","webpack://TerminusClient/(webpack)/buildin/global.js","webpack://TerminusClient/./node_modules/base64-js/index.js","webpack://TerminusClient/./node_modules/ieee754/index.js","webpack://TerminusClient/./node_modules/isarray/index.js","webpack://TerminusClient/./node_modules/axios/index.js","webpack://TerminusClient/./node_modules/axios/lib/axios.js","webpack://TerminusClient/./node_modules/axios/lib/core/Axios.js","webpack://TerminusClient/./node_modules/axios/lib/core/InterceptorManager.js","webpack://TerminusClient/./node_modules/axios/lib/core/dispatchRequest.js","webpack://TerminusClient/./node_modules/axios/lib/core/transformData.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://TerminusClient/./node_modules/axios/lib/core/settle.js","webpack://TerminusClient/./node_modules/axios/lib/core/enhanceError.js","webpack://TerminusClient/./node_modules/axios/lib/core/buildFullPath.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/combineURLs.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/cookies.js","webpack://TerminusClient/./node_modules/axios/lib/cancel/CancelToken.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/spread.js","webpack://TerminusClient/./lib/query/woqlQuery.js","webpack://TerminusClient/./lib/query/woqlBuilder.js","webpack://TerminusClient/./lib/query/woqlPaging.js","webpack://TerminusClient/./lib/woqlView.js","webpack://TerminusClient/./lib/objectFrame.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Utils","rdf","rdfs","xsd","owl","tcs","xdd","v","terminus","vio","payload","encodeURIComponent","payloadArr","keys","keyElement","valueElement","push","join","prefix","url","this","standard_urls","obj","length","Math","random","toString","substring","Date","getTime","link","pref","full","ida","idb","unshorten","sha","getShorthand","shb","prefixes","validURL","bits","split","str","nurl","urlFragment","lastIndexOf","replace","charAt","toUpperCase","slice","window","location","href","urlStr","ext","vars","nvars","addNamespaceToVariable","mvar","removeNamespaceFromVariable","val","row","rad","TypeHelper","isStringType","stype","isDatatype","sh","shorten","numberWithCommas","separator","parts","datatypes","parseRangeValue","dividor","vals","indexOf","DateHelper","parseXsdTime","tz","extractXsdTimezone","hour","minute","second","timezone","parseXsdDate","year","parsed","abs","month","parseInt","day","parseDate","ty","parseXsdDateTime","addXsdPadding","nparsed","xsdFromParsed","ret","xparsed","convertTimestampToXsd","a","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","datetime","ptime","isArray","isUndefined","isObject","isFunction","forEach","fn","isArrayBuffer","isBuffer","constructor","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","buffer","isString","isNumber","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","document","merge","result","assignValue","arguments","deepMerge","extend","b","thisArg","trim","UTILS","require","WOQLPrinter","WOQLQuery","query","errors","cursor","chain_ended","contains_update","paging_transitive_properties","update_operators","vocab","loadDefaultVocabulary","tripleBuilder","tokenize","pat","getClauseAndRemainder","seq","open","rem","copyJSON","orig","rollup","Array","nuj","k","part","nupart","j","sub","empty","q","parameterError","msg","hasErrors","addSubQuery","Subq","jobj","nv","containsUpdate","json","updated","jlt","type","varj","varb","qobj","asv","colname_or_index","vname","asvar","addASV","wform","opts","format","format_header","arop","arg","cleanObject","vlist","list","vobj","co","wlist","wvar","expandVariable","node","qle","cleanSubject","subj","cleanPredicate","pred","cleanPathPredicate","cleanClass","cleanGraph","g","varname","always","stringonly","cleanType","defaultContext","DB_IRI","def","scm","doc","db","getContext","prop","nq","nc","context","setVocabulary","getVocabulary","loadVocabulary","client","quad","execute","then","bindings","spl","commit_msg","connection","getJSONContext","prettyPrint","clang","printJSON","wrapCursorWithAnd","nj","and","findLastSubject","lqs","ls","compilePathPattern","toks","tokensToJSON","ntoks","tok","left","right","first","meat","TerminusRule","WOQLRule","pattern","WOQLPattern","TerminusPattern","setVariables","variables","addNamespacesToVariables","current_variable","varlist","edge","source","target","scope","vs","rownum","constraints","filter","tester","matchRow","rules","action","matches","rule","matchCell","matchColumn","matchNode","nid","matchPair","keya","keyb","matchEdge","literal","unpack","numberMatch","testVariableConstraints","testBasics","testVariableConstraint","testValue","setPattern","ViewConfig","WOQLViewRule","render","func","view_render","renderer","view_renderer","getRulesJSON","jr","getBasicJSON","loadBasicJSON","getBasicprettyPrint","color","hidden","size","icon","JSON","stringify","text","border","args","click","hover","mjson","rend","onClick","onHover","getErrorAsMessage","api","err","response","data","formatErrorMessage","body","status","method","nmsg","getAPIErrorMessage","getAccessDeniedMessage","accessDenied","server","getInvalidURIMessage","getInvalidParameterMessage","parseAPIError","e","error","headers","redirected","FrameRule","FramePattern","testRules","frame","onmatch","matched_rules","patternMatchesFrame","checkFrame","frame_type","label","subject","subjectClass","range","depth","index","parent","par","children","kid","rtype","getRendererType","illegalRuleType","checkFrameType","checkLabel","checkSubject","checkSubjectClass","checkProperty","checkDepth","checkRange","checkValue","checkType","checkLiteral","checkParent","checkChildren","checkIndex","checkStatus","frameType","kids","rsubj","IDsMatch","found","properties","values","isUpdated","isNew","propertyIDsMatch","isDatatypeProperty","valuesMatch","rangeIDsMatch","rcls","classIDsMatch","ftype","getLabel","console","log","Error","stringMatch","isProperty","isData","renderer_type","freeze","CONNECT","GET_TRIPLES","UPDATE_TRIPLES","CLASS_FRAME","WOQL_QUERY","DELETE_DATABASE","CREATE_DATABASE","CREATE_GRAPH","DELETE_GRAPH","CLONE","PUSH","FETCH","REBASE","BRANCH","axiosInstance","apply","utils","encode","params","paramsSerializer","serializedParams","toISOString","hashmarkIndex","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","adapter","defaults","XMLHttpRequest","process","transformRequest","transformResponse","parse","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","common","settle","buildURL","buildFullPath","parseHeaders","isURLSameOrigin","createError","config","Promise","resolve","reject","requestData","requestHeaders","request","auth","username","password","Authorization","btoa","fullPath","baseURL","onreadystatechange","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseType","responseText","statusText","onabort","onerror","ontimeout","timeoutErrorMessage","cookies","xsrfValue","withCredentials","read","undefined","toLowerCase","setRequestHeader","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","cancel","abort","send","enhanceError","message","code","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","axiosKeys","concat","otherKeys","Cancel","CONST","ErrorMessage","ConnectionCapabilities","setCapabilities","capabilities","capabilitiesKeys","auths","access","actions","actionsArr","map","item","nrec","findResourceDocumentID","dbid","account","testrn","formResourceName","rec","ctxt","getServerRecord","oid","getDBRecord","docid","getDBMetadata","dbrec","extractMetadata","meta","title","description","rn","getServerDBRecords","dbrecs","getServerDBMetadata","metas","met","removeDB","capabilitiesPermit","IDParser","ConnectionConfig","serverUrl","remote_auth","basic_auth","accountid","default_branch_id","default_repo_id","branchid","repoid","refid","connection_error","surl","parseServerURL","update","setError","copy","other","newParams","setAccount","setDB","setRemoteAuth","setBasicAuth","user","branch","setBranch","ref","setREf","repo","setRepo","serverURL","basicAuth","ignore_jwt","clearCursor","setCursor","setRef","inputStr","aid","parseDBID","bid","userKey","userId","uid","parseKey","details","remoteAuth","dbURL","dbBase","graphURL","gid","branchBase","triplesURL","graphId","queryURL","classFrameURL","cloneURL","new_repo_id","crl","fetchURL","rebaseURL","source_repo","source_branch","purl","pushURL","target_repo","target_branch","branchURL","nuid","repoBase","dbURLFragment","validIDString","parseAccount","parseBranch","parseJWT","jwt","WOQL","WOQLResult","results","insert_count","inserts","delete_count","deletes","transaction_retry_count","no_compress","compress","nprop","nval","oval","noval","kval","hasBindings","count","hasUpdates","getBindings","getVariableList","last","next","res","prev","sort","asc_or_desc","compareValues","WOQLSchema","refPath","Query","using","comment","select","or","graph_filter","from","graph_descriptor","into","triple","subsumption","eq","equals","substr","String","Before","Length","After","SubString","update_object","delete_object","JSON_or_IRI","read_object","IRI","Output","Format","asvars","query_resource","put","as","vari","remote","file","post","delete_triple","S","P","O","delete_quad","G","add_triple","add_quad","when","Update","eval","arith","plus","minus","times","divide","like","stringa","stringb","lev_distance","div","exp","floor","isa","dist","less","v1","v2","greater","opt","optional","unique","idgen","inputVarList","outputVar","idgenerator","upper","u","lower","pad","input","len","output","member","El","List","glue","sum","start","limit","re","test","regexp","var1","not","typecast","vara","cast","order_by","group_by","gvarlist","groupedvar","groupquery","path","Subject","Pattern","Path","Graph","Size","triple_count","TripleCount","star","graphRef","Subj","Pred","Obj","nodeid","insert","Node","Type","schema","add_class","classid","graph","add_property","propid","delete_class","delete_property","doctype","insert_data","refGraph","insert_class_data","doctype_data","insert_property_data","lib","setContextFromClient","DB","resource","META","COMMITS","REPO","REF","HEAD","language","indent_spaces","boxed_predicates","subject_cleaned_predicates","schema_cleaned_predicates","list_operators","query_list_operators","operator_maps","IDGenerator","IsA","PostResource","FileResource","RemoteResource","AsVars","NamedAsVars","IndexedAsVars","shortcuts","concatenate","pythonic","with","show_context","needsParentheses","noparens","nspaces","spaces","level","fluent","newline","pvar","plit","operator","ujson","unboxJSON","printArgument","getBoxedPredicate","isListOperator","getFunctionForOperator","indent","getWOQLPrelude","getArgumentOrder","nfluent","argumentTakesNewline","splice","isQueryListOperator","argumentRequiresArray","predicate","entries","decompilePathPattern","decompileConcatList","decompileAsVars","arr_entries","nlevel","jstr","uncleanArgument","cnt","exec","inline","prelude","f","bp","asvs","wasv","pstruct","can_concat","el","nextel","nstr","astr","next1","next2","seqstr","ap","adding_class","id","domain","max","min","cardinality","boxClasses","classes","except","subs","nsubs","idgens","cls","generateChoiceList","clslabel","clsdesc","choices","clist","listid","lastid","wq","confs","chid","clab","desc","alert","labelFromURL","cq","nextid","oneof","libs","loadXDD","loadXDDBoxes","loadXSDBoxes","addDatatype","descr","dt","boxDatatype","datatype","box_class_id","box_prop_id","box_class","box_prop","WOQLLibrary","default_schema","getAllDocuments","documentMetadata","concreteDocumentClasses","propertyMetadata","elementMetadata","classList","getDataOfClass","chosen","getDataOfProperty","documentProperties","getDocumentConnections","getAllDocumentConnections","getInstanceMeta","simpleGraphQuery","getCapabilities","createCapability","vcap","vdb","capids","gens","writecap","getBranchDetails","branch_name","head","cresource","woql","pointQueryAtResource","loadBranchDetails","getBranchNames","loadBranchNames","getBranchGraphNames","getGraphsAtRef","loadBranchGraphNames","checkout","commitID","loadGraphsAtRef","loadGraphStructure","getGraphStructure","commitquery","getFirstCommit","rewind","ts","getCommitAtTime","loadCommitAtTime","getCommitBefore","getCommitDetails","loadCommitBefore","commit_name","commitvar","loadCommitDetails","loadCommitBranchDetails","getCommitBranchDetails","getBranchLimits","loadBranchLimits","comvar","loadFirstCommit","timestampToActiveCommit","runQueryAtTime","commitbase","runQueryAtTimes","graphDiffBetweenRefs","graphfilter","refa","refb","dumpGraphToFile","graphid","eatDump","history","dates","branchresource","repobase","timestamps","dateToTimestamp","tf","njson","constraint","vundertest","arr","nonstring","compareIDs","vala","valb","RegExp","Config","WOQLTable","WOQLTableConfig","WOQLTableRule","conf","column_order","pagesize","pager","page","changesize","loadJSON","nr","x","trenderer","header","theader","order","removeNamespacesFromVariables","show_pager","change_pagesize","show_pagesize","show_pagenumber","column","cols","hdr","DataValue","datavalue","options","setResult","canAdvancePage","getLimit","canChangePage","canRetreatPage","getPage","getPageSize","setPage","setPageSize","nextPage","firstPage","previousPage","getColumnsToRender","hasColumnOrder","getColumnOrder","hasSelect","getSelectVariables","self","col","isSortableColumn","isFilterableColumn","getColumnHeaderContents","colid","hr","h","labelFromVariable","nquery","nresult","notify","hasDefinedEvent","getDefinedEvent","getRowClick","getCellClick","getRowHover","getCellHover","hasCellClick","hasRowClick","hasCellHover","hasRowHover","getRenderer","getSpecificRender","getRendererForDatatype","createRenderer","renderValue","dv","nvalue","WOQLChooser","WOQLChooserConfig","WOQLChooserRule","getBasicPrettyPrint","change","show_empty","labels","titles","direction","onChange","placeholder","value_variable","label_variable","title_variable","sort_variable","sort_direction","selected","set","ch","rows","includeRow","rowToChoice","choice","getRowID","getLabelFromBinding","getTitleFromBinding","getSelectedFromBinding","rval","sp","getSpecialRenderer","renderSpecial","lab","setRenderer","WOQLGraph","WOQLGraphConfig","WOQLGraphRule","literals","show_literals","source_variable","fontfamily","fontfam","show_force","force","fix_nodes","fixed","explode_out","explode","selected_grows","bigsel","width","gwidth","height","gheight","edges","nedges","show_edges","estrs","charge","collisionRadius","arrow","distance","symmetric","weight","w","nodes","calculateVariableTypes","extractFromBinding","combineEdges","combineNodes","lits","includeNode","includeLiteralNode","genBNID","getLiteralOwner","addAdornedNode","addAdornedEdge","createEdgesFromIDs","ndid","ks","kt","hid","radius","getConfigValue","nodetype","cs","es","getEdges","nnodes","nodes_referenced_by_edges","fedges","k2","getNodes","num","WOQLChartConfig","WOQLChartRule","margin","layout","_title","_description","_layout","marginObj","_margin","xAxis","woqlRule","legend","yAxis","bar","line","point","area","style","legendType","fillOpacity","fill","stroke","strokeWidth","dot","isVisible","labelRotate","angle","padding","paddingObj","labelDateInput","labelDateOutput","stackId","axisDomain","domainArr","colorEntry","propValue","customColors","colorsObj","barSize","WOQLChart","WOQLStream","WOQLStreamConfig","WOQLStreamRule","wqt","template","mtemplate","wqrs","DocumentFrame","FrameConfig","DocumentRule","load_schema","json_rules","get_schema","show_all","all","show_parts","fp","setFrameDisplayOptions","display_options","view","showDisabledButtons","show_disabled_buttons","collapse","headerStyle","header_style","features","setFrameFeatures","headerFeatures","header_features","showEmpty","dataviewer","setFrameArgs","existing","fresh","got","fkey","rep","props","compare","hf","feats","applyFeatureProperty","nfeats","nfeat","unpackFeatures","extensions","fstr","fid","ObjectFrame","FrameHelper","dburl","load","loadComplete","loadDocument","loadSchema","encoding","getDocument","loadDataFrames","ncls","getClassFrame","loadSchemaFrames","loadDocumentSchema","clsid","dataframes","classframes","loadClassFrames","subjid","newDoc","fillFromSchema","applyRules","mymatch","WOQLClient","View","DispatchRequest","connectionConfig","authInfo","base","connect","curl","URIError","dispatch","createDatabase","errmsg","deleteDatabase","createGraph","commit","generateCommitInfo","deleteGraph","getTriples","gtype","updateTriples","turtle","class","UPDATE_SCHEMA","doql","new_branch_id","origin","fetch","rebase","remote_repo_id","remote_branch_id","clonedb","clone_source","newid","api_url","author","btoaImplementation","Buffer","redirect","referrer","encoded","rencoded","URIEncodePayload","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","encodingOrOffset","allocUnsafe","TypeError","array","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","isEncoding","actual","write","fromString","checked","fromObject","assertSize","loweredCase","utf8ToBytes","base64ToBytes","slowToString","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","hexWrite","offset","Number","remaining","strLen","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","allocUnsafeSlow","_isBuffer","y","pos","swap16","swap32","swap64","inspect","match","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","src","dst","Function","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","Axios","mergeConfig","createInstance","defaultConfig","instance","axios","instanceConfig","CancelToken","isCancel","promises","spread","default","InterceptorManager","dispatchRequest","interceptors","chain","interceptor","unshift","fulfilled","rejected","shift","getUri","handlers","use","eject","transformData","throwIfCancellationRequested","throwIfRequested","reason","fns","normalizedName","isAxiosError","number","fileName","lineNumber","columnNumber","stack","isAbsoluteURL","combineURLs","requestedURL","relativeURL","ignoreDuplicateOf","originURL","msie","userAgent","urlParsingNode","createElement","resolveURL","setAttribute","protocol","host","search","hash","hostname","port","pathname","requestURL","expires","secure","cookie","toGMTString","decodeURIComponent","remove","now","executor","resolvePromise","token","callback","Collection","embedquery","pop","onevar","queries","qjson","subvar","docjson","OutputVar","varList","onemap","oasv","fpath","uri","Predicate","Object_or_Literal","Consequent","untrimmed","trimmed","slist","nlist","slist2","rest","va","vb","orderedVarlist","cmds","TripleBuilder","createTripleBuilder","addPO","proId","gpart","combine","nwoql","lang","pn","card","lastsubj","gobj","subq","newq","getO","which","os","od","cardcls","getPagingProperty","setLimit","setPagingProperty","isPaged","psize","hasStart","getStart","pagenum","pstart","setStart","addStart","npage","pageprop","table","chooser","chart","stream","parentframe","originalFrames","PropertyFrame","cframe","DataFrame","ClassFrame","Restriction","restriction","loadRestriction","jsonld_context","cf","isValid","hasSchema","frames","domainValue","getPropertyClassFrame","isClassChoice","getChosenClassFrame","isLogic","getChosenFrame","addFrame","getAsFrame","ff","getAsFrames","restrictions","reset","clear","getProperties","filled","missing","getMissingPropertyList","nmissing","newb","getFilledPropertyList","pf","clone","cloned","getChild","childid","pframe","getProperty","addProperty","ndata","createEmpty","createEmptyChoice","clss","getClassChoices","addValueFrame","addPropertyValue","addValue","removeProperty","removePropertyValue","removeValue","extract","extracts","extracted","extractJSONLD","parentObject","root","renderProperties","sortProperties","nprops","unsorted","standardCompare","cardControlAllows","hasRestriction","currentnum","getSummary","propcount","df","oframe","nframe","childUpdated","getComment","hasCardinalityRestriction","getRestriction","deletePropertyValue","gets","cvalues","fs","renderValues","sortedVals","sortValues","rangeValue","save","originalValue","nrend","setNew","isValidType","hasCardRestriction","getType","isObjectProperty","isRestriction","isDocument","isChoice","getStdURL","getChoiceOptions","elements","option","getTypeShorthand","contents","normalizer","objlit","loadFromObjectFrame","child","getChosenClassFrames","objframe","operands","dataframe","cloneDataFrame","domcls","operand","maxCardinality","minCardinality","nrest"],"mappings":"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","file":"terminus-client.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 38);\n","/**\n * @file Terminus Client Utility Functions\n * @license Apache Version 2\n * Object for bunding up common Terminus Utility Functions \n */\nconst Utils = {}\n\n\n/**\n * default set of prefixes that will be used for URL compression\n */\nUtils.standard_urls = {\n\trdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n\trdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n\txsd: 'http://www.w3.org/2001/XMLSchema#',\n\towl: 'http://www.w3.org/2002/07/owl#',\n\ttcs: 'http://terminusdb.com/schema/tcs#',\n\txdd: 'http://terminusdb.com/schema/xdd#',\n\tv: 'http://terminusdb.com/woql/variable/',\n\tterminus: 'http://terminusdb.com/schema/terminus#',\n\tvio: 'http://terminusdb.com/schema/vio#'\n}\n\n/**\n * Encode document payload for GET  \n */\nUtils.URIEncodePayload = function(payload) {\n\tif (typeof payload === 'string') return encodeURIComponent(payload);\n\tconst payloadArr = [];\n\tfor (const key of Object.keys(payload)) {\n\t\tif (typeof payload[key] === 'object') {\n\t\t\tfor (const keyElement of Object.keys(payload[key])) {\n\t\t\t\t const valueElement = payload[key][keyElement];\n\t\t\t\t payloadArr.push(`${encodeURIComponent(keyElement)}=${encodeURIComponent(valueElement)}`);\n\t\t\t}\n\t\t} else {\n\t\t\tpayloadArr.push(`${encodeURIComponent(key)}=${encodeURIComponent(payload[key])}`);\n\t\t}\n\t}\n\treturn payloadArr.join('&');\n}\n\n\n\n/**\n * Adds an entry to the list of known standard URL prefixes \n */\nUtils.addURLPrefix = function (prefix, url) {\n\tthis.standard_urls[prefix] = url;\n};\n\n\n/**\n * is the object empty? \n * returns true if the json object is empty \n */\nUtils.empty = function (obj) {\n\t   // null and undefined are \"empty\"\n\tif (!obj) return true;\n\t// Assume if it has a length property with a non-zero value\n\t// that that property is correct.\n\tif (obj.length > 0) return false;\n\tif (obj.length === 0) return true;\n\t// Otherwise, does it have any properties of its own?\n\t// Note that this doesn't handle\n\t// toString and valueOf enumeration bugs in IE < 9\n\t// for (const key in obj) {\n\tif (typeof obj === 'object') {\n\t\tfor (const key of Object.keys(obj)) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) return false;\n\t\t}\n\t}\n\treturn true;\n};\n\n/**\n * Generates a unique blank node id \n */\nUtils.genBNID = function () {\n\tconst r = Math.random().toString(36).substring(7);\n\tconst d = new Date();\n\tconst bnid = `_:${r}${d.getTime()}`;\n\treturn bnid;\n};\n\n/**\n * Returns the shorthand version (compressed to prefix:id ) of a url or false if there is none known for that URL\n */\nUtils.getShorthand = function (link) {\n\tif (typeof link === 'object' && link.length) link = link[0];\n\tif (link && typeof link === 'string') {\n\t\tfor (const pref of Object.keys(this.standard_urls)) {\n\t\t\tconst full = this.standard_urls[pref];\n\t\t\tif (link.substring(0, full.length) === full) {\n\t\t\t\tconst sh = `${pref}:${link.substring(full.length)}`;\n\t\t\t\treturn sh;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\n/**\n * Compares 2 IRIs for equality by checking compressed and expanded versions of both sides\n */\nUtils.compareIDs = function (ida, idb) {\n\tif (ida === idb) return true;\n\tif (this.unshorten(ida) === idb) return true;\n\tif (this.unshorten(ida) === this.unshorten(idb)) return true;\n\tconst sha = this.getShorthand(ida);\n\tconst shb = this.getShorthand(idb);\n\tif (sha && ((sha === idb) || (sha === shb))) return true;\n\tif (shb && shb === ida) return true;\n\treturn false;\n};\n\n\n/**\n * Shortens a URL to its compressed format - returns the full URL if not possible\n */\nUtils.shorten = function (url, prefixes) {\n\tprefixes = prefixes || this.standard_urls;\n\tfor (const pref in prefixes) {\n\t\tif (prefixes[pref] == url.substring(0, prefixes[pref].length)) {\n\t\t\treturn (`${pref}:${url.substring(prefixes[pref].length)}`);\n\t\t}\n\t}\n\treturn url;\n};\n\n/**\n * Expands a URL to its full URL format - returns the passed string if not possible to expand\n */\nUtils.unshorten = function (url) {\n\tif (this.validURL(url)) return url;\n\tif (!url) return url;\n\tconst bits = url.split(':');\n\tif (bits[1]) {\n\t\tif (this.standard_urls[bits[0]]) {\n\t\t\treturn this.standard_urls[bits[0]] + bits[1];\n\t\t}\n\t}\n\treturn url;\n};\n\n/**\n * Tests a string to see if it is a valid URL - \n * Valid URLs are those that start with http:// or https://\n */\nUtils.validURL = function (str) {\n\tif (str && (str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://')) return true;\n\treturn false;\n};\n\n\n/**\n * Generates a text label from a URL\n */\nUtils.labelFromURL = function (url) {\n\tlet nurl = this.urlFragment(url);\n\tnurl = (nurl || url);\n\tif (nurl.lastIndexOf('/') < nurl.length - 1) {\n\t\tnurl = nurl.substring(nurl.lastIndexOf('/') + 1);\n\t}\n\tnurl = nurl.replace(/_/g, ' ');\n\treturn nurl.charAt(0).toUpperCase() + nurl.slice(1);\n};\n\n/**\n * Generates a text label from a URL\n */\nUtils.labelFromVariable = function (v) {\n\tv = v.replace(/_/g, ' ');\n\treturn v.charAt(0).toUpperCase() + v.slice(1);\n};\n\n/**\n * returns the fragment part of a URL (whether compressed or not)\n */\nUtils.urlFragment = function (url) {\n\turl = (typeof url !== 'string') ? window.location.href : url;\n\tlet bits = url.split('#');\n\tif (bits.length <= 1) {\n\t\tif (!this.validURL(url)) {\n\t\t\tbits = url.split(':');\n\t\t}\n\t}\n\tif (bits.length >= 1) {\n\t\tconst [, urlStr] = bits;\n\n\t\tif (urlStr) {\n\t\t\tconst [baseUrl] = urlStr.split('?');\n\t\t\turl = baseUrl;\n\t\t}\n\t}\n\treturn url;\n};\n\n/**\n * returns the last part of a URL after the last /\n */\nUtils.lastURLBit = function (url) {\n\turl = (typeof url === 'undefined') ? window.location.href : url;\n\tconst [urlFirst] = url.split('#');\n\tconst [urlTmp] = urlFirst.split('?');\n\turl = urlTmp.substring(url.lastIndexOf('/') + 1);\n\treturn url;\n};\n\n/**\n * returns the a standard URL associated with a given prefix and extension\n */\nUtils.getStdURL = function (pref, ext, url) {\n\tif (this.standard_urls[pref]) {\n\t\tif (url) {\n\t\t\tif (url === this.standard_urls[pref] + ext) return url;\n\t\t} else {\n\t\t\treturn this.standard_urls[pref] + ext;\n\t\t}\n\t}\n\treturn false;\n};\n\n/*\n * Utility function adds v: to variables...\n */\nUtils.addNamespacesToVariables = function(vars){\n\tvar nvars = [];\n\tfor(var i = 0; i<vars.length; i++){\n\t\tif(vars[i]) nvars.push(this.addNamespaceToVariable(vars[i]));\t\t\n\t}\n\treturn nvars;\n}\n\nUtils.addNamespaceToVariable = function(v){\n\tif(typeof v == \"string\" && v.substring(0, 2) != \"v:\") return \"v:\" + v;\n\treturn v;\n}\n\n/*\n * Utility function removes v: prefix from a variable...\n */\nUtils.removeNamespaceFromVariable = function(mvar){\n\tif(mvar.substring(0, 2) == \"v:\") return mvar.substring(2)\n\treturn mvar;\n}\n\n/*\n * Utility function removes v: prefix from an array of variables\n */\nUtils.removeNamespacesFromVariables = function(vars){\n\tvar nvars = [];\n\tfor(var i = 0; i<vars.length; i++){\n\t\tnvars.push(this.removeNamespaceFromVariable(vars[i]));\n\t}\n\treturn nvars;\n}\n\n/*\n * Utility function to extract a value from a config rule - if the value is a variable, take the value of that variable instead\n */\nUtils.getConfigValue = function(val, row){\n    if(typeof val == \"string\" && val.substring(0, 2) == \"v:\"){\n\t    var rad = row[val];\n\t    if(rad && rad['@value']) return rad['@value'];\n\t    return rad;\n   }\n   else {\n\t   return val;\n   }\n}\n\n\n/**\n * TypeHelper bundles together utility functions dealing with datatypes\n */\nUtils.TypeHelper = {};\n\n/**\n * Returns true if the passed type is an xsd:string (compressed or not)\n */\nUtils.TypeHelper.isStringType = function (stype) {\n\tif (stype === 'http://www.w3.org/2001/XMLSchema#string') return true;\n\tif (stype === 'xsd:string') return true;\n\treturn false;\n};\n\nUtils.TypeHelper.isDatatype = function (stype) {\n\tvar sh = Utils.shorten(stype);\n\tif(sh && sh.substring(0, 4) == \"xsd:\" || sh.substring(0, 4) == \"xdd:\") return true;\n\treturn false;\n};\n\n/** \n * Adds 3 order magnitude separators ( default ,) into big numbers for legibility\n */\nUtils.TypeHelper.numberWithCommas = function (value, separator) {\n\tseparator = separator || \",\";\n\tif (value >= 1000 || value <= -1000) {\n\t    const parts = value.toString().split('.');\n\t    if (value <= -1000) parts[0] = parts[0].substring(1);\n\t    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, separator);\n\t    if (value <= -1000) value = `-${parts.join('.')}`;\n\t    else value = parts.join('.');\n\t}\n\treturn value;\n};\n\n/**\n * List of supported datatypes\n */\nUtils.TypeHelper.datatypes = [\n\t'xdd:coordinate', 'xdd:coordinatePolyline',\n\t'xdd:coordinatePolygon', 'xdd:dateRange', 'xdd:gYearRange', 'xdd:integerRange',\n\t'xdd:decimalRange', 'xdd:cc', 'xdd:email', 'xdd:html', 'xdd:url', 'xsd:anySimpleType',\n\t'xsd:string', 'xsd:boolean', 'xsd:decimal', 'xsd:double', 'xsd:float', 'xsd:time', 'xsd:date',\n\t'xsd:dateTime', 'xsd:dateTimeStamp', 'xsd:gYear', 'xsd:gMonth', 'xsd:gDay', 'xsd:gYearMonth',\n\t'xsd:gMonthDay', 'xsd:duration', 'xsd:yearMonthDuration', 'xsd:dayTimeDuration',\n\t'xsd:byte', 'xsd:short', 'xsd:integer', 'xsd:long', 'xsd:unsignedByte',\t'xsd:unsignedInt',\n\t'xsd:unsignedLong',\t'xsd:nonNegativeInteger', 'xsd:positiveInteger', 'xsd:negativeInteger',\n\t'xsd:nonPositiveInteger', 'xsd:base64Binary', 'xsd:anyURI', 'xsd:language', 'xsd:normalizedString',\n\t'xsd:token', 'xsd:NMTOKEN',\t'xsd:Name',\t'xsd:NCName', 'xsd:NOTATION', 'xsd:QName', 'xsd:ID',\n\t'xsd:IDREF', 'xsd:ENTITY', 'rdf:XMLLiteral', 'rdf:PlainLiteral', 'rdfs:Literal', 'xdd:json'\n];\n\nUtils.TypeHelper.parseRangeValue = function (val, dividor) {\n\tdividor = (dividor || ',');\n\tlet vals = [];\n\tif (typeof val === 'object' && val.length) {\n\t\tvals = val;\n\t} else if (val) {\n\t\tif (typeof val !== 'string') {\n\t\t\tval = `${val}`;\n\t\t}\n\t\tif (val.length && (val.charAt(0) === '[') && val.charAt(val.length - 1) === ']') {\n\t\t\tvals.push(val.substring(1, val.indexOf(dividor)));\n\t\t\tvals.push(val.substring(val.indexOf(dividor) + 1, val.length - 1));\n\t\t} else {\n\t\t\tvals.push(val);\n\t\t}\n\t}\n\treturn vals;\n};\n\n/**\n * DateHelper bundles together utility functions dealing with xsd date types\n */\nUtils.DateHelper = {};\n\n/**\n * Takes an xsd time string and returns a structure {hour: HH, minute: MM, second ss.ssssss, timezone: tz}\n */\nUtils.DateHelper.parseXsdTime = function (val) {\n\tif (!val) return {};\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst parsed = {\n\t\thour: val.substring(0, 2),\n\t\tminute: val.substring(3, 5),\n\t\tsecond: val.substring(6),\n\t\ttimezone: tz\n\t};\n\treturn parsed;\n};\n\n/**\n * Takes an xsd time string and returns a structure {year: [-]YYYY, month: MM, day: dd}\n */\nUtils.DateHelper.parseXsdDate = function (val) {\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tlet year;\n\tif (val.substring(0, 1) === '-') {\n\t\tyear = val.substring(0, 5);\n\t} else {\n\t\tyear = val.substring(0, 4);\n\t}\n\tlet parsed;\n\tif (year && Math.abs(year) < 10000) {\n\t\tlet month = val.substring(year.length + 1, year.length + 3);\n\t\tif (month) { month = parseInt(month, 10); } else return false;\n\t\tlet day = val.substring(year.length + 4);\n\t\tif (day) day = parseInt(day, 10);\n\t\telse return false;\n\t\tparsed = {\n\t\t\tyear,\n\t\t\t   month,\n\t\t\t   day,\n\t\t\t   timezone: tz\n\t\t};\n\t}\n\treturn parsed;\n};\n\n/**\n * Parses a date string of type ty\n */\nUtils.DateHelper.parseDate = function (ty, value) {\n\tlet parsed;\n\tif (ty === 'xsd:date') {\n\t\tparsed = this.parseXsdDate(value);\n\t} else if (ty === 'xsd:time') {\n\t\tparsed = this.parseXsdTime(value);\n\t} else if (ty === 'xsd:dateTime') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t} else if (ty === 'xsd:gYear') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gYearRange') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gMonth') {\n\t\tparsed = { month: value.substring(2) };\n\t} else if (ty === 'xsd:gDay') {\n\t\tparsed = { day: value };\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { year: bits[0], month: bits[1] };\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { month: bits[0], day: bits[1] };\n\t} else if (ty === 'xsd:dateTimeStamp') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t}\n\treturn parsed;\n};\n\n/**\n * adds appropriate padding to date type for xsd rules\n */\nUtils.DateHelper.addXsdPadding = function (parsed) {\n\tconst nparsed = {};\n\tif (typeof parsed.year !== 'undefined' && parsed.year !== false && parsed.year < 1000) {\n\t\tif (Math.abs(parsed.year) < 10) nparsed.year = (parsed.year < 0 ? `-000${Math.abs(parsed.year)}` : `000${parsed.year}`);\n\t\telse if (Math.abs(parsed.year) < 100) nparsed.year = (parsed.year < 0 ? `-00${Math.abs(parsed.year)}` : `00${parsed.year}`);\n\t\telse nparsed.year = (parsed.year < 0 ? `-0${Math.abs(parsed.year)}` : `0${parsed.year}`);\n\t} else if (parsed.year) {\n\t\tnparsed.year = parsed.year;\n\t}\n\tif (typeof parsed.month !== 'undefined' && parsed.month !== false && parsed.month < 10) {\n\t\tnparsed.month = `0${parsed.month}`;\n\t} else if (parsed.month) {\n\t\tnparsed.month = parsed.month;\n\t}\n\tif (typeof parsed.day !== 'undefined' && parsed.day !== false && parsed.day < 10) {\n\t\tnparsed.day = `0${parsed.day}`;\n\t} else if (parsed.day) {\n\t\tnparsed.day = parsed.day;\n\t}\n\tif (typeof parsed.hour !== 'undefined' && parsed.hour !== false && parsed.hour < 10) {\n\t\tnparsed.hour = `0${parsed.hour}`;\n\t} else if (parsed.hour) {\n\t\tnparsed.hour = parsed.hour;\n\t}\n\tif (typeof parsed.minute !== 'undefined' && parsed.minute !== false && parsed.minute < 10) {\n\t\tnparsed.minute = `0${parsed.minute}`;\n\t} else if (parsed.minute) {\n\t\tnparsed.minute = parsed.minute;\n\t}\n\tif (typeof parsed.second !== 'undefined' && parsed.second !== false && parsed.second < 10) {\n\t\tnparsed.second = `0${parsed.second}`;\n\t} else if (parsed.second) {\n\t\tnparsed.second = parsed.second;\n\t}\n\treturn nparsed;\n};\n\n/**\n * generates an xsd string of type ty for the passed parsed structure (year, month, day, hour, minute, second, timezone)\n */\nUtils.DateHelper.xsdFromParsed = function (parsed, ty) {\n\tconst xparsed = this.addXsdPadding(parsed);\n\tlet ret;\n\tif (ty === 'xsd:gYear') {\n\t\tret = (xparsed.year ? xparsed.year : false);\n\t} else if (ty === 'xsd:time') {\n\t\treturn (xparsed.hour && xparsed.minute && xparsed.second) ? `${xparsed.hour}:${xparsed.minute}:${xparsed.second}` : false;\n\t} else if (ty === 'xsd:date') {\n\t\treturn (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}` : false;\n\t} else if (ty === 'xsd:dateTime' || ty === 'xsd:dateTimeStamp') {\n\t\tret = (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}T` : false;\n\t\tif (ret) ret += `${xparsed.hour ? xparsed.hour : '12'}:${xparsed.minute ? xparsed.minute : '00'}:${xparsed.second ? xparsed.second : '00'}`;\n\t} else if (ty === 'xsd:gMonth') {\n\t\tret = (xparsed.month ? `--${xparsed.month}` : false);\n\t} else if (ty === 'xsd:gDay') {\n\t\tret = (xparsed.day ? `---${xparsed.day}` : false);\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tret = (xparsed.year && xparsed.month) ? `${xparsed.year}-${xparsed.month}` : false;\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tret = (xparsed.day && xparsed.month) ? `--${xparsed.month}-${xparsed.day}` : false;\n\t}\n\tif (xparsed.timezone) {\n\t\tret += xparsed.timezone;\n\t}\n\treturn ret;\n};\n\n/**\n * Converts between a unix timestamp and a parsed structure \n */\nUtils.DateHelper.convertTimestampToXsd = function (val) {\n\t  const a = new Date(val * 1000);\n\t  const parsed = {\n\t\tyear: a.getFullYear(),\n\t\tmonth: a.getMonth() + 1,\n\t\tday: a.getDate(),\n\t\thour: a.getHours(),\n\t\tminute: a.getMinutes(),\n\t\tsecond: a.getSeconds()\n\t  };\n\t  return parsed;\n};\n\n/**\n * Parses an xsd date time into a structure\n */\nUtils.DateHelper.parseXsdDateTime = function (val) {\n\tif (!val) return {};\n\tif (typeof val === 'number') {\n\t\treturn this.convertTimestampToXsd(val);\n\t}\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst datetime = this.parseXsdDate(val);\n\tconst ptime = this.parseXsdTime(val.substring(val.indexOf('T') + 1));\n\n\tfor (const i of Object.keys(ptime)) {\n\t\tdatetime[i] = ptime[i];\n\t}\n\tdatetime.timezone = tz;\n\treturn datetime;\n};\n\n/**\n * Extracts the timezone data from an xsd date string\n */\nUtils.DateHelper.extractXsdTimezone = function (val) {\n\tif (val && val.charAt(val.length - 1) === 'Z') {\n\t\treturn 'Z';\n\t}\n\tif (val && (val.charAt(val.length - 6) === '+' || val.charAt(val.length - 6) === '-')) {\n\t\tval.substring(val.length - 6);\n\t}\n\treturn false;\n};\n\nmodule.exports = Utils;\n\n\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n","const UTILS = require('../utils');\nconst WOQLPrinter = require(\"./woqlPrinter\")\n\n/**\n * @file defines the internal functions of the woql query object - the language API is defined in WOQLQuery\n * \n * @constructor \n * @param {object} [query] json-ld query for initialisation\n */\nfunction WOQLQuery(query){\n    this.query = (query ? query : {});\n    this.errors = [];\n\tthis.cursor = this.query;\n\tthis.chain_ended = false;\n\tthis.contains_update = false;\n\t// operators which preserve global paging\n\tthis.paging_transitive_properties = ['select', 'from', 'start', 'when', 'opt', 'limit'];\n\n\tthis.update_operators = [\"woql:AddTriple\", \"woql:DeleteTriple\", \"woql:AddQuad\", \"woql:DeleteQuad\", \"woql:DeleteObject\", \"woql:UpdateObject\"]\n\n\tthis.vocab = this.loadDefaultVocabulary();\n\t//object used to accumulate triples from fragments to support usage like node(\"x\").label(\"y\");\n\tthis.tripleBuilder = false;\n\treturn this;\n}\n\n/**\n * Basic Error handling\n */\nWOQLQuery.prototype.parameterError = function(msg){\n    this.errors.push({\"type\": this.cursor['@type'], \"message\": msg})\n    return this\n}\n\nWOQLQuery.prototype.hasErrors = function(){\n    return (this.errors.length > 0)\n}\n\n/**\n * Internal library function which adds a subquery and sets the cursor\n */\nWOQLQuery.prototype.addSubQuery = function(Subq){\n\tif(Subq) {\n\t\tthis.cursor['woql:query'] = this.jobj(Subq)\n\t}\n\telse {\n\t\tvar nv = {}\n\t\tthis.cursor['woql:query'] = nv\n\t\tthis.cursor = nv\n\t}\n\treturn this\n}\n\n/**\n * Does this query contain an update \n */\nWOQLQuery.prototype.containsUpdate = function(json){\n\tjson = json || this.query\n\tif(this.update_operators.indexOf(json[\"@type\"]) !== -1) return true\n\tif(json['woql:consequent'] && this.containsUpdate(json['woql:consequent'])) return true\n\tif(json['woql:query']) return this.containsUpdate(json['woql:query'])\n\tif(json['woql:query_list']){\n\t\tfor(var i = 0; i<json['woql:query_list'].length; i++){\n\t\t\tif(this.containsUpdate(json['woql:query_list'][i])) return true\n\t\t}\n\t}\n\treturn false\n}\n\n\n/**\n * Called to inidicate that this query will cause an update to the DB\n */\nWOQLQuery.prototype.updated = function(){\n\tthis.contains_update = true;\n\treturn this;\n}\n\n/**\n * A bunch of internal functions for formatting values for JSON-LD translation\n */\n\n/**\n * Wraps the passed value in a json-ld literal carriage\n */\nWOQLQuery.prototype.jlt = function(val, type){\n\tif(!type) type = \"xsd:string\"\n\telse type = (type.indexOf(\":\") == -1 ? \"xsd:\" + type : type);\n\treturn {\"@type\": type, \"@value\": val }\n}\n\nWOQLQuery.prototype.varj = function(varb){\n\tif(varb.substring(0, 2) == \"v:\") varb = varb.substring(2)\n\tif(typeof varb == \"string\") return {\"@type\": \"woql:Variable\", \"woql:variable_name\": {\"@value\": varb, \"@type\": \"xsd:string\" }}\n\treturn varb\n}\n\n/**\n * Transforms a javascript representation of a query into a json object if needs be\n */\nWOQLQuery.prototype.jobj = function(qobj){\n\tif(qobj.json){\n\t\treturn qobj.json();\n\t}\n\tif(qobj === true) return {\"@type\": \"woql:True\"}\n\treturn qobj\n\t//return new WOQLQuery.json(qobj);\n}\n\n/**\n * Wraps the elements of an AS variable in the appropriate json-ld\n */\nWOQLQuery.prototype.asv = function(colname_or_index, vname, type){\n\tlet asvar = { }\n\tif(typeof colname_or_index == \"number\"){\n\t\tasvar[\"@type\"] = \"woql:IndexedAsVar\"\n\t\tasvar['woql:index'] = this.jlt(colname_or_index, \"xsd:nonNegativeInteger\")\n\t}\n\telse if(typeof colname_or_index == \"string\"){\n\t\tasvar[\"@type\"] = \"woql:NamedAsVar\"\n\t\tasvar['woql:identifier'] = this.jlt(colname_or_index)\n\t}\n\tif(vname.substring(0, 2) == \"v:\") vname = vname.substring(2)\n\tasvar[\"woql:variable_name\"] = {\"@type\": \"xsd:string\", \"@value\": vname}\n\tif(type) asvar[\"woql:var_type\"] = this.jlt(type, \"xsd:anyURI\")\n\treturn asvar\n}\n\n/**\n * Adds a variable to a json-ld as variable list\n */\nWOQLQuery.prototype.addASV = function(cursor, asv){\n\tif(asv[\"@type\"] == \"woql:IndexedAsVar\"){\n\t\tif(!cursor['woql:indexed_as_var']) cursor['woql:indexed_as_var'] = []\n\t\tcursor['woql:indexed_as_var'].push(asv)\n\t}\n\telse {\n\t\tif(!cursor['woql:named_as_var']) cursor['woql:named_as_var'] = []\n\t\tcursor['woql:named_as_var'].push(asv)\n\t}\n}\n\n\n/**\n * JSON LD Format Descriptor\n */\nWOQLQuery.prototype.wform = function(opts){\n\tif(opts && opts.format){\n\t\tthis.cursor['woql:format'] = {\n\t\t\t\"@type\": \"woql:Format\",\n\t\t\t\"woql:format_type\": {\"@value\": opts.format, \"@type\": \"xsd:string\"},\n\t\t}\n\t\tif(opts.format_header){\n\t\t\tthis.cursor['woql:format'][\"woql:format_header\"] = {\n\t\t\t\t\"@value\": true, \n\t\t\t\t\"@type\": \"xsd:boolean\"\n\t\t\t}\n\t\t}\n\t}\n\treturn this\n}\n\n/**\n * Wraps arithmetic operators in the appropriate json-ld\n */\nWOQLQuery.prototype.arop = function (arg) {\n\tif(typeof arg == \"object\"){\n\t\treturn (arg.json ? arg.json() : arg)\n\t}\n\tlet v = this.cleanObject(arg, \"xsd:decimal\")\n\tv[\"@type\"] = \"woql:ArithmeticValue\";\n\treturn v;//{\n\t\t//\"@type\": \"woql:ArithmeticValue\",\n\t\t//\"woql:arithmetic_value\": this.cleanObject(arg, \"xsd:decimal\")\n\t//}\n}\n\n/**\n * Wraps value lists in the appropriate json-ld\n */\nWOQLQuery.prototype.vlist = function(list){\n\tlet vobj = {\n\t\t\"@type\": \"woql:Array\",\n\t\t\"woql:array_element\": []\n\t}\n\tif(typeof list == \"string\"){\n\t\tlist = [list]\n\t}\n\tfor(var i = 0 ; i<list.length; i++){\n\t\tlet co = this.cleanObject(list[i])\n\t\tco[\"@type\"] = \"woql:ArrayElement\"\n\t\tco[\"woql:index\"] = this.jlt(i, \"xsd:nonNegativeInteger`\")\n\t\tvobj[\"woql:array_element\"].push(co)\n\t}\n\treturn vobj\n}\n\n\n/**\n * takes input that can be either a string (variable name)\n * or an array - each element of the array is a member of the list\n */\nWOQLQuery.prototype.wlist  = function(wvar){\n\tif(typeof wvar == \"string\") return this.expandVariable(wvar, true) \n\tif(Array.isArray(wvar)){\n\t\tlet ret = { \"@type\": \"woql:Array\", \"woql:array_element\": []}\n\t\tfor(var i = 0; i<wvar.length; i++){\n\t\t\tlet co = this.cleanObject(wvar[i])\n\t\t\tif(typeof co == \"string\") co = {node: co}\n\t\t\tco[\"@type\"] = \"woql:ArrayElement\"\n\t\t\tco[\"woql:index\"] = this.jlt(i, \"xsd:nonNegativeInteger`\")\n\t\t\tret[\"woql:array_element\"].push(co)\n\t\t}\n\t\treturn ret;\n\t}\n}\n\n/**\n * Query List Element Constructor\n */\nWOQLQuery.prototype.qle  = function(query, i){\n\tlet qobj = this.jobj(query)\n\treturn { \n\t\t\"@type\": \"woql:QueryListElement\", \n\t\t\"woql:index\" : this.jlt(i, \"nonNegativeInteger\"),\n\t\t\"woql:query\": qobj\n\t}\t \n}\n\t\n\n/**\n * Transforms whatever is passed in as the subject into the appropriate json-ld for variable or id\n */\nWOQLQuery.prototype.cleanSubject = function(s){\n    let subj = false; \n    if(typeof s == \"object\") {\n\t\treturn s;\n\t}\n\telse if(typeof s == \"string\"){\n\t\tif(s.indexOf(\":\") != -1) subj = s;\n\t\telse if(this.vocab && this.vocab[s]) subj = this.vocab[s];\n\t\telse subj = \"doc:\" + s;\n\t\treturn this.expandVariable(subj)\n\t}\n\tthis.parameterError(\"Subject must be a URI string\")\n\treturn \"\" + s\n}\n\n/**\n * Transforms whatever is passed in as the predicate (id or variable) into the appropriate json-ld form \n */\nWOQLQuery.prototype.cleanPredicate = function(p){\n\tlet pred = false; \n\tif(typeof p == \"object\") return p\n    if(typeof p != \"string\") {\n\t\tthis.parameterError(\"Predicate must be a URI string\")\n\t\treturn \"\" + p\n    }\n\tif(p.indexOf(\":\") != -1) pred = p;\n\telse if(this.vocab && this.vocab[p]) pred = this.vocab[p];\n\telse pred = \"scm:\" + p;\n\treturn this.expandVariable(pred)\n}\n\nWOQLQuery.prototype.cleanPathPredicate = function(p){\n\tlet pred = false; \n\tif(p.indexOf(\":\") != -1) pred = p;\n\telse if(this.vocab && this.vocab[p]) pred = this.vocab[p];\n\telse pred = \"scm:\" + p;\n\treturn pred\n}\n\n\n/**\n * Transforms whatever is passed in as the object of a triple into the appropriate json-ld form (variable, literal or id)\n */\nWOQLQuery.prototype.cleanObject = function(o, t){\n\tlet obj = {\"@type\": \"woql:Datatype\"}\n    if(typeof o == \"string\"){\n        if(o.indexOf(\":\") !== -1){\n\t\t\treturn this.cleanClass(o) \n        }\n        else if(this.vocab && this.vocab[o]){\n\t\t\treturn this.cleanClass(this.vocab[o])\n        }\n        else {\n            obj['woql:datatype'] = this.jlt(o, t)\n        }\n    }\n\telse if(typeof o == \"number\"){\n\t\tt = t || \"xsd:decimal\"\n\t\tobj['woql:datatype'] = this.jlt(o, t)\n\t}\n    else if(typeof o == \"object\"){\n\t\tif(o[\"@value\"]) obj['woql:datatype'] = o\n\t\telse return o\n\t}\n    return obj\n}\n\n/**\n * Transforms a graph filter or graph id into the proper json-ld form \n */\nWOQLQuery.prototype.cleanGraph = function(g){\n    return {\"@type\": \"xsd:string\", \"@value\": g}\n}\n\n/**\n * Transforms strings that start with v: into variable json-ld structures\n * @param varname - will be transformed if it starts with v:\n */\nWOQLQuery.prototype.expandVariable = function(varname, always){\n\tif(varname.substring(0, 2) == \"v:\" || always){\n\t\tif(varname.substring(0, 2) == \"v:\") varname = varname.substring(2) \n\t\treturn {\n\t\t\t\"@type\": \"woql:Variable\", \n\t\t\t\"woql:variable_name\": {\n\t\t\t\t\"@value\": varname, \n\t\t\t\t\"@type\": \"xsd:string\"\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\treturn {\n\t\t\t\"@type\": \"woql:Node\", \n\t\t\t\"woql:node\": varname\n\t\t}\n\t}\n\t//return varname\n}\n\n\nWOQLQuery.prototype.cleanClass = function(c, stringonly){\n\tif(typeof c != \"string\") return \"\";\n\tif(c.indexOf(\":\") == -1) {\n        if(this.vocab && this.vocab[c]) c = this.vocab[c]\n        else c = \"scm:\" + c\n\t}\n\treturn (stringonly ? c : this.expandVariable(c))\n}\n\nWOQLQuery.prototype.cleanType = function(t, stringonly){\n    return this.cleanClass(t, stringonly)\n}\n\nWOQLQuery.prototype.defaultContext = function(DB_IRI){\n\tlet def = {}\n\tfor(var pref in UTILS.standard_urls){\n\t\tdef[pref] = UTILS.standard_urls[pref];\n\t}\n\tdef.scm = DB_IRI + \"/schema#\"\n\tdef.doc = DB_IRI + \"/document/\"\n\tdef.db = DB_IRI + \"/\";\n\treturn def;\n}\n\n/**\n * Retrieves the value of the current json-ld context\n */\nWOQLQuery.prototype.getContext = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"@context\") return q[prop];\n\t\tif(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar nq = q[prop][1];\n\t\t\tvar nc = this.getContext(nq);\n\t\t\tif(nc) return nc;\n\t\t}\n\t}\n}\n\n\n/**\n * Retrieves the value of the current json-ld context\n */\nWOQLQuery.prototype.context = function(c){\n\tthis.cursor['@context'] = c;\n}\n\n\n/**\n * vocabulary elements that can be used without prefixes in woql.js queries\n */\nWOQLQuery.prototype.loadDefaultVocabulary = function(){\n\tvar vocab = {};\n\tvocab.type = \"rdf:type\";\n\tvocab.label = \"rdfs:label\";\n\tvocab.Class = \"owl:Class\";\n\tvocab.DatatypeProperty = \"owl:DatatypeProperty\";\n\tvocab.ObjectProperty = \"owl:ObjectProperty\";\n\tvocab.Document = \"terminus:Document\";\n\tvocab.abstract = \"terminus:abstract\";\n\tvocab.comment = \"rdfs:comment\";\n\tvocab.range = \"rdfs:range\";\n\tvocab.domain = \"rdfs:domain\";\n\tvocab.subClassOf = \"rdfs:subClassOf\";\n\tvocab.string = \"xsd:string\";\n\tvocab.integer = \"xsd:integer\";\n\tvocab.decimal = \"xsd:decimal\";\n\tvocab.email = \"xdd:email\";\n\tvocab.json = \"xdd:json\";\n\tvocab.dateTime = \"xsd:dateTime\";\n\tvocab.date = \"xsd:date\";\n\tvocab.coordinate = \"xdd:coordinate\";\n\tvocab.line = \"xdd:coordinatePolyline\";\n\tvocab.polygon = \"xdd:coordinatePolygon\";\n\treturn vocab;\n}\n\n\n/**\n * Provides the query with a 'vocabulary' a list of well known predicates that can be used without prefixes mapping: id: prefix:id ...\n */\nWOQLQuery.prototype.setVocabulary = function(vocab){\n\tthis.vocab = vocab;\n}\n\nWOQLQuery.prototype.getVocabulary = function(vocab){\n\treturn this.vocab;\n}\n\n/**\n * Queries the schema graph and loads all the ids found there as vocabulary that can be used without prefixes\n * ignoring blank node ids\n */\nWOQLQuery.prototype.loadVocabulary = function(client){\n\tvar nw = new WOQLQuery().quad(\"v:S\", \"v:P\", \"v:O\", \"schema/*\");\n\tnw.execute(client).then( (result) => {\n\t\tif(result.bindings && result.bindings.length > 0){\n\t\t\tfor(var i = 0; i<result.bindings.length; i++){\n\t\t\t\tfor(var k in result.bindings[i]){\n\t\t\t\t\tvar v = result.bindings[i][k]\n\t\t\t\t\tif(typeof v == \"string\"){\n\t\t\t\t\t\tvar spl = v.split(\":\")\n\t\t\t\t\t\tif(spl.length == 2 && spl[1] && spl[0] != \"_\"){\n\t\t\t\t\t\t\tthis.vocab[spl[0]] = spl[1]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n}\n\n/**\n * Executes the query using the passed client to connect to a server\n * \n */\nWOQLQuery.prototype.execute = function(client, commit_msg){\n\tif(!this.query[\"@context\"]){\n\t\tthis.query['@context'] = client.connection.getJSONContext();\n\t}\n\tthis.query[\"@context\"][\"woql\"] = \"http://terminusdb.com/schema/woql#\";\t\t\n\t//for owl:oneOf choice lists\n\tthis.query[\"@context\"][\"_\"] = \"_:\";\t\t\n\treturn client.query(this, commit_msg);\t\t\t\n}\n\n\n/*\n * converts back and forward from json\n * if the argument is present, the current query is set to it, \n * if the argument is not present, the current json version of this query is returned\n */\nWOQLQuery.prototype.json = function(json){\n\tif(json){\n\t\tthis.query = copyJSON(json)\n\t\treturn this\n\t}\n\treturn copyJSON(this.query, true);\n}\n\n/**\n * Returns a script version of the query \n * \n * @param {string} clang - either \"js\" or \"python\"\n */\nWOQLQuery.prototype.prettyPrint = function(clang){\n\tclang = clang || \"js\"\n\tlet printer = new WOQLPrinter(this.vocab, clang)\n\treturn printer.printJSON(this.query)\n}\n\nWOQLQuery.prototype.wrapCursorWithAnd = function(){\n\tlet nj = new WOQLQuery().json(this.cursor)\n\tfor(var k in this.cursor) delete(this.cursor[k])\n\t//create an empty json for the new query\n\tthis.and(nj, {})\n\tthis.cursor = this.cursor['woql:query_list'][1]['woql:query']\n}\n\t\n\n\n/**\n * Finds the last woql element that has a woql:subject in it and returns the json for that\n * used for triplebuilder to chain further calls - when they may be inside ands or ors or subqueries\n * @param {object} json \n */\nWOQLQuery.prototype.findLastSubject = function(json){\n\tif(json && json['woql:query_list']){\n\t\tfor(var i = json['woql:query_list'].length-1; i>=0; i--){\n\t\t\tlet lqs = this.findLastSubject(json['woql:query_list'][i])\n\t\t\tif(lqs) return lqs\n\t\t}\n\t}\n\tif(json && json[\"woql:query\"]){\n\t\tlet ls = this.findLastSubject(json[\"woql:query\"])\n\t\tif(ls) return ls\n\t}\n\tif(json && json['woql:subject']){\n\t\treturn json\n\t}\n\treturn false\n}\n\n/** \n * Turns a textual path pattern into a JSON-LD description\n */\nWOQLQuery.prototype.compilePathPattern = function(pat){\n\tlet toks = tokenize(pat)\n\tif(toks && toks.length)\treturn tokensToJSON(toks, this)\n\telse this.parameterError(\"Pattern error - could not be parsed \" + pat)\n}\n\n/**\n * Tokenizes the pattern into a sequence of tokens which may be clauses or operators\n * @param {string} pat \n */\nfunction tokenize(pat){\n\tlet parts = getClauseAndRemainder(pat)\n\tlet seq = []\n\twhile(parts.length == 2){\n\t\tseq.push(parts[0])\n\t\tparts = getClauseAndRemainder(parts[1])\n\t}\n\tseq.push(parts[0])\n\treturn seq\n}\n\n/**\n * Breaks a graph pattern up into two parts - the next clause, and the remainder of the string\n * @param {string} pat - graph pattern fragment\n */\nfunction getClauseAndRemainder(pat){\n\tpat = pat.trim()\n\tlet open = 1\n\t//if there is a parentheses, we treat it as a clause and go to the end\n\tif(pat.charAt(0) == \"(\"){\n\t\tfor(var i = 1; i<pat.length; i++){\n\t\t\tif(pat.charAt(i) == \"(\") open++\n\t\t\telse if(pat.charAt(i) == \")\") open--\n\t\t\tif(open == 0){\n\t\t\t\tlet rem = pat.substring(i+1).trim()\n\t\t\t\tif(rem)\treturn [pat.substring(1, i), rem]\n\t\t\t\treturn getClauseAndRemainder(pat.substring(1, i))//whole thing surrounded by parentheses, strip them out and reparse\n\t\t\t}\n\t\t}\n\t\treturn []\n\t}\n\tif(pat[0] == \"+\" || pat[0] == \",\" || pat[0] == \"|\"){\n\t\tlet ret = [pat[0]]\n\t\tif(pat.substring(1)) ret.push(pat.substring(1))\n\t\treturn ret\t\n\t} \n\tif(pat.charAt(0) == \"{\"){\n\t\tlet ret = [pat.substring(0, pat.indexOf(\"}\")+1)]\t\n\t\tif(pat.substring(pat.indexOf(\"}\") + 1)) ret.push(pat.substring(pat.indexOf(\"}\") + 1))\n\t\treturn ret\t\n\t} \n\tfor(var i = 1; i<pat.length; i++){\n\t\tif(pat[i] == \",\" || pat[i] == \"|\" || pat[i] == \"+\" || pat[i] == \"{\") return [pat.substring(0, i), pat.substring(i)]\n\t}\n\treturn [pat]\n}\n\n/**\n * Turns a sequence of tokens into the appropriate JSON-LD\n * @param {Array} seq \n * @param {*} q \n */\nfunction tokensToJSON(seq, q){\n\tif(seq.length == 1) { // may need to be further tokenized\n\t\tlet ntoks = tokenize(seq[0])\n\t\tif(ntoks.length == 1) { // only a single element in clause - cannot be further tokenised\n\t\t\tlet tok = ntoks[0].trim()\n\t\t\tlet pp = (tok == \"*\" ? \"owl:topObjectProperty\" : q.cleanPathPredicate(tok) )\n\t\t\t//let pp = (tok == \"*\" ? \"*\" : q.cleanPathPredicate(tok) )\n\t\t\treturn { \n\t\t\t\t\"@type\": \"woql:PathPredicate\",\n\t\t\t\t\"woql:path_predicate\": {\"@id\": pp}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn tokensToJSON(ntoks, q)\n\t\t}\n\t}\n\telse if(seq.indexOf(\"|\") != -1){ //binds most loosely\n\t\tlet left = seq.slice(0, seq.indexOf(\"|\"))\n\t\tlet right = seq.slice(seq.indexOf(\"|\")+1)\n\t\treturn {\n\t\t\t\"@type\": \"woql:PathOr\",\n\t\t\t\"woql:path_left\": tokensToJSON(left, q),\n\t\t\t\"woql:path_right\": tokensToJSON(right, q),\n\t\t}\n\t}\n\telse if(seq.indexOf(\",\") != -1){ //binds tighter\n\t\tlet first = seq.slice(0, seq.indexOf(\",\"))\n\t\tlet second = seq.slice(seq.indexOf(\",\")+1)\n\t\treturn {\n\t\t\t\"@type\": \"woql:PathSequence\",\n\t\t\t'woql:path_first': tokensToJSON(first, q),\n\t\t\t'woql:path_second': tokensToJSON(second, q)\n\t\t}\n\t}\t\n\telse if(seq[1] == \"+\"){ //binds tightest of all\n\t\treturn {\n\t\t\t\"@type\": \"woql:PathPlus\",\n\t\t\t'woql:path_pattern': tokensToJSON([seq[0]], q)\n\t\t}\n\t}\n\telse if(seq[1].charAt(0) == \"{\"){ //binds tightest of all\n\t\tlet meat = seq[1].substring(1, seq[1].length-1).split(\",\")\n\t\treturn {\n\t\t\t\"@type\": \"woql:PathTimes\",\n\t\t\t\"woql:path_minimum\": {\"@type\": \"xsd:positiveInteger\", \"@value\": meat[0]},\n\t\t\t\"woql:path_maximum\": {\"@type\": \"xsd:positiveInteger\", \"@value\":meat[1]},\n\t\t\t'woql:path_pattern': tokensToJSON([seq[0]], q)\n\t\t}\n\t}\n\telse { //shouldn't get here - error \n\t\tq.parameterError(\"Pattern error - could not be parsed \" +  seq[0])\n\t\treturn { \n\t\t\t\"@type\": \"woql:PathPredicate\",\n\t\t\t\"rdfs:label\": \"failed to parse query \" + seq[0]\n\t\t}\n\t}\n}\n\n/**\n * Creates a copy of the passed json representation of a woql query\n * Performing tidying up in doing so - strips out empty queries, rolls up ands and ors with single entries\n * \n * @param {object} orig \n * @return {object} copy of the passed json object\n */\nfunction copyJSON(orig, rollup){\n\tif(Array.isArray(orig)) return orig\n\tif(rollup){\n\t\tif([\"woql:And\", \"woql:Or\"].indexOf(orig['@type']) != -1){\n\t\t\tif(!orig['woql:query_list'] || !orig['woql:query_list'].length) return {}\n\t\t\tif(orig['woql:query_list'].length == 1) return copyJSON(orig['woql:query_list'][0]['woql:query'], rollup)\n\t\t}\n\t\tif(typeof orig['woql:query'] != \"undefined\" && orig[\"@type\"] != \"woql:Comment\"){\n\t\t\tif(!orig['woql:query'][\"@type\"]) return {}\t\t\t\t\n\t\t}\n\t\tif(typeof orig['woql:consequent'] != \"undefined\"){\n\t\t\tif(!orig['woql:consequent'][\"@type\"]) return {}\t\t\t\t\t\t\n\t\t}\n\t}\n\tlet nuj = {}\n\tfor(var k in orig){\n\t\tlet part = orig[k]\n\t\tif(Array.isArray(part)){\n\t\t\tlet nupart = []\n\t\t\tfor(var j = 0; j<part.length; j++){\n\t\t\t\tif(typeof part[j] == \"object\"){\n\t\t\t\t\tlet sub = copyJSON(part[j], rollup)\n\t\t\t\t\tif(!sub || !UTILS.empty(sub)) nupart.push(sub)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnupart.push(part[j])\n\t\t\t\t}\n\t\t\t}\n\t\t\tnuj[k] = nupart\n\t\t}\n\t\telse if(typeof part == \"object\"){\n\t\t\tlet q = copyJSON(part, rollup) \n\t\t\tif(!q || !UTILS.empty(q)) nuj[k] = q\n\t\t}\n\t\telse {\n\t\t\tnuj[k] = part\n\t\t}\n\t}\n\treturn nuj\n}\n\n\nmodule.exports = WOQLQuery;\n","const TerminusRule = require('./terminusRule.js');\nconst UTILS = require('./utils.js');\n\n/**\n * @file WOQL Rules \n * @license Apache Version 2\n * WOQL Rules support pattern matching on results of WOQL Queries \n */\n\nfunction WOQLRule(){\n\tTerminusRule.TerminusRule.call(this); \n\tthis.pattern = new WOQLPattern();\n}\nWOQLRule.prototype = Object.create(TerminusRule.TerminusRule.prototype);\nWOQLRule.prototype.constructor = TerminusRule.TerminusRule;\n\n/** \n * Specifies that the rule only applies to specific variables returned by the WOQL query\n * @param {[String]} - array of strings, each representing a variable name, variable prefixes (\"v:\") are added automatically if absent\n */\nWOQLRule.prototype.setVariables = function(vars){\n\tif(vars && vars.length){\n\t\tthis.pattern.variables = UTILS.addNamespacesToVariables(vars);\n\t\tthis.current_variable = this.pattern.variables[this.pattern.variables.length - 1];\n\t}\n\treturn this;\n}\n\n/**\n * Shorthand to the above using spread operator\n */\nWOQLRule.prototype.vars = function(...varlist){\n\treturn this.setVariables(varlist);\n}\n\n/**\n * Specifies that the rule applies to a specific variable, variable prefix (\"v:\") is added automatically if absent\n */\nWOQLRule.prototype.v = function(v){\n\tif(v){\n\t\tthis.current_variable = UTILS.addNamespaceToVariable(v);\n\t\treturn this;\n\t}\n\treturn this.current_variable;\n}\n\n\n/**\n * Specifies that the rule applies to a specific edge, a source -> target pair of variables\n */\nWOQLRule.prototype.edge = function(source, target){\n\tthis.scope(\"edge\");\n\tif(source){\n\t\tlet vs = UTILS.addNamespaceToVariable(source);\n\t\tthis.setVariables([vs]);\n\t\tthis.pattern.source = vs;\n\t} \n\tif(target){\n\t\tlet vs = UTILS.addNamespaceToVariable(target);\n\t\tif(!source) this.setVariables([vs]);\n\t\tthis.pattern.target = vs;\n\t}\n\treturn this;\n}\n\n/**\n * Specifies that the rule applies to a specific edge, a source -> target pair of variables\n */\nWOQLRule.prototype.rownum = function(rownum){\n\tif(typeof rownum == \"undefined\") return this.pattern.rownum; \n\tthis.pattern.rownum = rownum;\n\treturn this;\n}\n\n/**\n * Specifies that the value of a variable must be one of the values contained in the list\n * @param {[String|Number]} list - parameters are any atomic value (string | number) - the rule will match only cells that have one of these values\n */\nWOQLRule.prototype.in = function(...list){\n\tif(this.current_variable){\n\t\tif(!this.pattern.constraints) this.pattern.constraints = {};\n\t\tif(!this.pattern.constraints[this.current_variable]) this.pattern.constraints[this.current_variable] = [];\n\t\tthis.pattern.constraints[this.current_variable].push(list);\n\t}\n\treturn this;\n}\n\n/**\n * Specifies a filter function to apply to each element - only those values that return true when this filter is invoked will be matched\n * @param {function} tester - test function that will be used to filter values\n */\nWOQLRule.prototype.filter = function(tester){\n\tif(this.current_variable){\n\t\tif(!this.pattern.constraints) this.pattern.constraints = {};\n\t\tif(!this.pattern.constraints[this.current_variable]) this.pattern.constraints[this.current_variable] = [];\n\t\tthis.pattern.constraints[this.current_variable].push(tester);\n\t}\n\treturn this;\n}\n\nWOQLRule.prototype.matchRow = function(rules, row, rownum, action){\n\tvar matches = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tif(action && this.rule && typeof this.rule[action] == \"undefined\") continue;\n\t\tif(rules[i].pattern.matchRow(row, rownum)){\n\t\t\tmatches.push(rules[i]);\n\t\t}\n\t}\n\treturn matches;\n}\n\nWOQLRule.prototype.matchCell = function(rules, row, key, rownum, action){\n\tvar matches = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tif(action && this.rule && typeof this.rule[action] == \"undefined\") continue;\n\t\tif(rules[i].pattern.matchCell(row, key, rownum)){\n\t\t\tmatches.push(rules[i]);\n\t\t}\n\t}\n\treturn matches;\n}\n\nWOQLRule.prototype.matchColumn = function(rules, key, action){\n\tvar matches = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tif(action && this.rule && typeof this.rule[action] == \"undefined\") continue;\n\t\tif(rules[i].pattern.matchColumn(key)){\n\t\t\tmatches.push(rules[i]);\n\t\t}\n\t}\n\treturn matches;   \n}\n\nWOQLRule.prototype.matchNode = function(rules, row, key, nid, action){\n\tvar matches = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tif(action && this.rule && typeof this.rule[action] == \"undefined\") continue;\n\t\tif(rules[i].pattern.matchNode(row, key, nid)){\n\t\t\tmatches.push(rules[i]);\n\t\t}\n\t}\n\treturn matches;\n}\n\nWOQLRule.prototype.matchPair = function(rules, row, keya, keyb, action){\n\tvar matches = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tif(action && this.rule && typeof this.rule[action] == \"undefined\") continue;\n\t\tif(rules[i].pattern.matchPair(row, keya, keyb)){\n\t\t\tmatches.push(rules[i]);\n\t\t}\n\t}\n\treturn matches;\n}\n\n//alias\nWOQLRule.prototype.matchEdge = WOQLRule.prototype.matchPair;\n\n\n/**\n * Object to encapsulate the matching of woql result patterns - inherits from TerminusRule\n * @param {Object} pattern \n */\nfunction WOQLPattern(pattern){\n\tTerminusRule.TerminusPattern.call(this,pattern); \n};\nWOQLPattern.prototype = Object.create(TerminusRule.TerminusPattern.prototype);\nWOQLPattern.prototype.constructor = TerminusRule.TerminusPattern;\n\nWOQLPattern.prototype.prettyPrint = function(type){\n\t//starts with obj. ...\n\tvar str = this.scope + \"('\";\n\tif(this.variables){\n\t\tstr += this.variables.join(\"', '\");\n\t }\n\t str += \"')\";\n\tif(typeof this.literal != \"undefined\"){\n\t\tstr += \".literal(\" + this.literal + \")\";\n\t}\n\tif(typeof this.type != \"undefined\"){\n\t\tstr += \".type(\" + this.unpack(this.type) + \")\";\n\t}\n\tif(typeof this.value != \"undefined\"){\n\t\tstr += \".value(\" + this.unpack(this.value, true) + \")\";\n\t}\n\tfor(var v in this.constraints){\n\t\tstr += \".v('\" + v + \"')\";\n\t\tfor(var i = 0; i<this.constraints[v].length; i++){\n\t\t\tif(typeof(this.constraints[v][i]) == \"function\"){\n\t\t\t\tstr += \".filter(\" + this.constraints[v][i] + \")\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstr += \".in(\" + json.unpack(this.constraints[v][i]) + \")\";\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n\n/**\n * @param {String|Object} data\n * @param {String|[String, String]} [key] - a variable or an array of two variables (in the case of edge scope) which constitutes the key being tested\n * @param {String} [scope] - the scope in which the test is being carried out (row, column, cell)\n */\n\nWOQLPattern.prototype.matchRow = function(row, rownum){\n\tif(typeof this.rownum != \"undefined\" && typeof rownum != \"undefined\"){\n\t\tif(!this.numberMatch(this.rownum, rownum)) return false;\n\t}\n\tif(this.scope && this.scope != \"row\") return false;\n\tif(!this.testVariableConstraints(row)) return false;\n\treturn true;\n}\n\nWOQLPattern.prototype.matchCell = function(row, key, rownum){\n\tif(typeof this.rownum != \"undefined\" && typeof rownum != \"undefined\"){\n\t\tif(!this.numberMatch(this.rownum, rownum)) return false;\n\t}\n\tif(!this.testBasics(\"column\", row[key])) return false;\n\tif(this.variables && this.variables.length && this.variables.indexOf(key) == -1) return false;\n\tif(!this.testVariableConstraints(row)) return false;\n\treturn true;\t\n}\n\nWOQLPattern.prototype.matchNode = function(row, key, nid){\n\tif(!this.testBasics(\"node\", row[key])) return false;\n\tif(this.variables && this.variables.length && this.variables.indexOf(key) == -1) return false;\n\tif(!this.testVariableConstraints(row)) return false;\n\treturn true;\t\n}\n\nWOQLPattern.prototype.matchColumn = function(key){\n\tif(this.scope && this.scope != \"column\") return false;\t\n\tif(this.variables && this.variables.length && this.variables.indexOf(key) == -1) return false;\n\treturn true;\n}\n\nWOQLPattern.prototype.matchPair = function(row, keya, keyb){\n\tif(this.scope && this.scope != \"edge\") return false;\t\n\tif(this.source && this.source != keya) return false;\n\tif(this.target && this.target != keyb) return false;\n\tif(!this.testVariableConstraints(row)) return false;\n\treturn true;\n}\n\nWOQLPattern.prototype.testVariableConstraints = function(row){\n\tfor(var k in this.constraints){\n\t\tif(!this.testVariableConstraint(k, row[k])) return false;\n\t}\n\treturn true;\n}\n\nWOQLPattern.prototype.testVariableConstraint = function(name, val){\n\tif(!this.constraints[name]) return true;\n\tfor(var i = 0; i<this.constraints[name].length; i++){\n\t\tif(!this.testValue(val, this.constraints[name][i])){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nWOQLPattern.prototype.setPattern = function(pattern){\n\tfor(var key in pattern){\n\t\tthis[key] = pattern[key];\n\t}\n}\n\nWOQLPattern.prototype.json = function(){\n\tvar json = {};\n\tif(this.scope){\n\t\tjson.scope = this.scope;\n\t}\n\tif(this.value){\n\t\tjson.value = this.value;\n\t}\n\tif(this.rownum) json.rownum = this.rownum;\n\tif(this.variables) json.variables = this.variables;\n\tif(this.literal) json.literal = this.literal;\n\tif(this.type) json.type = this.type;\n\tif(this.constraints) json.constraints = this.constraints;\n\tif(this.source) json.source = this.source;\n\tif(this.target) json.target = this.target;\n\treturn json;\n}\n\n\nmodule.exports = WOQLRule ;\n","\nconst WOQLRule = require(\"../woqlRule\");\n\n/**\n * Generic functions / configs that are available to all config types\n */\nfunction ViewConfig(){\n    this.rules = [];\n}\n\nViewConfig.prototype.render = function(func){\n\tif(func) this.view_render = func;\n\treturn this.view_render;\n}\n\nViewConfig.prototype.renderer = function(val){\n\tif(val) this.view_renderer = val;\n\treturn this.view_renderer;\n}\n\nViewConfig.prototype.getRulesJSON = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\treturn jr;\n}\n\nViewConfig.prototype.getBasicJSON = function(){\n\tlet jr = {};\n\tif(this.view_render) jr.render = this.view_render;\n\tif(this.view_renderer) jr.renderer = this.view_renderer;\n\treturn jr;\n}\n\nViewConfig.prototype.loadBasicJSON = function(json){\n\tif(json.render) this.view_render = json.view_render;\n\tif(json.renderer) this.view_renderer = json.view_renderer;\n}\n\nViewConfig.prototype.getBasicprettyPrint = function(){\n\tlet str = \"\";\n\tif(typeof this.render() != \"undefined\"){\n\t\tstr += \"view.render(\" + this.render() + \")\\n\";\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \"view.renderer('\" + this.renderer() + \"')\\n\";\n\t}\n\treturn str;\n}\n\n\nfunction WOQLViewRule(){\n\tWOQLRule.call(this);\n\tthis.rule = {}; \n};\n\t\nWOQLViewRule.prototype = Object.create(WOQLRule.prototype);\nWOQLViewRule.prototype.constructor = WOQLRule;\n\nWOQLViewRule.prototype.prettyPrint = function(type){\n\tlet str = \"\";\n\tif(this.pattern){\n\t\tstr = this.pattern.prettyPrint(type);\n\t}\n\tif(typeof this.color() != \"undefined\"){\n\t\tstr += \".color([\" + this.color().join(\",\") + \"])\";\n\t}\n\tif(typeof this.hidden() != \"undefined\"){\n\t\tstr += \".hidden(\" + this.hidden() + \")\";\n\t}\n\tif(typeof this.size() != \"undefined\"){\n\t\tstr += \".size('\" + this.size() + \"')\";\n\t}\n\tif(typeof this.icon() != \"undefined\"){\n\t\tstr += \".icon(\" + JSON.stringify(this.icon()) + \")\";\n\t}\n\tif(typeof this.text() != \"undefined\"){\n\t\tstr += \".text(\" + JSON.stringify(this.text()) + \")\";\n\t}\n\tif(typeof this.border() != \"undefined\"){\n\t\tstr += \".border(\" + JSON.stringify(this.border()) + \")\";\n\t}\n\tif(typeof this.args() != \"undefined\"){\n\t\tstr += \".args(\" + JSON.stringify(this.args()) + \")\";\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \".renderer('\" + this.renderer() + \"')\";\n\t}\n\tif(typeof this.render() != \"undefined\"){\n\t\tstr += \".render(\" + this.render() + \")\";\n\t}\n\tif(typeof this.click() != \"undefined\"){\n\t\tstr += \".click(\" + this.click() + \")\";\n\t}\n\tif(typeof this.hover() != \"undefined\"){\n\t\tstr += \".hover(\" + this.hover() + \")\";\n\t}\n\treturn str;\n}\n\nWOQLViewRule.prototype.json = function(mjson){\n\tif(!mjson) {\n\t\tvar json = { }\n\t\tif(this.pattern) json.pattern = this.pattern.json();\n\t\tjson.rule = this.rule;\n\t    return json;\n\t}\n\tthis.rule = mjson.rule || {};\n\tif(mjson.pattern) this.pattern.setPattern(mjson.pattern);\n\treturn this;\n}\n\n\nWOQLViewRule.prototype.size = function(size){\n\tif(typeof size == \"undefined\"){\n\t\treturn this.rule.size;\n\t}\n\tthis.rule.size = size;\n\treturn this;\n}\n\nWOQLViewRule.prototype.color = function(color){\n\tif(typeof color == \"undefined\"){\n\t\treturn this.rule.color;\n\t}\n\tthis.rule.color = color;\n\treturn this;\n}\n\nWOQLViewRule.prototype.icon = function(json){\n\tif(json){\n\t\tthis.rule.icon = json;\n\t\treturn this;\n\t}\n\treturn this.rule.icon;\n}\n\nWOQLViewRule.prototype.text = function(json){\n\tif(json){\n\t\tthis.rule.text = json;\n\t\treturn this;\n\t}\n\treturn this.rule.text;\n}\n\nWOQLViewRule.prototype.border = function(json){\n\tif(json){\n\t\tthis.rule.border = json;\n\t\treturn this;\n\t}\n\treturn this.rule.border;\n}\n\nWOQLViewRule.prototype.renderer = function(rend){\n\tif(typeof rend == \"undefined\"){\n\t\treturn this.rule.renderer;\n\t}\n\tthis.rule.renderer = rend;\n\treturn this;\n}\n\n\nWOQLViewRule.prototype.render = function(func){\n\tif(typeof func == \"undefined\"){\n\t\treturn this.rule.render;\n\t}\n\tthis.rule.render = func;\n\treturn this;\n}\n\nWOQLViewRule.prototype.click = function(onClick){\n\tif(onClick){\n\t\tthis.rule.click = onClick;\n\t\treturn this;\n\t}\n\treturn this.rule.click;\n}\n\nWOQLViewRule.prototype.hover = function(onHover){\n\tif(onHover){\n\t\tthis.rule.hover = onHover;\n\t\treturn this;\n\t}\n\treturn this.rule.hover;\n}\n\nWOQLViewRule.prototype.hidden = function(hidden){\n\tif(typeof hidden == \"undefined\"){\n\t\treturn this.rule.hidden;\n\t}\n\tthis.rule.hidden = hidden;\n\treturn this;\n}\n\nWOQLViewRule.prototype.args = function(args){\n\tif(typeof args == \"undefined\"){\n\t\treturn this.rule.args;\n\t}\n\tthis.rule.args = args;\n\treturn this;\n}\n\nmodule.exports = {WOQLViewRule, ViewConfig}\n\n","function getErrorAsMessage(url, api, err) {\n\tlet str = '';\n\tif (err.response) {\n\t\terr = err.response;\n\t\tif (err.data) str += `${formatErrorMessage(err.data)}`;\n\t} else if (err.body) str += `${formatErrorMessage(err.body)}`;\n\turl = url.split(\"?\")[0];\n\n\tif (err.status) str += `Code: ${err.status}`;\n\tif (err.action) str += ` Action: ${err.action}`;\n\tif (err.type) str += ` Type: ${err.type}`;\n\tif (url) str += ` url: ${url}`;\n\tif (api && api.method) str += ` method: ${api.method}`;\n\treturn str;\n}\n\nfunction formatErrorMessage(msg) {\n\tif (typeof msg === 'object') {\n\t\tlet nmsg = '';\n\t\tfor (const key of Object.keys(msg)) {\n\t\t\tif(msg[key] && typeof msg[key] != \"object\")\n\t\t\tnmsg += `${key} ${msg[key]} `;\n\t\t}\n\t\treturn nmsg;\n\t}\n\treturn msg;\n}\n\nfunction accessDenied(action, db, server) {\n\tconst err = {};\n\terr.status = 403;\n\terr.url = (server || '') + (db || '');\n\terr.type = 'client';\n\terr.action = action;\n\terr.body = `${err.action} not permitted for ${err.url}`;\n\treturn err;\n}\n\nfunction getAPIErrorMessage(url, api, err) {\n\treturn `API Error ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getAccessDeniedMessage(url, api, err) {\n\treturn `Access Denied ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getInvalidURIMessage(url, call) {\n\tconst str = `Invalid argument to\n            ${call}. \n            ${url}\n            is not a valid Terminus DB API endpoint`;\n\treturn str;\n}\n\nfunction getInvalidParameterMessage(call, msg) {\n\tconst str = `Invalid Parameter to\n            ${call}. \n            ${msg}`;\n\treturn str;\n}\n\n\n/**\n * Utility functions for generating and retrieving error messages\n * and storing error state\n */\n\nfunction parseAPIError(response) {\n\tconst err = {};\n\terr.status = response.status;\n\terr.type = response.type;\n\tif (response.data && typeof response.data === 'object') {\n\t\tlet msg;\n\t\ttry {\n\t\t\tmsg = response.text();\n\t\t} catch (e) {\n\t\t\ttry {\n\t\t\t\tmsg = response.json();\n\t\t\t} catch (error) {\n\t\t\t\tmsg = response.toString();\n\t\t\t}\n\t\t}\n\t\terr.body = msg;\n\t} else if (response.data) err.body = response.data;\n\terr.url = response.url;\n\terr.headers = response.headers;\n\terr.redirected = response.redirected;\n\treturn err;\n}\n\n\nmodule.exports = {\n\tgetErrorAsMessage,\n\tgetAPIErrorMessage,\n\tgetAccessDeniedMessage,\n\taccessDenied,\n\tgetInvalidURIMessage,\n\tgetInvalidParameterMessage,\n\tparseAPIError\n};\n","const TerminusRule = require('./terminusRule.js');\n\n/**\n * @file Frame Rule\n * @license Apache Version 2\n */\n\nfunction FrameRule(){\n\tTerminusRule.TerminusRule.call(this); \n\tthis.pattern = new FramePattern();\n}\nFrameRule.prototype = Object.create(TerminusRule.TerminusRule.prototype);\nFrameRule.prototype.constructor = TerminusRule.TerminusRule;\n\n/**\n * Returns an array of rules that match the paased frame\n * @param {[FrameRule]} rules - array of rules to be tested\n * @param {Frame} frame - object frame, property frame or data from to be tested\n * @param {function} [onmatch] - optional function to be called with args (frame, rule) on each match \n */\nFrameRule.prototype.testRules = function(rules, frame, onmatch){\n\tvar matched_rules = [];\n\tif(rules && rules.length){\n\t\tfor(var i = 0; i<rules.length; i++){\n\t\t\tvar match = (!rules[i].pattern || this.patternMatchesFrame(rules[i].pattern, frame));\n\t\t\tif(match){\n\t\t\t\tmatched_rules.push(rules[i]);\n\t\t\t\tif(onmatch && typeof onmatch == \"function\"){\n\t\t\t\t\tonmatch(frame, rules[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn matched_rules;\n}\n\n/**\n * Determines whether a given pattern matches a given frame\n */\nFrameRule.prototype.patternMatchesFrame = function(pattern, frame){\n\tif(pattern.checkFrame) {\n\t\treturn pattern.checkFrame(frame);\n\t}\n\telse {\n\t\tvar fp = new FramePattern().setPattern(pattern);\n\t\treturn fp.checkFrame(frame);\n\t}\n}\n\n/**\n * Specifies that only one from among the list of properties will match \n */\nFrameRule.prototype.property = function(...prop){\n    if(!prop || prop.length == 0) return this.pattern.property;\n    this.pattern.property = prop;\n    return this;\n}\n\n/**\n * Specifies that only one from among the list of frame_types will match\n * frame_types are: data, oneOf, document, object? \n */\nFrameRule.prototype.frame_type = function(...frame_type){\n    if(!frame_type || frame_type.length == 0) return this.pattern.frame_type;\n    this.pattern.frame_type = frame_type;\n    return this;\n}\n\n/**\n * Specifies that only one from among the list of labels will match\n */\nFrameRule.prototype.label = function(...prop){\n    if(!prop || prop.length == 0) return this.pattern.label;\n    this.pattern.label = prop;\n    return this;\n}\n\n/**\n * Specifies that only one from among the list of subject ids will match\n */\nFrameRule.prototype.subject = function(...prop){\n    if(!prop|| prop.length == 0) return this.pattern.subject;\n    this.pattern.subject = prop;\n    return this;\n}\n\n/**\n * Specifies that only one from among the list of subject classes will match\n */\nFrameRule.prototype.subjectClass = function(...prop){\n    if(!prop || prop.length == 0) return this.pattern.subjectClass;\n    this.pattern.subjectClass = prop;\n    return this;\n}\n\n/**\n * Specifies that only one from among the list of range types will match\n */\nFrameRule.prototype.range = function(...prop){\n    if(!prop || prop.length == 0) return this.pattern.range;\n    this.pattern.range = prop;\n    return this;\n}\n\n/**\n * Specifies that only frames of the specified depth will match the rule\n */\nFrameRule.prototype.depth = function(depth){\n    if(typeof depth == \"undefined\") return this.pattern.depth;\n    this.pattern.depth=depth;\n    return this;\n}\n\n/**\n * Specifies that only frames of the specified index will match the rule (index is the order of a value in the property frame)\n */\nFrameRule.prototype.index = function(...index){\n    if(!index || index.length == 0) return this.pattern.index;\n    this.pattern.index=index;\n    return this;\n}\n\n/**\n * Specifies that only frames with the given statuses will match the rule\n */\nFrameRule.prototype.status = function(...status){\n    if(!status || status.length == 0) return this.pattern.status;\n    this.pattern.status=status;\n    return this;\n}\n\n/**\n * Specifies that the frame will only match if its parent matches the pattern passed as par\n */\nFrameRule.prototype.parent = function(par){\n    if(!par) return this.pattern.parent;\n    this.pattern.parent = par;\n    return this;\n}\n\nFrameRule.prototype.children = function(...children){\n\tif(typeof children == \"undefined\" || children.length == 0) return this.pattern.children;\n\tif(typeof this.pattern.children == \"undefined\"){\n\t\tthis.pattern.children = [];\n\t}\n\tfor (let i = 0; i < children.length; i++) {\n\t\tthis.pattern.children.push(children[i]);\n\t}\n\treturn this;\n};\n\n\n/**\n * @file Frame Pattern\n * A frame pattern can have the following variables\n * scope : object, property, data, * - matches a specific part of the frame\n * label : matches the label of a property\n * frame_type: object, data, document, id, oneOf\n * subject: id of the subject\n * subjectClass: class of the subject\n * range: type of a property (applies to property and data)\n * property: property id or list of property ids (parent property if it is an object or data)\n * value: value of the property\n * parent: a pattern relating to the parent of this frame\n * children: patterns for matching on the children of a frame\n * depth: how deep are we in the document? starts from 0\n * index: the index of a value in an array\n * status: updated, error, new, ok,\n */\n\nfunction FramePattern(){\n\tTerminusRule.TerminusPattern.call(this); \n};\n\nFramePattern.prototype = Object.create(TerminusRule.TerminusPattern.prototype);\nFramePattern.prototype.constructor = TerminusRule.TerminusPattern;\n\n\n\nFramePattern.prototype.setPattern = function(pattern){\n\tif(pattern.scope) this.scope = pattern.scope;\n\tif(typeof pattern.literal != \"undefined\") this.literal = pattern.literal;\n\tif(typeof pattern.type != \"undefined\") this.type = pattern.type;\n\tif(typeof pattern.label != \"undefined\") this.label = pattern.label;\n\tif(typeof pattern.frame_type != \"undefined\") this.frame_type = pattern.frame_type ;\n\tif(typeof pattern.subject != \"undefined\") this.subject = pattern.subject;\n\tif(typeof pattern.subjectClass != \"undefined\") this.subjectClass = pattern.subjectClass;\n\tif(typeof pattern.range != \"undefined\") this.range = pattern.range;\n\tif(typeof pattern.property != \"undefined\") this.property = pattern.property;\n\tif(typeof pattern.value != \"undefined\") this.value = pattern.value;\n\tif(typeof pattern.parent != \"undefined\"){\n\t\tlet parent = pattern.parent;\n\t\tif(typeof parent.json != \"function\"){ \n\t\t\tparent = new FramePattern().setPattern(parent);\n\t\t}\n\t\tthis.parent = parent;\n\t} \n\tif (pattern.children) {\n\t\tthis.children = [];\n\t\tfor (let i = 0; i < pattern.children.length; i++) {\n\t\t\tvar kid = pattern.children[i];\n\t\t\tif(typeof kid.json != \"function\"){ \n\t\t\t\tkid = new FramePattern().setPattern(kid);\n\t\t\t}\n\t\t\tthis.children.push(kid);\n\t\t}\n\t}\n\tif(typeof pattern.depth != \"undefined\") this.depth = pattern.depth;\n\tif(typeof pattern.index != \"undefined\") this.index = pattern.index;\n\tif(typeof pattern.status != \"undefined\") this.status = pattern.status;\n}\n\nFramePattern.prototype.json = function(){\n    var json = {};\n\tif(typeof this.literal != \"undefined\") json.literal = this.literal;\n\tif(this.type) json.type = this.type;\n    if(this.scope) json.scope = this.scope;\n    if(typeof this.value != \"undefined\") json.value = this.value;\n    if(typeof this.label != \"undefined\") json.label = this.label;\n    if(typeof this.frame_type != \"undefined\") json.frame_type = this.frame_type;\n    if(typeof this.subject != \"undefined\") json.subject = this.subject;\n    if(typeof this.subjectClass != \"undefined\") json.subjectClass = this.subjectClass;\n    if(typeof this.range != \"undefined\") json.range = this.range;\n    if(typeof this.property != \"undefined\") json.property = this.property;\n    if(typeof this.parent != \"undefined\") json.parent = (this.parent.json ? this.parent.json() : this.parent);\n    if(typeof this.children != \"undefined\") {\n\t\tjson.children = [];\n\t\tfor(var i = 0; i<this.children.length; i++){\n\t\t\tjson.children.push((this.children[i].json ? this.children[i].json() : this.children[i]));\n\t\t}\n\t}\n    if(typeof this.depth != \"undefined\") json.depth = this.depth;\n    if(typeof this.index != \"undefined\") json.index = this.index;\n    if(typeof this.status != \"undefined\") json.status = this.status;\n    return json;\n}\n\nFramePattern.prototype.checkFrame = function(frame){\n\tvar rtype = this.getRendererType(frame);\n\tif(!rtype) return false;\n\tif(this.scope && (this.scope != rtype) && (this.scope != \"*\" )) return false;\n\tif(this.illegalRuleType(rtype)) return false;\n\tif(this.frame_type && !this.checkFrameType(rtype, frame)) return false;\n\tif(this.label && !this.checkLabel(rtype, frame)) return false;\n\tif(this.subject && !this.checkSubject(rtype, frame)) return false;\n\tif(this.subjectClass && !this.checkSubjectClass(rtype, frame)) return false;\n\tif(this.property && !this.checkProperty(rtype, frame)) return false;\n\tif(typeof this.depth !== \"undefined\" && !this.checkDepth(rtype, frame)) return false;\n\tif(this.range && !this.checkRange(rtype, frame)) return false;\n\tif(typeof this.value != \"undefined\" && !this.checkValue(rtype, frame)) return false;\n\tif(this.type && !this.checkType(rtype, frame)) return false;\n\tif(typeof this.literal != \"undefined\" && !this.checkLiteral(rtype, frame)) return false;\n\tif(this.parent && !this.checkParent(rtype, frame)) return false;\n\tif(this.children && this.children.length && !this.checkChildren(rtype, frame)) return false;\n\tif(this.index && !this.checkIndex(rtype, frame)) return false;\n\tif(this.status && !this.checkStatus(rtype, frame)) return false;\n\treturn true;\n};\n\nFramePattern.prototype.prettyPrint = function(type){\n\t//starts with obj. ...\n\tif(this.scope == \"*\"){\n\t\tvar str = \"all()\";\n\t}\n\telse {\n\t\tvar str = this.scope + \"()\";\n    }\n    if(typeof this.literal != \"undefined\"){\n\t\tstr += \".literal(\" + this.literal + \")\";\n\t}\n\tif(typeof this.type != \"undefined\"){\n\t\tstr += \".type(\" + this.unpack(this.type) + \")\";\n\t}\n\tif(typeof this.range != \"undefined\"){\n\t\tstr += \".range(\" + this.unpack(this.range) + \")\";\n\t}\n\tif(typeof this.frame_type != \"undefined\"){\n\t\tstr += \".frame_type(\" + this.unpack(this.frameType) + \")\";\n\t}\n\tif(typeof this.label != \"undefined\"){\n\t\tstr += \".label(\" + this.unpack(this.label) + \")\";\n\t}\n\tif(typeof this.subject != \"undefined\"){\n\t\tstr += \".subject(\" + this.unpack(this.subject) + \")\";\n\t}\n\tif(typeof this.subjectClass != \"undefined\"){\n\t\tstr += \".subjectClass(\" + this.unpack(this.subjectClass) + \")\";\n\t}\n\tif(typeof this.property != \"undefined\"){\n\t\tstr += \".property(\" + this.unpack(this.property) + \")\";\n\t}\n\tif(typeof this.value != \"undefined\"){\n\t\tstr += \".value(\" + this.unpack(this.value, true) + \")\";\n\t}\n\tif(typeof this.children != \"undefined\" && this.children.length > 0){\n\t\tstr += \".children(\\n\";\n\t\tvar kids = this.children;\n\t\tfor(var i = 0; i< kids.length; i++){\n\t\t\tstr += \"View.pattern().\" + kids[i].prettyPrint();\n\t\t\tif(i < kids.length-1) str += \",\";\n\t\t\tstr += \"\\n\";\n\t\t}\n\t\tstr += \")\";\n\t}\n\tif(typeof this.parent != \"undefined\"){\n\t\tstr += \".parent(View.pattern().\" + this.parent.prettyPrint() + \")\";\n\t}\n\tif(typeof this.depth != \"undefined\"){\n\t\tstr += \".depth(\" + this.unpack(this.depth, true) + \")\";\n\t}\n\tif(typeof this.index != \"undefined\"){\n\t\tstr += \".index(\" + this.unpack(this.index, true) + \")\";\n\t}\n\tif(typeof this.status != \"undefined\"){\n\t\tstr += \".status(\" + this.unpack(this.status) + \")\";\n\t}\n\treturn str;\n}\n\nFramePattern.prototype.illegalRuleType = function (rtype) {\n\t// data frames have no children\n\tif (rtype == 'data' && this.children && this.children.length) return true;\n\t// object frames have no range\n\tif (rtype == 'object' && this.range) return true;\n\treturn false;\n};\n\n/* subject is an id or an array of ids,\n/* match is positive if the renderer's subject appears in the array or is the id\n */\nFramePattern.prototype.checkSubject = function (subject, frame) {\n\tif (typeof this.subject !== 'object' || !this.subject.length) this.subject = [this.subject];\n\tconst rsubj = frame.subject();\n\tfor (let i = 0; i < this.subject.length; i++) {\n\t\tif (this.IDsMatch(subject[i], rsubj)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n// at least one child must match all child rules\nFramePattern.prototype.checkChildren = function (rtype, frame) {\n\tfor (let i = 0; i < this.children.length; i++) {\n\t\tlet found = false;\n\t\tif (rtype == 'object') {\n\t\t\tfor (const prop in frame.properties) {\n\t\t\t\tif (this.children[i].checkFrame(frame.properties[prop])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (rtype == 'property') {\n\t\t\tfor (let j = 0; j <= renderer.values.length; j++) {\n\t\t\t\tif (this.children[j].checkFrame(frame.values[j])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!found) return false;\n\t}\n\treturn true;\n};\n\nFramePattern.prototype.checkStatus = function (rtype, frame) {\n\tif (typeof this.status !== 'object' || this.status.length == 0) this.status = [this.status];\n\tfor (let i = 0; i < this.status.length; i++) {\n\t\tif (this.status[i] == 'updated' && !frame.isUpdated()) return false;\n\t\tif (this.status[i] == 'new' && !frame.isNew()) return false;\n\t\tif (this.status[i] == 'unchanged' && frame.isUpdated()) return false;\n\t}\n\treturn true;\n};\n\nFramePattern.prototype.checkDepth = function (rtype, frame) {\n\treturn this.numberMatch(this.depth, frame.depth());\n};\n\nFramePattern.prototype.checkParent = function (rtype, frame) {\n\treturn this.parent.checkFrame(frame.parent);\n};\n\nFramePattern.prototype.checkIndex = function (rtype, frame) {\n\tif (rtype == 'data') {\n\t\treturn this.index == frame.index;\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkProperty = function (rtype, frame) {\n\tif (typeof this.property !== 'object' || !this.property.length) this.property = [this.property];\n\tfor (let i = 0; i < this.property.length; i++) {\n\t\tif (this.propertyIDsMatch(frame.property(), this.property[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n\n/**\n * Checks to make sure the frame is among the specified types \n */\nFramePattern.prototype.checkType = function (rtype, frame) {\n\tif(rtype == \"object\") var vs = frame.subjectClass();\n\telse var vs = frame.range();\n\tif(!Array.isArray(this.type)) this.type = [this.type];\n\tif(this.type.indexOf(vs) === -1) return false;\n\treturn true;\n}\n\nFramePattern.prototype.checkLiteral = function (rtype, frame) {\n\tif(rtype == \"object\") return false;\n\tif(rtype == \"property\") return false;\n\tif(rtype == \"data\") return frame.isDatatypeProperty();\n\treturn true;\n}\n\n\n// returns true if any of the values are found\nFramePattern.prototype.checkValue = function (rtype, frame) {\n\tif (typeof this.value !== 'object' || !this.value.length) this.value = [this.value];\n\tfor (let i = 0; i < this.value.length; i++) {\n\t\tif (rtype == 'data') {\n\t\t\tif (this.valuesMatch(frame.value(), this.value[i])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if (rtype == 'property') {\n\t\t\tfor (let j = 0; j <= frame.values.length; j++) {\n\t\t\t\tif (this.getRendererType(frame.values[i]) == 'data'\n\t\t\t\t\t\t&& this.valuesMatch(frame.values[i].get(), this.value[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (rtype == 'object') {\n\t\t\tfor (const prop in frame.properties) {\n\t\t\t\tif (this.checkValue(this.getRendererType(frame.properties[prop]), frame.properties[prop])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkRange = function (rtype, frame) {\n\tif (typeof this.range !== 'object' || !this.range.length) this.range = [this.range];\n\tfor (let i = 0; i < this.range.length; i++) {\n\t\tif (this.rangeIDsMatch(frame.range(), this.range[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkSubjectClass = function (rtype, frame) {\n\tif (typeof this.subjectClass !== 'object' || !this.subjectClass.length) this.subjectClass = [this.subjectClass];\n\tconst rcls = frame.subjectClass();\n\tfor (let i = 0; i < this.subjectClass.length; i++) {\n\t\tif (this.classIDsMatch(this.subjectClass[i], rcls)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkFrameType = function (rtype, frame) {\n\tif (rtype == 'object') return (this.frame_type.indexOf('object') != -1);\n\tif (rtype == 'data') {\n\t\tif (frame.frame) {\n\t\t\treturn (this.frame_type.indexOf(frame.frame.ftype()) != -1);\n\t\t}\n\t}\n\tif (rtype == 'property') return false;\n};\n\nFramePattern.prototype.checkLabel = function (rtype, frame) {\n\tif (typeof frame.getLabel !== 'function') {\n\t\tconsole.log(new Error('Rule passed to check label with broken renderer object - no getLabel'));\n\t\treturn false;\n\t}\n\tfor (let i = 0; i < this.label.length; i++) {\n\t\tif(this.stringMatch(this.label[i], frame.getLabel())) return true;\n\t}\n\treturn false;\n};\n\n\nFramePattern.prototype.getRendererType = function (frame) {\n\tif (frame.isProperty()) return 'property';\n\tif (frame.isObject()) return 'object';\n\tif (frame.isData()) return 'data';\n\tif (frame.renderer_type) return frame.renderer_type;\n\tconsole.log(new Error(`frame configuration passed non-renderer type ${frame.constructor.name}`));\n\tconsole.log(renderer);\n\treturn false;\n};\n\nmodule.exports = FrameRule;","/**\n * @file Terminus Constants\n * @license Apache Version 2\n * Constants representing API actions\n */\n\nmodule.exports = Object.freeze({\n\tCONNECT: 'connect',\n\tGET_TRIPLES: 'get_triples',\n\tUPDATE_TRIPLES: 'update_triples',\n\tCLASS_FRAME: 'class_frame',\n\tWOQL_QUERY: 'woql_query',\n\tDELETE_DATABASE: 'delete_database',\n\tCREATE_DATABASE: 'create_database',\n\tCREATE_GRAPH: 'create_graph',\n\tDELETE_GRAPH: 'delete_graph',\n\tCLONE: 'clone',\n\tPUSH: 'push',\n\tFETCH: 'fetch', \n\tREBASE: 'rebase',\n\tBRANCH: 'branch'\n});\n","const axios = require('axios');\nconst axiosInstance=axios.create();\n\nmodule.exports = axiosInstance;","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress',\n    'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath'\n  ];\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys);\n\n  var otherKeys = Object\n    .keys(config2)\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","const CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n\n/**\n * @file Connection Capabilities \n * @license Apache Version 2\n * @description Object which helps manage the capabilities available for a given TerminusDB connection \n * Creates an entry in the connection registry for the server\n * and all the databases that the client has access to\n * maps the input authorties to a per-db array for internal storage and easy\n * access control checks\n * @param {String} key API key\n */\nfunction ConnectionCapabilities() {\n\tthis.connection = {};\n}\n\n\n/**\n * @param {string} curl a valid terminusDB server URL\n * @param {object} capabilities the JSON object returned by the connect API call \n * it is a terminus:User object with a terminus:authority predicate which points at an array of capabilities\n */\nConnectionCapabilities.prototype.setCapabilities = function (capabilities) {\n\tthis.connection = {};\n\t\n\t//this.connection[\"@context\"] = capabilities[\"@context\"]\n\t//let auths = Array.isArray(capabilities) ? capabilities : [capabilities]\n\t\n\tconst capabilitiesKeys = capabilities ? Object.keys(capabilities) : [];\n\tfor (const pred of capabilitiesKeys) {\n\t   if (pred === 'terminus:authority' && capabilities[pred]) {\n\t        const auths = Array.isArray(capabilities[pred]) === true\n\t        ? capabilities[pred]\n\t        : [capabilities[pred]];\n\t\t    for (let i = 0; i < auths.length; i += 1) {\n\t\t\t\tlet access = auths[i]['terminus:access'];\n\t\t\t\tlet scope = access['terminus:authority_scope']\n\t\t\t\tconst actions = access['terminus:action'];\n\t\t\t\tif (Array.isArray(scope) === false) scope = [scope];\n\t\t\t\tconst actionsArr = ((Array.isArray(actions)) ? actions.map(item => item['@id']) : [] );\n\t\t\t\tfor (let j = 0; j < scope.length; j += 1) {\n\t\t\t\t\tconst nrec = scope[j];\n\t\t\t\t\tif (typeof this.connection[nrec['@id']] === 'undefined') {\n\t\t\t\t\t\tthis.connection[nrec['@id']] = nrec;\n\t\t\t\t\t}\n\t\t\t\t\tthis.connection[nrec['@id']]['terminus:authority'] = actionsArr;\n\t\t\t\t}\n\t\t\t}\n\t\t} \n\t\telse {\n\t\t\tthis.connection[pred] = capabilities[pred];\n\t\t}\n\t}\n}\n\nConnectionCapabilities.prototype.findResourceDocumentID = function(dbid, account){\n\tlet testrn = this.formResourceName(dbid, account)\n\tfor (const pred of Object.keys(this.connection)) {\n\t\tlet rec = this.connection[pred]\n\t\tif(rec['terminus:resource_name'] && rec['terminus:resource_name']['@value'] && rec['terminus:resource_name']['@value'] === testrn){\n\t\t\treturn pred\n\t\t}\t\t\n\t}\n\treturn false\n}\n\nConnectionCapabilities.prototype.formResourceName = function(dbid, account){\n\tif(dbid == \"terminus\") return \"terminus\"\n\treturn `${account}|${dbid}`\n}\n\n\n\nConnectionCapabilities.prototype.getJSONContext = function () {\n\tif (this.connection[\"@context\"]){\n\t\tlet ctxt = this.connection[\"@context\"]\n\t\tif(!ctxt['scm']) ctxt['scm'] = \"terminus://universal#\"\n\t\treturn ctxt\n\t}\n\treturn {}\n\t//return false;\n};\n\n/**\n * retrieves the meta-data record returned by connect for the connected server\n * @returns {terminus:Server} JSON server record as returned by WOQLClient.connect\n */\nConnectionCapabilities.prototype.getServerRecord = function () {\n\tconst okeys = Object.keys(this.connection);\n\n\tfor (const oid of okeys) {\n\t\tif (this.connection[oid]['@type'] === 'terminus:Server') {\n\t\t\treturn this.connection[oid];\n\t\t}\n\t}\n\treturn false;\n};\n\n/**\n * retrieves the meta-data record returned by connect for a particular database\n * @param {String} [dbid] database id\n * @returns {terminus:Database} terminus:Database JSON document as returned by WOQLClient.connect\n */\nConnectionCapabilities.prototype.getDBRecord = function (dbid, account) {\n\tlet docid = this.findResourceDocumentID(dbid, account)\n\t\n\tif(docid){\n\t\treturn this.connection[docid];\n\t}\n\treturn undefined;\n};\n\nConnectionCapabilities.prototype.getDBMetadata = function (dbid, account) {\n\tlet dbrec = this.getDBRecord(dbid, account)\n\tif(dbrec) return this.extractMetadata(dbrec)\n\treturn false\n}\n\n/**\n * Transforms a raw server db record into a friendly json with db, account, title, description fields\n */\nConnectionCapabilities.prototype.extractMetadata = function(dbrec){\n\tlet meta = {\n\t\tdb: \"\",\n\t\taccount: \"\",\n\t\ttitle: \"\",\n\t\tdescription: \"\"\n\t}\n\tif(dbrec['terminus:resource_name'] && dbrec['terminus:resource_name']['@value']){\n\t\tlet rn = dbrec['terminus:resource_name']['@value']\n\t\tif(rn == \"terminus\") meta.db = rn\n\t\telse if(rn) {\n\t\t\tlet bits = rn.split(\"|\")\n\t\t\tif(bits.length == 1) meta.db = rn\n\t\t\telse {\n\t\t\t\tmeta.account = bits[0]\n\t\t\t\tmeta.db = bits[1]\n\t\t\t}\n\t\t}\n\t}\n\tif(dbrec['rdfs:label']){\n\t\t//take label without a bar (bug workaround for account|db label) if there are many\n        let l = dbrec['rdfs:label']\n        if(Array.isArray(l)){\n            if(l.length > 1){\n                 l = ((l[0][\"@value\"].indexOf(\"|\") == -1) ? l[0] : l[1])\n            }\n            else l = l[0]\n        }\n\t\tif(l && l[\"@value\"]) meta.title = l[\"@value\"]\n\t}\n\tif(!meta.title) meta.title = meta.db\n\tif(dbrec['rdfs:comment']){\n\t\t//take last label if there are many\n\t\tlet l = Array.isArray(dbrec['rdfs:comment']) ? dbrec['rdfs:comment'][0] : dbrec['rdfs:comment']\n\t\tif(l && l[\"@value\"]) meta.description = l[\"@value\"]\n\t}\n\treturn meta\n}\n\n/**\n * retrieves all the db meta-data records returned by connect for a particular server\n * @param {String} [srvr] optional server URL - if omitted current connection config server will be used\n * @returns {[terminus:Database]} array of terminus:Database JSON documents as returned by WOQLClient.connect\n */\nConnectionCapabilities.prototype.getServerDBRecords = function () {\n\tlet dbrecs = {}\n\tfor (const oid of Object.keys(this.connection)) {\n\t\tif (this.connection[oid]['@type'] === 'terminus:Database') {\n\t\t\tdbrecs[oid] = this.connection[oid];\n\t\t}\t\t\n\t}\n\treturn dbrecs;\n};\n\nConnectionCapabilities.prototype.getServerDBMetadata = function () {\n\tlet dbrecs = this.getServerDBRecords()\n\tlet metas = []\n\tfor (const oid of Object.keys(dbrecs)) {\n\t\tlet met = this.extractMetadata(dbrecs[oid])\n\t\tif(met) metas.push(met)\n\t}\n\treturn metas\n}\n\n/**\n * removes a database record from the connection registry (after deletion, for example)\n * @param {String} [dbid] optional DB ID - if omitted current connection config db will be used\n * @param {String} [srvr] optional server URL - if omitted current connection config server will be used\n * @returns {[terminus:Database]} array of terminus:Database JSON documents as returned by WOQLClient.connect\n */\nConnectionCapabilities.prototype.removeDB = function (dbid, account) {\n\tlet docid = this.findResourceDocumentID(dbid, account)\n\tif(docid){\n\t\tdelete this.connection[docid];\n\t}\n};\n\n/**\n * @param {String} action - the action that will be carried out\n * @param {String} [dbid] optional DB ID - if omitted current connection config db will be used\n * @param {String} [srvr] optional server URL - if omitted current connection config server will be used\n * @returns {Boolean} true if the client's capabilities allow the action on the given server / db\n * supports client side access control checks (in addition to server side)\n */\nConnectionCapabilities.prototype.capabilitiesPermit = function (action, dbid, account) {\n\tlet rec;\n//return true\n\tif (action === CONST.CREATE_DATABASE) {\n\t\trec = this.getServerRecord();\n\t} else if (dbid) rec = this.getDBRecord(dbid, account);\n\telse console.log('no dbid provided in capabilities check ', dbid, account);\n\tif (rec) {\n\t\tconst auths = rec['terminus:authority'];\n\t\tif (auths && auths.indexOf(`terminus:${action}`) !== -1) return true;\n\t} else {\n\t\tconsole.log('No record found for connection: ', action, dbid, account, this.connection);\n\t}\n\tthis.error = ErrorMessage.accessDenied(action, dbid, account);\n\treturn false;\n};\n\n\nmodule.exports = ConnectionCapabilities;\n","const IDParser = require('./terminusIDParser');\n\n/**\n * @file Terminus DB connection configuration\n * @license Apache Version 2\n * @description Object representing the state of a connection to a terminus db - these are:\n * 1. server url (set on connect)\n * 2. current account id\n * 2. dbid, account, api key, remote auth\n * along with some configuration information (key, connected mode, client_side_access_control)\n * provides methods for getting and setting connection parameters\n */\nfunction ConnectionConfig(serverUrl,params) {\n\tthis.server = false\n\tthis.remote_auth = false //remote auth for authenticating to remote servers for push / fetch / clone\n\tthis.basic_auth = false; // basic auth string for authenticating to local server\n\t//these operate as cursors - where within the connected server context, we currently are\n\tthis.accountid = false\n\tthis.dbid = false\n\t\n\tthis.default_branch_id = \"master\"\n\tthis.default_repo_id = \"local\"\n\t//default repository and branch ids\n\tthis.branchid = this.default_branch_id \n\tthis.repoid = this.default_repo_id  \n\t//set if pointing at a commit within a branch\n\tthis.refid = false \n\n\tthis.connection_error = false\n\t\n\tconst parser = new IDParser();\n\tlet surl = parser.parseServerURL(serverUrl)\n    if (surl) {\n\t\tthis.server = surl\n\t\tthis.update(params)\n\t}else{\n\t\tthis.setError(`Invalid Server URL: ${serverUrl}`)\n\t}\n\t//this.setServer(serverUrl);\n}\n\n/**\n * Creates a new connection config object and copies all the state information from this one into it\n */\nConnectionConfig.prototype.copy = function () {\n\tlet other = new ConnectionConfig(this.server)\n\tother.remote_auth = this.remote_auth \n\tother.basic_auth = this.basic_auth\n\tother.accountid = this.accountid \n\tother.dbid = this.dbid \n\tother.branchid = this.branchid\n\tother.repoid = this.repoid \n\tother.refid = this.refid\n\treturn other\n}\n\n/**\n * updates connection config with new values set in json params object\n */\nConnectionConfig.prototype.update = function (params) {\n\tconst newParams = params || {};\n\t//if (typeof newParams.server != \"undefined\") this.setServer(newParams.server);\n\tif (typeof newParams.account != \"undefined\") this.setAccount(newParams.account);\n\tif (typeof newParams.db != \"undefined\") this.setDB(newParams.db);\n\tif (typeof newParams.remote_auth != \"undefined\") this.setRemoteAuth(newParams.remote_auth);\n\tif (typeof newParams.key != \"undefined\") this.setBasicAuth(newParams.key, newParams.user);\n\tif (typeof newParams.branch != \"undefined\") this.setBranch(newParams.branch);\n\tif (typeof newParams.ref != \"undefined\") this.setREf(newParams.ref);\n\tif (typeof newParams.repo != \"undefined\") this.setRepo(newParams.repo);\n};\n\n\n/**\n * Simple gets to retrieve current connection status\n */\nConnectionConfig.prototype.serverURL = function () {\n\treturn this.server;\n};\n\nConnectionConfig.prototype.db = function () {\n\treturn this.dbid;\n};\n\nConnectionConfig.prototype.branch = function () {\n\treturn this.branchid;\n};\n\nConnectionConfig.prototype.ref = function () {\n\treturn this.refid;\n};\n\nConnectionConfig.prototype.account = function () {\n\treturn this.accountid;\n};\n\nConnectionConfig.prototype.repo = function () {\n\treturn this.repoid;\n};\n\nConnectionConfig.prototype.basicAuth = function () {\n\treturn this.basic_auth;\n};\n\nConnectionConfig.prototype.user = function (ignore_jwt) {\n\tif(!ignore_jwt && this.remote_auth && this.remote_auth.type == \"jwt\") return this.remote_auth.user\n\tif(this.basic_auth){\n\t\treturn this.basic_auth.split(\":\")[0]\n\t}\n};\n\n/** \n * Clear cursor for connection\n */\nConnectionConfig.prototype.clearCursor = function () {\n\tthis.branchid = this.default_branch_id \n\tthis.repoid = this.default_repo_id  \n\tthis.accountid = false;\n\tthis.dbid = false;\n\tthis.refid = false;\n}\n\n/**\n * Setting all 5 cursor related state variables at once\n */\nConnectionConfig.prototype.setCursor = function (account, db, repo, branch, ref) {\n\tif(account && !this.setAccount(account)) return false\n\tif(db && !this.setDB(db)) return false\n\tif(repo && !this.setRepo(repo)) return false\n\tif(branch && !this.setBranch(branch)) return false\n\tif(ref && !this.setRef(ref)) return false\n\treturn true\n}\n\nConnectionConfig.prototype.setError = function (str) {\n\tthis.connection_error = str\n}\n\n\n/**\n * @param {String} inputStr - local identifier of account\n */\nConnectionConfig.prototype.setAccount = function (inputStr) {\n\tif(!inputStr) {\n\t\tthis.accountid = false;\n\t\treturn false\n\t}\n\tconst parser = new IDParser();\n\tlet aid = parser.parseDBID(inputStr)\n\tif (aid) {\n\t\tthis.accountid = aid\n\t\treturn this.accountid;\n\t}\n\tthis.setError(`Invalid Account ID: ${inputStr}`)\n};\n\n/**\n * @param {String} inputStr - local identifier of db\n */\nConnectionConfig.prototype.setDB = function (inputStr) {\n\tif(!inputStr) {\n\t\tthis.dbid = false;\n\t\treturn false\n\t}\n\tconst parser = new IDParser();\n\tlet dbid = parser.parseDBID(inputStr)\n\tif (dbid) {\n\t\tthis.dbid = dbid\n\t\treturn this.dbid;\n\t}\n\tthis.setError(`Invalid Database ID: ${inputStr}`)\n};\n\n/**\n * @param {String} inputStr - local identifier of repo\n */\nConnectionConfig.prototype.setRepo = function (inputStr) {\n\tif(!inputStr) {\n\t\tthis.repoid = this.default_repo_id;\n\t\treturn this.repoid\n\t}\n\tconst parser = new IDParser();\n\tlet repoid = parser.parseDBID(inputStr)\n\tif (repoid) {\n\t\tthis.repoid = repoid\n\t\treturn this.repoid;\n\t}\n\tthis.setError(`Invalid Repo ID: ${inputStr}`)\n};\n\n\n/**\n * @param {String} inputStr - id of branch\n */\nConnectionConfig.prototype.setBranch = function (inputStr) {\n\tif(!inputStr) {\n\t\tthis.branchid = this.default_branch_id;\n\t\treturn this.branchid\n\t}\n\tconst parser = new IDParser();\n\tlet bid = parser.parseDBID(inputStr);\n\tif (bid) {\n\t\tthis.branchid = bid\n\t\treturn this.branchid;\n\t}\n\tthis.setError(`Invalid Branch ID: ${inputStr}`)\n}\n\n/**\n * @param {String} inputStr - id of ref\n */\nConnectionConfig.prototype.setRef = function (inputStr) {\n\tif(inputStr){\n\t\tconst parser = new IDParser();\n\t\tlet bid = parser.parseDBID(inputStr)\n\t\tif (bid) {\n\t\t\tthis.refid = bid\n\t\t\treturn this.refid;\n\t\t}\n\t\tthis.setError(`Invalid Branch ID: ${inputStr}`)\n\t}\n\tthis.refid = false\n\treturn this.refid;\n}\n\n/**\n * @param {String} userKey - api key\n * @param {String} userId - basic auth user id key\n */\nConnectionConfig.prototype.setBasicAuth = function (userKey, userId) {\n\tif(!userKey) {\n\t\tthis.basic_auth = false\n\t\treturn false\n\t}\n\tconst uid = userId || \"admin\"\n\tconst parser = new IDParser();\n\tlet key = parser.parseKey(userKey)\n\tif (key) {\n\t\tthis.basic_auth = `${uid}:${key}`\n\t\treturn this.basic_auth;\n\t}\n\tthis.setError(`Invalid API Key: ${inputStr}`)\n}\n\nConnectionConfig.prototype.setRemoteAuth = function (details) {\n    this.remote_auth = details\n}\n\nConnectionConfig.prototype.remoteAuth = function () {\n    return this.remote_auth\n}\n\n/**\n * Simple gets to retrieve current connection status\n */\nConnectionConfig.prototype.serverURL = function () {\n\treturn this.server;\n};\n\n/**\n * API endpoint url generation\n * \n * for create / delete db\n */\nConnectionConfig.prototype.dbURL = function () {\n\treturn this.dbBase(\"db\")\n};\n\n/**\n * Generate URL for create / delete graph api endpoint\n */\nConnectionConfig.prototype.graphURL = function (type, gid) {\n\treturn this.branchBase(\"graph\") + `/${type}/${gid}`\n};\n\n/**\n * Generate URL for get / set schema api endpoint\n */\nConnectionConfig.prototype.triplesURL = function (type, gid) {\n\tif(this.db() == \"terminus\") var s = this.dbBase(\"triples\") \n\telse var s = this.branchBase(\"triples\")\n\tconst graphId = gid || 'main';\t \n\ts += `/${type}/${graphId}`\n\treturn s\n};\n\n/**\n * Generate URL for woql query api endpoint\n */\nConnectionConfig.prototype.queryURL = function () {\n\tif(this.db() == \"terminus\") return this.dbBase(\"woql\")\n\treturn this.branchBase(\"woql\")\n};\n\n/**\n * Generate URL for class frame api endpoint\n */\nConnectionConfig.prototype.classFrameURL = function () {\n\tif(this.db() == \"terminus\") return this.dbBase(\"frame\")\n\treturn this.branchBase(\"frame\")\n};\n\n/**\n * Generate URL for clone db endpoint\n */\nConnectionConfig.prototype.cloneURL = function (new_repo_id) {\n\tlet crl = `${this.serverURL()}clone/${this.account()}`\n\tif(new_repo_id) crl += `/${new_repo_id}`\n\treturn crl\n};\n\n/**\n * Generate URL for fetch endpoint\n */\nConnectionConfig.prototype.fetchURL = function (repoid) {\n\trepoid = repoid || this.repo()\n\treturn this.dbBase(\"fetch\") + `/${repoid}`\n}\n\n/**\n * Generate URL for rebase endpoint\n */\nConnectionConfig.prototype.rebaseURL = function (source_repo, source_branch) {\n\tlet purl = this.branchBase(\"rebase\")\n\tif(source_repo){\n\t\tpurl += `/${source_repo}`\n\t\tif(source_branch) purl += `/${source_branch}`\n\t}\n\treturn purl\n}\n\n/**\n * Generate URL for push endpoint\n */\nConnectionConfig.prototype.pushURL = function (target_repo, target_branch) {\n\tlet purl = this.branchBase(\"push\")\n\tif(target_repo){\n\t\tpurl += `/${target_repo}`\n\t\tif(target_branch) purl += `/${target_branch}`\n\t}\n\treturn purl\n}\n\n/**\n * Generate URL for branch endpoint\n */\nConnectionConfig.prototype.branchURL = function (nuid) {\n\tlet b = this.repoBase(\"branch\")\n\treturn b + `/branch/${nuid}`\n}\n\n/**\n * Generate base db url consisting of server/action/account/dbid\n */\nConnectionConfig.prototype.dbBase = function (action) {\n\treturn  `${this.serverURL()}${action}/${this.dbURLFragment()}`\n};\n\n/**\n * Generate base branch url consisting of server/action/account/dbid/branchid\n */\nConnectionConfig.prototype.repoBase = function (action) {\n\tlet b = this.dbBase(action)\n\tif(this.repo()) b += `/${this.repo()}`\n\telse b += \"/\" + this.default_repo_id\n\treturn b\n};\n\n/**\n * Generate base branch url consisting of server/action/account/dbid/branchid\n */\nConnectionConfig.prototype.branchBase = function (action) {\n\tlet b = this.repoBase(action)\n\t//_meta repo is magic - stores repository metadata\n\tif(this.repo() == \"_meta\"){\n\t\treturn b\n\t}\n\t//_commits branch is magic - stores all commits for repo\n\tif(this.branch() == \"_commits\") {\n\t\treturn b + `/${this.branch()}`\n\t}\n\telse if(this.ref()){\n\t\treturn b + `/commit/${this.ref()}`\n\t}\n\telse if(this.branch()){\n\t\treturn b + `/branch/${this.branch()}`\n\t}\n\telse b += \"/branch/\" + this.default_branch_id\n\treturn b\n}\n\n\n/**\n * Generate url portion consisting of account/dbid (unless dbid = terminus in which case there is no account)\n */\nConnectionConfig.prototype.dbURLFragment = function () {\n\tif(this.db() == \"terminus\") return this.db()\n\treturn this.account() + \"/\" + this.db()\n};\n\nmodule.exports = ConnectionConfig;\n","/**\n * @file Terminus ID Parser\n * @license Apache Version 2\n * Object representing a terminus ID / URL \n * Helper methods for parsing and validating terminus IDS\n * and dealing with namespace prefixed URLs\n * @param {Object} context JSON-LD context to be used for prefixes\n */\n\nfunction IDParser() {}\n\n/**\n * parses a Terminus Server URL to ensure it is a valid url and appends a trailing slash if not present\n */\nIDParser.prototype.parseServerURL = function (str) {\n\tif (!this.validURL(str)) {\n\t\treturn false\n\t}\n\tif (str.lastIndexOf('/') !== str.length - 1) {\n\t\tstr += '/'\n\t}\n\treturn str\n}\n\n/**\n * Ensures that passed database ids are valid local identifiers\n */\nIDParser.prototype.parseDBID = function (str) {\n\tif (this.validIDString(str, \"db\")) {\n\t\treturn str\n\t}\n\treturn false\n};\n\n/**\n * Ensures that passed account ids are valid local identifiers\n */\nIDParser.prototype.parseAccount = function (str) {\n\tif (this.validIDString(str, \"account\")) {\n\t\treturn str\n\t}\n\treturn false\n}\n\n/**\n * Ensures that passed branch ids are valid local identifiers\n */\nIDParser.prototype.parseBranch = function (bid) {\n\tif (this.validIDString(bid, \"branch\")) {\n\t\treturn bid\n\t}\n\treturn false\n}\n\n/**\n * just put in for future-proofing if we want to do client side checking of keys\n */\nIDParser.prototype.parseJWT = function (jwt) {\n\treturn jwt\n}\n\nIDParser.prototype.parseKey = function (key) {\n\treturn key\n};\n\n\n// Valid URLs are those that start with http:// or https://\nIDParser.prototype.validURL = function (str) {\n\tif (str && str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://') return true;\n\treturn false;\n};\n\nIDParser.prototype.validIDString = function (str) {\n\tif (typeof str !== 'string') return false;\n\tif (str.indexOf(':') !== -1 || str.indexOf(' ') !== -1 || str.indexOf('/') !== -1) return false;\n\treturn true;\n};\n\n\nmodule.exports = IDParser;\n","\nconst UTILS = require('./utils.js');\nconst WOQL = require('./woql.js');\n\n\n/**\n * @file WOQL Result Object\n * @license Apache Version 2\n * Object representing the result of a WOQL Query\n * @param {Object} results result JSON object as returned by WOQL query\n * @param {WOQLQuery} query the query object that generated the result\n * @param {Object} [config] optional result configuration options object\n *                 [config.no_compress] by default all URLs are compressed where possible (v:X rather than http://.../variable/x) set to true to return non-compressed values \n *                 [config.context] specify the JSON-LD context to use for compressing results - by default the query context will be used\n */\nfunction WOQLResult(results, query, config) {\n\tthis.bindings = (results ? results.bindings : []);\n\tthis.insert_count = (results ? results.inserts : 0)\n\tthis.delete_count = (results ? results.deletes : 0)\n\tthis.transaction_retry_count = (results ? results.transaction_retry_count : 0)\n\tthis.query = (query ? query : WOQL.query());\n\tthis.cursor = 0;\n\tif (!(config && config.no_compress)) {\n\t\tconst context = (config && config.context ? config.context : false);\n\t\tthis.compress(context);\n\t}\n}\n\n/**\n * @param {Object} [context] optional context to use for compression - if ommitted query context is used\n */\nWOQLResult.prototype.compress = function (context) {\n\tcontext = (context || this.query.getContext());\n\tfor (let i = 0; i < this.bindings.length; i++) {\n\t\tfor (const prop of Object.keys(this.bindings[i])) {\n            const nprop = UTILS.shorten(prop, context);\n            var nval = this.bindings[i][prop]\n            if(typeof this.bindings[i][prop] == \"string\"){\n                nval = UTILS.shorten(this.bindings[i][prop], context) \n            }\n            else if(Array.isArray(this.bindings[i][prop])){\n                nval = []\n                for(var j = 0; j < this.bindings[i][prop].length; j++){\n                    let oval = this.bindings[i][prop][j] \n                    if(typeof oval == \"string\") oval = UTILS.shorten(oval, context) \n                    else if(Array.isArray(oval)){\n                        let noval = []\n                        for(var k = 0; k < oval.length; k++){\n                            let kval = oval[k];\n                            if(typeof kval == \"string\") kval = UTILS.shorten(kval, context)\n                            noval.push(kval)\n                        }\n                        oval = noval\n                    }\n                    nval.push(oval)\n                }   \n            }\n\t\t\tdelete (this.bindings[i][prop]);\n\t\t\tthis.bindings[i][nprop] = nval;\n\t\t}\n\t}\n\treturn this;\n}\n\n/**\n * Returns true if there are any results \n */\nWOQLResult.prototype.hasBindings = function () {\n\tif(this.bindings && this.count()) return true;\n\treturn false;\n};\n\n/**\n * Returns true if there are any results \n */\nWOQLResult.prototype.hasUpdates = function () {\n\tif(this.inserts() > 0 || this.deletes() > 0) return true;\n\treturn false;\n};\n\n\n/**\n * Returns original array of bindings returned by API\n */\nWOQLResult.prototype.getBindings = function () {\n\treturn this.bindings;\n};\n\n/**\n * Returns list of variables returned in bindings from API\n */\nWOQLResult.prototype.getVariableList = function () {\n\tif (this.bindings && this.bindings[0]) {\n\t\treturn Object.keys(this.bindings[0]);\n\t}\n\treturn [];\n};\n\n/**\n * Number of rows in bound results\n */\nWOQLResult.prototype.count = function () {\n\treturn this.bindings.length;\n};\n\n/**\n * Number of reported inserts\n */\nWOQLResult.prototype.inserts = function () {\n\treturn this.insert_count\n};\n\n/**\n * Number of reported inserts\n */\nWOQLResult.prototype.deletes = function () {\n\treturn this.delete_count\n};\n\n\n/**\n * Result set navigation\n */\nWOQLResult.prototype.first = function () {\n\tthis.cursor = 0;\n\treturn this.bindings[0];\n};\n\nWOQLResult.prototype.last = function(){\n\tthis.cursor = this.bindings.length-1;\n\treturn this.bindings[this.bindings.length-1];\n}\n\nWOQLResult.prototype.next = function () {\n\tif(this.cursor >= this.bindings.length) return false;\n\tconst res = this.bindings[this.cursor];\t\n\tthis.cursor++;\n\treturn res;\n};\n\nWOQLResult.prototype.prev = function () {\n\tif (this.cursor > 0) {\n\t\tthis.cursor--;\n\t\treturn this.bindings[this.cursor];\n\t}\n};\n\n/**\n * Normally sorting of results is the job of the query - this is just in case you want to resort results according to some key (variable)\n */\nWOQLResult.prototype.sort = function(key, asc_or_desc){\n\tthis.bindings.sort((a, b) => {\n\t\treturn this.compareValues(a[key], b[key], asc_or_desc);\n\t});\n\tthis;\n}\n\n/**\n * Compares results a, b according to \"asc\" or \"desc\" order\n */\nWOQLResult.prototype.compareValues = function(a, b, asc_or_desc=\"asc\"){\n\tif(!a || !b) return 0;\n\tif(typeof a['@value'] != \"undefined\" && typeof b['@value'] != \"undefined\"){\n\t\ta = a['@value'];\n\t\tb = b['@value'];\n\t}\n\tif (a > b) {\n\t\treturn (asc_or_desc && asc_or_desc == 'asc' ? 1 : -1);\n\t}\n\tif (b > a) {\n\t\treturn (asc_or_desc && asc_or_desc == 'asc' ? -1 : 1);\n\t}\n};\n\nmodule.exports = WOQLResult;\n","const WOQLQuery = require('./query/woqlCore');\nconst WOQLJSON = require('./query/woqlQuery');\nconst WOQLBuilder = require('./query/woqlBuilder');\nconst WOQLPaging = require('./query/woqlPaging');\nconst WOQLSchema = require('./query/woqlSchema');\nconst WOQLPrinter = require('./query/woqlPrinter');\nconst WOQLLibrary = require('./query/woqlLibrary');\n/**\n * The WOQL object is a wrapper around the WOQLQuery object\n * Syntactic sugar to allow writing WOQL.triple()... instead of new WOQLQuery().triple()\n * Every function matches one of the public api functions of the woql query object\n */\nlet WOQL = {};\n\n/*\n * We expose all the real woql predicates via the WOQL object,\n * for ease of typing all return a WOQL query object\n */\n\n /**\n * allow you to do a query against a specific commit point\n * \n * example WOQL.using(\"userName/dbName/local/commit|branch/commitID\").triple(\"v:A\", \"v:B\", \"v:C\")..\n *\n * @param {string}   \t\t - refPath  path to specific refId \n * @param {WOQLQuery object} - subquery for the specific commit point\n * @return WOQLQuery \n  */\n WOQL.using = function(refPath, Query){return new WOQLQuery().using(refPath, Query)}\n\n \n/**\n * Adds a text comment to a query - can also be used to wrap any part of a query to turn it off\n * @param {string} comment - text comment\n * @param {WOQLQuery} Subq  - subquery that is \"commented out\"\n * @return {WOQLQuery}\n */\n WOQL.comment = function(comment, Subq){return new WOQLQuery().comment(comment, Subq)}\n\n/**\n* Filters the query so that only the variables included in [V1...Vn] are returned in the bindings\n* @param list - only these variables are returned\n* @return {WOQLQuery}\n*/\nWOQL.select = function(...list){ return new WOQLQuery().select(...list); }\n\n/**\n * Creates a logical AND of the arguments\n * @param queries - WOQL Query objects\n * @return {object} WOQLQuery\n */\nWOQL.and = function(...queries){ return new WOQLQuery().and(...queries); }\n\n/**\n * Creates a logical OR of the arguments\n * @param queries - WOQL Query objects\n * @return {object} WOQLQuery\n */\nWOQL.or = function(...queries){\treturn new WOQLQuery().or(...queries); }\n\n/**\n * Specifies the database URL that will be the default database for the enclosed query\n * @param {string} graph_filter - a graph filter expression (e.g. schema/*)\n * @param {object} query - WOQL Query object, optional\n * @return {object} WOQLQuery\n */\nWOQL.from = function(graph_filter, query){ return new WOQLQuery().from(graph_filter, query); }\n\n/**\n * Sets the current output graph for writing output to.\n * @param {string} graph_descriptor - a id of a specific graph (e.g. instance/main) that will be written to\n * @param {object} query - WOQL Query object, optional\n * @return {object} WOQLQuery\n */\nWOQL.into = function(graph_descriptor, query){ return new WOQLQuery().into(graph_descriptor, query); }\n\n\n/**\n * Creates a triple pattern matching rule for the triple [S, P, O] (Subject, Predicate, Object)\n * @param {string} a - Subject\n * @param {string} b - Predicate\n * @param {string} c - Object\n * @return {object} WOQLQuery\n */\nWOQL.triple = function(a, b, c){ return new WOQLQuery().triple(a, b, c); }\n\n/**\n * Creates a pattern matching rule for the quad [S, P, O, G] (Subject, Predicate, Object, Graph)\n * @param {string} a - Subject\n * @param {string} b - Predicate\n * @param {string} c - Object\n * @param {string} d - Graph\n * @return {object} WOQLQuery\n */\nWOQL.quad = function(a, b, c, d){ return new WOQLQuery().quad(a, b, c, d); }\n\n/**\n * Returns true if ClassA subsumes ClassB, according to the current DB schema\n * @param {string} a - classA\n * @param {string} b - classB\n * @return {boolean} WOQLQuery\n */\nWOQL.sub = function(a, b){ return new WOQLQuery().sub(a, b) }\nWOQL.subsumption = WOQL.sub\n/**\n * Matches if a is equal to b\n * @param {string} a - literal, variable or id\n * @param {string} b - literal, variable or id\n * @return {object} WOQLQuery\n *\n *\n * @example\n * // find triples that are of type scm:Journey, and have\n * // a start_station v:Start, and that start_station is labeled\n * // v:Start_Label\n *\n * WOQL.and(\n *      WOQL.triple(\"v:Journey\", \"type\", \"scm:Journey\"),\n *      WOQL.or(\n *          WOQL.triple(\"v:Journey\", \"scm:start_station\", \"doc:Station31007\"),\n *          WOQL.triple(\"v:Journey\", \"scm:start_station\", \"doc:Station31114\")),\n *      WOQL.triple(\"v:Journey\", \"scm:start_station\", \"v:Start\"),\n *      WOQL.triple(\"v:Start\", \"label\", \"v:Start_Label\"))\n *\n * @see WOQLQuery().woql_or for WOQL.py version of the same function\n */\nWOQL.eq = function(a, b){ return new WOQLQuery().eq(a, b)}\nWOQL.equals = WOQL.eq\n\n/**\n * Substring \n * @param {string} String - String or variable\n * @param {string} Before - integer or variable (characters from start to begin)\n * @param {string} [Length] - integer or variable (length of substring)\n * @param {string} [After] - integer or variable (number of characters after substring)\n * @param {string} Substring - String or variable \n * @return {object} WOQLQuery\n *\n * @example\n * // find triples that are of type scm:Journey, and have\n * // a start_station v:Start, and that start_station is labeled\n * // v:Start_Label\n *\n * WOQL.and(\n *      WOQL.triple(\"v:Journey\", \"type\", \"scm:Journey\"),\n *      WOQL.triple(\"v:Journey\", \"start_station\", \"v:Start\"),\n *      WOQL.triple(\"v:Start\", \"label\", \"v:Start_Label\"))\n *\n * @see WOQLQuery().woql_and for WOQL.py version of the same function\n */\nWOQL.substr = function(String, Before, Length, After, SubString){ return new WOQLQuery().substr(String, Before, Length, After, SubString) }\nWOQL.substring = WOQL.substr  \n\n/**\n * Updates a document (or any object) in the db with the passed copy\n * @param {string} JSON - JSON-LD document\n * @return {object} WOQLQuery\n */\nWOQL.update_object = function(JSON){ return new WOQLQuery().update_object(JSON);\t}\n\n/**\n * Deletes a node identified by an IRI or a JSON-LD document\n * @param {string} JSON_or_IRI - IRI or a JSON-LD document\n * @return {object} WOQLQuery\n */\nWOQL.delete_object = function(JSON_or_IRI){ return new WOQLQuery().delete_object(JSON_or_IRI);\t}\n\nWOQL.read_object = function(IRI, Output, Format){ return new WOQLQuery().read_object(IRI, Output, Format);\t}\n\n\n/**\n * Imports the Target Resource to the variables defined in vars\n * @param {object} asvars - An AS query (or json representation)\n * @param {object} query_resource - description of where the resource is to be got from (WOQL.file, WOQL.remote, WOQL.post)\n * @return {object} WOQLQuery\n */\nWOQL.get = function(asvars, query_resource){\treturn new WOQLQuery().get(asvars, query_resource); }\n\n/**\n * Exports the Target Resource to the file file, with the variables defined in as\n * @param {object} asvars - An AS query (or json representation)\n * @param {object} query - A sub-query to be dumpted out\n * @param {object} query_resource - description of where the resource is to be put\n * @return {object} WOQLQuery\n */\nWOQL.put = function(asvars, query, query_resource){\treturn new WOQLQuery().put(asvars, query, query_resource); }\n\n/**\n * Imports the value identified by Source to a Target variable\n * @param {string or integer} map - Source\n * @param {string} vari - Target\n * @param {string} [ty] - optional type to cast value to\n * @return {object} WOQLQuery\n */\nWOQL.as = function(map, vari, ty){\treturn new WOQLQuery().as(map, vari, ty); }\n\n/**\n * Provides details of a remote data source in a JSON format that includes a URL property\n * @param {object} url - remote data source in a JSON format\n * @param {object} opts - imput options, optional\n * @return {object} WOQLQuery\n */\nWOQL.remote = function(url, opts){\treturn new WOQLQuery().remote(url, opts); }\n\n/**\n * Provides details of a file source in a JSON format that includes a URL property\n * @param {object} url - file data source in a JSON format\n * @param {object} opts - imput options, optional\n * @return {object} WOQLQuery\n */\nWOQL.file = function(url, opts){\treturn new WOQLQuery().file(url, opts); }\n\n\n/**\n * Provides details of a file source in a JSON format that includes a URL property\n * @param {object} url - file data source in a JSON format\n * @param {object} opts - imput options, optional\n * @return {object} WOQLQuery\n */\nWOQL.post = function(url, opts){\treturn new WOQLQuery().post(url, opts); }\n\n\n/**\n * Deletes any triples that match the rule [S,P,O]\n * @param {string} S - Subject\n * @param {string} P - Predicate\n * @param {string} O - Object\n * @return {object} WOQLQuery\n */\nWOQL.delete_triple = function( S, P, O ){ return new WOQLQuery().delete_triple (S, P, O);\t}\n\n/**\n * Deletes any quads that match the rule [S, P, O, G] (Subject, Predicate, Object, Graph)\n * @param {string} S - Subject\n * @param {string} P - Predicate\n * @param {string} O - Object\n * @param {string} G - Graph\n * @return {object} WOQLQuery\n */\nWOQL.delete_quad = function( S, P, O, G ){ return new WOQLQuery().delete_quad (S, P, O, G); }\n\n/**\n * Adds triples according to the the pattern [S,P,O]\n * @param {string} S - Subject\n * @param {string} P - Predicate\n * @param {string} O - Object\n * @return {object} WOQLQuery\n */\nWOQL.add_triple = function( S, P, O ){ return new WOQLQuery().add_triple (S, P, O); }\n\n/**\n * Adds quads according to the pattern [S,P,O,G]\n * @param {string} S - Subject\n * @param {string} P - Predicate\n * @param {string} O - Object\n * @param {string} G - Graph\n * @return {object} WOQLQuery\n */\nWOQL.add_quad = function( S, P, O, G ){ \treturn new WOQLQuery().add_quad (S, P, O, G);}\n\n /**\n * When the sub-query in Condition is met, the Update query is executed\n * @param {object or boolean} Query - WOQL Query object or bool\n * @param {object} Update - WOQL Query object, optional\n * @return {object} WOQLQuery\n *\n * Functions which take a query as an argument advance the cursor to make the chaining of queries fall into the corrent place in the encompassing json.\n */\nWOQL.when = function(Query, Update){ return new WOQLQuery().when(Query, Update);}\n\n/**\n * A trimmed version of StringA (with leading and trailing whitespace removed) is copied into VariableA\n * @param {string} a - StringA\n * @param {string} b - VariableA\n * @return {object} WOQLQuery\n */\nWOQL.trim = function(a, b){\treturn new WOQLQuery().trim(a, b);\t}\n\n/**\n * Evaluates the Arithmetic Expression Arith and copies the output to variable V\n * @param {object} arith - query or JSON-LD representing the query\n * @param {string} v - output variable\n * @return {object} WOQLQuery\n */\nWOQL.eval = function(arith, v){\treturn new WOQLQuery().eval(arith, v);}\n\n/**\n * Adds numbers N1...Nn together\n * @param args - numbers to add together\n * @return {object} WOQLQuery\n */\nWOQL.plus = function(...args){\treturn new WOQLQuery().plus(...args);}\n\n/**\n * Subtracts Numbers N1..Nn\n * @param args - numbers to be subtracted\n * @return {object} WOQLQuery\n */\nWOQL.minus = function(...args){\treturn new WOQLQuery().minus(...args); }\n\n/**\n * Multiplies numbers N1...Nn together\n * @param args - numbers to be multiplied\n * @return {object} WOQLQuery\n */\nWOQL.times = function(...args){\treturn new WOQLQuery().times(...args); }\n\n/**\n * Divides numbers N1...Nn by each other left, to right precedence\n * @param args - numbers to tbe divided\n * @return {object} WOQLQuery\n */\nWOQL.divide = function(...args){ return new WOQLQuery().divide(...args); }\n\nWOQL.like = function(stringa, stringb, lev_distance){ return new WOQLQuery().like(stringa, stringb, lev_distance); }\n\n\n/**\n * Division - integer division - args are divided left to right\n * @param args - numbers for division\n * @return {object} WOQLQuery\n */\nWOQL.div = function(...args){\treturn new WOQLQuery().div(...args); }\n\n/**\n * Raises A to the power of B\n * @param {integer or double} a - base number\n * @param {integer or double} b - power of\n * @return {object} WOQLQuery\n */\nWOQL.exp = function(a, b){\treturn new WOQLQuery().exp(a, b); }\n\n/**\n * Floor (closest lower integer) \n * @param {integer or double} a \n * @return {object} WOQLQuery\n */\nWOQL.floor = function(a){\treturn new WOQLQuery().floor(a); }\n\n/**\n * Matches if Instance is a member of Class, according to the current state of the DB\n * @param {string} a - classA\n * @param {string} b - classB, optional\n * @return {boolean} WOQLQuery\n */\nWOQL.isa = function(a, b){\treturn new WOQLQuery().isa(a, b);\t}\n\n/**\n * Matches if a is similar to b (with distance dist)\n * @param {string} a - string a \n * @param {string} b - string b\n * @param {float} dist - distance 0-1.0\n * @return {boolean} WOQLQuery\n */\nWOQL.like = function(a, b, dist){\treturn new WOQLQuery().like(a, b, dist);\t}\n\n\n/**\n * Compares the value of v1 against v2 and returns true if v1 is less than v2\n * @param {string} v1 - first variable to compare\n * @param {string} v2 - second variable to compare\n * @return {object} WOQLQuery\n */\nWOQL.less = function(v1, v2){\treturn new WOQLQuery().less(v1, v2); }\n\n/**\n * Compares the value of v1 against v2 and returns true if v1 is greater than v2\n * @param {string} v1 - first variable to compare\n * @param {string} v2 - second variable to compare\n * @return {object} WOQLQuery\n */\nWOQL.greater = function(v1, v2){\treturn new WOQLQuery().greater(v1, v2); }\n\n\n/**\n * The Query in the Optional argument is specified as optional\n * @param {object} query - WOQL Query object\n * @return {object} WOQLQuery\n */\nWOQL.opt = function(query){ return new WOQLQuery().opt(query); }\n\nWOQL.optional = WOQL.opt\n\n/**\n * Generates an ID for a node as a function of the passed VariableList with a specific prefix (URL base). If the values of the passed variables are the same, the output will be the same\n * @param {string} prefix - prefix for the id\n * @param {string} vari - variable to generate id for\n * @param {string} type - the variable to hold the id\n * @return {object} WOQLQuery\n */\nWOQL.unique = function(prefix, vari, type){\treturn new WOQLQuery().unique(prefix, vari, type); }\n\n/**\n * Generates an ID for a node as a function of the passed VariableList with a specific prefix (URL base). If the values of the passed variables are the same, the output will be the same\n * @param {string} prefix - prefix for the id\n * @param {string or array} inputVarList - variable to generate id for\n * @param {string} outputVar - the variable to hold the id\n * @return {object} WOQLQuery\n */\nWOQL.idgen = function(prefix, inputVarList, outputVar){\treturn new WOQLQuery().idgen(prefix, inputVarList, outputVar); }\nWOQL.idgenerator = WOQL.idgen\n\n/**\n * Changes a string to upper-case - input is in l, output in u\n * @param {string} l - input string\n * @param {string} u - uppercase output\n * @return {object} WOQLQuery\n */\nWOQL.upper = function(l, u){\treturn new WOQLQuery().upper(l, u); }\n\n/**\n * Changes a string to lower-case - input is in u, output in l\n * @param {string} u - input string\n * @param {string} l - stores output\n * @return {object} WOQLQuery\n */\nWOQL.lower = function(u, l){\treturn new WOQLQuery().lower(u, l); }\n\n/**\n * Pads out the string input to be exactly len long by appending the pad character pad to form output\n * @param {string} input - input string\n * @param {string} pad - padding character(s)\n * @param {integer} len - length to pad to (the full length of the string with padding)\n * @param {string} output - stores output\n * @return {object} WOQLQuery\n */\nWOQL.pad = function(input, pad, len, output){\treturn new WOQLQuery().pad(input, pad, len, output); }\n\n/**\n * Splits a variable apart (input) into a list of variables (output) by separating the strings together with separator\n * @param {string} input - a string or variable\n * @param {string} separator - character string to separate string into list\n * @param {string} output - variable that stores output list\n * @return {object} WOQLQuery\n */\nWOQL.split = function(input, separator, output){\treturn new WOQLQuery().split(input, separator, output); }\n\n/**\n * Iterates through a list and returns a value for each member\n * @param {string} El - a variable representing an element of the list\n * @param {string} List - A list variable\n * @return {object} WOQLQuery\n */\nWOQL.member = function(El, List){\treturn new WOQLQuery().member(El, List); }\n\n/**\n * Concatenates the list of variables into a string and saves the result in v\n * @param {array} list - list of variables to concatenate\n * @param {string} v - saves the results\n * @return {object} WOQLQuery\n */\nWOQL.concat = function(list, v){\treturn new WOQLQuery().concat(list, v); }\n\n/**\n * Joins a list variable together (input) into a string variable (output) by glueing the strings together with glue\n * @param {array} input - a list of variables\n * @param {string} glue - joining character(s)\n * @param {string} output - variable that stores output\n * @return {object} WOQLQuery\n */\nWOQL.join = function(input, glue, output){\treturn new WOQLQuery().join(input, glue, output); }\n\n\n/**\n * Adds a list of numbers together\n * @param input - input list variable\n * @param output - output numeric\n * @return {object} WOQLQuery\n */\nWOQL.sum = function(input, output){\treturn new WOQLQuery().sum(input, output);}\n\n/**\n * Specifies that the start of the query returned\n * @param {integer} start - index of the frist result got returned\n * @param {object} query - WOQL Query object, optional\n * @return {object} WOQLQuery\n */\nWOQL.start = function(start, query){ return new WOQLQuery().start(start, query); }\n\n\n/**\n * Specifies the number of records returned based on a limit value\n * @param {integer} limit - number of maximum results returned\n * @param {object} query - WOQL Query object, optional\n * @return {object} WOQLQuery\n */\nWOQL.limit = function(limit, query){ return new WOQLQuery().limit(limit, query); }\n\n/**\n * Regular Expression Call\n * @param {string} pattern - regex pattern\n * @param {string} test - string to be matched\n * @param {string or array or object} matches - store list of matches\n * @return {object} WOQLQuery\n *\n * p is a regex pattern (.*) using normal regular expression syntax, the only unusual thing is that special characters have to be escaped twice, s is the string to be matched and m is a list of matches:\n * e.g. WOQL.re(\"(.).*\", \"hello\", [\"v:All\", \"v:Sub\"])\n */\nWOQL.re = function(pattern, test, matches){\treturn new WOQLQuery().re(pattern, test, matches); }\nWOQL.regexp = WOQL.re\n\n/**\n * Calculates the length of the value in va and stores it in vb\n * @param {string} var1 - value to calculate length\n * @param {string} res - stores result\n * @return {object} WOQLQuery\n */\nWOQL.length = function(var1, res){\treturn new WOQLQuery().length(var1, res) }\n\n/**\n * Creates a logical NOT of the arguments\n * @param queries - WOQL Query objects\n * @return {object} WOQLQuery\n */\nWOQL.not = function(query){ return new WOQLQuery().not(query); }\n\n/**\n * Changes the type of va to type and saves the return in vb\n * @param {string} vara - original variable\n * @param {string} type - type to be changed\n * @param {string} varb - save the return variable\n * @return {object} WOQLQuery\n */\nWOQL.typecast = function(vara, type, varb){\treturn new WOQLQuery().typecast(vara, type, varb); }\nWOQL.cast = WOQL.typecast;\n\n/**\n * is used to sort the fetched data in either ascending or descending according to one or more variables\n * use the string asc or desc next to the variable name.\n *\n * examples: \n * WOQL.order_by(\"v:A\", \"v:B asc\", \"v:C asc\").query()\n * WOQL.order_by(\"v:A\", \"v:B asc\", \"v:C asc\", query)\n *\n * @param  {args} ordering - list of variables to order and the query object\n * @return {object} WOQLQuery\n */\nWOQL.order_by = function(...ordering){\treturn new WOQLQuery().order_by(...ordering); }\n\n/**\n * Groups the results of groupquery together by the list of variables gvarlist, using the variable groupedvar as a grouping and saves the result into variable output.\n * @param {array or object} gvarlist - list of variables to group\n * @param {array or string} groupedvar - grouping variable(s)\n * @param {string} output - output variable, optional\n * @param {object} groupquery - WOQLQuery object\n * @return {object} WOQLQuery\n */\nWOQL.group_by = function(gvarlist, groupedvar, output, groupquery){\treturn new WOQLQuery().group_by(gvarlist, groupedvar, output, groupquery); }\n\n\nWOQL.true = function(){\treturn new WOQLQuery().true() }\n\n/**\n * Path Regular Expression\n */\nWOQL.path = function(Subject, Pattern, Object, Path){\treturn new WOQLQuery().path(Subject, Pattern, Object, Path) }\n\n/**\n * Returns the size of the passed graph filter \n */\nWOQL.size = function(Graph, Size){ return new WOQLQuery().size(Graph, Size) }\n\n/**\n * Returns the count of triples in the passed graph filter\n */\nWOQL.triple_count = function(Graph, TripleCount){ return new WOQLQuery().triple_count(Graph, TripleCount) }\n\n\n\n/**\n * By default selects everything as triples (\"v:Subject\", \"v:Predicate\", \"v:Object\") in the graph identified by GraphIRI or in all the current terminusDB's graph\n *\n * example WOQL.star(\"schema/main\") will give all triples in the main schema graph\n *\n * @param {string} graphRef \t- optional target graph \tfalse is the default value and get all the database's graphs, possible value are  | false | schema/{main - myschema - *} | instance/{main - myschema - *}  | inference/{main - myschema - *} \n * @param {string} Subj \t\t- optional target subject   default value \"v:Subject\"\n * @param {string} Pred \t\t- optional target predicate default value \"v:Predicate\"\n * @param {string} Obj \t\t\t- optional target object    default value \"v:Object\"\n * @return {object} WOQLQuery\n */\nWOQL.star = function(graphRef, Subj, Pred, Obj){\treturn new WOQLQuery().star(graphRef, Subj, Pred, Obj) }\n\n/**\n * Selects nodes with the ID NodeID as the subject of subsequent sub-queries. The second argument PatternType specifies what type of sub-queries are being constructed, options are: triple, quad, update_triple, update_quad, delete_triple, delete_quad\n * @param {string} nodeid - node to be selected\n * @param {string} type - pattern type, optional (default is triple)\n * @return {object} WOQLQuery\n */\nWOQL.node = function(nodeid, type){\treturn new WOQLQuery().node(nodeid, type); }\n//These ones are special ones for dealing with the schema only...\n\n/**\n * Insert a node with a specific type in a graph // statement is used to insert new records in a table.\n * document type \n * @param {string} Node \t\t- node to be insert\n * @param {string} Type \t\t- type of the node (class/document name)\n * @param {string} graphRef \t- optional target graph if not setted it get all the database's graphs, possible value are  | schema/{main - myschema - *} | instance/{main - myschema - *}  | inference/{main - myschema - *} \n * @return {object} WOQLQuery\n */\nWOQL.insert = function(Node, Type, graphRef){ return new WOQLQuery().insert(Node, Type, graphRef) };\n\n\nWOQL.schema = function(G){ return new WOQLSchema(G) }\n\n/**\n * Generates a new Class with the given ClassID and writes it to the DB schema\n * @param {string} classid - class to be added\n * @param {string} graph - target graph\n * @return {object} WOQLQuery\n */\nWOQL.add_class = function(classid, graph){\treturn new WOQLSchema().add_class(classid, graph); }\n\n/**\n * Generates a new Property with the given PropertyID and a range of type and writes it to the DB schema\n * @param {string} propid - property id to be added\n * @param {string} type - type of the proerty\n * @param {string} graph - target graph, optional\n * @return {object} WOQLQuery\n */\nWOQL.add_property = function(propid, type, graph){\treturn new WOQLSchema().add_property(propid, type, graph); }\n\n/**\n * Deletes the Class with the passed ID form the schema (and all references to it)\n * @param {string} classid - class to be added\n * @param {string} graph - target graph\n * @return {object} WOQLQuery\n */\nWOQL.delete_class = function(classid, graph){\treturn new WOQLSchema().delete_class(classid, graph) }\n\n/**\n * Deletes the property with the passed ID from the schema (and all references to it)\n * @param {string} propid - property id to be added\n * @param {string} graph - target graph, optional\n * @return {object} WOQLQuery\n */\nWOQL.delete_property = function(propid, graph){\treturn new WOQLSchema().delete_property(propid, graph) }\n\n\n/**\n * Creates a new document class in the schema - equivalent to: add_quad(type, \"rdf:type\", \"owl:Class\", graph), add_quad(type, subclassof, tcs:Document, graph)\n * @param {string} Type - type of the document \n * @param {string} Graph - target graph, optional\n * @return {object} WOQLQuery\n */\nWOQL.doctype = function(Type, Graph){return WOQL.add_class(Type, Graph).parent(\"Document\") }\n\n/**\n * Composite functions which allow json objects to be sent in to specify many parts in one go\n */\n\n /**\n  * @param {object} data - json object which contains fields: \n  * mandatory: id, type\n  * optional: label, description, [property] (valid property ids)\n  * @param {string} refGraph - Graph Identifier\n  */\nWOQL.insert_data = function(data, refGraph){ return new WOQLQuery().insert_data(data, refGraph)}\n\n/**\n * @param {object} data - json object which contains fields: \n * mandatory: id\n * optional: label, description, parent, [property] (valid property ids)\n * @param {string} refGraph - Graph Identifier\n */\nWOQL.insert_class_data = function(data, refGraph){ return new WOQLSchema().insert_class_data(data, refGraph)}\n\n/**\n  * @param {object} data - json object which contains fields: \n  * mandatory: id\n  * optional: label, description, parent, [property] (valid property ids)\n  * @param {string} refGraph - Graph Identifier\n  */\nWOQL.doctype_data = function(data, refGraph){ return new WOQLSchema().doctype_data(data, refGraph)}\n\n/**\n * @param {object} data - json object which contains fields:\n * mandatory: id, range, domain\n * optional: label, description, min, max, cardinality\n */\nWOQL.insert_property_data = function(data, refGraph){ return new WOQLSchema().insert_property_data(data, refGraph)}\n\n/**\n * Creates a new Empty Query object\n * @return {object} WOQLQuery\n */\nWOQL.query = function(){ return new WOQLQuery() }\n\n//loads query from json\n\n/**\n * Generates a WOQLQuery object from the passed WOQL JSON\n * @param {object} json - JSON-LD object, optional\n * @return {object} WOQLQuery\n *\n * json version of query for passing to api\n */\nWOQL.json = function(json){\treturn new WOQLQuery().json(json); }\n\nWOQL.lib = function(){return new new WOQLQuery().lib()}\n\n/**\n * Sets a number of context constants that are useful shortands within woql to represent current client context\n */\nWOQL.setContextFromClient = function(client){\n    this.DB = client.resource(\"db\")\n    this.META = client.resource(\"meta\")\n    this.COMMITS = client.resource(\"commits\")\n    this.REPO = client.resource(\"repo\")\n    this.BRANCH = client.resource(\"branch\")\n    this.REF = client.resource(\"ref\")\n    this.HEAD = this.REF || this.BRANCH \n}\n\nmodule.exports = WOQL;\n","/**\n * Class responsible for converting a JSON WOQL into a WOQL.js / WOQL.py string\n */\nfunction WOQLPrinter(vocab, language){\n\tthis.vocab = vocab\n\tthis.language = language\n\tthis.indent_spaces = 4\n\tthis.boxed_predicates = [\"woql:datatype\", \"woql:variable\", \"woql:array_element\",  \"woql:variable_list_element\", \"woql:node\", \"woql:arithmetic_value\", \"woql:variable_name\"]\n\tthis.subject_cleaned_predicates = [\"woql:subject\", \"woql:element\"]\n\tthis.schema_cleaned_predicates = [\"woql:predicate\", \"woql:parent\", \"woql:child\", \"woql:uri\", 'woql:of_type']\n\tthis.list_operators = [\"ValueList\", \"Array\", \"NamedAsVar\", \"IndexedAsVar\", \"AsVar\"]\n\tthis.query_list_operators = [\"And\", \"Or\"]\n\tthis.operator_maps = {\n\t\tIDGenerator: \"idgen\",\n\t\tIsA: \"isa\",\n\t\tPostResource:  \"post\",\n\t\tFileResource: \"file\", \n\t\tRemoteResource: \"remote\",\n\t\tAsVars: \"as\",\n\t\tNamedAsVars: \"as\",\n\t\tIndexedAsVars: \"as\"\n\t}\n\tthis.shortcuts = {\t\n\t\toptional : \"opt\",\n\t\tsubstring: \"substr\",\n\t\tregexp: \"re\",\n\t\tsubsumption: \"sub\", \n\t\tequals: \"eq\",\n\t\tconcatenate: \"concat\"\n\t}\n\tthis.pythonic = {\n\t\tand: \"woql_and\",\n\t\tor: \"woql_or\",\n\t\tas: \"woql_as\",\n\t\twith: \"woql_with\",\n\t\tfrom: \"woql_from\",\n\t\tnot: \"woql_not\"\n\t}\n\tthis.show_context = false\n}\n\nWOQLPrinter.prototype.printJSON = function(json, level, fluent, newline){\n\tlevel = level || 0\n\tfluent = fluent || false\n\tvar str = \"\"\n\tif(!json[\"@type\"]){\n\t\tconsole.log(\"Bad structure passed to print json, no type: \", json)\n\t\treturn \"\";\n\t}\n\tif(json['@type'] == \"woql:Variable\" || json['@type'] == \"woql:VariableListElement\"){\n\t\treturn this.pvar(json)\n\t}\n\telse if(typeof json['@value'] != \"undefined\"){\n\t\treturn this.plit(json)\n\t}\n    var operator = json[\"@type\"].split(\":\")[1]\n\tif(operator){\n\t\tvar ujson = this.unboxJSON(operator, json)\n\t\tif(ujson){\n            let meat = this.printArgument(operator, this.getBoxedPredicate(operator, json), ujson, level, fluent)\n            if(this.isListOperator(operator)) return \"[\" + meat + \"]\"\n            return meat\n        }\n        if(this.isListOperator(operator)){\n\t\t\tstr += \"[\"\n\t\t}\n\t\telse {\n\t\t\tlet call = this.getFunctionForOperator(operator)\n\t\t\tlet indent = (newline ? level * this.indent_spaces : 0)\n\t\t\tstr += this.getWOQLPrelude(call, fluent, indent) + \"(\"\n\t\t}\n\t\t//below needs to be changed to have a specific ordering\n\t\tlet args = this.getArgumentOrder(operator, json)\n\t\tfor(var i = 0; i<args.length; i++){\n\t\t\tlet nfluent = ((args[i] == \"woql:query\" && operator != \"When\") || args[i] == \"woql:consequent\") ? true : false;\n\t\t\tstr += this.printArgument(operator, args[i], json[args[i]], level, nfluent)\n\t\t\tlet divlimit = args.indexOf(\"woql:query\") == -1 ? args.length-1 : args.length - 2\n\t\t\tif(i < divlimit) str += \", \"\n\t\t}\n\t\tif(this.isListOperator(operator)) str += \"]\"\n\t\telse {\n\t\t\tif(this.argumentTakesNewline(operator)) str += \"\\n\" + nspaces(level*this.indent_spaces)\n\t\t\tif(!fluent) str += \")\"\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"wrong structure passed to print json \", json)\n\t}\n\treturn str\n}\n\nWOQLPrinter.prototype.getArgumentOrder = function(operator, json){\n\tlet args = Object.keys(json);\n\targs.splice(args.indexOf(\"@type\"), 1)\n\treturn args;\n}\n\nWOQLPrinter.prototype.argumentTakesNewline = function(operator){\n\treturn (this.isQueryListOperator(operator))\t\n}\n\nWOQLPrinter.prototype.argumentRequiresArray = function(predicate, entries){\n    if((predicate == \"woql:group_by\" || predicate == \"woql:group_template\") && entries.length > 1) return true\n    return false\n}\n\n\nWOQLPrinter.prototype.printArgument = function(operator, predicate, arg, level, fluent){\n\tlet str = \"\";\n\tif(fluent) str += \")\"\n\tlet newline = this.argumentTakesNewline(operator)\n\tif(newline) str += \"\\n\" + nspaces((level+1) * this.indent_spaces)\n\tif(arg[\"@type\"] == \"woql:True\") return \"true\"\n\tif(predicate == \"woql:document\") return JSON.stringify(arg)\n\tif(predicate == \"woql:path_pattern\") return '\"' +  this.decompilePathPattern(arg) + '\"'\n\tif(predicate == \"woql:concat_list\") return this.decompileConcatList(arg)\n    if(predicate == \"woql:as_vars\") return this.decompileAsVars(arg, level+1)\n    if(Array.isArray(arg)){\n        let arr_entries = [];\n\t\tfor(var j = 0; j<arg.length; j++){\n            let nlevel = (newline ? level +1 : level)\n\t\t\tarr_entries.push(this.printJSON(arg[j], nlevel, fluent, newline) )\n\t\t}\n        let jstr = (newline ? \",\\n\" + nspaces(++level*this.indent_spaces) : \",\")\n        if(this.argumentRequiresArray(predicate, arr_entries)){\n            str += \"[\" + arr_entries.join(jstr) + \"]\"\n        }\n\t\telse str += arr_entries.join(jstr)\n\t}\t\n\telse if(typeof arg == \"object\"){\n        let reet = this.printJSON(arg, level, fluent)\n        //if(newline) str += \"\\n\" + nspaces(level*this.indent_spaces)\n        \n        str += reet \n\t}\n\telse if(typeof arg == \"string\"){\n\t\tstr += this.uncleanArgument(arg, operator, predicate)\n\t}\n\treturn str\n}\n\nWOQLPrinter.prototype.plit = function(json){\n\tif(json[\"@type\"] == \"xsd:string\"  || json[\"@type\"] ==\"xsd:anyURI\" || json['@language']) {\n\t\tlet cnt = json[\"@value\"]\n\t\tif(/\\r|\\n/.exec(cnt)) return '`' + cnt + '`'\n\t\treturn '\"' + cnt + '\"'\n\t}\n\tif(json[\"@type\"] == \"xsd:decimal\" || json[\"@type\"] == \"xsd:boolean\" || \n\tjson[\"@type\"] == \"xsd:integer\" ||  json[\"@type\"] == \"xsd:nonNegativeInteger\") return json[\"@value\"]\n\treturn JSON.stringify(json)\n}\n\nWOQLPrinter.prototype.pvar = function(json){\n\tif(json['woql:variable_name'] && typeof json['woql:variable_name']['@value'] != \"undefined\"){\n\t\tlet varname = json['woql:variable_name']['@value'];\n\t\tif(varname.indexOf(\":\") == -1){\n\t\t\tvarname = \"v:\" + varname\n\t\t}\n\t\treturn '\"' +  varname + '\"'\n\t}\n\treturn false\n}\n\n/**\n * Gets the starting characters for a WOQL query - varies depending on how the query is invoked and how indented it is\n */\nWOQLPrinter.prototype.getWOQLPrelude = function(operator, fluent, inline){\n\tif(operator === \"true\" || operator === \"false\"){\n\t\tif(this.language == \"python\"){\n\t\t\treturn operator.charAt(0).toUpperCase() + operator.slice(1);\n\t\t}\n\t\treturn operator\n\n\t}\n\tlet prelude = \"WOQL.\"\n\tif(this.language == \"python\"){\n\t\tthis.pythonic[operator] && (operator = this.pythonic[operator])\n\t\tprelude = \"WOQLQuery().\"\n\t}\n\tif(fluent){\n\t\treturn \".\" + operator;\n\t}\n\treturn (inline ? \"\\n\" + nspaces(inline) : \"\") + prelude + operator;\n}\n\nWOQLPrinter.prototype.uncleanArgument = function(arg, operator, predicate){\n\tif(arg.indexOf(\":\") != -1){\n\t\t//is it a short cut? \n\t\tfor(var s in this.vocab){\n\t\t\tif(this.vocab[s] == arg) return '\"' +  s + '\"'\n\t\t}\n\t\t//is there a default reverse mapping\n\t\tif(this.subject_cleaned_predicates.indexOf(predicate) != -1){\n\t\t\tif(arg.substring(0,4) == \"doc:\") arg = arg.substring(4)\n\t\t}\n\t\tif(this.schema_cleaned_predicates.indexOf(predicate) != -1){\n\t\t\tif(arg.substring(0,4) == \"scm:\") arg = arg.substring(4)\n\t\t}\n\t}\n\treturn '\"' + arg + '\"'\n}\n\n\nWOQLPrinter.prototype.isListOperator = function(operator){\n\treturn (this.list_operators.indexOf(operator) != -1)\n}\n\nWOQLPrinter.prototype.isQueryListOperator = function(operator){\n\treturn (this.query_list_operators.indexOf(operator) != -1)\n}\n\n\nWOQLPrinter.prototype.getFunctionForOperator = function(operator){\n\tif(this.operator_maps[operator]) return this.operator_maps[operator]\n\telse {\n\t\tlet f = camelToSnake(operator);\n\t\tif(this.shortcuts[f]) return this.shortcuts[f]\n\t\treturn f\n\t}\n}\n\n\nWOQLPrinter.prototype.getBoxedPredicate = function(operator, json){\n\tfor(var i = 0; i<this.boxed_predicates.length; i++){\n\t\tif(json[this.boxed_predicates[i]]){\n\t\t\treturn this.boxed_predicates[i];\n\t\t}\n\t}\n\tif(operator == \"QueryListElement\"){\n\t\treturn \"woql:query\"\n\t}\n\treturn false\n}\n\nWOQLPrinter.prototype.unboxJSON = function(operator, json){\n\tlet bp = this.getBoxedPredicate(operator, json)\n\tif(bp){\n\t\treturn json[bp]\n\t}\n\treturn false\n}\n\nWOQLPrinter.prototype.decompileAsVars = function(asvs, level){\n\tlet str = \"\"\n\tfor(var i = 0; i< asvs.length; i++){\n\t\tlet wasv = asvs[i]\n\t\tstr += \"\\n\" + nspaces(level*this.indent_spaces) + (i == 0 ? \"WOQL\" : \"\")\n\t\tif(wasv['@type'] == \"woql:NamedAsVar\"){\n\t\t\tstr +='.as(\"' + wasv['woql:identifier'][\"@value\"] + '\", \"' + wasv['woql:variable_name'][\"@value\"] + '\")'\t\t\t\n\t\t}\n\t\telse if(wasv['@type'] == \"woql:IndexedAsVar\"){\n\t\t\tstr +='.as(\"' + wasv['woql:index'][\"@value\"] + '\", \"' + wasv['woql:variable_name'][\"@value\"] + '\")'\t\t\t\n\t\t}\n\t}\n\treturn str\n}\n\n\nWOQLPrinter.prototype.decompileConcatList = function(pstruct){\n\t//we can squish all the components together into a string \n\t//UNLESS there is a variable followed by a string starting with an alphanum or _\n\tlet parts = pstruct[\"woql:array_element\"]\n\tlet bits = []\n\tcan_concat = true\n\tfor(var i = 0; i<parts.length; i++){\n\t\tlet el = parts[i]\n\t\tif(el['woql:datatype']){\n\t\t\tbits.push(el['woql:datatype']['@value'])\n\t\t}\n\t\telse if(el['woql:variable_name']){\n\t\t\tbits.push(\"v:\" + el['woql:variable_name']['@value'])\n\t\t\tif(can_concat && i < (parts.length -1)){\n\t\t\t\tlet nextel = parts[i+1]\n\t\t\t\tif(nextel['woql:datatype']){\n\t\t\t\t\tlet nstr = nextel['woql:datatype'][\"@value\"]\n\t\t\t\t\tif(/^[\\w_]/.test(nstr)){\n\t\t\t\t\t\tcan_concat = false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(can_concat) return '\"' + bits.join(\"\") + '\"'\n\telse return '[\"' + bits.join('\",\"') + '\"]' \n}\n\n\nWOQLPrinter.prototype.decompilePathPattern = function(pstruct){\n\tlet t = pstruct['@type']\n\tswitch(t) {\n\t\tcase \"woql:PathPredicate\" : \n\t\t\treturn pstruct['woql:path_predicate'][\"@id\"]\n\t\tcase \"woql:PathPlus\" : \n\t\t\tvar next = pstruct['woql:path_pattern']\n\t\t\tif(Array.isArray(next)) next = next[0]\n\t\t\tif(needsParentheses(next)) return \"(\" + this.decompilePathPattern(next) + \")+\"\n\t\t\telse return this.decompilePathPattern(next) + \"+\"\n\t\tcase \"woql:PathTimes\" : \n\t\t\tvar next = pstruct['woql:path_pattern']\n\t\t\tvar astr = \"{\" + pstruct['woql:path_minimum']['@value'] + \",\" + pstruct['woql:path_maximum']['@value'] + \"}\"\n\t\t\tif(Array.isArray(next)) next = next[0]\n\t\t\tif(needsParentheses(next)) return \"(\" + this.decompilePathPattern(next) + \")\" + astr\n\t\t\telse return this.decompilePathPattern(next) + astr\n\t\tcase \"woql:PathSequence\" : \n\t\t\tvar next1 = pstruct['woql:path_first']\n\t\t\tvar next2 = pstruct['woql:path_second']\n\t\t\tif(Array.isArray(next1)) next1 = next1[0]\n\t\t\tvar seqstr = \"\"\n\t\t\tif(needsParentheses(next1)) seqstr += \"(\" \n\t\t\tseqstr += this.decompilePathPattern(next1) \n\t\t\tif(needsParentheses(next1)) seqstr += \")\"\n\t\t\tseqstr += \",\" \n\t\t\tif(needsParentheses(next2)) seqstr += \"(\" \n\t\t\tseqstr += this.decompilePathPattern(next2) \n\t\t\tif(needsParentheses(next2)) seqstr += \")\"\n\t\t\treturn seqstr\n\t\tcase \"woql:PathOr\" : \n\t\t\tvar next1 = pstruct['woql:path_left']\n\t\t\tvar next2 = pstruct['woql:path_right']\n\t\t\tif(Array.isArray(next1)) next1 = next1[0]\n\t\t\tvar seqstr = \"\"\n\t\t\tif(needsParentheses(next1)) seqstr += \"(\" \n\t\t\tseqstr += this.decompilePathPattern(next1) \n\t\t\tif(needsParentheses(next1)) seqstr += \")\"\n\t\t\tseqstr += \"|\" \n\t\t\tif(needsParentheses(next2)) seqstr += \"(\" \n\t\t\tseqstr += this.decompilePathPattern(next2) \n\t\t\tif(needsParentheses(next2)) seqstr += \")\"\n\t\treturn seqstr\n\t}\n\treturn \"error\"\n}\n\n\nfunction needsParentheses(obj) {\n\tnoparens = [\"woql:PathPredicate\", \"woql:PathPlus\", \"woql:PathTimes\"]\n\tif(noparens.indexOf(obj[\"@type\"]) != -1) return false\n\treturn true\n}\n\n\nfunction camelToSnake(string) {\n\treturn string.replace(/[\\w]([A-Z])/g, function(m) {\n\t\treturn m[0] + \"_\" + m[1];\n\t}).toLowerCase();\n}\n\nfunction nspaces(n){\n\tlet spaces = \"\";\n\tfor(var i = 0; i<n; i++){\n\t\tspaces += \" \";\n\t}\n\treturn spaces;\n}\n\n\nmodule.exports = WOQLPrinter;","const WOQLQuery = require('./woqlCore');\nconst UTILS = require(\"../utils\")\n/**\n * The WOQL Schema Class provides pre-built WOQL queries for schema manipulation\n * a) adding and deleting classes and properties\n * b) loading datatype libraries\n * c) boxing classes\n */\nfunction WOQLSchema(g){\n\tthis.graph = g || \"schema/main\"\n}\n\n\n/**\n * Add a class (id c) to the schema\n * \n * @param {string} c - class ID\n * @param {string} [graph] - schema graph identifier\n * @returns WOQLQuery object\n */\nWOQLSchema.prototype.add_class = function(c, graph){\n\tgraph = graph || this.graph\n\tlet ap = new WOQLQuery()\n\tif(c){\n\t\tc = ap.cleanClass(c, true)\n\t\tap.adding_class = c\n\t\tap.add_quad(c,\"rdf:type\",\"owl:Class\",graph)\n\t}\n\treturn ap\n}\n\n/**\n * Adds a bunch of class data in one go\n * @param {data} json with id, label, description, parent and properties\n */\n\nWOQLSchema.prototype.insert_class_data = function(data, refGraph){\n    let ap = new WOQLQuery()\n\tif(data.id){\n        c = ap.cleanClass(data.id, true)\n\t\tap = new WOQLSchema().add_class(c, refGraph)\n        if(data.label){\n            ap.label(data.label)\n        }\n        if(data.description){\n            ap.description(data.description)\n        }\n        if(data.parent){\n            if(!Array.isArray(data.parent)) data.parent = [data.parent]\n            ap.parent(...data.parent)\n        }\n        for(var k in data){\n            if([\"id\", \"label\", \"description\", \"parent\"].indexOf(k) == -1){\n                ap.insert_property_data(k, data[k], refGraph)\n            }\n        }\n    }\n    return ap\n}\n\nWOQLSchema.prototype.doctype_data = function(data, refGraph){\n    if(!data.parent) data.parent = []\n    if(!Array.isArray(data.parent)) data.parent = [data.parent]\n    data.parent.push(\"Document\")\n    return this.insert_class_data(data, refGraph)\n}\n\nWOQLSchema.prototype.insert_property_data = function(data, graph){\n    let ap = new WOQLQuery()\n\tif(data.id){\n        c = ap.cleanClass(data.id, true)\n\t\tap.add_class(c, refGraph)\n        if(data.label){\n            ap.label(data.label)\n        }\n        if(data.description){\n            ap.description(data.description)\n        }\n        if(data.parent){\n            if(!Array.isArray(data.parent)) data.parent = [data.parent]\n            ap.parent(...data.parent)\n        }\n        for(var k in data){\n            if([\"id\", \"label\", \"description\", \"parent\"].indexOf(k) == -1){\n                ap.insert_property_data(k, data[k], refGraph)\n            }\n        }\n    }\n    return ap\n}\n\n/**\n * Add a property to the schema\n * \n * @param {string} p - property ID\n * @param {string} t - property type (range)\n * @param {string} [graph] - graph identifier\n * @returns WOQLQuery object\n */\nWOQLSchema.prototype.add_property = function(p, t, graph){\n\tlet ap = new WOQLQuery()\n\tt = (t ? ap.cleanType(t, true) : \"xsd:string\")\n\tgraph = graph || this.graph\n\tif(p){\n\t\tp = ap.cleanPathPredicate(p)\n\t\tif(UTILS.TypeHelper.isDatatype(t)) {\n\t\t    ap.and(\n\t\t\t\tnew WOQLQuery().add_quad(p, \"rdf:type\", \"owl:DatatypeProperty\", graph),\n\t\t\t\tnew WOQLQuery().add_quad(p, \"rdfs:range\", t, graph)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tap.and(\n\t\t\t\tnew WOQLQuery().add_quad(p, \"rdf:type\", \"owl:ObjectProperty\", graph),\n\t\t\t\tnew WOQLQuery().add_quad(p, \"rdfs:range\", t, graph)\n\t\t\t)\n\t\t}\n\t\tap.updated()\n\t}\n\treturn ap\n}\n\nWOQLSchema.prototype.insert_property_data = function(data, graph){\n    let ap = new WOQLQuery()\n\tif(data.id){\n\t\tp = ap.cleanPathPredicate(data.id)\n        t = (data.range ? ap.cleanType(data.range, true) : \"xsd:string\")\n        ap.add_property(p, t, graph)\n        if(data.label){\n            ap.label(data.label)\n        }\n        if(data.description){\n            ap.description(data.description)\n        }\n        if(data.domain){\n            ap.domain(data.domain)\n        }\n        if(data.max) ap.max(data.max)\n        if(data.min) ap.min(data.min)\n        if(data.cardinality) ap.cardinality(data.cardinality)\n    }\n    return ap\n}\n\n/**\n * Deletes a class from the schema\n * \n * @param {string} c - class ID\n * @param {string} [graph] - schema graph identifier\n * @returns WOQLQuery object\n */\nWOQLSchema.prototype.delete_class = function(c, graph){\n\tgraph = graph || this.graph\n\tlet ap = new WOQLQuery()\n\tif(c){\n\t\tc = ap.cleanClass(c, true)\n\t\tap.and(\n\t\t\tnew WOQLQuery().delete_quad(c, \"v:Outgoing\", \"v:Value\", graph),\n\t\t\tnew WOQLQuery().opt().delete_quad(\"v:Other\", \"v:Incoming\", c, graph)\n\t\t);\n\t\tap.updated()\n\t}\n\treturn ap\n}\n\n/**\n * Removes a property from the schema\n * \n * @param {string} p - property ID\n * @param {string} t - property type (range)\n * @param {string} [graph] - schema graph identifier\n * @returns WOQLQuery object\n */\nWOQLSchema.prototype.delete_property = function(p, graph){\n\tgraph = graph || this.graph\n\tlet ap = new WOQLQuery()\n\tif(p){\n\t\tp = ap.cleanPathPredicate(p)\n\t\tap.and(\n\t\t\tnew WOQLQuery().delete_quad(p, \"v:All\", \"v:Al2\", graph),\n\t\t\tnew WOQLQuery().delete_quad(\"v:Al3\", \"v:Al4\", p, graph)\n\t\t)\n\t\tap.updated()\n\t}\n\treturn ap\n}\n\n\n/**\n * Creates classes to 'box' all classes of a certain type\n * Assumes that classes have the first character capitaised:\n *  e.g. MyClass\n * generates a box around it called Scoped[ClassName]\n * e.g. ScopedMyClass\n * And a property that links them called className (i.e. with lowercase start)\n * e.g. myClass\n * \n * creating a structure ScopedMyClass -> myClass -> MyClass\n * \n * @param {string} prefix - the url prefix that will be used for the boxed types (default scm:)\n * @param {Array} classes - the classes to box - these classes and all their subclasses will have special boxed classes created around them\n * @param {Array} except - the exceptions - these classes and their subclasses will not be boxed, even if they are included in the above array\n * @param {string} graph - the identifier of the graph in which the classes to be boxed live\n * \n */\nWOQLSchema.prototype.boxClasses = function(prefix, classes, except, graph){\t\n\tgraph = graph || this.graph\n\tprefix = prefix || \"scm:\"\n\tvar subs = []\n\tfor(var i = 0; i<classes.length; i++){\n\t\tsubs.push(new WOQLQuery().sub(classes[i], \"v:Cid\"));\n\t}\n\tvar nsubs = [];\n\tfor(var i = 0; i<except.length; i++){\n\t\tnsubs.push(new WOQLQuery().not().sub(except[i], \"v:Cid\"));\n\t}\n\t//property punning\n\t//generate a property id that is the same as the classname but starting with a lowercase letter\n\tlet idgens = [\n\t\tnew WOQLQuery().re(\"#(.)(.*)\", \"v:Cid\", [\"v:AllB\", \"v:FirstB\", \"v:RestB\"]),\n        new WOQLQuery().lower(\"v:FirstB\", \"v:Lower\"),\n        new WOQLQuery().concat([\"v:Lower\", \"v:RestB\"], \"v:Propname\"),\n        new WOQLQuery().concat([\"Scoped\", \"v:FirstB\", \"v:RestB\"], \"v:Cname\"),\n        new WOQLQuery().idgen(prefix, [\"v:Cname\"], \"v:ClassID\"),\n        new WOQLQuery().idgen(prefix, [\"v:Propname\"], \"v:PropID\")\n\t];\n    const filter = new WOQLQuery().and(\n\t\tnew WOQLQuery().quad(\"v:Cid\", \"rdf:type\", \"owl:Class\", graph),\n\t\tnew WOQLQuery().not().node(\"v:Cid\").abstract(graph),\n\t\tnew WOQLQuery().and(...idgens),\n\t\tnew WOQLQuery().quad(\"v:Cid\", \"label\", \"v:Label\", graph),\n\t\tnew WOQLQuery().concat(\"Box Class generated for class v:Cid\", \"v:CDesc\", graph),\n\t\tnew WOQLQuery().concat(\"Box Property generated to link box v:ClassID to class v:Cid\", \"v:PDesc\", graph),\n\t)\n\tif(subs.length){\n\t\tif(subs.length == 1) filter.and(subs[0])\n\t\telse filter.and(new WOQLQuery().or(...subs))\n\t}\n\tif(nsubs.length){\n\t\tfilter.and(new WOQLQuery().and(...nsubs))\n\t}\n\tlet cls = new WOQLSchema(graph).add_class(\"v:ClassID\").label(\"v:Label\").description(\"v:CDesc\")\n\tlet prop = new WOQLSchema(graph).add_property(\"v:PropID\", \"v:Cid\").label(\"v:Label\").description(\"v:PDesc\").domain(\"v:ClassID\")\n    let nq = new WOQLQuery().when(filter).and(cls, prop)\n\treturn nq.updated()\n}\n\n/**\n * Generates a class representing a choice list - an enumerated list of specific options \n * @param {string} cls - the id of the choice list class\n * @param {string} clslabel - the name of the class\n * @param {string} [clsdesc] - description of the class\n * @param {Array} choices - an array of choices, with each entry being an array [\"choiceid\", \"choice label\", \"choice description\"]\n * @param {string} graph - the id of the graph that the choice list will be written to\n * @param {string} parent - the id of a class that this class inherits from (e.g. scm:Enumerated)\n */\nWOQLSchema.prototype.generateChoiceList = function(cls, clslabel, clsdesc, choices, graph, parent){\n\tgraph = graph || this.graph\n\tvar clist = [];\n    var listid = \"_:\" + (cls.indexOf(\":\") == -1 ? cls : cls.split(\":\")[1])\n\tvar lastid = listid;\n\tlet wq = new WOQLSchema().add_class(cls, graph).label(clslabel)\n\tif(clsdesc) wq.description(clsdesc)\n\tif(parent) wq.parent(parent)\n\tvar confs = [wq]; \n    for(var i = 0; i<choices.length; i++){\n\t\tif(!choices[i]) continue;\n\t\tif(Array.isArray(choices[i])){\n\t\t\tvar chid = choices[i][0]\n\t\t\tvar clab = choices[i][1]\n\t\t\tvar desc = choices[i][2] || false\n\t\t}\n\t\telse {\n\t\t\talert(\"b\")\n\t\t\tvar chid = choices[i]\n\t\t\tvar clab = UTILS.labelFromURL(chid)\n\t\t\tvar desc = false\n\t\t}\n\t\tlet cq = new WOQLQuery().insert(chid, cls, graph).label(clab)\n\t\tif(desc) cq.description(desc)\n\t\tconfs.push(cq)\n        var nextid = (i < (choices.length -1) ? listid + \"_\" + i : \"rdf:nil\");\n        clist.push( new WOQLQuery().add_quad(lastid, \"rdf:first\", chid, graph))\n        clist.push( new WOQLQuery().add_quad(lastid, \"rdf:rest\", nextid, graph));\n        lastid = nextid;\n\t}\n    //do the owl oneof\n    let oneof = new WOQLQuery().and(\n        new WOQLQuery().add_quad(cls, \"owl:oneOf\", listid, graph),\n        ...clist\n    )\n    return new WOQLQuery().and(...confs, oneof);\n}\n\n/**\n * Called to load Terminus Predefined libraries: \n * options are: xdd: extended datatypes, box: boxed datatypes\n */\nWOQLSchema.prototype.libs = function(libs, parent, graph, prefix){\n\tvar bits = [];\n\tif(libs.indexOf(\"xdd\") != -1){\n\t\tbits.push(this.loadXDD(graph));\n\t\tif(libs.indexOf(\"box\") != -1) {\n\t\t\tbits.push(this.loadXDDBoxes(parent, graph, prefix));\n\t\t\tbits.push(this.loadXSDBoxes(parent, graph, prefix));\n\t\t}\n\t}\n\telse if(libs.indexOf(\"box\") != -1){\n\t\tbits.push(this.loadXSDBoxes(parent, graph, prefix));\n\t}\n\tif(bits.length > 1) return new WOQLQuery().and(...bits);\n\treturn bits[0];\n}\n\n/**\n * Adds the xdd datataypes to the graph\n */\nWOQLSchema.prototype.loadXDD = function(graph){\n\tgraph = graph || this.graph\n\treturn new WOQLQuery().and(\n\t\t//geograhpic datatypes\n\t\tthis.addDatatype(\"xdd:coordinate\", \"Coordinate\", \n\t\t\t\"A latitude / longitude pair making up a coordinate, encoded as: [lat,long]\", graph),\n\t\tthis.addDatatype(\"xdd:coordinatePolygon\", \"Coordinate Polygon\", \n\t\t\t\"A JSON list of [[lat,long]] coordinates forming a closed polygon.\", graph),\n\t\tthis.addDatatype(\"xdd:coordinatePolyline\", \"Coordinate Polyline\", \n\t\t\t\"A JSON list of [[lat,long]] coordinates.\", graph),\n\t\t\n\t\t//uncertainty range datatypes\n\t\tthis.addDatatype(\"xdd:dateRange\", \"Date Range\", \n\t\t\t\"A date (YYYY-MM-DD) or an uncertain date range [YYYY-MM-DD1,YYYY-MM-DD2]. \" +\n\t\t\t\"Enables uncertainty to be encoded directly in the data\", graph),\n\t\tthis.addDatatype(\"xdd:decimalRange\", \"Decimal Range\", \n\t\t\t\"Either a decimal value (e.g. 23.34) or an uncertain range of decimal values \" +\n\t\t\t\"(e.g.[23.4, 4.143]. Enables uncertainty to be encoded directly in the data\", graph),\n\t\tthis.addDatatype(\"xdd:integerRange\", \"Integer Range\", \n\t\t\t\"Either an integer (e.g. 30) or an uncertain range of integers [28,30]. \" +\n\t\t\t\"Enables uncertainty to be encoded directly in the data\", graph),\n\t\tthis.addDatatype(\"xdd:gYearRange\", \"Year Range\", \n\t\t\t\"A year (e.g. 1999) or an uncertain range of years: (e.g. [1999,2001]).\"\n\t\t\t+ \"Enables uncertainty to be encoded directly in the data\", graph),\n\t\n\t\t//string refinement datatypes\n\t\tthis.addDatatype(\"xdd:email\", \"Email\", \"A valid email address\", graph),\n\t\tthis.addDatatype(\"xdd:html\", \"HTML\", \"A string with embedded HTML\", graph),\n\t\tthis.addDatatype(\"xdd:json\", \"JSON\", \"A JSON encoded string\", graph),\n\t\tthis.addDatatype(\"xdd:url\", \"URL\", \"A valid http(s) URL\", graph)\n\t)\n}\n\n\n/* utility function for creating a datatype in woql */\nWOQLSchema.prototype.addDatatype = function(id, label, descr, graph){\n\tgraph = graph || this.graph\n\tvar dt = new WOQLQuery().insert(id, \"rdfs:Datatype\", graph).label(label);\n\tif(descr) dt.description(descr);\n\treturn dt;\n}\n\n/**\n * Loads box classes for all of the useful xsd classes the format is to generate the box classes for xsd:anyGivenType\n * as class(prefix:AnyGivenType) -> property(prefix:anyGivenType) -> datatype(xsd:anyGivenType)\n */\nWOQLSchema.prototype.loadXSDBoxes = function(parent, graph, prefix){\n\treturn new WOQLQuery().and(\n\t\tthis.boxDatatype(\"xsd:anySimpleType\", \"Any Simple Type\", \"Any basic data type such as string or integer. An xsd:anySimpleType value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:string\", \"String\", \"Any text or sequence of characters\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:boolean\", \"Boolean\", \"A true or false value. An xsd:boolean value.\", parent, graph, prefix),\n\t   \tthis.boxDatatype(\"xsd:decimal\", \"Decimal\", \"A decimal number. An xsd:decimal value.\", parent, graph, prefix),\n\t   \tthis.boxDatatype(\"xsd:double\",  \"Double\", \"A double-precision decimal number. An xsd:double value.\", parent, graph, prefix),\n\t   \tthis.boxDatatype(\"xsd:float\", \"Float\", \"A floating-point number. An xsd:float value.\", parent, graph, prefix),\n\t   \tthis.boxDatatype(\"xsd:time\", \"Time\", \"A time. An xsd:time value. hh:mm:ss.ssss\", parent, graph, prefix),\n\t   \tthis.boxDatatype(\"xsd:date\", \"Date\", \"A date. An xsd:date value. YYYY-MM-DD\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:dateTime\", \"Date Time\", \"A date and time. An xsd:dateTime value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:dateTimeStamp\", \"Date-Time Stamp\", \"An xsd:dateTimeStamp value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:gYear\", \"Year\", \" A particular 4 digit year YYYY - negative years are BCE.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:gMonth\", \"Month\", \"A particular month. An xsd:gMonth value. --MM\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:gDay\", \"Day\", \"A particular day. An xsd:gDay value. ---DD\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:gYearMonth\", \"Year / Month\", \"A year and a month. An xsd:gYearMonth value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:gMonthDay\", \"Month / Day\", \"A month and a day. An xsd:gMonthDay value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:duration\", \"Duration\", \"A period of time. An xsd:duration value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:yearMonthDuration\", \"Year / Month Duration\", \"A duration measured in years and months. An xsd:yearMonthDuration value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:dayTimeDuration\", \"Day / Time Duration\", \"A duration measured in days and time. An xsd:dayTimeDuration value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:byte\", \"Byte\", \"An xsd:byte value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:short\", \"Short\", \"An xsd:short value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:integer\", \"Integer\", \"A simple number. An xsd:integer value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:long\", \"Long\", \"An xsd:long value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:unsignedByte\", \"Unsigned Byte\", \"An xsd:unsignedByte value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:unsignedInt\", \"Unsigned Integer\", \"An xsd:unsignedInt value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:unsignedLong\", \"Unsigned Long Integer\", \"An xsd:unsignedLong value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:positiveInteger\", \"Positive Integer\", \"A simple number greater than 0. An xsd:positiveInteger value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:nonNegativeInteger\", \"Non-Negative Integer\", \"A simple number that can't be less than 0. An xsd:nonNegativeInteger value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:negativeInteger\", \"Negative Integer\", \"A negative integer. An xsd:negativeInteger value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:nonPositiveInteger\", \"Non-Positive Integer\", \"A number less than or equal to zero. An xsd:nonPositiveInteger value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:base64Binary\", \"Base 64 Binary\",\"An xsd:base64Binary value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:anyURI\", \"Any URI\", \"Any URl. An xsd:anyURI value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:language\", \"Language\", \"A natural language identifier as defined by by [RFC 3066] . An xsd:language value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:normalizedString\", \"Normalized String\", \"An xsd:normalizedString value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:token\", \"Token\", \"An xsd:token value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:NMTOKEN\", \"NMTOKEN\", \"An xsd:NMTOKEN value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:Name\", \"Name\", \"An xsd:Name value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:NCName\", \"NCName\", \"An xsd:NCName value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:NOTATION\", \"NOTATION\", \"An xsd:NOTATION value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:QName\", \"QName\", \"An xsd:QName value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:ID\", \"ID\", \"An xsd:ID value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:IDREF\", \"IDREF\", \"An xsd:IDREF value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xsd:ENTITY\", \"ENTITY\", \"An xsd:ENTITY value.\", parent, graph, prefix)\n\t)\n}\n\n/**\n * Generates a query to create box classes for all of the xdd datatypes. the format is to generate the box classes for xdd:anyGivenType\n * as class(prefix:AnyGivenType) -> property(prefix:anyGivenType) -> datatype(xdd:anyGivenType)\n */\nWOQLSchema.prototype.loadXDDBoxes = function(parent, graph, prefix){\n\treturn new WOQLQuery().and(\n\t\tthis.boxDatatype(\"xdd:coordinate\", \"Coordinate\", \"A particular location on the surface of the earth, defined by latitude and longitude . An xdd:coordinate value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xdd:coordinatePolygon\", \"Geographic Area\", \"A shape on a map which defines an area. within the defined set of coordinates   An xdd:coordinatePolygon value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xdd:coordinatePolyline\", \"Coordinate Path\", \"A set of coordinates forming a line on a map, representing a route. An xdd:coordinatePolyline value.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xdd:url\", \"URL\", \"A valid url.\", parent, graph, prefix),\n\t\tthis.boxDatatype(\"xdd:email\", \"Email\", \"A valid email address.\", parent, graph, prefix), \n\t\tthis.boxDatatype(\"xdd:html\", \"HTML\", \"A safe HTML string\", parent, graph, prefix), \n\t\tthis.boxDatatype(\"xdd:json\", \"JSON\", \"A JSON Encoded String\"), \n\t\tthis.boxDatatype(\"xdd:gYearRange\", \"Year\", \"A 4-digit year, YYYY, or if uncertain, a range of years. An xdd:gYearRange value.\", parent, graph, prefix), \n\t\tthis.boxDatatype(\"xdd:integerRange\", \"Integer\", \"A simple number or range of numbers. An xdd:integerRange value.\", parent, graph, prefix), \n\t\tthis.boxDatatype(\"xdd:decimalRange\", \"Decimal Number\", \"A decimal value or, if uncertain, a range of decimal values. An xdd:decimalRange value.\", parent, graph, prefix), \n\t\tthis.boxDatatype(\"xdd:dateRange\", \"Date Range\",\"A date or a range of dates YYYY-MM-DD\", parent, graph, prefix)\n\t)\n}\n\n/**\n *  utility function for boxing a datatype in woql \n * format is (predicate) prefix:datatype (domain) prefix:Datatype (range) xsd:datatype\n */\nWOQLSchema.prototype.boxDatatype = function(datatype, label, descr, parent, graph, prefix){\n\tgraph = graph || this.graph\n\tprefix = prefix || \"scm:\"\n\tlet ext = datatype.split(\":\")[1]\n\tlet box_class_id = prefix + ext.charAt(0).toUpperCase() + ext.slice(1)\n\tlet box_prop_id = prefix + ext.charAt(0).toLowerCase() + ext.slice(1)\n\tvar box_class = this.add_class(box_class_id, graph).label(label)\n\tbox_class.description(\"Boxed Class for \" + datatype)\n\tif(parent) box_class.parent(parent)\n\tvar box_prop = this.add_property(box_prop_id, datatype, graph).label(label).domain(box_class_id)\n\tif(descr) box_prop.description(descr)\n\treturn new WOQLQuery().and(box_class, box_prop)\n}\n\nmodule.exports = WOQLSchema;\n","const WOQLQuery = require('./woqlCore');\n\nfunction WOQLLibrary(g){\n\tthis.default_schema = g || \"schema/main\"\n}\n\nWOQLLibrary.prototype.getAllDocuments = function(){\n\treturn new WOQLQuery().and(\n\t\tnew WOQLQuery().triple(\"v:Subject\", \"type\", \"v:Type\"),\n\t\tnew WOQLQuery().sub(\"terminus:Document\", \"v:Type\")\n\t);\n}\n\nWOQLLibrary.prototype.documentMetadata = function(g){\n\tg = g || this.default_schema\n\treturn new WOQLQuery().and(\n\t\tnew WOQLQuery().triple(\"v:ID\", \"rdf:type\", \"v:Class\"),\n\t\tnew WOQLQuery().sub(\"terminus:Document\", \"v:Class\"),\n\t\tnew WOQLQuery().opt().triple(\"v:ID\", \"label\", \"v:Label\"),\n\t\tnew WOQLQuery().opt().triple(\"v:ID\", \"comment\", \"v:Comment\"),\n\t\tnew WOQLQuery().opt().quad(\"v:Class\", \"label\", \"v:Type\", g),\n\t\tnew WOQLQuery().opt().quad(\"v:Class\", \"comment\", \"v:Type_Comment\", g)\n\t)\n}\n\nWOQLLibrary.prototype.concreteDocumentClasses = function(g){\n\tg = g || this.default_schema\n\treturn new WOQLQuery().and(\n\t\tnew WOQLQuery().sub(\"terminus:Document\", \"v:Class\"),\n        new WOQLQuery().not().quad(\"v:Class\", \"terminus:tag\", \"terminus:abstract\", g),\n        new WOQLQuery().limit(1).opt().quad(\"v:Class\", \"label\", \"v:Label\", g),\n\t\tnew WOQLQuery().limit(1).opt().quad(\"v:Class\", \"comment\", \"v:Comment\", g)\n\t)\n}\n\nWOQLLibrary.prototype.propertyMetadata = function(g){\n\tg = g || this.default_schema\n\treturn new WOQLQuery().and(\n        new WOQLQuery().quad(\"v:Property\", \"type\", \"v:PropertyType\", g),\n\t\tnew WOQLQuery().or(\n\t\t\tnew WOQLQuery().eq(\"v:PropertyType\", \"owl:DatatypeProperty\"),\n\t\t\tnew WOQLQuery().eq(\"v:PropertyType\", \"owl:ObjectProperty\")\n\t\t),\n\t\tnew WOQLQuery().opt().quad(\"v:Property\", \"range\", \"v:Range\", g),\n\t\tnew WOQLQuery().opt().quad(\"v:Property\", \"type\", \"v:Type\", g),\n\t\tnew WOQLQuery().opt().quad(\"v:Property\", \"label\", \"v:Label\", g),\n\t\tnew WOQLQuery().opt().quad(\"v:Property\", \"comment\", \"v:Comment\", g),\n\t\tnew WOQLQuery().opt().quad(\"v:Property\", \"domain\", \"v:Domain\", g)\n\t);\n}\n\nWOQLLibrary.prototype.elementMetadata = function(g){\n\tg = g || this.default_schema\n\treturn new WOQLQuery().select(\"v:Element\", \"v:Label\", \"v:Comment\", \"v:Parents\", \"v:Domain\", \"v:Range\").and(\n\t\tnew WOQLQuery().quad(\"v:Element\", \"type\", \"v:Type\", g),\n\t\tnew WOQLQuery().opt().quad(\"v:Element\", \"terminus:tag\", \"v:Abstract\", g),\n\t\tnew WOQLQuery().opt().quad(\"v:Element\", \"label\", \"v:Label\", g),\n\t\tnew WOQLQuery().opt().quad(\"v:Element\", \"comment\", \"v:Comment\", g),\n        new WOQLQuery().opt().group_by(\"v:Element\", \"v:Parent\", \"v:Parents\").and(\n            new WOQLQuery().quad(\"v:Element\", \"subClassOf\", \"v:Parent\", g)\n        ),\n\t\tnew WOQLQuery().opt().quad(\"v:Element\", \"domain\", \"v:Domain\", g),\n\t\tnew WOQLQuery().opt().quad(\"v:Element\", \"range\", \"v:Range\", g)\n\t);\n}\n\nWOQLLibrary.prototype.classList = function(g){\n\tg = g || this.default_schema\n\treturn new WOQLQuery().select(\"v:Class\", \"v:Name\", \"v:Parents\", \"v:Children\", \"v:Description\", \"v:Abstract\").and(\n\t\tnew WOQLQuery().quad(\"v:Class\", \"type\", \"owl:Class\", g),\n\t\tnew WOQLQuery().limit(1).opt().quad(\"v:Class\", \"label\", \"v:Name\", g),\n\t\tnew WOQLQuery().limit(1).opt().quad(\"v:Class\", \"comment\", \"v:Description\", g),\n\t\tnew WOQLQuery().opt().quad(\"v:Class\", \"terminus:tag\", \"v:Abstract\", g),\n\t\tnew WOQLQuery().opt().group_by(\"v:Class\", \"v:Parent\", \"v:Parents\").and(\n            new WOQLQuery().quad(\"v:Class\", \"subClassOf\", \"v:Parent\", g),\n            new WOQLQuery().or(\n                new WOQLQuery().eq(\"v:Parent\", \"terminus:Document\"),\n                new WOQLQuery().quad(\"v:Parent\", \"type\", \"owl:Class\", g),\n            )\n        ),\n\t\tnew WOQLQuery().opt().group_by(\"v:Class\", \"v:Child\", \"v:Children\").and(\n            new WOQLQuery().quad(\"v:Child\", \"subClassOf\", \"v:Class\", g),\n            new WOQLQuery().quad(\"v:Child\", \"type\", \"owl:Class\", g)\n        )\n\t)\n}\n\nWOQLLibrary.prototype.getDataOfClass = function(chosen){\n\treturn new WOQLQuery().and(\n\t\tnew WOQLQuery().triple(\"v:Subject\", \"type\", chosen),\n\t\tnew WOQLQuery().opt().triple(\"v:Subject\", \"v:Property\", \"v:Value\")\n\t);\n}\n\nWOQLLibrary.prototype.getDataOfProperty = function(chosen){\n\treturn new WOQLQuery().and(\n\t\tnew WOQLQuery().triple(\"v:Subject\", chosen, \"v:Value\"),\n\t\tnew WOQLQuery().opt().triple(\"v:Subject\", \"label\", \"v:Label\")\n\t);\n}\n\nWOQLLibrary.prototype.documentProperties = function(id, g){\n\tg = g || this.default_schema\n\treturn new WOQLQuery().and(\n\t\tnew WOQLQuery().triple(id, \"v:Property\", \"v:Property_Value\"),\n\t\tnew WOQLQuery().opt().quad(\"v:Property\", \"label\", \"v:Property_Label\", g),\n\t\tnew WOQLQuery().opt().quad(\"v:Property\", \"type\", \"v:Property_Type\", g)\n\t);\n}\n\nWOQLLibrary.prototype.getDocumentConnections = function(id, g){\n\tg = g || this.default_schema\n\treturn new WOQLQuery().and(\n\t\tnew WOQLQuery().eq(\"v:Docid\", id),\n\t\tnew WOQLQuery().or(\n\t\t\tnew WOQLQuery().triple(id, \"v:Outgoing\", \"v:Entid\"),\n\t\t\tnew WOQLQuery().triple(\"v:Entid\", \"v:Incoming\", id)\n\t\t),\n\t\tnew WOQLQuery().triple(\"v:Entid\", \"type\", \"v:Enttype\"),\n\t\tnew WOQLQuery().sub(\"terminus:Document\", \"v:Enttype\"),\n\t\tnew WOQLQuery().opt().triple(\"v:Entid\", \"label\", \"v:Label\"),\n\t\tnew WOQLQuery().opt().quad(\"v:Enttype\", \"label\", \"v:Class_Label\", g)\n\t);\n}\n\nWOQLLibrary.prototype.getAllDocumentConnections = function(){\n\treturn new WOQLQuery().and(\n\t\tnew WOQLQuery().sub(\"terminus:Document\", \"v:Enttype\"),\n\t\tnew WOQLQuery().triple(\"v:doc1\", \"type\", \"v:Enttype\"),\n\t\tnew WOQLQuery().triple(\"v:doc1\", \"v:Predicate\", \"v:doc2\"),\n\t\tnew WOQLQuery().triple(\"v:doc2\", \"type\", \"v:Enttype2\"),\n\t\tnew WOQLQuery().sub(\"terminus:Document\", \"v:Enttype2\"),\n\t\tnew WOQLQuery().opt().triple(\"v:doc1\", \"label\", \"v:Label1\"),\n\t\tnew WOQLQuery().opt().triple(\"v:doc2\", \"label\", \"v:Label2\"),\n\t\tnew WOQLQuery().not().eq(\"v:doc1\", \"v:doc2\")\n\t);\n}\n\nWOQLLibrary.prototype.getInstanceMeta = function(url, g){\n\tg = g || this.default_schema\n\treturn new WOQLQuery().and(\n\t\tnew WOQLQuery().triple(url, \"type\", \"v:InstanceType\"),\n\t\tnew WOQLQuery().opt().triple(url, \"label\", \"v:InstanceLabel\"),\n\t\tnew WOQLQuery().opt().triple(url, \"comment\", \"v:InstanceComment\"),\n\t\tnew WOQLQuery().opt().quad(\"v:InstanceType\", \"label\", \"v:ClassLabel\", g)\n\t);\n}\n\nWOQLLibrary.prototype.simpleGraphQuery = function(g){\n\tg = g || this.default_schema\n\treturn new WOQLQuery().and(\n\t    new WOQLQuery().triple(\"v:Source\", \"v:Edge\", \"v:Target\"),\n\t    new WOQLQuery().isa(\"v:Source\", \"v:Source_Class\"),\n\t    new WOQLQuery().sub(\"terminus:Document\", \"v:Source_Class\"),\n\t    new WOQLQuery().isa(\"v:Target\", \"v:Target_Class\"),\n\t    new WOQLQuery().sub(\"terminus:Document\", \"v:Target_Class\"),\n\t    new WOQLQuery().opt().triple(\"v:Source\", \"label\", \"v:Source_Label\"),\n\t    new WOQLQuery().opt().triple(\"v:Source\", \"comment\", \"v:Source_Comment\"),\n\t    new WOQLQuery().opt().quad(\"v:Source_Class\", \"label\", \"v:Source_Type\", g),\n\t    new WOQLQuery().opt().quad(\"v:Source_Class\", \"comment\", \"v:Source_Type_Comment\", g),\n\t    new WOQLQuery().opt().triple(\"v:Target\", \"label\", \"v:Target_Label\"),\n\t    new WOQLQuery().opt().triple(\"v:Target\", \"comment\", \"v:Target_Comment\"),\n\t    new WOQLQuery().opt().quad(\"v:Target_Class\", \"label\", \"v:Target_Type\", g),\n\t    new WOQLQuery().opt().quad(\"v:Target_Class\", \"comment\", \"v:Target_Type_Comment\", g),\n\t    new WOQLQuery().opt().quad(\"v:Edge\", \"label\", \"v:Edge_Type\", g),\n\t    new WOQLQuery().opt().quad(\"v:Edge\", \"comment\", \"v:Edge_Type_Comment\", g)\n\t);\n}\n\n/**\n * These are for the master database\n */\n\nWOQLLibrary.prototype.getCapabilities = function(uid, dbid){\n    let pattern = []\n    if(uid){\n        pattern.push(\n            new WOQLQuery().idgen(\"doc:User\", [uid], \"v:UID\"),\n        )\n    }\n    if(dbid){\n        pattern.push(\n            new WOQLQuery().idgen(\"doc:\", [dbid], \"v:DBID\"),\n        )\n    }\n    pattern = pattern.concat([\n        new WOQLQuery().triple(\"v:UID\", \"terminus:authority\", \"v:CapID\"),\n        new WOQLQuery().triple(\"v:CapID\", \"terminus:authority_scope\", \"v:DBID\"),\n        new WOQLQuery().triple(\"v:CapID\", \"terminus:action\", \"v:Action\")\n    ])\n    return new WOQLQuery().and( ...pattern )   \n}\n\nWOQLLibrary.prototype.createCapability = function(target, capabilities, prefix, vcap) {\n\tprefix = prefix || \"doc:\"\n\tvcap = vcap || \"v:Capability\" \n\tlet vdb = \"v:DB\"+ (target.indexOf(\":\") == -1 ? target : target.split(\":\")[1])\n    \n\tlet capids = [target].concat(capabilities.sort());\n    //make variable names have global scope;\n    let gens = [\n\t\tnew WOQLQuery().unique(prefix+\"Capability\", capids, vcap),\n\t\tnew WOQLQuery().idgen(prefix, [target], vdb),\n\t\tnew WOQLQuery().not().triple(vcap, \"type\", \"terminus:DatabaseCapability\")\n\t]\n\tlet writecap = [\n\t\tnew WOQLQuery().add_triple(vcap, \"type\", \"terminus:DatabaseCapability\"),\n\t\tnew WOQLQuery().add_triple(vcap, \"terminus:authority_scope\", vdb),\n\t]\n\tfor(var j = 0; j<capabilities.length; j++){\n\t\twritecap.push(new WOQLQuery().add_triple(vcap, \"terminus:action\", capabilities[j]))\n\t}\n\treturn new WOQLQuery().when(new WOQLQuery().and(...gens)).and(...writecap)\n}\n\n/**\n * These query the built in commits graph\n * they take a graph identifier string (account/db/repo/_commits) as an optional last argument\n * If passed, they will wrap the query in a using resource identifier\n */\n\n\n/**\n * Loads the branch name and head commit id of branch (defaults to all branches) \n */\nWOQLLibrary.prototype.getBranchDetails = function(branch_name, head, cresource){\n    head = head || \"v:Head\"\n    branch_name = branch_name || \"v:Branch\"\n    let woql = new WOQLQuery().and(\n\t\tnew WOQLQuery().triple(\"v:BranchIRI\", \"ref:branch_name\", branch_name),\n\t\tnew WOQLQuery().opt().and(\n            new WOQLQuery().triple(\"v:BranchIRI\", \"ref:ref_commit\", \"v:HeadIRI\"), \n            new WOQLQuery().triple(\"v:HeadIRI\", \"ref:commit_id\", head),\n            new WOQLQuery().triple(\"v:HeadIRI\", \"ref:commit_timestamp\", \"v:Time\"),\n        ) \n    )\n    return this.pointQueryAtResource(woql, cresource)\n}\n\nWOQLLibrary.prototype.loadBranchDetails = function(client, branch_name, head){\n\treturn this.getBranchDetails(branch_name, head, client.resource(\"commits\"))\n}\n\nWOQLLibrary.prototype.getBranchNames = function(cresource){\n    let woql = new WOQLQuery().select(\"v:BranchName\").triple(\"v:Branch\", \"ref:branch_name\", \"v:BranchName\")\n    return this.pointQueryAtResource(woql, cresource)\n}\n\nWOQLLibrary.prototype.loadBranchNames = function(client){\n    return this.getBranchNames(client.resource(\"commits\"))\n}\n\nWOQLLibrary.prototype.getBranchGraphNames = function(branch_name, cresource){\n\tlet woql = new WOQLQuery().and(\n        this.getBranchDetails(branch_name, \"v:Head\"),\n        this.getGraphsAtRef(\"v:Head\")\n    )\n    return this.pointQueryAtResource(woql, cresource)\n}\n\n/**\n * pass the client and uses looks for current branch in current commits graph\n */\nWOQLLibrary.prototype.loadBranchGraphNames = function(client){\n\treturn this.getBranchGraphNames(client.checkout(), client.resource(\"commits\"))\n}\n\n/**\n * Loads meta-data about the types of graphs that existed in a DB at the time of a particular commit\n */\nWOQLLibrary.prototype.getGraphsAtRef = function(commitID, cresource){\n    let woql = new WOQLQuery().and(\n        new WOQLQuery().triple(\"v:CommitIRI\", \"ref:commit_id\", commitID), \n        new WOQLQuery().or(\n            new WOQLQuery().triple(\"v:CommitIRI\", \"ref:instance\", \"v:GraphIRI\").eq(\"v:GraphType\", \"instance\"),\n            new WOQLQuery().triple(\"v:CommitIRI\", \"ref:schema\", \"v:GraphIRI\").eq(\"v:GraphType\", \"schema\"),\n            new WOQLQuery().triple(\"v:CommitIRI\", \"ref:inference\", \"v:GraphIRI\").eq(\"v:GraphType\", \"inference\")\n        ),\n        new WOQLQuery().triple(\"v:GraphIRI\", \"ref:graph_name\", \"v:GraphID\")\n    )\n    return this.pointQueryAtResource(woql, cresource)\n}\n\nWOQLLibrary.prototype.loadGraphsAtRef = function(client){\n    return this.getGraphsAtRef(client.ref(), client.resource(\"commits\"))\n}\n\nWOQLLibrary.prototype.loadGraphStructure = function(client){\n    return this.getGraphStructure(client.checkout(), client.ref(), client.resource(\"commits\"))\n\n}\n\n\n/**\n * Loads the branches, graphs in those branches and their sizes for any given ref / branch\n */\nWOQLLibrary.prototype.getGraphStructure = function(branch, ref, cresource){\n    if(ref){\n        var start = this.getGraphsAtRef(ref)\n    }\n    else {\n        var start = this.getBranchGraphNames(branch)\n    } \n\n    let commitquery = new WOQLQuery().and(\n        start, \n        new WOQLQuery().opt(this.getFirstCommit())\n    )\n    return this.pointQueryAtResource(commitquery, cresource)\n\n    let full = new WOQLQuery().and(\n        new WOQLQuery().using(cresource, commitquery),\n        new WOQLQuery().and(\n            new WOQLQuery().concat(\"v:GraphType/v:GraphID\", \"v:GraphFilter\"),\n            new WOQLQuery().size(\"v:GraphFilter\", \"v:Size\"),\n            new WOQLQuery().triple_count(\"v:GraphFilter\", \"v:Triples\")\n        )\n    )\n    return full\n}\n\n\nWOQLLibrary.prototype.rewind = function(ref, ts, cresource){\n\tlet woql = new WOQLQuery().select(\"v:CommitID\").limit(1).and(\n\t\tnew WOQLQuery().triple(\"v:HeadIRI\",  \"ref:commit_id\", ref),\n        new WOQLQuery().path(\"v:HeadIRI\", \"ref:commit_parent+\", \"v:CommitIRI\", \"v:Path\"),\n        new WOQLQuery().triple(\"v:CommitIRI\",  \"ref:commit_id\", \"v:CommitID\"),\n        new WOQLQuery().triple(\"v:CommitIRI\",  \"ref:commit_timestamp\", \"v:Time\"),\n        new WOQLQuery().not().greater(ts, \"v:Time\")\n    )\n    return this.pointQueryAtResource(woql, cresource)\n}\n\nWOQLLibrary.prototype.getCommitAtTime = function(branch, ts, cresource){\n\tlet woql = new WOQLQuery().limit(1).and(\n\t\tnew WOQLQuery().eq(ts, \"v:LastCommitBefore\"),\n\t\tnew WOQLQuery().triple(\"v:Branch\", \"ref:branch_name\", branch),\n\t\tnew WOQLQuery().triple(\"v:Branch\", \"ref:ref_commit\", \"v:Head\"),\n\t\tnew WOQLQuery().triple(\"v:Head\",  \"ref:commit_id\", \"v:HeadID\"),\n\t\tnew WOQLQuery().triple(\"v:Head\",  \"ref:commit_timestamp\", \"v:HeadTime\"),\n\t\tnew WOQLQuery().or(\n\t\t\tnew WOQLQuery().and(\n\t\t\t\tnew WOQLQuery().not().greater(\"v:LastCommitBefore\", \"v:HeadTime\"),\n\t\t\t\tnew WOQLQuery().eq(\"v:CommitID\",  \"v:HeadID\"),\n\t\t\t),\n\t\t\tnew WOQLQuery().limit(1).and(\n\t\t\t\tnew WOQLQuery().path(\"v:Head\", \"ref:commit_parent+\", \"v:Tail\", \"v:Path\"),\n\t\t\t\tnew WOQLQuery().triple(\"v:Tail\",  \"ref:commit_id\", \"v:TailID\"),\n\t\t\t\tnew WOQLQuery().triple(\"v:Tail\",  \"ref:commit_timestamp\", \"v:TailTime\"),\n\t\t\t\tnew WOQLQuery().not().greater(\"v:LastCommitBefore\", \"v:TailTime\"),\n\t\t\t\tnew WOQLQuery().eq(\"v:CommitID\",  \"v:TailID\")\n\t\t\t)\n        ),\n    )\n    return this.pointQueryAtResource(woql, cresource)\n}\n\nWOQLLibrary.prototype.loadCommitAtTime = function(client, ts, branch){\n    branch = branch || client.checkout()\n \treturn this.getCommitBefore(branch, ts, client.resource(\"commits\"))\n}\n\n\nWOQLLibrary.prototype.getCommitBefore = function(branch, ts, cresource){\n    let woql = this.getCommitAtTime(branch, ts).and().getCommitDetails(\"v:CommitID\")\n    return this.pointQueryAtResource(woql, cresource)\n}\n\nWOQLLibrary.prototype.loadCommitBefore = function(client, branch, ts){\n    branch = branch || client.checkout()\n \treturn this.getCommitBefore(branch, ts, client.resource(\"commits\"))\n}\n\nWOQLLibrary.prototype.getCommitDetails = function(commit_name, commitvar, cresource){\n\tcommitvar = commitvar || \"v:Commit\"\n\tlet woql = new WOQLQuery().and(\n\t\tnew WOQLQuery().triple(commitvar, \"ref:commit_id\", commit_name),\n\t\tnew WOQLQuery().triple(commitvar, \"ref:commit_timestamp\", \"v:Time\"),\n\t\tnew WOQLQuery().opt().and(\n\t\t\tnew WOQLQuery().triple(commitvar, \"ref:commit_parent\", \"v:ParentID\"),\n\t\t\tnew WOQLQuery().triple(\"v:ParentID\", \"ref:commit_id\", \"v:Parent\")\n\t\t),\n\t\tnew WOQLQuery().opt().and(\n\t\t\tnew WOQLQuery().triple(\"v:ChildID\", \"ref:commit_parent\", commitvar),\n\t\t\tnew WOQLQuery().triple(\"v:ChildID\", \"ref:commit_id\", \"v:Child\")\n\t\t),\n\t\tnew WOQLQuery().opt().and(\n\t\t\tnew WOQLQuery().triple(\"v:Branch\", \"ref:branch_name\", \"v:BranchName\"),\n\t\t\tnew WOQLQuery().triple(\"v:Branch\", \"ref:ref_commit\", commitvar), \n\t\t),\n\t\tnew WOQLQuery().opt().triple(commitvar, \"ref:commit_author\", \"v:Author\"),\n\t\tnew WOQLQuery().opt().triple(commitvar, \"ref:commit_message\", \"v:Message\")\n\t)\n    return this.pointQueryAtResource(woql, cresource)\n}\n\nWOQLLibrary.prototype.loadCommitDetails = function(client, commit_name, commitvar){\n    return this.getCommitDetails(commit_name, commitvar, client.resource(\"commits\"))\n}\t\n\nWOQLLibrary.prototype.loadCommitBranchDetails = function(client, commit_name, branch, commitvar){\n    return this.getCommitBranchDetails(commit_name, branch, commitvar, client.resource(\"commits\"))\n}\t\n\nWOQLLibrary.prototype.getCommitBranchDetails = function(commit_name, branch, commitvar, cresource){\n\tcommitvar = commitvar || \"v:Commit\"\n\tlet woql = new WOQLQuery().and(\n\t\tnew WOQLQuery().triple(commitvar, \"ref:commit_id\", commit_name),\n\t\tnew WOQLQuery().triple(commitvar, \"ref:commit_timestamp\", \"v:Time\"),\n\t\tnew WOQLQuery().opt().and(\n\t\t\tnew WOQLQuery().triple(commitvar, \"ref:commit_parent\", \"v:ParentID\"),\n\t\t\tnew WOQLQuery().triple(\"v:ParentID\", \"ref:commit_id\", \"v:Parent\")\n\t\t),\n\t\tnew WOQLQuery().and(\n\t\t\tnew WOQLQuery().triple(\"v:Branch\", \"ref:branch_name\", branch),\n\t\t\tnew WOQLQuery().triple(\"v:Branch\", \"ref:ref_commit\", \"v:BHead\"), \n\t\t),\n\t\tnew WOQLQuery().opt().and(\n\t\t\tnew WOQLQuery().triple(\"v:ChildID\", \"ref:commit_parent\", commitvar),\n            new WOQLQuery().triple(\"v:ChildID\", \"ref:commit_id\", \"v:Child\"),\n            new WOQLQuery().path(\"v:BHead\", \"ref:commit_parent+\", \"v:ChildID\", \"v:Path\"),\n\t\t),\n\t\tnew WOQLQuery().opt().triple(commitvar, \"ref:commit_author\", \"v:Author\"),\n\t\tnew WOQLQuery().opt().triple(commitvar, \"ref:commit_message\", \"v:Message\")\n\t)\n    return this.pointQueryAtResource(woql, cresource)\n}\n\n\nWOQLLibrary.prototype.getCommitBefore = function(branch, ts, cresource){\n\tlet woql = new WOQLQuery().limit(1).and(\n\t\tnew WOQLQuery().eq(ts, \"v:LastCommitBefore\"),//blows out the clause and makes it embeddable\n\t\tnew WOQLQuery().triple(\"v:Branch\", \"ref:branch_name\", branch),\n\t\tnew WOQLQuery().triple(\"v:Branch\", \"ref:ref_commit\", \"v:Head\"),\n\t\tnew WOQLQuery().triple(\"v:Head\",  \"ref:commit_id\", \"v:HeadID\"),\n\t\tnew WOQLQuery().triple(\"v:Head\",  \"ref:commit_timestamp\", \"v:HeadTime\"),\n\t\tnew WOQLQuery().or(\n\t\t\tnew WOQLQuery().and(\n\t\t\t\tnew WOQLQuery().less(\"v:HeadTime\",  ts),\n\t\t\t\tnew WOQLQuery().eq(\"v:CommitID\",  \"v:HeadID\"),\n\t\t\t),\n\t\t\tnew WOQLQuery().limit(1).and(\n\t\t\t\tnew WOQLQuery().path(\"v:Head\", \"ref:commit_parent+\", \"v:Tail\", \"v:Path\"),\n\t\t\t\tnew WOQLQuery().triple(\"v:Tail\",  \"ref:commit_id\", \"v:TailID\"),\n\t\t\t\tnew WOQLQuery().triple(\"v:Tail\",  \"ref:commit_timestamp\", \"v:TailTime\"),\n\t\t\t\tnew WOQLQuery().less(\"v:TailTime\",  ts),\n\t\t\t\tnew WOQLQuery().eq(\"v:CommitID\",  \"v:TailID\")\n\t\t\t)\n\t\t),\n\t\tthis.getCommitDetails(\"v:CommitID\")\n    )\n    return this.pointQueryAtResource(woql, cresource)\n}\n\nWOQLLibrary.prototype.loadCommitBefore = function(client, ts){\n \treturn this.getCommitBefore(client.checkout(), ts, client.resource(\"commits\"))\n}\n\nWOQLLibrary.prototype.getBranchLimits = function(branch, cresource){\n\tlet woql = new WOQLQuery().and(\n\t\tnew WOQLQuery().triple(\"v:Branch\", \"ref:branch_name\", branch),\n\t\tnew WOQLQuery().opt().triple(\"v:Branch\", \"ref:ref_commit\", \"v:Head\"),\n\t\tnew WOQLQuery().opt().triple(\"v:Head\",  \"ref:commit_id\", \"v:HeadID\"),\n\t\tnew WOQLQuery().opt().triple(\"v:Head\",  \"ref:commit_timestamp\", \"v:Last\"),\n\t\tnew WOQLQuery().opt().and(\n\t\t\tnew WOQLQuery().path(\"v:Head\", \"ref:commit_parent+\", \"v:Tail\", \"v:Path\"),\n\t\t\tnew WOQLQuery().not().triple(\"v:Tail\",  \"ref:commit_parent\", \"v:Any\"),\n\t\t\tnew WOQLQuery().triple(\"v:Tail\",  \"ref:commit_id\", \"v:TailID\"),\n\t\t\tnew WOQLQuery().triple(\"v:Tail\",  \"ref:commit_timestamp\", \"v:First\"),\n\t\t)\n    )\n    return this.pointQueryAtResource(woql, cresource)\n}\n\nWOQLLibrary.prototype.loadBranchLimits = function(client){\n\treturn this.getBranchLimits(client.checkout(), client.resource(\"commits\"))\n}\n\n\nWOQLLibrary.prototype.getFirstCommit = function(comvar, cresource){\n    comvar = comvar || \"v:FirstCommit\"\n    let woql = new WOQLQuery().and(\n        new WOQLQuery().triple(\"v:Tail\",  \"ref:commit_id\", comvar),\n        new WOQLQuery().not().triple(\"v:Tail\",  \"ref:commit_parent\", \"v:Any\"),\n        this.getCommitDetails(comvar)\n    )\n    return this.pointQueryAtResource(woql, cresource)\n}\n\nWOQLLibrary.prototype.loadFirstCommit = function(client, comvar){\n    return this.getFirstCommit(comvar, client.resource(\"commits\"))\n}\n\nWOQLLibrary.prototype.timestampToActiveCommit = function(branch, ts, cresource){\n    let woql = new WOQLQuery().select(\"v:CommitID\", this.getCommitBefore(branch, ts))\n    return this.pointQueryAtResource(woql, cresource)\n}\n\nWOQLLibrary.prototype.runQueryAtTime = function(branch, ts, commitbase, cresource, query){\n    let woql = new WOQLQuery().and(\n        new WOQLQuery().eq(ts, \"v:AtTime\"),\n        this.timestampToActiveCommit(branch, ts, cresource), // => gives us active commit at ts via \"v:commitID\"\n        new WOQLQuery().concat([commitbase, \"v:CommitID\"], \"v:CommitResource\"),\n        new WOQLQuery().using(\"v:CommitResource\", query) \n    )\n    return woql\n}\n\nWOQLLibrary.prototype.runQueryAtTimes = function(branch, times, commitbase, cresource, query){\n    let woql = new WOQLQuery()\n    for(var i = 0; i<times.length; i++){\n        woql.and(\n            this.runQueryAtTime(branch, times[i], cresource, commitbase, query)\n        )\n    }\n    return woql\n}\n\nWOQLLibrary.prototype.graphDiffBetweenRefs = function(graphfilter, refa, refb, commitbase, cresource){\n    let woql = new WOQLQuery().and(\n        new WOQLQuery().and(\n            new WOQLQuery().eq(\"v:FirstCommitID\", refa).and().quad(\"v:SubjectA\", \"v:PredicateA\", \"v:ObjectA\", graphfilter),\n            new WOQLQuery().eq(\"v:SecondCommitID\", refb).and().quad(\"v:SubjectB\", \"v:PredicateB\", \"v:ObjectB\", graphfilter)\n        )\n    )\n    //in a, not in b\n    //WOQL.not().\n}\n\nWOQLLibrary.prototype.dumpGraphToFile = function(graphid, file){\n    let woql = new WOQLQuery().and(\n        new WOQLQuery().quad(\"v:Subject\", \"v:Predicate\", \"v:Object\", graphid)\n    )\n    let put = new WOQLQuery().put(\n        new WOQLQuery().as(\"Subject\", \"v:Subject\")\n            .as(\"Predicate\", \"v:Predicate\")\n            .as(\"Object\", \"v:Object\")\n            .as(graphid, \"v:Graph\")\n        , woql).file(file)\n    return put\n}\n\nWOQLLibrary.prototype.eatDump = function(file){\n    let get = new WOQLQuery().get(\n        new WOQLQuery().as(\"Subject\", \"v:Subject\")\n            .as(\"Predicate\", \"v:Predicate\")\n            .as(\"Object\", \"v:Object\")\n            .as(graphid, \"v:Graph\"), \n            new WOQLQuery().add_quad(\"v:Subject\", \"v:Predicate\", \"v:Object\", \"v:Graph\")\n        ).file(file)\n    return put\n}\n\nWOQLLibrary.prototype.history = function(dates, branchresource, query){\n    //calculate other resources from branchresource...\n    let parts = branchresource.split(\"/\")\n    let branch = parts[parts.length-1]\n    let repobase = parts.slice(0, parts.length-2).join(\"/\")\n    let cresource = repobase + \"/\" + \"_commits\"\n    let commitbase = repobase + \"/commit/\"\n    if(Array.isArray(dates)){\n        let timestamps = dates.map((item) => this.dateToTimestamp(item))\n        return this.runQueryAtTimes(branch, timestamps, commitbase, cresource, query)\n    }\n    else {\n        return this.runQueryAtTime(branch, this.dateToTimestamp(item), commitbase, cresource, query)\n    }\n}\n\nWOQLLibrary.prototype.pointQueryAtResource = function(query, res){\n    if(res) return new WOQLQuery().using(res, query)\n    return query\n}\n\n\n\n\nmodule.exports = WOQLLibrary;\n","const UTILS = require('./utils.js');\n\n/**\n * @file Terminus Rules\n * @license Apache Version 2\n * Abstract object to support applying matching rules to result sets and documents\n * sub-classes are FrameRule and WOQLRule - this just has common functions\n */\nfunction TerminusRule(){}\n\n/**\n * @param {Boolean} tf - the rule will match all literals or all non-literals\n */\nTerminusRule.prototype.literal = function(tf){\n\tif(typeof tf == \"undefined\"){\n\t\treturn this.pattern.literal;\n\t}\n\tthis.pattern.literal = tf;\n\treturn this;\n}\n\n/**\n * @param {[TYPE_URLS]} list - parameters are types identified by prefixed URLS (xsd:string...)\n */\nTerminusRule.prototype.type = function(...list){\n\tif(typeof list == \"undefined\" || list.length == 0){\n\t\treturn this.pattern.type;\n\t}\n\tthis.pattern.type = list;\n\treturn this;\n}\n\n/**\n * Specifies the scope of a rule - row / cell / object / property / * .. what part of the result does the rule apply to\n */\nTerminusRule.prototype.scope = function(scope){\n\tif(typeof scope == \"undefined\"){\n\t\treturn this.pattern.scope;\n\t}\n\tthis.pattern.scope = scope;\n\treturn this;\n}\n\n/**\n * Specifies that the rule matches a specific value\n */\nTerminusRule.prototype.value = function(...val){\n\tif(typeof val == \"undefined\"){\n\t\treturn this.pattern.value;\n\t}\n\tthis.pattern.value = val;\n\treturn this;\n}\n\n/**\n * Produces a canonical json format to represent the rule\n */\nTerminusRule.prototype.json = function(mjson){\n\tif(!mjson) {\n\t\tvar njson = {};\n\t\tif(this.pattern) njson.pattern = this.pattern.json();\n\t\tif(this.rule) njson.rule = this.rule;\n\t\treturn njson;\n\t}\n\telse {\n\t    if(mjson.pattern) this.pattern.setPattern(mjson.pattern);\n\t\tif(mjson.rule) this.rule = mjson.rule;\n\t}\n\treturn this;\n}\n\n/**\n * Contained Pattern Object to encapsulate pattern matching\n * @param {Object} pattern\n */\nfunction TerminusPattern(pattern){};\n\nTerminusPattern.prototype.setPattern = function(pattern){\n\tif(typeof pattern.literal != \"undefined\") this.literal = pattern.literal;\n\tif(pattern.type) this.type = pattern.type;\n\tif(pattern.scope) this.scope = pattern.scope;\n\tif(pattern.value) this.value = pattern.value;\n}\n\nTerminusPattern.prototype.json = function(){\n    var json = {};\n\tif(typeof this.literal != \"undefined\") json.literal = this.literal;\n\tif(this.type) json.type = this.type;\n    if(this.scope) json.scope = this.scope;\n    if(this.value) json.value = this.value;\n    return json;\n}\n\n/**\n * Tests whether the passed values matches the basic pattern\n */\nTerminusPattern.prototype.testBasics = function(scope, value){\n\tif(this.scope && scope && this.scope != scope) return false;\n\tif(this.type){\n\t\tvar dt = value[\"@type\"];\n\t\tif(!dt || !this.testValue(dt, this.type)) return false;\n\t}\n\tif(typeof this.literal != \"undefined\"){\n\t\tif(!(this.literal == !(typeof value[\"@type\"] == \"undefined\"))) return false;\n\t}\n\tif(typeof this.value != \"undefined\"){\n\t   if(!this.testValue(value, this.value)) return false;\n\t}\n\treturn true;//passed all tests\n}\n\nTerminusPattern.prototype.testValue = function(value, constraint){\n\tvar vundertest = (value['@value'] ? value['@value'] : value);\n\tif(typeof constraint == \"function\") return constraint(vundertest);\n\tif(constraint && !Array.isArray(constraint)) constraint = [constraint];\n\tfor(var i = 0; i<constraint.length; i++){\n\t\tvar nc = constraint[i];\n\t\tif(typeof vundertest == \"string\"){\n\t\t\tif(this.stringMatch(nc, vundertest)) return true;\n\t\t}\n\t\telse if(typeof vundertest == \"number\"){\n\t\t\tif(this.numberMatch(nc, vundertest)) return true;\n\t\t}\n\t}\n\treturn false;\n}\n\n/**\n * Unpacks an array into a list of arguments\n * @param {Boolean} nonstring - if set, the values will be double-quoted only when they are strings, otherwise, all will be quoted as strings\n */\nTerminusPattern.prototype.unpack = function(arr, nonstring){\n\tvar str = \"\";\n\tif(nonstring){\n\t\tfor(var i = 0 ; i<arr.length; i++){\n\t\t\tif(typeof arr[i] == \"string\"){\n\t\t\t\tstr += '\"' + arr[i] + '\"';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstr += arr[i];\n\t\t\t}\n\t\t\tif(i < (arr.length - 1)) str += \", \";\n\t\t}\n\t}\n\telse {\n\t\tstr = '\"' + arr.join('\",\"') + '\"';\n\t}\n\treturn str;\n}\n\n\nTerminusPattern.prototype.IDsMatch = function (ida, idb) {\n\treturn UTILS.compareIDs(ida, idb);\n};\n\nTerminusPattern.prototype.classIDsMatch = function (ida, idb) {\n\treturn this.IDsMatch(ida, idb);\n};\n\nTerminusPattern.prototype.propertyIDsMatch = function (ida, idb) {\n\tconst match = this.IDsMatch(ida, idb);\n\treturn match;\n};\n\nTerminusPattern.prototype.rangeIDsMatch = function (ida, idb) {\n\treturn this.IDsMatch(ida, idb);\n};\n\nTerminusPattern.prototype.valuesMatch = function (vala, valb) {\n\treturn vala == valb;\n};\nTerminusPattern.prototype.numberMatch = function (vala, valb) {\n\tif (typeof vala === 'string') {\n\t\ttry {\n\t\t\treturn eval(valb + vala);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn vala === valb;\n};\n\nTerminusPattern.prototype.stringMatch = function (vala, valb) {\n\tif(vala.substring(0,1) == \"/\"){\n\t\tconst pat = new RegExp(vala.substring(1));\n\t\treturn pat.test(valb);\n\t}\n\telse {\n\t\treturn vala === valb;\n\t}\n};\n\n\n module.exports = {TerminusRule, TerminusPattern};\n","const Config  = require('./viewConfig.js');\nconst WOQLTable  = require('./woqlTable.js');\nconst UTILS  = require('../utils.js');\n\n\nfunction WOQLTableConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"table\";\n}\n\nWOQLTableConfig.prototype = Object.create(Config.ViewConfig.prototype);\nWOQLTableConfig.prototype.constructor = Config.ViewConfig;\n\nWOQLTableConfig.prototype.create = function(client){\n\tvar wqt = new WOQLTable(client, this);\n\treturn wqt;\n}\n\nWOQLTableConfig.prototype.json = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\tvar conf = {};\n\tif(typeof this.column_order() != \"undefined\"){\n\t\tconf['column_order'] = this.column_order();\n\t}\n\tif(typeof this.pagesize() != \"undefined\"){\n\t\tconf['pagesize'] = this.pagesize();\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tconf['renderer'] = this.renderer();\n\t}\n\tif(typeof this.pager() != \"undefined\"){\n\t\tconf['pager'] = this.pager();\n\t}\n\tif(typeof this.page() != \"undefined\"){\n\t\tconf['page'] = this.page();\n\t}\n\tif(typeof this.changesize() != \"undefined\"){\n\t\tconf['changesize'] = this.changesize();\n\t}\n\tlet mj = {\"table\" :conf, \"rules\": jr};\n\treturn mj;\n}\n\nWOQLTableConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLTableRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(typeof config.column_order != \"undefined\"){\n\t\tthis.column_order(...config.column_order);\n\t}\n\tif(typeof config.pagesize != \"undefined\"){\n\t\tthis.pagesize(config.pagesize);\n\t}\n\tif(typeof config.renderer != \"undefined\"){\n\t\tthis.renderer(config.renderer);\n\t}\n\tif(typeof config.pager != \"undefined\"){\n\t\tthis.pager(config.pager);\n\t}\n\tif(typeof config.page != \"undefined\"){\n\t\tthis.page(config.page);\n\t}\n\tif(typeof config.changesize != \"undefined\"){\n\t\tthis.changesize(config.changesize);\n    }\n    return this;\n}\n\nWOQLTableConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = View.table();\\n\";\n\tif(typeof this.column_order() != \"undefined\"){\n\t\tstr += \"view.column_order('\" + this.column_order() + \"')\\n\";\n\t}\n\tif(typeof this.pagesize() != \"undefined\"){\n\t\tstr += \"view.pagesize(\" + this.pagesize() + \")\\n\";\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \"view.renderer('\" + this.renderer() + \"')\\n\";\n\t}\n\tif(typeof this.pager() != \"undefined\"){\n\t\tstr += \"view.pager(\" + this.pager() + \")\\n\";\n\t}\n\tif(typeof this.page() != \"undefined\"){\n\t\tstr += \"view.page(\" + this.page() + \")\\n\";\n\t}\n    if(typeof this.changesize() != \"undefined\"){\n        str += \"view.changesize(\" + this.changesize() + \")\\n\";\n    }\n    \n    for(var i = 0; i<this.rules.length ; i++){\n\t\tlet x = this.rules[i].prettyPrint();\n\t\tif(x) str += \"view.\" + x + \"\\n\";\t\t\n\t}\n\treturn str;\n}\n\nWOQLTableConfig.prototype.renderer = function(rend){\n\tif(!rend) return this.trenderer;\n\tthis.trenderer = rend;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.header = function(theader){\n\tif(typeof theader == \"undefined\") return this.theader;\n\tthis.theader = theader;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.column_order = function(...val){\n\tif(typeof val == \"undefined\" || val.length == 0){\n\t\treturn this.order;\n\t}\n\tthis.order = UTILS.removeNamespacesFromVariables(val);\n\treturn this;\n}\n\nWOQLTableConfig.prototype.pager = function(val){\n\tif(typeof val == \"undefined\"){\n\t\treturn this.show_pager;\n\t}\n\tthis.show_pager = val;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.changesize = function(val){\n    if(typeof val == \"undefined\") return this.change_pagesize;\n    this.change_pagesize = val;\n    return this;\n}\n\n\nWOQLTableConfig.prototype.pagesize = function(val){\n\tif(typeof val == \"undefined\"){\n\t\treturn this.show_pagesize;\n\t}\n\tthis.show_pagesize = val;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.page = function(val){\n\tif(typeof val == \"undefined\"){\n\t\treturn this.show_pagenumber;\n\t}\n\tthis.show_pagenumber = val;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.column = function(...cols){\n\tlet nr = new WOQLTableRule().scope(\"column\");\n\tnr.setVariables(cols);\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\nWOQLTableConfig.prototype.row = function(){\n\tlet nr = new WOQLTableRule().scope(\"row\");\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\n/*\n * Table\n */\n\n \nfunction WOQLTableRule(){\n\tConfig.WOQLViewRule.call(this); \n};\n\nWOQLTableRule.prototype = Object.create(Config.WOQLViewRule.prototype);\nWOQLTableRule.prototype.constructor = Config.WOQLViewRule;\n\nWOQLTableRule.prototype.header = function(hdr){\n\tif(typeof hdr == \"undefined\"){\n\t\treturn this.rule.header;\n\t}\n\tthis.rule.header = hdr;\n\treturn this;\n}\n\nWOQLTableRule.prototype.prettyPrint = function(type){\n\tvar str = Config.WOQLViewRule.prototype.prettyPrint.apply(this);\n    if(typeof this.header() != \"undefined\"){\n\t    str += \".header(\" + this.header() + \")\";\n\t}\n\treturn str;\n}\n\nmodule.exports = WOQLTableConfig;","const WOQLTableConfig = require(\"./tableConfig\");\nconst UTILS = require('../utils');\nconst WOQLRule = require('../woqlRule');\nconst WOQLResult = require('../woqlResult');\n\n/**\n * @file WOQL Table \n * @license Apache Version 2 \n */\n\nfunction WOQLTable(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new WOQLTableConfig());\n\treturn this;\n}\n\nWOQLTable.prototype.options = function(config){\n\tthis.config = config;\n\treturn this;\n}\n\nWOQLTable.prototype.setResult = function(res){\n\tthis.result = res;\n\treturn this;\n}\n\nWOQLTable.prototype.count = function(){\n\treturn this.result.count();\n}\n\nWOQLTable.prototype.first = function(){\n\treturn this.result.first();\n}\n\nWOQLTable.prototype.prev = function(){\n\treturn this.result.prev();\n}\n\nWOQLTable.prototype.next = function(){\n\treturn this.result.next();\n}\n\nWOQLTable.prototype.canAdvancePage = function(){\n\treturn (this.result.count() == this.result.query.getLimit()); \n}\n\nWOQLTable.prototype.canChangePage = function(){\n\treturn this.canAdvancePage() || this.canRetreatPage();\n}\n\nWOQLTable.prototype.canRetreatPage = function(){\n\treturn (this.result.query.getPage() > 1);\n}\n\nWOQLTable.prototype.getPageSize = function(){\n\treturn this.result.query.getLimit() ;\t\n}\n\nWOQLTable.prototype.setPage = function(l){\n\treturn this.result.query.setPage(l);\t\n}\n\nWOQLTable.prototype.getPage = function(){\n\treturn this.result.query.getPage();\t\n}\n\nWOQLTable.prototype.setPageSize = function(l){\n\treturn this.update(this.result.query.setPageSize(l));\n}\n\nWOQLTable.prototype.nextPage = function(){\n\treturn this.update(this.result.query.nextPage());\n}\n\nWOQLTable.prototype.firstPage = function(){\n\treturn this.update(this.result.query.firstPage());\n}\n\nWOQLTable.prototype.previousPage = function(){\n\treturn this.update(this.result.query.previousPage());\n}\n\nWOQLTable.prototype.getColumnsToRender = function(){\n\tif(this.hasColumnOrder()){\n\t\tvar cols = this.getColumnOrder();\n\t}\n\telse if(this.result.query.hasSelect()){\n\t\tvar cols = this.result.query.getSelectVariables();\n\t}\n\telse {\n\t\tvar cols = this.result.getVariableList();\n\t}\n\tvar self = this;\n\treturn (cols ? cols.filter(col => !self.hidden(col)) : []);\n}\n\nWOQLTable.prototype.isSortableColumn = function(){\n    return true\n}\n\nWOQLTable.prototype.isFilterableColumn = function(){\n    return true\n}\n\n\nWOQLTable.prototype.getColumnHeaderContents = function(colid){\n\tcolid = UTILS.removeNamespaceFromVariable(colid);\n\tlet hr = new WOQLRule().matchColumn(this.config.rules, colid, \"header\");\n\tif(hr && hr.length){\n\t\tlet h = hr[hr.length-1].rule.header;\n\t\tif(typeof h == \"string\"){\n\t\t\treturn h;// document.createTextNode(h);\t\t\t\n\t\t}\n\t\telse if(typeof h == \"function\"){\n\t\t\treturn h(colid);\n\t\t}\n\t\telse return h;\n\t}\n\treturn UTILS.labelFromVariable(colid);\n\t//return document.createTextNode(clab);\n}\n\n\nWOQLTable.prototype.hidden = function(col){\n\tcolid = UTILS.addNamespaceToVariable(col);\n\tlet matched_rules = new WOQLRule().matchColumn(this.config.rules, colid, \"hidden\");\n\tif(matched_rules.length){\n\t\treturn matched_rules[matched_rules.length-1].rule.hidden;\n\t}\n\treturn false;\n}\n\n/**\n * Called when you want to change the query associated with the table. \n */\nWOQLTable.prototype.update = function(nquery){\n\treturn nquery.execute(this.client).then((results) => {\n\t\tvar nresult = new WOQLResult(results, nquery);\n\t\tthis.setResult(nresult);\n\t\tif(this.notify) this.notify(nresult);\n\t\treturn nresult;\n\t});\t\n}\n\nWOQLTable.prototype.hasDefinedEvent = function(row, key, scope, action, rownum){\n\tif(scope == \"row\"){\n\t\tvar matched_rules = new WOQLRule().matchRow(this.config.rules, row, this.result.cursor, action);\t\n\t}\n\telse {\n\t\tvar matched_rules = new WOQLRule().matchCell(this.config.rules, row, key, this.result.cursor, action);\t\n\t}\n\tif(matched_rules && matched_rules.length) return true;\n\treturn false;\n}\n\nWOQLTable.prototype.getDefinedEvent = function(row, key, scope, action, rownum){\n\tif(scope == \"row\"){\n\t\tvar matched_rules = new WOQLRule().matchRow(this.config.rules, row, this.result.cursor, action);\t\n\t}\n\telse {\n\t\tvar matched_rules = new WOQLRule().matchCell(this.config.rules, row, key, this.result.cursor, action);\t\n\t}\n\tif(matched_rules && matched_rules.length) {\n\t\tvar l = (matched_rules.length - 1);\n\t\treturn matched_rules[l].rule[action];\n\t}\n}\n\nWOQLTable.prototype.getRowClick = function(row){\n\tlet re = this.getDefinedEvent(row, false, \"row\", \"click\");\n\treturn re;\n}\n\nWOQLTable.prototype.getCellClick = function(row, col){\n\tlet cc = this.getDefinedEvent(row, col, \"column\", \"click\");\n\treturn cc;\n}\n\nWOQLTable.prototype.getRowHover = function(row){\n\treturn this.getDefinedEvent(row, false, \"row\", \"hover\");\n}\n\nWOQLTable.prototype.getCellHover = function(row, key){\n\treturn this.getDefinedEvent(row, key, \"column\", \"hover\");\n}\n\nWOQLTable.prototype.getColumnOrder = function(){\n\treturn this.config.column_order();\n}\n\nWOQLTable.prototype.hasColumnOrder = WOQLTable.prototype.getColumnOrder;\nWOQLTable.prototype.hasCellClick = WOQLTable.prototype.getCellClick;\nWOQLTable.prototype.hasRowClick = WOQLTable.prototype.getRowClick;\nWOQLTable.prototype.hasCellHover = WOQLTable.prototype.getCellHover;\nWOQLTable.prototype.hasRowHover = WOQLTable.prototype.getRowHover;\n\nWOQLTable.prototype.getRenderer = function(key, row, rownum){\n\tvar rend = this.getSpecificRender(key, row);\n\tif(rend) return rend;\n\tlet renderer = this.getDefinedEvent(row, key, \"column\", \"renderer\", rownum);\n\tlet args =  this.getDefinedEvent(row, key, \"column\", \"args\", rownum);\n\tif(!renderer){\n\t\tlet r = this.getRendererForDatatype(row[key]);\n\t\trenderer = r.name;\n\t\tif(!args) args = r.args;\n\t}\n\tif(renderer){\n\t\treturn this.datatypes.createRenderer(renderer, args);\t\t\n\t}\n}\n\nWOQLTable.prototype.renderValue = function(renderer, val, key, row){\n\tif(val && val['@type']){\n\t\trenderer.type = val['@type'];\n\t\tvar dv = new DataValue(val['@value'], val['@type'], key, row);\n\t}\t\n\telse if(val && val['@language']){\n\t\trenderer.type = \"xsd:string\";\n\t\tvar dv = new DataValue(val['@value'], renderer.type, key, row);\n\t}\n\telse if(val && typeof val == \"string\"){\n\t\trenderer.type = \"id\";\n\t\tvar dv = new DataValue(val, \"id\", key, row);\n\t}\n\tif(dv) return renderer.renderValue(dv);\n\treturn \"\";\n}\n\nfunction DataValue(val, type){\n\tthis.datavalue = (val == \"terminus:unknown\" ? \"\" : val);\n\tthis.datatype = type;\n}\n\nDataValue.prototype.value = function(nvalue){\n\tif(nvalue) {\n\t\tthis.datavalue = nvalue; \n\t\treturn this;\n\t}\n\treturn this.datavalue;\n}\n\n\nWOQLTable.prototype.getRendererForDatatype = function(val){\n\tif(val && val['@type']){\n\t\treturn this.datatypes.getRenderer(val['@type'], val['@value']);\n\t}\n\telse if(val && val['@language']){\n\t\treturn this.datatypes.getRenderer(\"xsd:string\", val['@value']);\n\t}\n\telse if(val && typeof val == \"string\"){\n\t\treturn this.datatypes.getRenderer(\"id\", val);\t\t\n\t}\n\treturn false;\n}\n\nWOQLTable.prototype.getSpecificRender = function(key, row){\n\tlet rend = this.getDefinedEvent(row, key, \"column\", \"render\");\n\treturn rend;\n}\n\nmodule.exports = WOQLTable;","const Config  = require('./viewConfig.js');\nconst WOQLChooser  = require('./woqlChooser.js');\nconst UTILS = require('../utils');\n\nfunction WOQLChooserConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"chooser\";\n}\n\nWOQLChooserConfig.prototype = Object.create(Config.ViewConfig.prototype);\nWOQLChooserConfig.prototype.constructor = Config.ViewConfig;\n\nWOQLChooserConfig.prototype.create = function(client){\n\tvar wqt = new WOQLChooser(client, this);\n\treturn wqt;\n}\n\nWOQLChooserConfig.prototype.prettyPrint = function(){\n    var str = \"view = View.chooser();\\n\";\n    str += this.getBasicPrettyPrint();\n\tif(typeof this.change() != \"undefined\"){\n\t\tstr += \"view.change(\" + this.change() + \")\\n\";\n\t}\n\tif(typeof this.show_empty() != \"undefined\"){\n\t\tstr += \"view.show_empty('\" + this.show_empty() + \"')\\n\";\n\t}\n\tif(typeof this.values() != \"undefined\"){\n\t\tstr += \"view.values('\" + UTILS.removeNamespaceFromVariable(this.values()) + \"')\\n\";\n\t}\n\tif(typeof this.labels() != \"undefined\"){\n\t\tstr += \"view.labels('\" + UTILS.removeNamespaceFromVariable(this.labels()) + \"')\\n\";\n\t}\n\tif(typeof this.titles() != \"undefined\"){\n\t\tstr += \"view.titles('\" + UTILS.removeNamespaceFromVariable(this.titles()) + \"')\\n\";\n\t}\n\tif(typeof this.sort() != \"undefined\"){\n\t\tstr += \"view.sort(\" + this.sort() + \")\\n\";\n\t}\n\tif(typeof this.direction() != \"undefined\"){\n\t\tstr += \"view.direction('\" + this.direction() + \"')\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint(\"chooser\") + \"\\n\";\n\t}\n\treturn str;\n}\n\nWOQLChooserConfig.prototype.json = function(){\n\tvar conf = this.getBasicJSON();\n\tif(typeof this.change() != \"undefined\"){\n\t\tconf['change'] = this.change();\n\t}\n\tif(typeof this.show_empty() != \"undefined\"){\n\t\tconf['show_empty'] = this.show_empty();\n\t}\n\tif(typeof this.values() != \"undefined\"){\n\t\tconf['values'] = this.values();\n\t}\n\tif(typeof this.labels() != \"undefined\"){\n\t\tconf['labels'] = this.labels();\n\t}\n\tif(typeof this.titles() != \"undefined\"){\n\t\tconf['titles'] = this.titles();\n\t}\n\tif(typeof this.sort() != \"undefined\"){\n\t\tconf['sort'] = this.sort();\n\t}\n\tif(typeof this.direction() != \"undefined\"){\n\t\tconf['direction'] = this.direction();\n\t}\n\tlet mj = {\"chooser\" :conf, \"rules\": this.getRulesJSON()};\n\treturn mj;\n}\n\nWOQLChooserConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLChooserRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n    this.rules = jr;\n    this.loadBasicJSON(config);\n\tif(typeof config.change != \"undefined\"){\n\t\tthis.change(config.change);\n\t}\n\tif(typeof config.show_empty != \"undefined\"){\n\t\tthis.show_empty(config.show_empty);\n\t}\n\tif(typeof config.values != \"undefined\"){\n\t\tthis.values(config.values);\n\t}\n\tif(typeof config.labels != \"undefined\"){\n\t\tthis.labels(config.labels);\n\t}\n\tif(typeof config.titles != \"undefined\"){\n\t\tthis.titles(config.titles);\n\t}\n\tif(typeof config.sort != \"undefined\"){\n\t\tthis.sort(config.sort);\n\t}\n\tif(typeof config.direction != \"undefined\"){\n\t\tthis.direction(config.direction);\n\t}\n}\n\nWOQLChooserConfig.prototype.change = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.onChange = v;\n\t\treturn this;\n\t}\n\treturn this.onChange;\n}\n\nWOQLChooserConfig.prototype.show_empty = function(p){\n\tif(typeof p != \"undefined\"){\n\t\tthis.placeholder = p;\n\t\treturn this;\n\t}\n\treturn this.placeholder;\n}\n\nWOQLChooserConfig.prototype.rule = function(v){\n\tlet nr = new WOQLChooserRule().scope(\"row\");\n    this.rules.push(nr);\n    if(v) nr.vars(v);\n    //if(v) nr.v(v);\n    return nr;\n}\n\nWOQLChooserConfig.prototype.values = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tif(v.substring(0, 2) == \"v:\") v = v.substring(2);\n\t\tthis.value_variable = v;\n\t\treturn this;\n\t}\n\treturn this.value_variable;\n}\n\nWOQLChooserConfig.prototype.labels = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) == \"v:\") v = v.substring(2);\n\t\tthis.label_variable = v;\n\t\treturn this;\n\t}\n\treturn this.label_variable;\n}\n\nWOQLChooserConfig.prototype.titles = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) == \"v:\") v = v.substring(2);\n\t\tthis.title_variable = v;\n\t\treturn this;\n\t}\n\treturn this.title_variable;\n}\n\nWOQLChooserConfig.prototype.sort = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) == \"v:\") v = v.substring(2);\n\t\tthis.sort_variable = v;\n\t\treturn this;\n\t}\n\treturn this.sort_variable;\n}\n\nWOQLChooserConfig.prototype.direction = function(v){\n\tif(v){\n\t\tthis.sort_direction = v;\n\t\treturn this;\n\t}\n\treturn this.sort_direction;\n}\n\n\nfunction WOQLChooserRule(scope){\n\tConfig.WOQLViewRule.call(this,scope); \n};\n\nWOQLChooserRule.prototype = Object.create(Config.WOQLViewRule.prototype);\nWOQLChooserRule.prototype.constructor = Config.WOQLViewRule;\n\nWOQLChooserRule.prototype.label = function(l){\n\tif(l){\n\t\tthis.rule.label = l;\n\t\treturn this;\n\t}\n\treturn this.rule.label;\n}\n\nWOQLChooserRule.prototype.title = function(l){\n\tif(l){\n\t\tthis.rule.title = l;\n\t\treturn this;\n\t}\n\treturn this.rule.title;\n}\n\nWOQLChooserRule.prototype.values = function(l){\n\tif(l){\n\t\tthis.rule.values = l;\n\t\treturn this;\n\t}\n\treturn this.rule.values;\n}\n\nWOQLChooserRule.prototype.selected = function(s){\n\tif(typeof s != \"undefined\"){\n\t\tthis.rule.selected = s;\n\t\treturn this;\n\t}\n\treturn this.rule.selected;\n}\n\nWOQLChooserRule.prototype.prettyPrint = function(type){\n\tvar str = WOQLViewRule.prototype.prettyPrint.apply(this);\n    if(typeof this.selected() != \"undefined\"){\n\t    str += \".selected(\" + this.selected() + \")\";\n    }\n    if(typeof this.label() != \"undefined\"){\n\t    str += \".label(\\\"\" + this.label() + \"\\\")\";\n    }\n    if(typeof this.title() != \"undefined\"){\n\t    str += \".title(\\\"\" + this.title() + \"\\\")\";\n    }\n    if(typeof this.values() != \"undefined\"){\n\t    str += \".values(\\\"\" + this.values() + \"\\\")\";\n\t}\n\treturn str;\n}\n\nmodule.exports = WOQLChooserConfig;","const WOQLChooserConfig = require(\"./chooserConfig\");\nconst UTILS = require('../utils');\nconst WOQLRule = require('../woqlRule');\n\n/*\n * Very simple implementation of a WOQL backed chooser\n * Makes a drop down from a WOQL query - configuration tells it which columns to use...\n */\nfunction WOQLChooser(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new WOQLChooserConfig());\n\tthis.selected = false;\n\tthis.cursor = 0;\n\treturn this;\n}\n\nWOQLChooser.prototype.options = function(config){\n\tthis.config = config;\n\treturn this;\n}\n\nWOQLChooser.prototype.set = function(id){\n\tif(this.selected != id){\n\t\tthis.selected = id;\n\t\tlet ch = this.config.change;\n\t\tif(ch) ch(id);\n\t}\n}\n\n/*\n * Sets up the required variables from the result / config\n */\nWOQLChooser.prototype.setResult = function(result){\n\tthis.result = result;\n\tthis.choices = [];\n\tlet rows = 0;\n\tconst variables = result.getVariableList();\n\tif(!this.config.values() && variables.length){\n\t\tthis.config.values(variables[0]);\n\t}\n\t//sort it \n\tif(this.config.sort()){\n\t\tthis.result.sort(this.config.sort(), this.config.direction());\n\t}\n\twhile(row = this.result.next()){\n\t\tif(row && this.includeRow(row, this.result.cursor)){\n\t\t\tthis.choices.push(this.rowToChoice(row, rows++));\n\t\t}\t\t\n\t}\n\treturn this;\n}\n\nWOQLChooser.prototype.includeRow = function(row, index){\n\tconst matched_rules = new WOQLRule().matchRow(this.config.rules, row, index, \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].rule.hidden) return false;\n\t}\n\treturn true;\n}\n\nWOQLChooser.prototype.rowToChoice = function(row, rownum){\n\tvar choice = { \n\t\tid: this.getRowID(row) \n\t};\n\tchoice.label = this.getLabelFromBinding(row, rownum);\n\tchoice.title = this.getTitleFromBinding(row, rownum);\n\tchoice.selected = this.getSelectedFromBinding(row, rownum);\n\treturn choice;\n}\n\nWOQLChooser.prototype.getRowID = function(row){\n\tvar rval = row[this.config.values()];\n\tif(rval['@value']) return rval['@value'];\n\treturn rval;\n}\n\nWOQLChooser.prototype.getLabelFromBinding = function(row, rownum){\n\tlet sp = this.getSpecialRenderer(row, rownum, \"label\");\n\tif(sp) return this.renderSpecial(sp, row, rownum);\n\tif(this.config.labels()){\n\t\tif(row[this.config.labels()]){\n\t\t\tvar lab = row[this.config.labels()];\n\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\n\t\t\tif(lab != \"terminus:unknown\") return lab;\n\t\t}\n\t}\n\treturn UTILS.labelFromURL(this.getRowID(row));\n}\n\nWOQLChooser.prototype.getTitleFromBinding = function(row, rownum){\n\tlet sp = this.getSpecialRenderer(row, rownum, \"title\");\n\tif(sp) return this.renderSpecial(sp, row, rownum);\n\tif(this.config.titles()){\n\t\tif(row[this.config.titles()]){\n\t\t\tvar lab = row[this.config.titles()];\n\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\n\t\t\tif(lab != \"terminus:unknown\") return lab;\n\t\t}\n\t}\n\treturn false;\n}\n\nWOQLChooser.prototype.getSelectedFromBinding = function(row, rownum){\n\tconst matched_rules =  new WOQLRule().matchRow(this.config.rules, row, rownum, \"selected\");\n\tif(matched_rules && matched_rules.length){\n\t\treturn matched_rules[matched_rules.length - 1].rule.selected;\n\t}\n\treturn false;\n}\n\nWOQLChooser.prototype.render = function(){\n\tif(this.renderer) return this.renderer.render(this);\n}\n\nWOQLChooser.prototype.setRenderer = function(rend){\n\tthis.renderer = rend;\n\treturn this;\n}\n\nWOQLChooser.prototype.getSpecialRenderer = function(row, index, type){\n\tconst matched_rules =  new WOQLRule().matchRow(this.config.rules, row, index, type);\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].rule[type]) return matched_rules[i].rule[type];\n\t}\n\treturn false;\n}\n\nWOQLChooser.prototype.renderSpecial = function(rule, row, rownum){\n\tif(rule && typeof rule == \"function\"){\n\t\treturn rule(row);\n\t}\n\tif(rule && typeof rule == \"string\"){\n\t\treturn rule;\n\t}\n}\n\nWOQLChooser.prototype.count = function(){\n\treturn this.result.count();\n}\n\nWOQLChooser.prototype.first = function(){\n\tthis.cursor = 0;\n\treturn this.choices[this.cursor];\n}\n\nWOQLChooser.prototype.next = function () {\n\tconst res = this.choices[this.cursor];\n\tthis.cursor++;\n\treturn res;\n};\n\nWOQLChooser.prototype.prev = function () {\n\tif (this.cursor > 0) {\n\t\tthis.cursor--;\n\t\treturn this.choices[this.cursor];\n\t}\n};\n\nmodule.exports = WOQLChooser;","const Config  = require('./viewConfig.js');\nconst WOQLGraph  = require('./woqlGraph.js');\nconst UTILS  = require('../utils.js');\n\nfunction WOQLGraphConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"graph\";\n}\n\nWOQLGraphConfig.prototype = Object.create(Config.ViewConfig.prototype);\nWOQLGraphConfig.prototype.constructor = Config.ViewConfig;\n\nWOQLGraphConfig.prototype.create = function(client){\n\tvar wqt = new WOQLGraph(client, this);\n\treturn wqt;\n}\n\nWOQLGraphConfig.prototype.literals = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.show_literals = v;\n\t\treturn this;\n\t}\n\treturn this.show_literals;\n}\n\nWOQLGraphConfig.prototype.source = function(v){\n\tif(v){\n\t\t//if(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.source_variable = UTILS.removeNamespaceFromVariable(v)\n\t\treturn this;\n\t}\n\treturn this.source_variable;\n}\n\nWOQLGraphConfig.prototype.fontfamily = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.fontfam = v;\n\t\treturn this;\n\t}\n\t//return 'Font Awesome 5 Free';\n\treturn this.fontfam;\n}\n\nWOQLGraphConfig.prototype.show_force = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.force = v;\n\t\treturn this;\n\t}\n\treturn this.force;\n}\n\nWOQLGraphConfig.prototype.fix_nodes = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.fixed = v;\n\t\treturn this;\n\t}\n\treturn this.fixed;\n}\n\nWOQLGraphConfig.prototype.explode_out = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.explode = v;\n\t\treturn this;\n\t}\n\treturn this.explode;\n}\n\nWOQLGraphConfig.prototype.selected_grows = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.bigsel = v;\n\t\treturn this;\n\t}\n\treturn this.bigsel;\n}\n\n/**\n * no parameter get the graph width or\n * set the graph width and return the WOQLGraphConfig\n * @param {size} Number\n */\n\nWOQLGraphConfig.prototype.width = function(size){\n\tif(typeof size != \"undefined\"){\n\t\tthis.gwidth = size;\n\t\treturn this;\n\t}\n\treturn this.gwidth;\n}\n\n/**\n * no parameter get the graph height or\n * set the graph height and return the WOQLGraphConfig\n * @param {size} Number\n */\n\nWOQLGraphConfig.prototype.height = function(size){\n\tif(typeof size != \"undefined\"){\n\t\tthis.gheight = size;\n\t\treturn this;\n\t}\n\treturn this.gheight;\n}\n\nWOQLGraphConfig.prototype.edges = function(...edges){\n\tif(edges && edges.length){\n\t\tvar nedges = [];\n\t\tfor(var i = 0; i<edges.length; i++){\n\t\t\tnedges.push(UTILS.removeNamespacesFromVariables(edges[i]));\n\t\t}\n\t\tthis.show_edges = nedges;\n\t\treturn this;\n\t}\n\treturn this.show_edges;\n}\n\nWOQLGraphConfig.prototype.edge = function(source, target){\n\tlet nr = new WOQLGraphRule().edge(source, target);\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\nWOQLGraphConfig.prototype.node = function(...cols){\n\tlet nr = new WOQLGraphRule();\n\tif(cols && cols.length){\n\t\tnr.scope(\"node\").setVariables(cols);\n\t}\n\telse {\n\t\tnr.scope(\"row\");\n\t}\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\nWOQLGraphConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLGraphRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(typeof config.literals != \"undefined\"){\n\t\tthis.literals(config.literals);\n\t}\n\tif(typeof config.source != \"undefined\"){\n\t\tthis.source(config.source);\n\t}\n\tif(typeof config.fontfamily != \"undefined\"){\n\t\tthis.fontfamily(config.fontfamily);\n\t}\n\tif(typeof config.show_force != \"undefined\"){\n\t\tthis.show_force(config.show_force);\n\t}\n\tif(typeof config.fix_nodes != \"undefined\"){\n\t\tthis.fix_nodes(config.fix_nodes);\n\t}\n\tif(typeof config.explode_out != \"undefined\"){\n\t\tthis.explode_out(config.explode_out);\n\t}\n\tif(typeof config.selected_grows != \"undefined\"){\n\t\tthis.selected_grows(config.selected_grows);\n\t}\n\tif(typeof config.width != \"undefined\"){\n\t\tthis.width(config.width);\n\t}\n\tif(typeof config.height != \"undefined\"){\n\t\tthis.height(config.height);\n\t}\n\tif(typeof config.edges != \"undefined\"){\n\t\tthis.edges(...config.edges);\n\t}\n}\n\nWOQLGraphConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = View.graph();\\n\";\n\tif(typeof this.literals() != \"undefined\"){\n\t\tstr += \"view.literals('\" + this.literals() + \"')\\n\";\n\t}\n\tif(typeof this.source() != \"undefined\"){\n\t\tstr += \"view.source('\" + UTILS.removeNamespaceFromVariable(this.source()) + \"')\\n\";\n\t}\n\tif(typeof this.fontfamily() != \"undefined\"){\n\t\tstr += \"view.fontfamily('\" + this.fontfamily() + \"')\\n\";\n\t}\n\tif(typeof this.show_force() != \"undefined\"){\n\t\tstr += \"view.show_force('\" + this.show_force() + \"')\\n\";\n\t}\n\tif(typeof this.fix_nodes() != \"undefined\"){\n\t\tstr += \"view.fix_nodes('\" + this.fix_nodes() + \"')\\n\";\n\t}\n\tif(typeof this.explode_out() != \"undefined\"){\n\t\tstr += \"view.explode_out('\" + this.explode_out() + \"')\\n\";\n\t}\n\tif(typeof this.selected_grows() != \"undefined\"){\n\t\tstr += \"view.selected_grows('\" + this.selected_grows() + \"')\\n\";\n\t}\n\tif(typeof this.width() != \"undefined\"){\n\t\tstr += \"view.width('\" + this.width() + \"')\\n\";\n\t}\n\tif(typeof this.height() != \"undefined\"){\n\t\tstr += \"view.height('\" + this.height() + \"')\\n\";\n\t}\n\tif(typeof this.edges() != \"undefined\"){\n\t\tvar nedges = this.edges();\n\t\tvar estrs = [];\n\t\tfor(var i = 0; i<nedges.length; i++){\n\t\t\testrs.push(\"['\" + nedges[i][0] + \", \" + nedges[i][1] + \"']\");\n\t\t}\n\t\tstr += \"view.edges('\" + estrs.join(\", \") + \"')\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tlet x = this.rules[i].prettyPrint();\n\t\tif(x) str += \"view.\" + x + \"\\n\";\t\t\n\t}\n\treturn str;\n}\n\nWOQLGraphConfig.prototype.json = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\tvar json = {};\n\tif(typeof this.literals() != \"undefined\"){\n\t\tjson['literals'] = this.literals();\n\t}\n\tif(typeof this.source() != \"undefined\"){\n\t\tjson['source'] = this.source();\n\t}\n\tif(typeof this.fontfamily() != \"undefined\"){\n\t\tjson['fontfamily'] = this.fontfamily();\n\t}\n\tif(typeof this.show_force() != \"undefined\"){\n\t\tjson['show_force'] = this.show_force();\n\t}\n\tif(typeof this.fix_nodes() != \"undefined\"){\n\t\tjson['fix_nodes'] = this.fix_nodes();\n\t}\n\tif(typeof this.explode_out() != \"undefined\"){\n\t\tjson['explode_out'] = this.explode_out();\n\t}\n\tif(typeof this.selected_grows() != \"undefined\"){\n\t\tjson['selected_grows'] = this.selected_grows();\n\t}\n\tif(typeof this.width() != \"undefined\"){\n\t\tjson['width'] = this.width();\n\t}\n\tif(typeof this.height() != \"undefined\"){\n\t\tjson['height'] = this.height();\n\t}\n\tif(typeof this.edges() != \"undefined\"){\n\t\tjson['edges'] = this.edges();\n\t}\n\tlet mj = {\"graph\" :json, \"rules\": jr};\n\treturn mj;\n}\n\nfunction WOQLGraphRule(scope){\n\tConfig.WOQLViewRule.call(this,scope); \n};\n\nWOQLGraphRule.prototype = Object.create(Config.WOQLViewRule.prototype);\nWOQLGraphRule.prototype.constructor = Config.WOQLViewRule;\n\nWOQLGraphRule.prototype.charge = function(v){\n\tif(typeof v == \"undefined\"){\n\t\treturn this.rule.charge;\n\t}\n\tthis.rule.charge = v;\n\treturn this;\n}\n\nWOQLGraphRule.prototype.collisionRadius = function(v){\n\tif(typeof v == \"undefined\"){\n\t\treturn this.rule.collisionRadius;\n\t}\n\tthis.rule.collisionRadius = v;\n\treturn this;\n}\n\nWOQLGraphRule.prototype.arrow = function(json){\n\tif(json){\n\t\tthis.rule.arrow = json;\n\t\treturn this;\n\t}\n\treturn this.rule.arrow;\n}\n\nWOQLGraphRule.prototype.distance = function(d){\n\tif(typeof d != \"undefined\"){\n\t\tthis.rule.distance = d;\n\t\treturn this;\n\t}\n\treturn this.rule.distance;\n}\n\nWOQLGraphRule.prototype.symmetric = function(d){\n\tif(typeof d != \"undefined\"){\n\t\tthis.rule.symmetric = d;\n\t\treturn this;\n\t}\n\treturn this.rule.symmetric ;\n}\n\n\nWOQLGraphRule.prototype.weight = function(w){\n\tif(typeof w != \"undefined\"){\n\t\tthis.rule.weight = w;\n\t\treturn this;\n\t}\n\treturn this.rule.weight;\n}\n\nWOQLGraphRule.prototype.prettyPrint = function(type){\n\tvar str = Config.WOQLViewRule.prototype.prettyPrint.apply(this);\n\tif(typeof this.charge() != \"undefined\"){\n\t\tstr += \".charge('\" + this.charge() + \"')\";\n\t}\n\tif(typeof this.distance() != \"undefined\"){\n\t\tstr += \".distance('\" + this.distance() + \"')\";\n\t}\n\tif(typeof this.weight() != \"undefined\"){\n\t\tstr += \".weight('\" + this.weight() + \"')\";\n\t}\n\tif(typeof this.symmetric() != \"undefined\"){\n\t\tstr += \".symmetric(\" + this.symmetric() + \")\";\n\t}\n\tif(typeof this.collisionRadius() != \"undefined\"){\n\t\tstr += \".collisionRadius(\" + this.collisionRadius() + \")\";\n\t}\t\n\tif(typeof this.arrow() != \"undefined\"){\n\t\tstr += \".arrow(\" + JSON.stringify(this.arrow()) + \")\";\n\t}\n\treturn str;\n}\n\nmodule.exports = WOQLGraphConfig;","const WOQLGraphConfig = require(\"./graphConfig\");\nconst UTILS = require('../utils');\nconst WOQLRule = require('../woqlRule');\n\nfunction WOQLGraph(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new WOQLGraphConfig());\n\tthis.nodes = [];\n\tthis.edges = [];\n}\n\nWOQLGraph.prototype.options = function(config){\n\tthis.config = config;\n\treturn this;\n}\n\nWOQLGraph.prototype.setResult = function(result){\n\tthis.result = result;\n\tthis.calculateVariableTypes(result);\n}\n\nWOQLGraph.prototype.calculateVariableTypes = function(){\n\tvar bindings = this.result.getBindings();\n\tif(bindings && bindings.length){\n\t\tfor(var i = 0; i<bindings.length; i++){\n\t\t\tthis.extractFromBinding(bindings[i], i);\n\t\t}\n\t}\n\tthis.edges = this.combineEdges(this.edges);\n\tthis.nodes = this.combineNodes(this.nodes);\n}\n\nWOQLGraph.prototype.extractFromBinding = function(row, rownum){\n\t//\n\tif(this.includeRow(row, rownum)){\n\t\t//get all the nodes (ids - non literals) //\n\t\t//see which nodes are excluded ...\n\t\tvar nodes = [];\n\t\tvar lits = [];\n\t\tfor(var k in row){\n\t\t\tif(typeof row[k] == \"string\"){\n\t\t\t\tif(row[k] && row[k] != \"terminus:unknown\" && this.includeNode(k, row)) nodes.push(k);\n\t\t\t}\n\t\t\telse if(row[k][\"@value\"] && this.includeLiteralNode(k, row)){\n\t\t\t\tlits.push(k);\n\t\t\t}\n\t\t}\n\t\tif(nodes.length == 0) return;\n\t\t//first of all we need to make the literal nodes targets of \n\t\tfor(var i = 0; i<lits.length; i++){\n\t\t\t//make an edge and put the lit in as a node...\n\t\t\tvar nid = UTILS.genBNID().substring(2);\n\t\t\tlet source = this.getLiteralOwner(nodes, lits[i], row);\n\t\t\tif(source) {\n\t\t\t\tthis.addAdornedNode(nid, lits[i], row);\n\t\t\t\tthis.addAdornedEdge(row[source], nid, source, lits[i], row);\n\t\t\t}\n\t\t}\n\t\tthis.createEdgesFromIDs(nodes, row);\n\t\tfor(var i = 0; i<nodes.length; i++){\n\t\t\tvar ndid = row[nodes[i]];\n\t\t\tthis.addAdornedNode(ndid, nodes[i], row);\n\t\t}\n\t}\n}\n\nWOQLGraph.prototype.addAdornedEdge = function(source, target, ks, kt, row){\n\tvar edge = { type: \"link\", target: target, source: source, text: kt};\n\tconst matched_rules = new WOQLRule().matchEdge(this.config.rules, row, ks, kt);\n\tvar hid = false;\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tvar rule = matched_rules[i].rule;\n\t\tif(typeof rule.hidden != \"undefined\"){\n\t\t\thid = rule.hidden;\n\t\t}\n\t\tif(rule.size){\n\t\t\tedge.radius = UTILS.getConfigValue(rule.size, row);\n\t\t}\n\t\tif(rule.text){\n\t\t\tedge.text = UTILS.getConfigValue(rule.text, row);\n\t\t}\n\t\tif(rule.color){\n\t\t\tedge.color = UTILS.getConfigValue(rule.color, row);\n\t\t}\n\t\tif(rule.distance){\n\t\t\tedge.distance = UTILS.getConfigValue(rule.distance, row);\n\t\t}\n\t\tif(rule.arrow){\n\t\t\tedge.arrow = UTILS.getConfigValue(rule.arrow, row);\n\t\t}\n\t\tif(rule.symmetric){\n\t\t\tedge.symmetric = UTILS.getConfigValue(rule.symmetric, row);\n\t\t}\n\t\tif(rule.weight){\n\t\t\tedge.weight = UTILS.getConfigValue(rule.weight, row);\n\t\t}\n\t}\n\tif(!hid) this.edges.push(edge);\t\n}\n\nWOQLGraph.prototype.addAdornedNode = function(nid, k, row){\n\tvar node = { type: \"node\", id: nid, nodetype: k };\n\tconst matched_rules = new WOQLRule().matchNode(this.config.rules, row, k, nid);\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tvar rule = matched_rules[i].rule;\n\t\tif(rule.size){\n\t\t\tnode.radius = UTILS.getConfigValue(rule.size, row);\n\t\t}\n\t\tif(rule.color){\n\t\t\tnode.color = UTILS.getConfigValue(rule.color, row);\n\t\t}\n\t\tif(rule.charge){\n\t\t\tnode.charge = UTILS.getConfigValue(rule.charge, row);\n\t\t}\n\t\tif(rule.collisionRadius ){\n\t\t\tnode.collisionRadius = UTILS.getConfigValue(rule.collisionRadius, row);\n\t\t}\n\t\tif(rule.icon ){\n\t\t\tnode.icon = UTILS.getConfigValue(rule.icon, row);\n\t\t}\n\t\tif(rule.text){\n\t\t\tnode.text = UTILS.getConfigValue(rule.text, row);\n\t\t}\n\t\tif(rule.border){\n\t\t\tnode.border = UTILS.getConfigValue(rule.border, row);\n\t\t}\n\t}\n\tif(!node.text){\n\t\tif(typeof row[k] == \"string\") node.text = row[k];\n\t\telse if(row[k]['@value']) node.text = row[k]['@value'];\n\t}\n\tthis.nodes.push(node);\n}\n\nWOQLGraph.prototype.getLiteralOwner = function(nodes, v, row){\n\tvar cs = this.config.source();\n\tif(cs && row[cs]){\n\t\treturn cs;\n\t}\n\tvar edges = this.config.edges();\n\tif(edges){\n\t\tfor(var i = 0; i < edges.length; i++){\n\t\t\tif(edges[i][1] == v){\n\t\t\t\treturn edges[i][0];\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\treturn nodes[0];\n}\n\nWOQLGraph.prototype.createEdgesFromIDs = function(nodes, row){\n\tif(nodes.length < 2) return;\n\tvar cs = this.config.source();\n\tlet es = this.config.edges();\n\tif(!cs && es && es.length){\n\t\tfor(var i = 0; i< es.length; i++){\n\t\t\tif(nodes.indexOf(es[i][0]) != -1 && nodes.indexOf(es[i][1]) != -1 ){\n\t\t\t\tthis.addAdornedEdge(row[es[i][0]], row[es[i][1]], es[i][0], es[i][1], row);\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\tvar s = (cs && nodes.indexOf(cs) != -1) ? cs : nodes[0];\n\tfor(var i = 0; i<nodes.length; i++){\n\t\tif(nodes[i] == s) continue;\n\t\tthis.addAdornedEdge(row[s], row[nodes[i]], s, nodes[i], row);\n\t}\n}\n\n\nWOQLGraph.prototype.getEdges = function(){\n\treturn this.edges;\n}\n\nWOQLGraph.prototype.combineNodes = function(nodes){\n\tvar nnodes = {};\n\tfor(var i = 0; i<nodes.length; i++){\n\t\tvar n = nodes[i];\n\t\tif(this.nodes_referenced_by_edges.indexOf(n.id) == -1) continue;\n\t\tif(typeof nnodes[n.id] == \"undefined\"){\n\t\t\tnnodes[n.id] = n;\n\t\t}\n\t\telse {\n\t\t\tfor(var k in n){\n\t\t\t\tif(typeof nnodes[n.id][k] == \"undefined\"){\n\t\t\t\t\tnnodes[n.id][k] = n[k];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn Object.values(nnodes);\n}\n\n\nWOQLGraph.prototype.combineEdges = function(edges){\n\tthis.nodes_referenced_by_edges = [];\n\tvar nedges = {};\n\tfor(var i = 0; i<edges.length; i++){\n\t\tvar e = edges[i];\n\t\tif(typeof nedges[e.source] == \"undefined\"){\n\t\t\tnedges[e.source] = {};\n\t\t}\n\t\tif(typeof nedges[e.source][e.target] == \"undefined\"){\n\t\t\tnedges[e.source][e.target] = e;\n\t\t}\n\t\telse {\n\t\t\tfor(var k in e){\n\t\t\t\tif(typeof nedges[e.source][e.target][k] == \"undefined\") nedges[e.source][e.target][k] = e[k];\n\t\t\t}\n\t\t}\n\t\tif(this.nodes_referenced_by_edges.indexOf(e.source) == -1) this.nodes_referenced_by_edges.push(e.source);\n\t\tif(this.nodes_referenced_by_edges.indexOf(e.target) == -1) this.nodes_referenced_by_edges.push(e.target);\n\t}\n\tvar fedges = [];\n\tfor(var k in nedges){\n\t\tfor(var k2 in nedges[k]){\n\t\t\tfedges.push(nedges[k][k2]);\n\t\t}\n\t}\n\treturn fedges;\n}\n\n\n\nWOQLGraph.prototype.getNodes = function(){\n\treturn  this.nodes;\n}\n\n\n\nWOQLGraph.prototype.includeNode = function(v, row){\n\tconst matched_rules = new WOQLRule().matchNode(this.config.rules, row, v, false, \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].rule.hidden) return false;\n\t}\n\treturn true;\n}\n\nWOQLGraph.prototype.includeLiteralNode = function(v, row){\n\tlet l = this.config.literals();\n\tif(typeof l != \"undefined\" && !l) return false;\n\tconst matched_rules = new WOQLRule().matchNode(this.config.rules, row, v, false, \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].rule.hidden) return false;\n\t}\n\treturn true;\n}\n\n\nWOQLGraph.prototype.includeRow = function(row, num){\n\tconst matched_rules = new WOQLRule().matchRow(this.config.rules, row, num, \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].rule.hidden) return false;\n\t}\n\treturn true;\n}\n\n\n\nmodule.exports = WOQLGraph;","\nconst Config  = require('./viewConfig.js');\nconst WOQLChart  = require('./woqlChart.js');\n\nfunction WOQLChartConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"chart\";\n}\n\nWOQLChartConfig.prototype = Object.create(Config.ViewConfig.prototype);\nWOQLChartConfig.prototype.constructor = Config.ViewConfig;\n\n\nWOQLChartConfig.prototype.prettyPrint = function(){\n    var str = \"view = View.chart();\\n\";\n    for(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint() + \"\\n\";\n\t}\n\tif(typeof this.margin() != \"undefined\"){\n\t\tstr += \"view.margin(\" + this.margin() + \")\\n\";\n\t}\n\tif(typeof this.title() != \"undefined\"){\n\t\tstr += \"view.title('\" + this.title() + \"')\\n\";\n\t}\n\tif(typeof this.description() != \"undefined\"){\n\t\tstr += \"view.description('\" + this.description() + \"')\\n\";\n\t}\n\tif(typeof this.layout() != \"undefined\"){\n\t\tstr += \"view.layout('\" + this.layout() + \"')\\n\";\n\t}\n\t\n    str += this.getBasicPrettyPrint();\n\treturn str;\n}\n\nWOQLChartConfig.prototype.json = function(){\n\t/*\n\t*general properties \n\t*/\n\tvar conf = {};\n\tif(typeof this.margin() != \"undefined\"){\n\t\tconf['margin'] = this.margin();\n\t}\n\tif(typeof this.title() != \"undefined\"){\n\t\tconf['title'] = this.title();\n\t}\n\tif(typeof this.description() != \"undefined\"){\n\t\tconf['description'] = this.description();\n\t}\n\tif(typeof this.layout() != \"undefined\"){\n\t\tconf['layout'] = this.layout();\n\t}\n\n\tlet mj = {\"chart\" :conf, \"rules\": this.getRulesJSON()};\n\treturn mj;\n}\n\nWOQLChartConfig.prototype.loadJSON = function(config, rules){\n    this.loadBasicJSON(config);\n    var jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLChartRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(typeof config.margin != \"undefined\"){\n\t\tthis.margin(config.margin);\n\t}\n\tif(typeof config.title != \"undefined\"){\n\t\tthis.title(config.title);\n\t}\n\tif(typeof config.description != \"undefined\"){\n\t\tthis.description(config.description);\n\t}\n\tif(typeof config.layout != \"undefined\"){\n\t\tthis.layout(config.layout);\n\t}\n}\n\nWOQLChartConfig.prototype.title = function(title){\n\tif(typeof title == \"undefined\"){\n\t\treturn this._title;\n\t}\n\tthis._title = title;\n\treturn this;\n}\n\nWOQLChartConfig.prototype.description=function(description){\n\tif(description){\n\t\tthis._description=description;\n\t\treturn this\n\t}\n\treturn this._description;\n}\n\n//layout \"vertical\" | \"horizontal\"\nWOQLChartConfig.prototype.layout=function(layout){\n\tif(layout){\n\t\tthis._layout=layout;\n\t\treturn this\n\t}\n\treturn this._layout;\n}\n\n\n//default is { top: 10, right: 30, left: 0, bottom: 80 }\nWOQLChartConfig.prototype.margin=function(marginObj){\n\tif(marginObj){\n\t\tthis._margin=marginObj;\n\t\treturn this\n\t}\n\n\treturn this._margin;\n}\n\n\nWOQLChartConfig.prototype.create = function(client){\n\tvar wqt = new WOQLChartConfig(client, this);\n\treturn wqt;\n}\n\n/*\n{\"XAxis\":{dataKey:\"date_i\",type:'number'}\n\t\t\t\t\t\t\t,\"chartObj\":\n\t\t\t\t\t\t\t[{'label':'Confident','dataKey':'conf',\"chartType\":\"Area\",\n\t\t\t\t\t\t\t\"style\":{\"stroke\":\"#82ca9d\", \"fillOpacity\":1, \"fill\":\"#82ca9d\"}},\n\t\t\t\t\t\t\t {'label':'Predictions','dataKey':'predictions',\"chartType\":\"Line\",\n\t\t\t\t\t\t\t \"style\":{\"strokeWidth\":2, \"stroke\":\"#ff8000\"}},\n\t\t\t\t\t\t\t {'label':'Picks','dataKey':'picks',\"chartType\":\"Point\",\"style\": \n\t\t\t\t\t\t\t {\"stroke\": '#8884d8', \"fill\": '#8884d8'}},\n\t\t\t\t\t\t\t {'label':'Stock','dataKey':'stock',\"chartType\":\"Line\",\"style\":\n\t\t\t\t\t\t\t  {\"stroke\": '#0000ff', \"fill\": '#0000ff'}}]}\n\n{\"XAxis\":{dataKey:\"v:Date\",\"label\":{rotate:\"-50\"}},\"chartObj\":\n\t\t\t\t\t\t\t  \t[{'dot':true, 'label':'Quantity','dataKey':'v:Quantity',\"chartType\":\"Line\",  \n\t\t\t\t\t\t\t  \t  \"style\": {\"stroke\": '#FF9800', \"fill\": '#FF9800'}}]\n\t\t\t\t\t\t\t  }\n*/\n\n\nWOQLChartConfig.prototype.xAxis = function(...vars){\n\tlet woqlRule = new WOQLChartRule().scope(\"XAxis\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.legend = function(...vars){\n\tlet woqlRule = new WOQLChartRule().scope(\"Legend\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.yAxis = function(...vars){\n\tlet woqlRule = new WOQLChartRule().scope(\"YAxis\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.bar = function(...vars){\n\tlet woqlRule=new WOQLChartRule().scope(\"Bar\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.line=function(...vars){\n\tlet woqlRule=new WOQLChartRule().scope(\"Line\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.point=function(...vars){\n\tlet woqlRule=new WOQLChartRule().scope(\"Point\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.area=function(...vars){\n\tlet woqlRule=new WOQLChartRule().scope(\"Area\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\n//fillOpacity\n/**\n * \n * @param {Chart} scope  \n */\nfunction WOQLChartRule(){\n\tConfig.WOQLViewRule.call(this); \n};\n\nWOQLChartRule.prototype = Object.create(Config.WOQLViewRule.prototype);\nWOQLChartRule.prototype.constructor = Config.WOQLViewRule;\n\nWOQLChartRule.prototype.style=function(key,value){\n\tif(value){\n\t\tthis.rule[key]=value;\n\t\treturn this;\n\t}\n\treturn this.rule[key];\n}\n\nWOQLChartRule.prototype.label = function(label){\n\tif(label){\n\t\tthis.rule.label = label;\n\t\treturn this;\n\t}\n\treturn this.rule.label;\n}\n\n/*\n*line is the default value\n* 'line' | 'square' | 'rect'| 'circle' | 'cross' | 'diamond' | 'square' | 'star' | 'triangle' | 'wye' | 'none'\n*/\n\nWOQLChartRule.prototype.legendType = function(legendType){\n\tif(legendType){\n\t\tthis.rule.legendType = legendType;\n\t\treturn this;\n\t}\n\treturn this.rule.legendType;\n}\n\n\nWOQLChartRule.prototype.fillOpacity = function(fillOpacity){\n\tif(fillOpacity || fillOpacity===0){\n\t\tthis.rule.fillOpacity = fillOpacity;\n\t\treturn this;\n\t}\n\treturn this.rule.fillOpacity;\n}\n\n\n\n\nWOQLChartRule.prototype.fill=function(color){\n\tif(color){\n\t\tthis.rule.fill = color;\n\t\treturn this;\n\t}\n\treturn this.rule.fill;\n}\n\nWOQLChartRule.prototype.stroke=function(color){\n\tif(color){\n\t\tthis.rule['stroke'] = color;\n\t\treturn this;\n\t}\n\treturn this.rule['stroke'];\n}\n\n\nWOQLChartRule.prototype.strokeWidth=function(size){\n\tif(typeof size != \"undefined\"){\n\t\tthis.rule.strokeWidth = size;\n\t\treturn this;\n\t}\n\treturn this.rule.strokeWidth;\n}\n\n\nWOQLChartRule.prototype.dot=function(isVisible){\n\tif(typeof isVisible != \"undefined\"){\n\t\tthis.rule.dot = isVisible;\n\t\treturn this;\n\t}\n\treturn this.rule.dot;\n}\n\nWOQLChartRule.prototype.labelRotate=function(angle){\n\tif(angle!==undefined){\n\t\tthis.rule.labelRotate = angle;\n\t\treturn this\n\t}\n\treturn this.rule.labelRotate;\n}\n\n//Specify the padding of x-axis. DEFAULT: { left: 0, right: 0 }\nWOQLChartRule.prototype.padding=function(paddingObj){\n\tif(paddingObj){\n\t\tthis.rule.padding=paddingObj;\n\t\treturn this\n\t}\n\n\treturn this.rule.padding;\n}\n\n/*\n* \n*/\n\nWOQLChartRule.prototype.labelDateInput=function(labelDateInput){\n\tif(labelDateInput){\n\t\tthis.rule.labelDateInput=labelDateInput\n\t\treturn this;\n\t}\n\treturn this.rule.labelDateInput\n}\n\n/*\n* output date example 'YYYY-MM-DD' : 2020:03:11 or ''YYYY [text] YYYY',  2020 mytext 2020' \n*/\n\nWOQLChartRule.prototype.labelDateOutput=function(labelDateOutput){\n\tif(labelDateOutput){\n\t\tthis.rule.labelDateOutput=labelDateOutput\n\t\treturn this;\n\t}\n\treturn this.rule.labelDateOutput\n}\n\nWOQLChartRule.prototype.stackId=function(stackId){\n\tif(stackId){\n\t\tthis.rule.stackId=stackId\n\t\treturn this;\n\t}\n\treturn this.rule.stackId\n}\n\n\n\n/*\n* The type of xAxis 'number' | 'category' default is 'category' \n* The type of yAxis 'number' | 'category' default is 'number' \n* The type of line chart 'basis'|'basisClosed'|'basisOpen'|'linear'|'linearClosed'|'natural'|'monotoneX'|'monotoneY'|'monotone' | 'step' | 'stepBefore' | 'stepAfter' | \n*/\n\n\n\nWOQLChartRule.prototype.type=function(type){\n\tif(type){\n\t\tthis.rule.type=type\n\t\treturn this;\n\t}\n\treturn this.rule.type\n}\n/*\n* works only if type is number\n* domainArr =[min,max];\n*/\nWOQLChartRule.prototype.axisDomain=function(domainArr){\n\tif(domainArr){\n\t\tthis.rule.domain=domainArr\n\t\treturn this;\n\t}\n\treturn this.rule.domain\n}\n\n/*\n* \n* @param {string} name of the variable for the custom color\n*/\n\nWOQLChartRule.prototype.colorEntry=function(propValue){\n\tif(propValue){\n\t\tthis.rule.colorEntry=propValue\n\t\treturn this;\n\t}\n\treturn this.rule.colorEntry\n}\n\n/*\n* \n* @param {object} an object of possible value and color {\"value1\":\"#ff0000\"...}\n*/\n\nWOQLChartRule.prototype.customColors=function(colorsObj){\n\tif(colorsObj){\n\t\tthis.rule.customColors=colorsObj\n\t\treturn this;\n\t}\n\treturn this.rule.customColors\n}\n\n/*\n* @param {array} payload array of the object for descrive the legend [{value:\"legend label\",color:\"#ff0000\",type:\"rect\"}]\n*/\n\nWOQLChartRule.prototype.payload=function(payloadArr){\n\tif(payloadArr){\n\t\tthis.rule.payload=payloadArr\n\t\treturn this;\n\t}\n\treturn this.rule.payload\n}\n\n\nWOQLChartRule.prototype.barSize=function(barSize){\n\tif(barSize){\n\t\tthis.rule.barSize=barSize\n\t\treturn this;\n\t}\n\treturn this.rule.barSize\n}\n\nmodule.exports = WOQLChartConfig;","const WOQLChartConfig = require(\"./chartConfig\");\n\nfunction WOQLChart(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new WOQLChartConfig());\n\treturn this;\n}\n\nWOQLChart.prototype.options = function(config){\n\tthis.config = config;\n\treturn this;\n}\n\nWOQLChart.prototype.setResult = function(res){\n\tthis.result = res;\n\treturn this;\n}","const Config  = require('./viewConfig.js');\nconst WOQLStream  = require('./woqlStream.js');\n\nfunction WOQLStreamConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"stream\";\n}\n\nWOQLStreamConfig.prototype = Object.create(Config.ViewConfig.prototype);\nWOQLStreamConfig.prototype.constructor = Config.ViewConfig;\n\nWOQLStreamConfig.prototype.create = function(client){\n\tvar wqt = new WOQLStream(client, this);\n\treturn wqt;\n}\n\nWOQLStreamConfig.prototype.row = function(){\n    var wqt = new WOQLStreamRule().scope(\"row\");\n    this.rules.push(wqt);    \n\treturn wqt;\n}\n\nWOQLStreamConfig.prototype.template = function(template){\n\tif(!template) return this.mtemplate; \n\tthis.mtemplate = template;\n\treturn this;\n}\n\n\nWOQLStreamConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = View.stream();\\n\";\n\tif(typeof this.template() != \"undefined\"){\n\t\tstr += \"view.template(\" + JSON.stringify(this.template()) + \")\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint() + \"\\n\";\n\t}\n\treturn str;\n}\n\nWOQLStreamConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLStreamRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(config.template){\n\t\tthis.mtemplate = config.template;\n\t}\n}\n\nWOQLStreamConfig.prototype.json = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\tvar conf = {};\n\tif(this.mtemplate){\n\t\tconf.template = this.mtemplate;\n\t}\n\tlet mj = {\"stream\" :conf, \"rules\": jr};\n\treturn mj;\n}\n\nfunction WOQLStreamRule(){\n\tConfig.WOQLViewRule.call(this); \n};\n\nWOQLStreamRule.prototype = Object.create(Config.WOQLViewRule.prototype);\nWOQLStreamRule.prototype.constructor = Config.WOQLViewRule;\n\nWOQLStreamRule.prototype.template = function(template){\n\tif(!template) return this.rule.template; \n\tthis.rule.template = template;\n\treturn this;\n}\n\nmodule.exports = WOQLStreamConfig;","const WOQLStreamConfig = require(\"./streamConfig\");\n\nfunction WOQLStream(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new WOQLStreamConfig());\n\treturn this;\n}\n\nWOQLStream.prototype.options = function(config){\n\tthis.config = config;\n\treturn this;\n}\n\nWOQLStream.prototype.setResult = function(wqrs){\n\tthis.result = wqrs;\n}\n\nmodule.exports = WOQLStream;","\nconst Config  = require('./viewConfig.js');\nconst FrameRule  = require('../frameRule.js');\nconst DocumentFrame  = require('./documentFrame.js');\n\n\n/**\n * @file Frame Config \n * @license Apache Version 2\n */\nfunction FrameConfig(){\n    Config.ViewConfig.call(this); \n    this.type = \"document\";\n}\n\nFrameConfig.prototype = Object.create(Config.ViewConfig.prototype);\nFrameConfig.prototype.constructor = Config.ViewConfig;\n\nFrameConfig.prototype.create = function(client){\n\tvar tf = new DocumentFrame(client, this);\n\treturn tf;\n}\n\nFrameConfig.prototype.prettyPrint = function(){\n    var str = \"view = View.document();\\n\";\n    str += this.getBasicPrettyPrint();\n\tif(typeof this.load_schema() != \"undefined\"){\n\t\tstr += \"view.load_schema(\" + this.load_schema() + \")\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint() + \"\\n\";\n\t}\n\treturn str;\n}\n\nFrameConfig.prototype.json = function(){\n\tvar conf = this.getBasicJSON();\n\tif(typeof this.load_schema() != \"undefined\"){\n\t\tconf['load_schema'] = this.load_schema();\n\t}\n\tlet mj = {\"frame\" :conf, \"rules\": this.getRulesJSON()};\n\treturn mj;\n}\n\nFrameConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new DocumentRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n    this.rules = jr;\n    this.loadBasicJSON(config);\n\tif(typeof config.load_schema != \"undefined\"){\n\t\tthis.load_schema(config.load_schema);\n\t}\n\treturn this;\n}\n\nFrameConfig.prototype.json_rules = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\treturn jr;\n}\n\nFrameConfig.prototype.load_schema = function(tf){\n\tif(typeof tf == \"undefined\") return this.get_schema;\n\tthis.get_schema = tf;\n\treturn this;\n}\n\nFrameConfig.prototype.show_all = function(r){\n\tthis.all().renderer(r);\n\treturn this;\n}\n\nFrameConfig.prototype.show_parts = function(o, p, d){\n\tthis.object().renderer(o);\n\tthis.property().renderer(p);\n\tthis.data().renderer(d);\n\treturn this;\n}\n\nFrameConfig.prototype.object = function(){\n\tlet fp = new DocumentRule().scope(\"object\");\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\nFrameConfig.prototype.property = function(){\n\tlet fp = new DocumentRule().scope(\"property\");\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\nFrameConfig.prototype.scope = function(scope){\n\tlet fp = new DocumentRule().scope(scope);\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\nFrameConfig.prototype.data = function(){\n\tlet fp = new DocumentRule().scope(\"data\");\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\nFrameConfig.prototype.all = function(){\n\tlet fp = new DocumentRule().scope(\"*\");\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\n/**\n * Attaches display options to frames from matching rules\n */\nFrameConfig.prototype.setFrameDisplayOptions = function(frame, rule){\n\tif(typeof frame.display_options == \"undefined\") frame.display_options = {};\n\tif(typeof rule.mode() != \"undefined\") {\tframe.display_options.mode = rule.mode();}\n\tif(typeof rule.view() != \"undefined\") frame.display_options.view = rule.view();\n\tif(typeof rule.showDisabledButtons() != \"undefined\") frame.display_options.show_disabled_buttons = rule.showDisabledButtons();\n\tif(typeof rule.hidden() != \"undefined\") frame.display_options.hidden = rule.hidden();\n\tif(typeof rule.collapse() != \"undefined\") frame.display_options.collapse = rule.collapse();\n\tif(typeof rule.style() != \"undefined\") frame.display_options.style = rule.style();\n\tif(typeof rule.headerStyle() != \"undefined\") frame.display_options.header_style = rule.headerStyle();\n\tif(typeof rule.features() != \"undefined\") {\t\tframe.display_options.features = this.setFrameFeatures(frame.display_options.features, rule.features());\t}\n\tif(typeof rule.headerFeatures() != \"undefined\") frame.display_options.header_features = this.setFrameFeatures(frame.display_options.header_features, rule.headerFeatures());\n\tif(typeof rule.header() != \"undefined\") frame.display_options.header = rule.header();\n\tif(typeof rule.showEmpty() != \"undefined\") frame.display_options.show_empty = rule.showEmpty();\n\tif(typeof rule.dataviewer() != \"undefined\") frame.display_options.dataviewer = rule.dataviewer();\n\tif(typeof rule.args() != \"undefined\") frame.display_options.args = this.setFrameArgs(frame.display_options.args, rule.args());\n}\n\n/*\nConsolidates properties of features sent in in different rules\n*/\nFrameConfig.prototype.setFrameFeatures = function(existing, fresh){\n\t//preserve order of existing\n\tif(!existing || !existing.length) return fresh;\n\tif(!fresh || !fresh.length)  return existing;\n\tlet got = [];\n\tfor(var i = 0; i< existing.length; i++){\n\t\tvar key = (typeof existing[i] == \"string\" ? existing[i] : Object.keys(existing[i])[0]);\n\t\tgot.push(key);\n\t}\n\tfor(var j = 0; j< fresh.length; j++){\n\t\tvar fkey = (typeof fresh[j] == \"string\" ? fresh[j] : Object.keys(fresh[j])[0]);\n\t\tvar rep = got.indexOf(fkey);\n\t\tif(rep == -1) existing.push(fresh[j]);\n\t\telse if(typeof fresh[j] == \"object\"){\n\t\t\tvar val = existing[rep];\n\t\t\tif(typeof val == 'string') existing[rep] = fresh[j];\n\t\t\telse if(typeof val == 'object'){\n\t\t\t\tvar props = fresh[j][fkey];\n\t\t\t\tfor(var p in props){\n\t\t\t\t\texisting[rep][fkey][p] = props[p];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn existing;\t\n}\n\nFrameConfig.prototype.setFrameArgs = function(existing, fresh){\n\tif(!existing) return fresh;\n\tif(!fresh) return existing;\n\tfor(var k in fresh){\n\t\texisting[k] = fresh[k];\n\t}\n\treturn existing;\n}\n\n/**\n * @file Document Rule\n * @license Apache Version 2\n */\n\nfunction DocumentRule(){\n\tFrameRule.call(this); \n\tthis.rule = {};\n};\n\nDocumentRule.prototype = Object.create(FrameRule.prototype);\nDocumentRule.prototype.constructor = FrameRule;\n\nDocumentRule.prototype.renderer = function(rend){\n\tif(typeof rend == \"undefined\"){\n\t\treturn this.rule.renderer;\n\t}\n\tthis.rule.renderer = rend;\n\treturn this;\n}\n\nDocumentRule.prototype.compare = function(func){\n\tif(typeof func == \"undefined\"){\n\t\treturn this.rule.compare;\n\t}\n\tthis.rule.compare = func;\n\treturn this;\n}\n\nDocumentRule.prototype.mode = function(mode){\n\tif(typeof mode == \"undefined\"){\n\t\treturn this.rule.mode;\n\t}\n\tthis.rule.mode = mode;\n\treturn this;\n}\n\nDocumentRule.prototype.collapse = function(func){\n\tif(typeof func == \"undefined\"){\n\t\treturn this.rule.collapse;\n\t}\n\tthis.rule.collapse = func;\n\treturn this;\n}\n\nDocumentRule.prototype.view = function(m){\n\tif(!m) return this.rule.view;\n\tthis.rule.view = m;\n\treturn this;\n}\n\n/**\n * Should actions which are disabled in the given context be displayed?\n */\nDocumentRule.prototype.showDisabledButtons = function(m){\n\tif(typeof m == \"undefined\") return this.rule.show_disabled_buttons;\n\tthis.rule.show_disabled_buttons = m;\n\treturn this;\n}\n\nDocumentRule.prototype.header = function(m){\n\tif(!m) return this.rule.header;\n\tthis.rule.header = m;\n\treturn this;\n}\n\nDocumentRule.prototype.headerStyle = function(m){\n\tif(!m) return this.rule.headerStyle;\n\tthis.rule.headerStyle = m;\n\treturn this;\n}\n\nDocumentRule.prototype.showEmpty = function(m){\n\tif(!m) return this.rule.show_empty;\n\tthis.rule.show_empty = m;\n\treturn this;\n}\n\nDocumentRule.prototype.dataviewer = function(m){\n\tif(!m) return this.rule.dataviewer;\n\tthis.rule.dataviewer = m;\n\treturn this;\n}\n\nDocumentRule.prototype.features = function(...m){\n\tif(typeof m == \"undefined\" || m.length == 0) return this.rule.features;\n\tthis.rule.features = m;\n\treturn this;\n}\n\nDocumentRule.prototype.headerFeatures = function(...m){\n\tif(typeof m == \"undefined\" || m.length == 0) return this.rule.header_features;\n\tthis.rule.header_features = m;\n\treturn this;\n}\n\nDocumentRule.prototype.render = function(func){\n\tif(!func) return this.rule.render;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"render\", func);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"render\", func);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.render = func;\n\t}\n\treturn this;\n}\n\nDocumentRule.prototype.style = function(style){\n\tif(typeof style == \"undefined\") return this.rule.style;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"style\", style);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"style\", style);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.style = style;\n\t}\n\treturn this;\n};\n\n/**\n * The frame or feature will be hidden or unhidden (boolean)\n */\nDocumentRule.prototype.hidden = function(m){\n\tif(typeof m == \"undefined\") return this.rule.hidden;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"hidden\", m);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"hidden\", m);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.hidden = m;\n\t}\n\treturn this;\n}\n\n/**\n * Specifies arguments to a renderer \n */\nDocumentRule.prototype.args = function(json){\n\tif(!json) return this.rule.args;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"args\", json);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"args\", json);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.args = json;\n\t}\n\treturn this;\n}\n\n/**\n * Adds a property to a feature array\n */\nDocumentRule.prototype.applyFeatureProperty = function(feats, prop, val){\n\tvar nfeats = [];\n\tfor(var i = 0; i<feats.length; i++){\n\t\tif(typeof feats[i] == \"string\"){\n\t\t\tvar nfeat = {};\n\t\t\tnfeat[feats[i]] = {};\n\t\t\tnfeat[feats[i]][prop] = val;\n\t\t\tnfeats.push(nfeat);\n\t\t}\n\t\telse if(typeof feats[i] == \"object\"){\n\t\t\tlet fkey = Object.keys(feats[i])[0];\n\t\t\tif(fkey){\n\t\t\t\tvar nfeat = feats[i];\n\t\t\t\tnfeat[fkey][prop] = val;\n\t\t\t\tnfeats.push(nfeat);\n\t\t\t}\n\t\t}\n\t}\n\treturn nfeats;\n}\n\nDocumentRule.prototype.unpackFeatures = function(feats){\n\tlet extensions = {};\n\tvar fstr = \"\";\n\tfor(var i = 0; i<feats.length; i++){\n\t\tif(typeof feats[i] == \"string\"){\n\t\t\tfstr += '\"' + feats[i] + '\"';\n\t\t}\n\t\telse if(typeof feats[i] == \"object\"){\n\t\t\tvar fid = Object.keys(feats[i])[0];\n\t\t\tfstr += '\"' +  fid + '\"';\n\t\t\tfor(var prop in feats[i][fid]){\n\t\t\t\textensions[prop] = feats[i][fid][prop];\n\t\t\t}\n\t\t}\n\t\tif(i < feats.length - 1){\n\t\t\tfstr += \", \"\n\t\t}\n\t}\n\tfor(var k = 0; k < Object.keys(extensions).length; k++){\n\t\tvar ext = Object.keys(extensions)[k];\n\t\tvar val = extensions[ext];\n\t\tfstr += \").\" + ext + \"(\";\n\t\tif(typeof val == \"function\"){\n\t\t\tfstr += val;\n\t\t}\n\t\telse if(typeof val == \"string\"){\n\t\t\tfstr += '\"' + val + '\"';\n\t\t}\n\t\telse if(typeof val == \"object\"){\n\t\t\tfstr += JSON.stringify(val);\n\t\t}\n\t}\n\treturn fstr;\n}\n\nDocumentRule.prototype.prettyPrint = function(){\n\tif(this.pattern){\n\t\tstr = this.pattern.prettyPrint();\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \".renderer('\" + this.renderer() + \"')\";\n\t}\n\tif(typeof this.render() != \"undefined\"){\n\t\tstr += \".render(\" + this.render + \")\";\n\t}\n\tif(typeof this.compare() != \"undefined\"){\n\t\tstr += \".compare(\" + this.compare() + \")\";\n\t}\n\tif(typeof this.mode() != \"undefined\"){\n\t\tstr += \".mode('\" + this.mode() + \"')\";\n\t}\n\tif(typeof this.collapse() != \"undefined\"){\n\t\tstr += \".collapse(\" + this.collapse() + \")\";\n\t}\n\tif(typeof this.hidden() != \"undefined\"){\n\t\tstr += \".hidden(\" + this.hidden() + \")\";\n\t}\n\tif(typeof this.view() != \"undefined\"){\n\t\tstr += \".view('\" + this.view() + \"')\";\n\t}\n\tif(typeof this.showDisabledButtons() != \"undefined\"){\n\t\tstr += \".showDisabledButtons(\" + this.showDisabledButtons() + \")\";\n\t}\n\tif(typeof this.header() != \"undefined\"){\n\t\tstr += \".header(\" + this.header() + \")\";\n\t}\n\tif(typeof this.style() != \"undefined\"){\n\t\tstr += \".style(\\\"\" + this.style() + \"\\\")\";\n\t}\n\tif(typeof this.headerStyle() != \"undefined\"){\n\t\tstr += \".headerStyle(\\\"\" + this.headerStyle() + \"\\\")\";\n\t}\n\tif(typeof this.args() != \"undefined\"){\n\t\tstr += \".args(\" + JSON.stringify(this.args()) + \")\";\n\t}\n\tif(typeof this.showEmpty() != \"undefined\"){\n\t\tstr += \".showEmpty(\" + this.show_empty() + \")\";\n\t}\n\tif(typeof this.dataviewer() != \"undefined\"){\n\t\tstr += \".dataviewer(\\\"\" + this.dataviewer() + \"\\\")\";\n\t}\n\tif(typeof this.features() != \"undefined\"){\n\t\tstr += \".features(\" + this.unpackFeatures(this.features()) + \")\";\n\t}\n\tif(typeof this.headerFeatures() != \"undefined\"){\n\t\tstr += \".headerFeatures(\" + this.unpackFeatures(this.headerFeatures()) + \")\";\n\t}\n\treturn str;\n}\n\nmodule.exports = FrameConfig;","const ObjectFrame = require(\"../objectFrame\");\nconst FrameConfig = require(\"./frameConfig\");\nconst FrameHelper = require(\"../utils\");\n\n/**\n * @file Document Frame \n * @license Apache Version 2\n */\n\n\nfunction DocumentFrame(client, config){\n\tthis.client = client;\n\tthis.config = (config ? config : new FrameConfig());\n\tthis.load_schema = false;\n}\n\nDocumentFrame.prototype.options = function(opts){\n\tthis.config = opts;\n\treturn this;\n}\n\nDocumentFrame.prototype.db = function(dburl){\n    this.client.db(dburl);\n    return this;\n}\n\nDocumentFrame.prototype.load = function(url, cls){\n\tif(url) {\n\t\tif(url.substring(0,4) == \"doc:\"){\n\t\t\turl = url.substring(4);\n\t\t}\n\t\tif(this.config.load_schema()){\n\t\t\treturn this.loadComplete(url, cls)\n\t\t}\n\t\telse {\n\t\t\treturn this.loadDocument(url);\n\t\t}\n\t}\n\tif(cls){\n\t\treturn this.loadSchema(cls);\n\t}\n\t//return Promise.reject\n}\n\n/**\n *  @param {String} url - loads the document frame from the document API in frame form\n *  - loads the frame encapsulates more meta-data in the json and reduces the number of api calls we need to make\n *  @returns {Promise}\n */\nDocumentFrame.prototype.loadDocument = function(url, encoding){\n     encoding = encoding || \"terminus:frame\";\n\t return this.client.getDocument(url, {\"terminus:encoding\": encoding})\n\t.then((response) => {\n\t\t(encoding == \"terminus:frame\" ? this.loadDataFrames(response) : this.loadJSON(response));\n\t});\n}\n\nDocumentFrame.prototype.loadSchema = function(cls, dbURL){\n\tvar ncls = FrameHelper.unshorten(cls);\n\treturn this.client.getClassFrame(dbURL, ncls)\n\t.then((response) => this.loadSchemaFrames(response, ncls));\n}\n\n/**\n *  @param {String} url - loads the document frame along with its class frame\n *  @param {String} [cls] - optional class id of the document - if absent class frames will be loaded from the document class once it is loaded\n *  @returns {Promise}\n *  - loads a document frame and it's class frame in unison\n */\n\nDocumentFrame.prototype.loadComplete = function(url, cls){\n    if(cls){\n        return Promise.all([this.loadDocument(url), this.loadDocumentSchema(cls)]);        \n    }\n    else {\n\t    return this.loadDocument(url)\n        .then((response) =>  {\n\t\t\tthis.loadSchema(this.document.cls);\n\t\t});\n    }\n}\n\nDocumentFrame.prototype.loadJSON = function(json, type){\n    if(this.docid){\n        return this.loadDocument(this.docid);\n    }\n    else if(this.clsid){\n        return this.loadDocumentSchema(this.clsid);\n    }\n    console.error(\"Either docid or clid must be set before load is called\")\n}\n\nDocumentFrame.prototype.loadDataFrames = function(dataframes, cls, classframes){\n\tif(!cls){\n\t\tif(this.document) cls = this.document.cls;\n\t\telse {\n\t\t\tif(dataframes && dataframes.length && dataframes[0] && dataframes[0].domain){\n\t\t\t\tcls = dataframes[0].domain;\n\t\t\t}\n\t\t}\n\t}\n\tif(cls){\n\t\tif(!this.document){\n\t\t\tthis.document = new ObjectFrame(cls, dataframes, classframes);\n\t\t}\n\t\telse {\n\t\t\tthis.document.loadDataFrames(dataframes);\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"Missing Class\" + \" \" + \"Failed to add dataframes due to missing class\");\n\t}\n}\n\nDocumentFrame.prototype.loadSchemaFrames = function(classframes, cls){\n\tif(!cls){\n\t\tif(classframes && classframes.length && classframes[0] && classframes[0].domain){\n\t\t\tcls = classframes[0].domain;\n\t\t}\n\t}\n\tif(cls){\n\t\tif(!this.document){\n\t\t\tthis.document = new ObjectFrame(cls);\n\t\t}\n\t\tif(classframes){\n\t\t\tthis.document.loadClassFrames(classframes);\n\t\t\tif(!this.document.subjid){\n\t\t\t\tthis.document.newDoc = true;\n\t\t\t\tthis.document.fillFromSchema(\"_:\");\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"Missing Class\", \"Failed to add class frames due to missing both class and classframes\");\n\t}\n}\n\n/*\n * adds render and compare functions to object frames\n */\nDocumentFrame.prototype.applyRules = function(doc, config, mymatch){\n\tdoc = (doc ? doc : this.document);\n\tconfig = (config ? config : this.config);\n\tvar self = this;\n\tvar onmatch = function(frame, rule){\n\t\tconfig.setFrameDisplayOptions(frame, rule);\n\t\tif(mymatch) mymatch(frame, rule);\n\t};\n\tdoc.filter(config.rules, onmatch);\n}\n\nmodule.exports = DocumentFrame ;\n","module.exports = {\n    WOQLClient:require('./lib/woqlClient'),\n    ConnectionCapabilities:require('./lib/connectionCapabilities'),\n    ConnectionConfig:require('./lib/connectionConfig'),\n    IDParser:require('./lib/terminusIDParser'),\n    ErrorMessage:require('./lib/errorMessage'),\n    UTILS:require('./lib/utils'),\n    WOQLResult:require('./lib/woqlResult'),\n    WOQLRule:require('./lib/woqlRule'),\n    FrameRule:require('./lib/frameRule'),\n    View:require('./lib/woqlView'),\n    DocumentFrame:require('./lib/viewer/documentFrame'),\n    WOQLGraph:require('./lib/viewer/woqlGraph'),\n    WOQLTable:require('./lib/viewer/woqlTable'),\n    WOQLChooser:require('./lib/viewer/woqlChooser'),\n    WOQLChart:require('./lib/viewer/woqlChart'),\n    WOQLStream:require('./lib/viewer/woqlStream'),\n    WOQL:require('./lib/woql'),\n    axiosInstance:require('./lib/axiosInstance')\n};","const CONST = require('./const')\nconst DispatchRequest = require('./dispatchRequest')\nconst ErrorMessage = require('./errorMessage')\nconst ConnectionCapabilities = require('./connectionCapabilities')\nconst ConnectionConfig = require('./connectionConfig')\n\n/**\n * @file Javascript WOQL client object\n * @license Apache Version 2\n * Simple Javascript Client for accessing the Terminus DB API\n * Constructor \n * @param {serverUrl} string \n * @param {object} params - a json object with the following connection parameters:\n * \tkey: api key for basic auth\n * \tuser: basic auth user id \n * \tjwt: jwt token \n * \tjwt_user: jwt user id \n * \taccount: set account to this id\n * \tdb: set cursor to this db\n *  repo: set cursor to this repo\n *  branch: set branch to this id\n */\nfunction WOQLClient(serverUrl,params) {\n\t// current connection context variables\n\tthis.connectionConfig = new ConnectionConfig(serverUrl,params)\n\t// db metadata and capabilities for currently connected server\n\tthis.connection = new ConnectionCapabilities()\t\n}\n\nWOQLClient.CONST = CONST\n\n/**\n * Creates a copy of the current client with a new connection Config\n */\nWOQLClient.prototype.copy = function () {\n\tlet other = new WOQLClient(this.server)\n\tother.connection = this.connection //keep same connection meta data - shared by copy\n\tother.connectionConfig = this.connectionConfig.copy() //new copy of current connection data\n\treturn other\n}\n\n/**\n * @returns {string} the current connected server - can only be set by connect or creating a new terminusDB instance\n */\nWOQLClient.prototype.server = function () {\n\treturn this.connectionConfig.serverURL()\n}\n\n/**\n * Sets / gets the current account \n * @param {string} accountid \n */\nWOQLClient.prototype.account = function (accountid) {\n\tif(typeof accountid != \"undefined\"){\n\t\tthis.connectionConfig.setAccount(accountid)\n\t}\n\treturn this.connectionConfig.account()\n}\n\n\n/**\n * Sets / gets the current database \n * @param {string} dbid \n */\nWOQLClient.prototype.db = function (dbid) {\n\tif(typeof dbid != \"undefined\"){\n\t\tthis.connectionConfig.setDB(dbid)\n\t}\n\treturn this.connectionConfig.db()\n}\n\n/**\n * Sets / gets the current repository id  \n * @param {string} repoid default value is local\n */\nWOQLClient.prototype.repo = function (repoid) {\n\tif(typeof repoid != \"undefined\"){\n\t\tthis.connectionConfig.setRepo(repoid)\n\t}\n\treturn this.connectionConfig.repo()\n}\n\n\n/**\n * Sets / gets the current branch id \n * @param {string} branchid default value is master\n */\nWOQLClient.prototype.checkout = function (branchid) {\n\tif(typeof branchid != \"undefined\"){\n\t\tthis.connectionConfig.setBranch(branchid)\n\t}\n\treturn this.connectionConfig.branch()\n}\n\n/**\n * Sets / gets the current ref pointer (pointer to a commit within a branch)\n * @param {string} refid \n */\nWOQLClient.prototype.ref = function (refid) {\n\tif(typeof refid != \"undefined\"){\n\t\tthis.connectionConfig.setRef(refid)\n\t}\n\treturn this.connectionConfig.ref()\n}\n\n\n/**\n * Sets / gets the basic auth user:password for authentication\n * @param {string} key  required\n * @param {string} user optional default value is admin\n */\nWOQLClient.prototype.basic_auth = function (key, user) {\n\tif(typeof key != \"undefined\"){\n\t\tthis.connectionConfig.setBasicAuth(key, user)\n\t}\n\treturn this.connectionConfig.basicAuth()\n}\n\n/**\n * Sets / gets the jwt token for authentication\n * @param {string} jwt\n * @param {string} user \n */\nWOQLClient.prototype.remote_auth = function (authInfo) {\n\tif(typeof authInfo != \"undefined\"){\n\t\tthis.connectionConfig.setRemoteAuth(authInfo)\n\t}\n\treturn this.connectionConfig.remoteAuth()\n}\n\n/**\n * Gets the current user id \n * @param {boolean} ignore_jwt - if true, the local userid will be returned rather than the jwt id if set\n * otherwise jwt will come back if set, if not set, local id\n */\nWOQLClient.prototype.uid = function (ignore_jwt) {\n\treturn this.connectionConfig.user(ignore_jwt)\n}\n\n/**\n * You can update multiple connection values\n * @param {object} params - a json object with connection params \n */\nWOQLClient.prototype.set = function (params) {\n\tthis.connectionConfig.update(params)\n}\n\n/**\n * Returns a resource identifier string (for passing to WOQL.using) of the current context for \"commits\" \"meta\" \"branch\" and \"ref\" special resources\n * type is either [commits, meta, branch, ref, repo, db]\n */\nWOQLClient.prototype.resource = function (type, val) {\n    let base = `${this.account()}/${this.db()}/`\n    if(type == \"db\") return base\n    if(type == 'meta') return `${base}/_meta`\n    base += `${this.repo()}`\n    if(type == 'repo') return base\n    if(type == 'commits') return `${base}/_commits`\n    val = val || (type == \"ref\" ? this.ref() : this.checkout())\n    if(type == 'branch') return `${base}/branch/${val}`\n    if(type == 'ref') return `${base}/commit/${val}`\n}\n\n\n\n/**\n * Connect to a Terminus server at the given URI with an API key\n * Stores the terminus:ServerCapability document returned\n * in the connection register which stores, the url, key, capabilities,\n * and database meta-data for the connected server\n *\n * If the curl argument is false or  null,\n * this.connectionConfig.server will be used if present,\n * or the promise will be rejected.\n\n * @param {object} config - see constructor for structure\n * @return {Promise}\n * @public\n * \n */\nWOQLClient.prototype.connect = function (config) {\n\tif(config) this.connectionConfig.update(config)\n\tif(!this.server()){\n\t\tlet curl = (config && config.server ? config.server : \"Missing URL\")\n\t\treturn Promise.reject(\n\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(curl, CONST.CONNECT))\n\t\t)\n\t}\n\t// unset the current server setting until successful connect\n\treturn this.dispatch(CONST.CONNECT, this.server())\n\t.then((response) => {\n\t\tif(!this.account()) this.account(this.uid())\n\t    this.connection.setCapabilities(response)\n\t    return response\n\t})\n}\n\n\n/**\n * Create a Terminus Database \n *\n * @param {string} dbid - the local id to give the db\n * @param {Object} doc - JSON containing details about the database to be created: \n * doc.label: \"Textual DB Name\"\n * doc.comment: \"Text description of DB\"\n * doc.base_uri: base URI to use for data ids in the db\n * @param {string} [accountid] - optional account id - if absent default local account id is used\n * @return {Promise}\n * @public\n */\nWOQLClient.prototype.createDatabase = function(dbid, doc, accountid) {\n\tif(dbid && this.db(dbid)){\n\t\tif(accountid) this.account(accountid)\n\t\treturn this.dispatch(CONST.CREATE_DATABASE, this.connectionConfig.dbURL(), doc)\n\t}\n\tlet errmsg = `Create database parameter error - you must specify a valid database id  - ${dbid} is invalid`\n\treturn Promise.reject(\n\t\tnew Error(ErrorMessage.getInvalidParameterMessage(CONST.CREATE_DATABASE, errmsg))\n\t)\n}\n\n/**\n * Delete a Database (must first be connected to db)\n * @param {string} dbid - the local id to give the db\n * @param {string} accountid - optional account id - if absent current account id is used\n * @return {Promise}\n */\nWOQLClient.prototype.deleteDatabase = function (dbid, accountid) {\n\tif(dbid && this.db(dbid)){\n\t\tif(accountid) this.account(accountid)\n\t\treturn this.dispatch(CONST.DELETE_DATABASE, this.connectionConfig.dbURL())\n\t\t.then((response) => {\n\t\t\tthis.connection.removeDB(this.db(), this.account())\n\t\t\treturn response\n\t\t})\n\t}\n\tlet errmsg = `Delete database parameter error - you must specify a valid database id  - ${dbid} is invalid`\n\treturn Promise.reject(\n\t\tnew Error(ErrorMessage.getInvalidParameterMessage(CONST.DELETE_DATABASE, errmsg))\n\t)\n}\n\n/**\n* Creates a new graph in the current database context\n* @param {string} type \t\t  - type of graph     | inference | schema | instance |\n* @param {string} gid  \t\t  - local id of graph | main | mygraphName | * |\n* @param {string} commit_msg  - Textual message describing the reason for the update\n*/\nWOQLClient.prototype.createGraph = function (type, gid, commit_msg) {\n\tif(type && ([\"inference\", \"schema\", \"instance\"].indexOf(type) != -1) && gid && commit_msg){\n\t\tlet commit = this.generateCommitInfo(commit_msg)\n\t\treturn this.dispatch(CONST.CREATE_GRAPH, this.connectionConfig.graphURL(type, gid), commit)\n\t}\n\tlet errmsg = `Create graph parameter error - you must specify a valid type (inference, instance, schema), graph id and commit message`\n\treturn Promise.reject(\n\t\tnew Error(ErrorMessage.getInvalidParameterMessage(CONST.CREATE_GRAPH, errmsg))\n\t)\n}\n\n/**\n* Deletes a graph from the current database context\n* @param {string} type \t\t - type of graph     | inference | schema | instance |\n* @param {string} gid \t\t - local id of graph | main | mygraphName | * |\n* @param {string} commit_msg - Textual message describing the reason for the update\n*/\nWOQLClient.prototype.deleteGraph = function (type, gid, commit_msg) {\n\tif(type && ([\"inference\", \"schema\", \"instance\"].indexOf(type) != -1) && gid && commit_msg){\n\t\tlet commit = this.generateCommitInfo(commit_msg)\n\t\treturn this.dispatch(CONST.DELETE_GRAPH, this.connectionConfig.graphURL(type, gid), commit)\n\t}\n\tlet errmsg = `Delete graph parameter error - you must specify a valid type (inference, instance, schema), graph id and commit message`\n\treturn Promise.reject(\n\t\tnew Error(ErrorMessage.getInvalidParameterMessage(CONST.DELETE_GRAPH, errmsg))\n\t)\t\n}\n\n/**\n * Retrieves the contents of the specified graph as turtle\n *\n * @param {string} gtype Type of graph (instance|schema|inference)\n * schema get the database schema in owl\n * instance get all the database documents data in owl format\n * inference get all the constraints schema in owl  \n *\n * @param {string} gid TerminusDB Graph name \"main\" is the default value\n * @return {Promise} with result contents being the schema in owl turtle encoding\n *\n */\nWOQLClient.prototype.getTriples = function (gtype, gid) {\n\treturn this.dispatch(CONST.GET_TRIPLES, this.connectionConfig.triplesURL(gtype, gid))\n}\n\n/**\n * Replaces the contents of a graph with the passed turtle\n *\n * @param {string} gtype type of graph  |instance|schema|inference|\n * @param {string} gid TerminusDB Graph ID to update, main is the default value\n * @param {string} turtle is a valid set of triples in turtle format (OWL)\n * @param {string} commit_msg Textual message describing the reason for the update\n * @return {Promise}\n *\n * opts.format is used to specify which format is being used (*json / turtle)\n * opts.key is an optional API key\n */\n\nWOQLClient.prototype.updateTriples = function (gtype, gid, turtle, commit_msg) {\n\tif(commit_msg && turtle && gid && gtype){\n\t\tlet commit = this.generateCommitInfo(commit_msg)\n        commit.turtle = turtle\n\t\treturn this.dispatch(CONST.UPDATE_TRIPLES, this.connectionConfig.triplesURL(gtype, gid), commit)\n\t}\n\tlet errmsg = `Update triples parameter error - you must specify a valid graph id, graph type, turtle contents and commit message`\n\treturn Promise.reject(\n\t\tnew Error(ErrorMessage.getInvalidParameterMessage(CONST.UPDATE_TRIPLES, errmsg))\n\t)\t\n}\n\n/**\n * Retrieves a class frame for the specified clas\n *\n * @param {string} cls is the URL / ID of a document class that exists in the database schema\n */\nWOQLClient.prototype.getClassFrame = function (cls) {\n\tif(cls){\n\t\topts = {class: cls}\n\t\treturn this.dispatch(CONST.CLASS_FRAME, this.connectionConfig.classFrameURL(cls), opts)\n\t}\n\tlet errmsg = `Get class frame parameter error - you must specify a valid class id (URI)`\n\treturn Promise.reject(\n\t\tnew Error(ErrorMessage.getInvalidParameterMessage(CONST.UPDATE_SCHEMA, errmsg))\n\t)\t\n}\n\n/**\n * Executes a WOQL query on the specified database and returns the results\n *\n * @param {WOQLQuery} woql is a \"woql query object\" \n * @param {string} commit_msg - if the query contains any updates, it should include a textual message describing the reason for the update\n */\nWOQLClient.prototype.query = function (woql, commit_msg) {\n\tcommit_msg = commit_msg || \"Automatically Added Commit\"\n\tif(woql && woql.json && (!woql.containsUpdate() || commit_msg )){\n\t\tlet doql = (woql.containsUpdate() ? this.generateCommitInfo(commit_msg) : {})\n\t\tdoql.query = woql.json()\n\t\treturn this.dispatch(CONST.WOQL_QUERY, this.connectionConfig.queryURL(), doql)\n\t}\n\tlet errmsg = `WOQL query parameter error`\n\tif(woql && woql.json && woql.containsUpdate() && !commit_msg){\n\t\terrmsg += \" - you must include a textual commit message to perform this update\"\n\t}\n\telse {\n\t\terrmsg += \" - you must specify a valid WOQL Query\"\n\t}\n\treturn Promise.reject(\n\t\tnew Error(ErrorMessage.getInvalidParameterMessage(CONST.WOQL_QUERY, errmsg))\n\t)\t\n}\n\n/**\n * Creates a branch starting from the current branch \n * @param {string} new_branch_id - local identifier of the new branch\n * @param {string} commit_msg - if the query contains any updates, it should include a textual message describing the reason for the update\n * @returns {Promise}\n */\nWOQLClient.prototype.branch = function(new_branch_id) {\n\tif(new_branch_id){\n\t\tlet source = (this.ref() ? \n\t\t\t{ origin: `${this.account()}/${this.db()}/${this.repo()}/commit/${this.ref()}`}  : \n\t\t\t{ origin: `${this.account()}/${this.db()}/${this.repo()}/branch/${this.checkout()}`}  )\n\t\treturn this.dispatch(CONST.BRANCH, this.connectionConfig.branchURL(new_branch_id), source)\n\t}\n\tlet errmsg = `Branch parameter error - you must specify a valid new branch id`\n\treturn Promise.reject(\n\t\tnew Error(ErrorMessage.getInvalidParameterMessage(CONST.BRANCH, errmsg))\n\t)\t\n}\n\n/**\n * Fetches updates from a remote repository to the current db \n * @param {string} [repoid] - optional remote repoid - default \"origin\" \n */\nWOQLClient.prototype.fetch = function (repoid) {\n\treturn this.dispatch(CONST.FETCH, this.connectionConfig.fetchURL(repoid))\n}\n\n/**\n * Pushes changes to the current database / branch to a remote repo\n * @param {string} [target_repo] - target repoid - default \"origin\" \n * @param {string} [target_branch] - target branch - default \"master\" \n */\nWOQLClient.prototype.push = function (target_repo, target_branch) {\n\treturn this.dispatch(CONST.PUSH, this.connectionConfig.pushURL(target_repo, target_branch))\n}\n\n/**\n * Rebases this branch from the remote one (note: the \"remote\" repo lives in the local db)\n */\nWOQLClient.prototype.rebase = function (remote_repo_id, remote_branch_id) {\n\treturn this.dispatch(CONST.REBASE, this.connectionConfig.rebaseURL(remote_repo_id, remote_branch_id))\n}\n\n/**\n * Clones a remote repo and creates a local copy \n * @param {object} clone_source - json object with terminus:resource entry pointing at thing to be cloned (terminus-db)\n * @param {string} newid - id of the new repo to create\n */\nWOQLClient.prototype.clonedb = function (clone_source, newid) {\n    newid = newid || \"testing123\"\n\treturn this.dispatch(CONST.CLONE, this.connectionConfig.cloneURL(newid), clone_source)\n}\n\n\n/**\n * Common request dispatch function\n */\nWOQLClient.prototype.dispatch = function (action, api_url, payload) {\n\tif(!api_url){\n\t\treturn Promise.reject(\n\t\t\tnew Error(ErrorMessage.getInvalidParameterMessage(action, this.connectionConfig.connection_error))\n\t\t)\n    }\n\treturn DispatchRequest(api_url, action, payload, this.basic_auth(), this.remote_auth())\n}\n\n/**\n * Generates the json structure for commit messages\n * @param {string} msg - textual string describing reason for the change\n * @param {string} [author] - optional author id string - if absent current user id will be used\n */\nWOQLClient.prototype.generateCommitInfo = function(msg, author){\n\tauthor = author || this.uid()\n\tlet ci = {\"commit_info\": {author: author, message: msg}}\n\treturn ci\n}\n\n\nmodule.exports = WOQLClient\n","const axiosInstance = require('./axiosInstance');\nconst UTILS = require('./utils.js');\nconst CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n\n/**\n * base 64 encodes a string using either the btoa implementation if available or the Buffer object.\n * @param {String} str string to be base 64 encoded\n */\nfunction btoaImplementation(str) {\n\ttry {\n\t\treturn btoa(str);\n\t} catch (err) {\n\t\treturn Buffer.from(str).toString('base64');\n\t}\n}\n\n/**\n * @file Dispatch Request\n * @license Apache Version 2\n * @description Functions for dispatching API requests via the axios library.\n * @param {String} url  API endpoint URL\n * @param {String} action API action\n * @param {Object} payload data to be transmitted to endpoint\n * @param {String} key optional basic auth string to be passed\n */\nfunction DispatchRequest(url, action, payload, basic_auth, remote_auth=null) {\n\t/*\n\t*CORS is only required when trying to fetch data from a browser,\n\t*as browsers by default will block requests to different origins\n\t*/\n\tconst options = {\n\t\tmode: 'cors', // no-cors, cors, *same-origin\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrer: 'client',\n\t\t// url:url,\n\t\t// no-referrer, *client\n\t};\n\tif (basic_auth) {\n\t\tlet encoded = btoaImplementation(basic_auth)\n\t\toptions.headers = { Authorization: `Basic ${encoded}` };\n\t\t/*\n\t\t*if we have the jwt access_token we pass it in the custom header Authorization-Remote\n        */\n        if(remote_auth && remote_auth.type == \"jwt\"){\n\t\t\toptions.headers['Authorization-Remote']=`Bearer ${remote_auth.key}`\n        }\n        if(remote_auth && remote_auth.type == \"basic\"){\n            let rencoded = btoaImplementation(remote_auth.user + \":\" + remote_auth.key)\n\t\t\toptions.headers['Authorization-Remote']=`Basic ${rencoded}`\n        }\n\t}else if(jwt){\n\t\toptions.headers = { Authorization: `Bearer ${jwt}` };\n\t}\t\n\n\tswitch (action) {\n\tcase CONST.DELETE_DATABASE:\n\tcase CONST.DELETE_GRAPH:\n\t\tif (payload) {\n\t\t\t//const ext = UTILS.URIEncodePayload(payload);\n            //if (ext) url += `?${ext}`;\n            options.data = payload\n\t\t}\n\t\treturn axiosInstance.delete(url, options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n                const e = new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t\tif (err.response && err.response.data) e.data = err.response.data;\n\t\t\t\tthrow e;\n\t\t\t});\n\tcase CONST.WOQL_QUERY:\n\tcase CONST.CREATE_DATABASE:\n\tcase CONST.UPDATE_TRIPLES:\n\tcase CONST.CREATE_GRAPH:\n\tcase CONST.FETCH:\n\tcase CONST.PUSH:\n\tcase CONST.REBASE:\n\tcase CONST.BRANCH:\n\tcase CONST.CLONE:\n\t\toptions.headers = options.headers ? options.headers : {};\n        options.headers['Content-Type'] = 'application/json';\n\t\treturn axiosInstance.post(url, payload, options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n                const e = new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t\tif (err.response && err.response.data) e.data = err.response.data;\n\t\t\t\tthrow e;\n\t\t\t});\n\tcase CONST.GET_TRIPLES:\n\tcase CONST.CONNECT:\n\tcase CONST.CLASS_FRAME:\n\tdefault:\n\t\tif (payload) {\n\t\t\tconst ext = UTILS.URIEncodePayload(payload);\n\t\t\tif (ext) url += `?${ext}`;\n\t\t}\n\t\treturn axiosInstance.get(url, options)\n\t\t\t.then((response => response.data))\n\t\t\t.catch((err) => {\n\t\t\t\tlet e = new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t\tif(err.response && err.response.data){\n\t\t\t\t\te.data = err.response.data;\n\t\t\t\t}\n\t\t\t\tthrow e;\n\t\t\t});\n\t}\n}\n\nmodule.exports = DispatchRequest;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","const WOQLQuery = require(\"./woqlCore\")\n\n/**\n * Contains definitions of the WOQL functions which map directly to JSON-LD types\n * All other calls and queries can be composed from these\n */\n\nWOQLQuery.prototype.using = function(Collection, Subq){\n\tif(Collection && Collection == \"woql:args\") return [\"woql:collection\", \"woql:query\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:Using\"\n\tif(!Collection || typeof Collection != \"string\"){\n\t\treturn this.parameterError(\"The first parameter to using must be a Collection ID (string)\")\n\t}\n\tthis.cursor['woql:collection'] = this.jlt(Collection)\n\treturn this.addSubQuery(Subq)\n}\n\nWOQLQuery.prototype.comment = function(comment, Subq){\n\tif(comment && comment == \"woql:args\") return [\"woql:comment\", \"woql:query\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:Comment\"\n\tthis.cursor['woql:comment'] = this.jlt(comment)\n\treturn this.addSubQuery(Subq)\n}\n\nWOQLQuery.prototype.select = function (...list) {\n\tif(list && list[0] == \"woql:args\") return [\"woql:variable_list\", \"woql:query\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:Select\"\n\tif(!list || list.length <= 0){\n\t\treturn this.parameterError(\"Select must be given a list of variable names\")\n\t}\n\tlet last =list[list.length - 1]\n\tif(typeof last == \"object\" && last.json){\n\t\tvar embedquery = list.pop()\n\t}\n\telse var embedquery = false;\n\tthis.cursor['woql:variable_list'] = [];\n\tfor(var i = 0; i<list.length; i++){\n\t\tlet onevar = this.varj(list[i])\n\t\tonevar[\"@type\"] = \"woql:VariableListElement\"\n\t\tonevar[\"woql:index\"] = this.jlt(i, \"nonNegativeInteger\")\t\t\n\t\tthis.cursor['woql:variable_list'].push(onevar)\n\t}\n\treturn this.addSubQuery(embedquery)\n}\n\nWOQLQuery.prototype.and = function (...queries) {\n\tif(this.cursor['@type'] && this.cursor['@type'] != \"woql:And\"){\n\t\tlet nj = new WOQLQuery().json(this.cursor)\n\t\tfor(var k in this.cursor) delete(this.cursor[k])\n\t\tqueries.unshift(nj)\n\t}\n\tif(queries && queries[0] == \"woql:args\") return [\"woql:query_list\"]\n\tthis.cursor['@type'] = \"woql:And\"\t\n\tif(typeof this.cursor['woql:query_list'] == \"undefined\") this.cursor['woql:query_list'] = []\n\tfor (let i = 0; i < queries.length; i++) {\n\t\tlet index = this.cursor['woql:query_list'].length \n\t\tlet onevar = this.qle(queries[i], index)\n\t\tif(onevar[\"woql:query\"]['@type'] == \"woql:And\" && onevar[\"woql:query\"]['woql:query_list']){\n\t\t\tfor(var j = 0; j<onevar[\"woql:query\"]['woql:query_list'].length; j++){\n\t\t\t\tlet qjson = onevar[\"woql:query\"]['woql:query_list'][j]['woql:query']\n\t\t\t\tif(qjson) {\n\t\t\t\t\tindex = this.cursor['woql:query_list'].length \n\t\t\t\t\tlet subvar = this.qle(qjson, index)\n\t\t\t\t\tthis.cursor['woql:query_list'].push(subvar)\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.cursor['woql:query_list'].push(onevar)\t\t\n\t\t}\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.or = function (...queries) {\n\tif(queries && queries[0] == \"woql:args\") return [\"woql:query_list\"]\n\tif(this.cursor['@type'] && this.cursor['@type'] != \"woql:Or\"){\n\t\tlet nj = new WOQLQuery().json(this.cursor)\n\t\tfor(var k in this.cursor) delete(this.cursor[k])\n\t\tqueries.unshift(nj)\n\t}\t\n\tthis.cursor['@type'] = \"woql:Or\"\n\tif(typeof this.cursor['woql:query_list'] == \"undefined\") this.cursor['woql:query_list'] = []\n\tfor (let i = 0; i < queries.length; i++) {\n\t\tlet onevar = this.qle(queries[i], i)\n\t\tthis.cursor['woql:query_list'].push(onevar)\t\t\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.from = function(graph_filter, query){\n\tif(graph_filter && graph_filter == \"woql:args\") return [\"woql:graph_filter\", \"woql:query\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:From\"\n\tif(!graph_filter || typeof graph_filter != \"string\"){\n\t\treturn this.parameterError(\"The first parameter to from must be a Graph Filter Expression (string)\")\n\t}\n\tthis.cursor['woql:graph_filter'] = this.jlt(graph_filter)\n\treturn this.addSubQuery(query)\n}\n\nWOQLQuery.prototype.into = function(graph_descriptor, query){\n\tif(graph_descriptor && graph_descriptor == \"woql:args\") return [\"woql:graph\", \"woql:query\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:Into\"\n\tif(!graph_descriptor || typeof graph_descriptor != \"string\"){\n\t\treturn this.parameterError(\"The first parameter to from must be a Graph Filter Expression (string)\")\n\t}\n\tthis.cursor['woql:graph'] = this.jlt(graph_descriptor)\n\treturn this.addSubQuery(query)\n}\n\nWOQLQuery.prototype.triple = function(a, b, c){\n\tif(a && a == \"woql:args\") return [\"woql:subject\", \"woql:predicate\", \"woql:object\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:Triple\"\n\tthis.cursor['woql:subject'] = this.cleanSubject(a);\n\tthis.cursor['woql:predicate'] = this.cleanPredicate(b);\n\tthis.cursor['woql:object'] = this.cleanObject(c);\n\treturn this;\n}\n\nWOQLQuery.prototype.quad = function(a, b, c, g){\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tlet args =\tthis.triple(a, b, c);\n\tif(a && a == \"woql:args\") return args.concat([\"woql:graph_filter\"])\n\tif(!g) return this.parameterError(\"Quad takes four parameters, the last should be a graph filter\")\n\tthis.cursor['@type'] = \"woql:Quad\"\n\tthis.cursor['woql:graph_filter'] = this.cleanGraph(g);\n\treturn this\n}\n\nWOQLQuery.prototype.sub = function(a, b){\n\tif(a && a == \"woql:args\") return [\"woql:parent\", \"woql:child\"]\n\tif(!a || !b) return this.parameterError(\"Subsumption takes two parameters, both URIs\")\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:Subsumption\"\n\tthis.cursor[\"woql:parent\"] = this.cleanClass(a);\n\tthis.cursor[\"woql:child\"] = this.cleanClass(b);\n\treturn this;\n}\n\nWOQLQuery.prototype.subsumption = WOQLQuery.prototype.sub\n\nWOQLQuery.prototype.eq = function(a, b){\n\tif(a && a == \"woql:args\") return [\"woql:left\", \"woql:right\"]\n\tif( typeof a == \"undefined\" ||  typeof b == \"undefined\") return this.parameterError(\"Equals takes two parameters\")\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:Equals\"\n\tthis.cursor['woql:left'] = this.cleanObject(a)\n\tthis.cursor['woql:right'] = this.cleanObject(b)\n\treturn this\n}\n\nWOQLQuery.prototype.equals = WOQLQuery.prototype.eq\n\nWOQLQuery.prototype.substr = function(String, Before, Length, After, SubString){\n\tif(String && String == \"woql:args\") return [\"woql:string\", \"woql:before\", \"woql:length\",  \"woql:after\", \"woql:substring\"]\n\tif(!SubString){\n\t\tSubString = After\n\t\tAfter = 0\n\t} \n\tif(!SubString){\n\t\tSubString = Length\n\t\tLength = SubString.length + Before\n\t}\n\tif(!String || !SubString || typeof SubString != \"string\") \n\treturn this.parameterError(\"Substr - the first and last parameters must be strings representing the full and substring variables / literals\")\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:Substring\"\n\tthis.cursor['woql:string'] = this.cleanObject(String)\n\tthis.cursor['woql:before'] = this.cleanObject(Before, \"xsd:nonNegativeInteger\")\n\tthis.cursor['woql:length'] = this.cleanObject(Length, \"xsd:nonNegativeInteger\")\n\tthis.cursor['woql:after'] = this.cleanObject(After, \"xsd:nonNegativeInteger\")\n\tthis.cursor['woql:substring'] = this.cleanObject(SubString)\n\treturn this\n}\n\nWOQLQuery.prototype.substring = WOQLQuery.prototype.substr\n\n\nWOQLQuery.prototype.update_object = function(docjson){\n\tif(docjson && docjson == \"woql:args\") return [\"woql:document\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:UpdateObject\"\n\tthis.cursor['woql:document'] = docjson;\n\treturn this.updated()\n}\n\nWOQLQuery.prototype.update = WOQLQuery.prototype.update_object\n\n\nWOQLQuery.prototype.delete_object = function (JSON_or_IRI) {\n\tif(JSON_or_IRI && JSON_or_IRI == \"woql:args\") return [\"woql:document\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:DeleteObject\"\n\tthis.cursor['woql:document_uri'] = JSON_or_IRI;\n\treturn this.updated()\n}\n\nWOQLQuery.prototype.delete = WOQLQuery.prototype.delete_object\n\n\nWOQLQuery.prototype.read_object = function (IRI, OutputVar, Format) {\n\tif(IRI && IRI == \"woql:args\") return [\"woql:document\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:ReadObject\"\n\tthis.cursor['woql:document_uri'] = IRI ;\n\tthis.cursor['woql:document'] = this.expandVariable(OutputVar)\n\treturn this.wform(Format)\n}\n\nWOQLQuery.prototype.read = WOQLQuery.prototype.read_object\n\n\n/**\n * Takes an as structure\n */\nWOQLQuery.prototype.get = function(asvars, query_resource){\n\tif(asvars && asvars == \"woql:args\") return [\"woql:as_vars\", \"woql:query_resource\"]\n\tthis.cursor['@type'] = \"woql:Get\"\n\tthis.cursor['woql:as_vars'] = (asvars.json ? asvars.json() : new WOQLQuery().as(...asvars).json())\n\tif(query_resource){\n\t\tthis.cursor['woql:query_resource'] = this.jobj(query_resource);\n\t}\n\telse {\n\t\tthis.cursor['woql:query_resource'] = {}\n\t}\n\tthis.cursor = this.cursor['woql:query_resource'];\n\treturn this;\n}\n\n/**\n * Takes an array of variables, an optional array of column names\n */\nWOQLQuery.prototype.put = function(asvars, query_resource, query){\n\tif(asvars && asvars == \"woql:args\") return [\"woql:as_vars\", \"woql:query\", \"woql:query_resource\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:Put\"\n\tthis.cursor['woql:as_vars'] = (asvars.json ? asvars.json() : new WOQLQuery().as(...asvars).json())\n\tif(query_resource){\n\t\tthis.cursor['woql:query_resource'] = this.jobj(query_resource);\n\t}\n\telse {\n\t\tthis.cursor['woql:query_resource'] = {}\n\t}\n\treturn this.addSubQuery(query)\n}\n\n/**\n * Forms \n *   1. indexedasvars\n *   2. namedasvars\n *\n * Imports the value identified by Source to a Target variable\n *   \n * calling: \n *   WOQL.as(\"first var\", \"v:First_Var\", \"string\").as(\"second var\", \"v:Second_Var\")\n *   WOQL.as([\"first var\", \"v:First_Var\", \"string\"], [\"second var\", \"v:Second_Var\"])\n * \t \n *   @param {array} varList variable number of arguments\n */\nWOQLQuery.prototype.as = function(...varList){\n\tif(varList && varList[0] == \"woql:args\") return [[\"woql:indexed_as_var\", \"woql:named_as_var\"]]\n\tif(!Array.isArray(this.query)) this.query = []\n\tif(Array.isArray(varList[0])){\n\t\tfor(var i = 0 ; i<varList.length; i++){\n\t\t\tlet onemap = varList[i]\n\t\t\tif(Array.isArray(onemap) && onemap.length >= 2){\n\t\t\t\tlet type = (onemap && onemap.length > 2 ?  onemap[2] : false)\n\t\t\t\tlet oasv = this.asv(onemap[0], onemap[1], type)\n\t\t\t\tthis.query.push(oasv)\n\t\t\t}\n\t\t}\n\t}\n\telse if(typeof varList[0]  == \"number\" || typeof varList[0]  == \"string\"){\n\t\tlet type = (varList.length > 2 ?  varList[2] : false)\n\t\tlet oasv = this.asv(varList[0], varList[1], type)\n\t\tthis.query.push(oasv)\n\t}\n\telse if(typeof varList[0]  == \"object\"){\n\t\tthis.query.push(varList[0].json ? varList[0].json() : varList[0])\n\t}\n\treturn this\n}\n\nWOQLQuery.prototype.file = function(fpath, opts){\n\tif(fpath && fpath == \"woql:args\") return [\"woql:file\", \"woql:format\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:FileResource\"\n\tthis.cursor['woql:file'] = fpath;//{\"@type\": \"xsd:string\", \"@value\": fpath};\n\treturn this.wform(opts)\n}\n\nWOQLQuery.prototype.remote = function(uri, opts){\n\tif(uri && uri == \"woql:args\") return [\"woql:remote_uri\", \"woql:format\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:RemoteResource\"\n\tthis.cursor['woql:remote_uri'] = {\"@type\": \"xsd:anyURI\", \"@value\": uri};\n\treturn this.wform(opts)\n}\n\nWOQLQuery.prototype.post = function(fpath, opts){\n\tif(fpath && fpath == \"woql:args\") return [\"woql:file\", \"woql:format\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor['@type'] = \"woql:PostResource\"\n\tthis.cursor['woql:file'] = {\"@type\": \"xsd:string\", \"@value\": fpath};\n\treturn this.wform(opts)\n}\n\nWOQLQuery.prototype.delete_triple = function( Subject, Predicate, Object_or_Literal ){\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tlet args = this.triple(Subject, Predicate, Object_or_Literal)\n\tif(Subject && Subject == \"woql:args\") return args\n\tthis.cursor[\"@type\"] = \"woql:DeleteTriple\"\n\treturn this.updated()\n}\n\nWOQLQuery.prototype.add_triple = function( Subject, Predicate, Object_or_Literal ){\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tlet args = this.triple(Subject, Predicate, Object_or_Literal)\n\tif(Subject && Subject == \"woql:args\") return args\n\tthis.cursor[\"@type\"] = \"woql:AddTriple\"\n\treturn this.updated()\n}\n\nWOQLQuery.prototype.delete_quad = function( a, b, c, g){\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tlet args =\tthis.triple(a, b, c);\n\tif(a && a == \"woql:args\") return args.concat([\"woql:graph\"])\n\tif(!g) return this.parameterError(\"Delete Quad takes four parameters, the last should be a graph id\")\n\tthis.cursor['@type'] = \"woql:DeleteQuad\"\n\tthis.cursor['woql:graph'] = this.cleanGraph(g);\n\treturn this.updated()\n}\n\nWOQLQuery.prototype.add_quad = function(a, b, c, g){\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tlet args =\tthis.triple(a, b, c);\n\tif(a && a == \"woql:args\") return args.concat([\"woql:graph\"])\n\tif(!g) return this.parameterError(\"Add Quad takes four parameters, the last should be a graph id\")\n\tthis.cursor['@type'] = \"woql:AddQuad\"\n\tthis.cursor['woql:graph'] = this.cleanGraph(g);\n\treturn this.updated()\n}\n\n/*\n * Functions which take a query as an argument advance the cursor to make the chaining of queries fall\n * into the corrent place in the encompassing json\n */\nWOQLQuery.prototype.when = function(Query, Consequent){\n\tif(Query && Query == \"woql:args\") return [\"woql:query\", \"woql:consequent\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:When\"\n\tthis.addSubQuery(Query)\n\tif(Consequent){\n\t\tthis.cursor[\"woql:consequent\"] = this.jobj(Consequent);\n\t}\n\telse {\n\t\tthis.cursor[\"woql:consequent\"] = {}\n\t}\n\tthis.cursor = this.cursor[\"woql:consequent\"]\n\treturn this\n}\n\n\nWOQLQuery.prototype.trim = function(untrimmed, trimmed){\n\tif(untrimmed && untrimmed == \"woql:args\") return [\"woql:untrimmed\", \"woql:trimmed\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Trim\"\n\tthis.cursor['woql:untrimmed'] = this.cleanObject(untrimmed)\n\tthis.cursor['woql:trimmed'] = this.cleanObject(trimmed)\n\treturn this\n}\n\nWOQLQuery.prototype.eval = function(arith, res){\n\tif(arith && arith == \"woql:args\") return [\"woql:expression\", \"woql:result\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Eval\"\n\tthis.cursor['woql:expression'] = (arith.json ? arith.json() : arith)\n\tthis.cursor['woql:result'] = this.cleanObject(res)\n\treturn this;\n}\n\nWOQLQuery.prototype.plus = function (...args) {\n\tif(args && args[0] == \"woql:args\") return [\"woql:first\", \"woql:second\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Plus\"\n\tthis.cursor['woql:first'] = this.arop(args.shift())\n\tif(args.length > 1){\n\t\tthis.cursor['woql:second'] = this.jobj(new WOQLQuery().plus(...args))\n\t}\n\telse {\n\t\tthis.cursor['woql:second'] =  this.arop(args[0])\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.minus = function (...args) {\n\tif(args && args[0] == \"woql:args\") return [\"woql:first\", \"woql:second\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Minus\"\n\tthis.cursor['woql:first'] = this.arop(args.shift())\n\tif(args.length > 1){\n\t\tthis.cursor['woql:second'] = this.jobj(new WOQLQuery().minus(...args))\n\t}\n\telse {\n\t\tthis.cursor['woql:second'] =  this.arop(args[0])\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.times = function (...args) {\n\tif(args && args[0] == \"woql:args\") return [\"woql:first\", \"woql:second\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Times\"\n\tthis.cursor['woql:first'] = this.arop(args.shift())\n\tif(args.length > 1){\n\t\tthis.cursor['woql:second'] = this.jobj(new WOQLQuery().times(...args))\n\t}\n\telse {\n\t\tthis.cursor['woql:second'] =  this.arop(args[0])\n\t}\n\treturn this;\n}\n\n\nWOQLQuery.prototype.divide = function (...args) {\n\tif(args && args[0] == \"woql:args\") return [\"woql:first\", \"woql:second\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Divide\"\n\tthis.cursor['woql:first'] = this.arop(args.shift())\n\tif(args.length > 1){\n\t\tthis.cursor['woql:second'] = this.jobj(new WOQLQuery().divide(...args))\n\t}\n\telse {\n\t\tthis.cursor['woql:second'] =  this.arop(args[0])\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.div = function (...args) {\n\tif(args && args[0] == \"woql:args\") return [\"woql:first\", \"woql:second\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Div\"\n\tthis.cursor['woql:first'] = this.arop(args.shift())\n\tif(args.length > 1){\n\t\tthis.cursor['woql:second'] = this.jobj(new WOQLQuery().div(...args))\n\t}\n\telse {\n\t\tthis.cursor['woql:second'] =  this.arop(args[0])\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.exp = function (a, b) {\n\tif(a && a == \"woql:args\") return [\"woql:first\", \"woql:second\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Exp\"\n\tthis.cursor['woql:first'] = this.arop(a)\n\tthis.cursor['woql:second'] = this.arop(b)\n\treturn this;\n}\n\nWOQLQuery.prototype.floor = function (a) {\n\tif(a && a == \"woql:args\") return [\"woql:argument\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Floor\"\n\tthis.cursor['woql:argument'] = this.arop(a)\n\treturn this;\n}\n\nWOQLQuery.prototype.isa = function(a, b){\n\tif(a && a == \"woql:args\") return [\"woql:element\", 'woql:of_type']\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:IsA\"\n\tthis.cursor['woql:element'] = this.cleanSubject(a)\n\tthis.cursor['woql:of_type'] = this.cleanClass(b)\n\treturn this\n}\n\nWOQLQuery.prototype.like = function(a, b, dist){\n\tif(a && a == \"woql:args\") return [\"woql:left\", \"woql:right\", 'woql:like_similarity']\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Like\"\n\tthis.cursor['woql:left'] = this.cleanObject(a)\n\tthis.cursor['woql:right'] = this.cleanObject(b)\n\tif(dist){\n\t\tthis.cursor['woql:like_similarity'] = this.cleanObject(dist, \"xsd:decimal\")\n\t}\n\treturn this\n}\n\nWOQLQuery.prototype.less = function(v1, v2){\n\tif(v1 && v1 == \"woql:args\") return [\"woql:left\", \"woql:right\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Less\"\n\tthis.cursor['woql:left'] = this.cleanObject(v1)\n\tthis.cursor['woql:right'] = this.cleanObject(v2)\n\treturn this;\n}\n\nWOQLQuery.prototype.greater = function(v1, v2){\n\tif(v1 && v1 == \"woql:args\") return [\"woql:left\", \"woql:right\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Greater\"\n\tthis.cursor['woql:left'] = this.cleanObject(v1)\n\tthis.cursor['woql:right'] = this.cleanObject(v2)\n\treturn this;\n}\n\nWOQLQuery.prototype.opt = function(query){\n\tif(query && query == \"woql:args\") return [\"woql:query\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Optional\"\n\tthis.addSubQuery(query)\n\treturn this;\n}\n\nWOQLQuery.prototype.optional = WOQLQuery.prototype.opt \n\nWOQLQuery.prototype.unique = function(prefix, vari, type){\n\tif(prefix && prefix == \"woql:args\") return [\"woql:base\", \"woql:key_list\", \"woql:uri\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Unique\"\n\tthis.cursor[\"woql:base\"] = this.cleanObject(prefix)\n\tthis.cursor[\"woql:key_list\"] = this.vlist(vari)\n\tthis.cursor[\"woql:uri\"] = this.cleanClass(type)\n\treturn this\n}\n\n/**\n* example WOQL.idgen(\"doc:Journey\",[\"v:Start_ID\",\"v:Start_Time\",\"v:Bike\"],\"v:Journey_ID\"),\n*\n* Generates the node's ID combined the variable list with a specific prefix (URL base). \n* If the input variables's values are the same, the output value will be the same.\n* @param {string} prefix\n* @param {string or array}  inputVarList the variable input list for generate the id\n* @param {string} outputVar  the output variable name\n*/\n\nWOQLQuery.prototype.idgen = function(prefix, inputVarList, outputVar){\n\tif(prefix && prefix == \"woql:args\") return [\"woql:base\", \"woql:key_list\", \"woql:uri\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:IDGenerator\"\n\tthis.cursor[\"woql:base\"] = this.cleanObject(prefix)\n\tthis.cursor[\"woql:key_list\"] = this.vlist(inputVarList)\n\tthis.cursor[\"woql:uri\"] = this.cleanClass(outputVar)\n\treturn this\n}\n\nWOQLQuery.prototype.idgenerator = WOQLQuery.prototype.idgen\n\n\nWOQLQuery.prototype.upper = function(l, u){\n\tif(l && l == \"woql:args\") return [\"woql:left\", \"woql:right\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Upper\"\n\tthis.cursor['woql:left'] = this.cleanObject(l)\n\tthis.cursor['woql:right'] = this.cleanObject(u)\n\treturn this;\n}\n\nWOQLQuery.prototype.lower = function(u, l){\n\tif(u && u == \"woql:args\") return [\"woql:left\", \"woql:right\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Lower\"\n\tthis.cursor['woql:left'] = this.cleanObject(u)\n\tthis.cursor['woql:right'] = this.cleanObject(l)\n\treturn this;\n}\n\nWOQLQuery.prototype.pad = function(input, pad, len, output){\n\tif(input && input == \"woql:args\") return [\"woql:pad_string\", \"woql:pad_char\", \"woql:pad_times\", \"woql:pad_result\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Pad\"\n\tthis.cursor['woql:pad_string'] = this.cleanObject(input)\n\tthis.cursor['woql:pad_char'] = this.cleanObject(pad)\n\tthis.cursor['woql:pad_times'] = this.cleanObject(len, \"xsd:integer\")\n\tthis.cursor['woql:pad_result'] = this.cleanObject(output)\n\treturn this;\n}\n\nWOQLQuery.prototype.split = function(input, glue, output){\n\tif(input && input == \"woql:args\") return [\"woql:split_string\", \"woql:split_pattern\", \"woql:split_list\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Split\"\n\tthis.cursor['woql:split_string'] = this.cleanObject(input)\n\tthis.cursor['woql:split_pattern'] = this.cleanObject(glue)\n\tthis.cursor['woql:split_list'] = this.wlist(output)\n\treturn this;\n}\n\nWOQLQuery.prototype.member = function(El, List){\n\tif(El && El == \"woql:args\") return [\"woql:member\", \"woql:member_list\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Member\"\n\tthis.cursor['woql:member'] = this.cleanObject(El)\n\tthis.cursor['woql:member_list'] = this.wlist(List)\n\treturn this;\n}\n\nWOQLQuery.prototype.concat = function(list, v){\n\tif(list && list == \"woql:args\") return [\"woql:concat_list\", \"woql:concatenated\"]\n\tif(typeof list == \"string\"){\n\t\tvar slist = list.split(/(v:)/);\n\t\tvar nlist = []\n\t\tif(slist[0]) nlist.push(slist[0]) \n\t\tfor(var i = 1; i<slist.length; i = i+2){\n\t\t\tif(slist[i]){\n\t\t\t\tif(slist[i] == \"v:\"){\n\t\t\t\t\tvar slist2 = slist[i+1].split(/([^\\w_])/);\n\t\t\t\t\tlet x = slist2.shift()\n\t\t\t\t\tnlist.push(\"v:\" + x)\n\t\t\t\t\tlet rest = slist2.join(\"\")\n\t\t\t\t\tif(rest) nlist.push(rest)\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlist = nlist\n\t}\n\tif(Array.isArray(list)){\n\t\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\t\tthis.cursor[\"@type\"] = \"woql:Concatenate\"\n\t\tthis.cursor[\"woql:concat_list\"] = this.wlist(list)\n\t\tthis.cursor['woql:concatenated'] = this.cleanObject(v)\n\t}\t\n\treturn this;\n}\n\nWOQLQuery.prototype.concatenate = WOQLQuery.prototype.concat\n\n\nWOQLQuery.prototype.join = function(input, glue, output){\n\tif(input && input == \"woql:args\") return [\"woql:join_list\", \"woql:join_separator\", \"woql:join\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Join\"\n\tthis.cursor['woql:join_list'] = this.wlist(input)\n\tthis.cursor['woql:join_separator'] = this.cleanObject(glue)\n\tthis.cursor['woql:join'] = this.cleanObject(output)\n\treturn this;\n}\n\nWOQLQuery.prototype.sum = function (input, output) {\n\tif(input && input == \"woql:args\") return [\"woql:sum_list\", \"woql:sum\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Sum\"\n\tthis.cursor['woql:sum_list'] = this.wlist(input)\n\tthis.cursor['woql:sum'] = this.cleanObject(output)\n\treturn this;\n}\n\nWOQLQuery.prototype.start = function(start, query){\n\tif(start && start == \"woql:args\") return [\"woql:start\", \"woql:query\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Start\"\n\tthis.cursor['woql:start'] = this.cleanObject(start, \"xsd:nonNegativeInteger\")\n\treturn this.addSubQuery(query)\n}\n\nWOQLQuery.prototype.limit = function(limit, query){\n\tif(limit && limit == \"woql:args\") return [\"woql:limit\", \"woql:query\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Limit\"\n\tthis.cursor['woql:limit'] = this.cleanObject(limit, \"xsd:nonNegativeInteger\")\n\treturn this.addSubQuery(query)\n}\n\nWOQLQuery.prototype.re = function(p, s, m){\n\tif(p && p == \"woql:args\") return [\"woql:pattern\", \"woql:regexp_string\", \"woql:regexp_list\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Regexp\"\n\tthis.cursor['woql:pattern'] = this.cleanObject(p)\n\tthis.cursor['woql:regexp_string'] = this.cleanObject(s)\n\tthis.cursor['woql:regexp_list'] = this.wlist(m)\n\treturn this;\n}\n\nWOQLQuery.prototype.regexp = WOQLQuery.prototype.re\n\n\nWOQLQuery.prototype.length = function(va, vb){\n\tif(va && va == \"woql:args\") return [\"woql:length_list\", \"woql:length\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Length\"\n\tthis.cursor['woql:length_list'] = this.vlist(va)\n\tif(typeof vb == \"number\"){\n\t\tthis.cursor['woql:length'] = this.cleanObject(vb, \"xsd:nonNegativeInteger\")\n\t}\n\telse if(typeof vb == \"string\"){\n\t\tthis.cursor['woql:length'] = this.varj(vb)\n\t}\n\treturn this;\n}\n\n\n/**\n * Negation of passed or chained query\n */\nWOQLQuery.prototype.not = function (query) {\n\tif(query && query == \"woql:args\") return [\"woql:query\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Not\"\n\treturn this.addSubQuery(query)\n}\n\n\n\nWOQLQuery.prototype.cast = function(val, type, vb){\n\tif(val && val == \"woql:args\") return [\"woql:typecast_value\", 'woql:typecast_type', 'woql:typecast_result']\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Typecast\"\n\tthis.cursor['woql:typecast_value'] = this.cleanObject(val)\n\tthis.cursor['woql:typecast_type'] = this.cleanObject(type)\n\tthis.cursor['woql:typecast_result'] = this.cleanObject(vb)\n\treturn this;\n}\n\nWOQLQuery.prototype.typecast = WOQLQuery.prototype.cast\n\n/**\n * Input format: \n * order_by(\"v:A asc\", \"v:B\", \"v:C asc\", query)\n * or\n * order_by(\"v:A asc\", \"v:B\", \"v:C asc\").query()\n * or\n * order_by({\"@type\": \"woql:VariableOrdering\", \"woql:index\": { @value: 0, @type: \"xsd:nonNegativeInteger\"}})\n *\n */\n\nWOQLQuery.prototype.order_by = function(...orderedVarlist){\n\tif(orderedVarlist && orderedVarlist[0] == \"woql:args\") return [\"woql:variable_ordering\", 'woql:query']\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:OrderBy\"\n\tthis.cursor[\"woql:variable_ordering\"] = []\n\n\tif(!orderedVarlist || orderedVarlist.length === 0){\n\t\treturn this.parameterError(\"Order by must be passed at least one variables to order the query\")\n\t}\n\tlet embedquery = (typeof orderedVarlist[orderedVarlist.length - 1] === 'object' && orderedVarlist[orderedVarlist.length - 1].json ? orderedVarlist.pop() : false)\n\tfor(var i = 0; i<orderedVarlist.length; i++){\n\t\tif(typeof orderedVarlist[i] == \"string\" ){\n\t\t\tlet obj = {\n\t\t\t\t\"@type\": \"woql:VariableOrdering\",\n\t\t\t\t\"woql:index\": this.jlt(i, \"xsd:nonNegativeInteger\"),\n\t\t\t}\n\t\t\tlet cmds = orderedVarlist[i].split(\" \")\n\t\t\tif(cmds[1] && cmds[1].trim() && cmds[1].trim().toLowerCase() == \"asc\"){\n\t\t\t\tobj['woql:ascending'] = this.jlt(true, \"xsd:boolean\")\n\t\t\t}\n\t\t\tlet varname = cmds[0].trim()\t\t\t\n\t\t\tobj['woql:variable'] =  this.varj(varname)\n\t\t\tthis.cursor[\"woql:variable_ordering\"].push(obj)\n\t\t}\n\t\telse {\n\t\t\tthis.cursor[\"woql:variable_ordering\"].push(orderedVarlist[i])\n\t\t}\n\t}\n\treturn this.addSubQuery(embedquery)\n}\n\nWOQLQuery.prototype.group_by = function(gvarlist, groupedvar, output, groupquery){\n\tif(gvarlist && gvarlist == \"woql:args\") return [\"woql:variable_list\", 'woql:group_var', \"woql:grouped\", \"woql:query\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:GroupBy\"\n\t//this.cursor['woql:variable_list'] = [];\n    this.cursor['woql:group_by'] = [];\n\t\n    if(typeof gvarlist == \"string\") gvarlist = [gvarlist]\n\tfor(var i = 0; i<gvarlist.length; i++){\n        let onevar = this.varj(gvarlist[i])\n        onevar[\"@type\"] = \"woql:VariableListElement\"\n        onevar[\"woql:index\"] = this.jlt(i, \"nonNegativeInteger\")\n        //let onevar = { \n\t\t//\t\"@type\": \"woql:VariableListElement\", \n\t\t//\t\"woql:index\" : this.jlt(i, \"nonNegativeInteger\"),\n\t\t//\t\"woql:variable\" : this.varj(gvarlist[i])\n\t\t//}\n        //this.cursor['woql:variable_list'].push(onevar)\n        this.cursor['woql:group_by'].push(onevar)\n\t}\n    this.cursor[\"woql:group_template\"] = [];\n    if(typeof groupedvar == \"string\") groupedvar = [groupedvar]\n\tfor(var i = 0; i<groupedvar.length; i++){\n\t    let onevar = this.varj(groupedvar[i])\n    \tonevar[\"@type\"] = \"woql:VariableListElement\"\n        onevar[\"woql:index\"] = this.jlt(i, \"nonNegativeInteger\")\n        //let onevar = { \n\t\t//\t\"@type\": \"woql:VariableListElement\", \n\t\t//\t\"woql:index\" : this.jlt(i, \"nonNegativeInteger\"),\n\t\t//\t\"woql:variable\" : this.varj(groupedvar[i])\n\t\t//}\n        this.cursor['woql:group_template'].push(onevar)\n\t}\n    //this.cleanObject(groupedvar)\n\tthis.cursor[\"woql:grouped\"] = this.varj(output)//this.cleanObject(output)\n\treturn this.addSubQuery(groupquery)\n}\n\nWOQLQuery.prototype.true = function(){\n\tthis.cursor[\"@type\"] = \"woql:True\"\n\treturn this\n}\n\nWOQLQuery.prototype.path = function(Subject, Pattern, Object, Path){\n\tif(Subject && Subject == \"woql:args\") return [\"woql:subject\", 'woql:path_pattern', \"woql:object\", \"woql:path\"]\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Path\"\n\tthis.cursor['woql:subject'] = this.cleanSubject(Subject)\n\tif(typeof Pattern == 'string') Pattern = this.compilePathPattern(Pattern)\n\tthis.cursor['woql:path_pattern'] = Pattern\n\tthis.cursor['woql:object'] = this.cleanObject(Object)\n\tthis.cursor['woql:path'] = this.varj(Path)\n\treturn this\n}\n\nWOQLQuery.prototype.size = function(Graph, Size){\n\tif(Graph && Graph == \"woql:args\") return [\"woql:resource\", 'woql:size']\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:Size\"\n    this.cursor['woql:resource'] = this.cleanGraph(Graph)\n    this.cursor['woql:size'] = this.varj(Size)\n    return this\n}\n\nWOQLQuery.prototype.triple_count = function(Graph, TripleCount){\n\tif(Graph && Graph == \"woql:args\") return [\"woql:resource\", 'woql:triple_count']\n\tif(this.cursor['@type']) this.wrapCursorWithAnd()\n\tthis.cursor[\"@type\"] = \"woql:TripleCount\"\n    this.cursor['woql:resource'] = this.cleanGraph(Graph)\n    this.cursor['woql:triple_count'] = this.varj(TripleCount)\n    return this    \n}","const WOQLQuery = require('./woqlCore');\nconst WOQLSchema = require('./woqlSchema')\nconst WOQLLibrary = require(\"./woqlLibrary\")\n\n\nWOQLQuery.prototype.star = function(Graph, Subj, Pred, Obj){\n\tSubj = Subj || \"v:Subject\"\n\tPred = Pred || \"v:Predicate\"\n\tObj = Obj  ||  \"v:Object\"\n\tGraph = Graph || false;\n\tif(Graph){\n\t\treturn this.quad(Subj, Pred, Obj, Graph);\n\t}\n\telse {\n\t\treturn this.triple(Subj, Pred, Obj);\n\t}\n}\n\nWOQLQuery.prototype.lib = function(){\n    return new WOQLLibrary()\n}\n\n\n/**\n * Internal Triple-builder functions which allow chaining of partial queries\n */\n\n\nWOQLQuery.prototype.lib = function(){\n    return new WOQLLibrary()\n}\n\n\nWOQLQuery.prototype.abstract = function(graph, subj){\n    if(!this.tripleBuilder) this.createTripleBuilder(subj)\n\tthis.tripleBuilder.addPO(\"terminus:tag\", \"terminus:abstract\", graph);\n\treturn this;\n}\n\n\nWOQLQuery.prototype.node = function(node, type){\n\tif(!this.tripleBuilder) this.createTripleBuilder(node, type)\n\tthis.tripleBuilder.subject = node\n\treturn this;\n}\n\n/**\n * Add a property at the current class/document\n * \n * @param {string} proId - property ID\n * @param {string} type  - property type (range) \n * @returns WOQLQuery object\n *\n * A range could be another class/document or an \"xsd\":\"http://www.w3.org/2001/XMLSchema#\" type \n * like string|integer|datatime|nonNegativeInteger|positiveInteger etc ..\n * (you don't need the prefix xsd for specific a type)\n */\n\nWOQLQuery.prototype.property = function(proId,type){\n\tif(!this.tripleBuilder) this.createTripleBuilder()\n\tif(this.adding_class){\n\t\tlet part = this.findLastSubject(this.cursor)\n\t\tlet g = false\n\t\tlet gpart;\n\t\tif(part) gpart = part['woql:graph_filter'] || part['woql:graph']\n\t\tif(gpart) g = gpart[\"@value\"]\n\t\tlet nq = new WOQLSchema().add_property(proId, type, g).domain(this.adding_class)\n\t\tlet combine = new WOQLQuery().json(this.query)\n\t\tvar nwoql = new WOQLQuery().and(combine, nq)\n\t\tnwoql.adding_class = this.adding_class;\n\t\treturn nwoql.updated();\n\t}\n\telse {\n\t\tproId = this.cleanPredicate(proId);\n\t\tthis.tripleBuilder.addPO(proId, type);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.insert = function(id, type, refGraph){\n\ttype = this.cleanType(type, true)\n\tif(refGraph) {\n\t\treturn this.add_quad(id, \"type\", type, refGraph)\n\t}\n\treturn this.add_triple(id, \"type\", type)\n}\n\nWOQLQuery.prototype.insert_data = function(data, refGraph){\n    if(data.type && data.id){\n        type = this.cleanType(data.type, true)    \n        this.insert(data.id, type, refGraph)\n        if(data.label){\n            this.label(data.label)\n        }\n        if(data.description){\n            this.description(data.description)\n        }\n        for(var k in data){\n            if([\"id\", \"label\", \"type\", \"description\"].indexOf(k) == -1){\n                this.property(k, data[k])\n            }\n        }\n    }\n    return this\n}\n\nWOQLQuery.prototype.graph = function(g){\n\tif(!this.tripleBuilder) this.createTripleBuilder()\n\tthis.tripleBuilder.graph(g);\n\treturn this;\n}\n\nWOQLQuery.prototype.domain = function(d){\n\tif(!this.tripleBuilder) this.createTripleBuilder()\n\td = this.cleanClass(d);\n \tthis.tripleBuilder.addPO('rdfs:domain',d);\n\treturn this;\n}\n\nWOQLQuery.prototype.label = function(l, lang){\n\tif(!this.tripleBuilder) this.createTripleBuilder()\n\tthis.tripleBuilder.label(l, lang);\n\treturn this;\n}\n\nWOQLQuery.prototype.description = function(c, lang){\n\tif(!this.tripleBuilder) this.createTripleBuilder()\n\tthis.tripleBuilder.description(c, lang);\n\treturn this;\n}\n\n\n/**\n * Specifies that a new class should have parents class  \n * @param {array} parentList the list of parent class []\n *\n */\nWOQLQuery.prototype.parent = function(...parentList){\n\tif(!this.tripleBuilder) this.createTripleBuilder()\n\tfor(var i = 0 ; i<parentList.length; i++){\n\t\tvar pn = this.cleanClass(parentList[i]);\n\t\tthis.tripleBuilder.addPO('rdfs:subClassOf', pn);\n\t}\n\treturn this;\n}\n\n\nWOQLQuery.prototype.max = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"max\");\n\treturn this;\n}\n\nWOQLQuery.prototype.cardinality = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"cardinality\");\n\treturn this;\n}\n\nWOQLQuery.prototype.min = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"min\");\n\treturn this;\n}\n\nWOQLQuery.prototype.createTripleBuilder = function(node, type){\n\tlet s = node\n\tlet t = type\n\tlet lastsubj = this.findLastSubject(this.cursor)\n\tlet g = false \n\tif(lastsubj){\n\t\tconst gobj = lastsubj[\"woql:graph_filter\"] || lastsubj[\"woql:graph\"]\n\t\tg = (gobj ? gobj[\"@value\"] : false)\n\t\ts = lastsubj['woql:subject']\t\n\t\tt = type || lastsubj[\"@type\"]\t\n\t}\t\n\tif(this.cursor[\"@type\"]){\n\t\tlet subq = new WOQLQuery().json(this.cursor)\n\t\tif(this.cursor[\"@type\"] == \"woql:And\"){\n\t\t\tvar newq = subq\n\t\t}\n\t\telse {\n\t\t\tvar newq = new WOQLQuery().and(subq)\n\t\t}\n\t\tlet nuj = newq.json()\n\t\tfor(var k in this.cursor){\n\t\t\tdelete(this.cursor[k])\n\t\t}\n\t\tfor(var i in nuj){\n\t\t\tthis.cursor[i] = nuj[i] \n\t\t}\n\t}\n\telse {\n\t\tthis.and()\n    }\n\tthis.tripleBuilder = new TripleBuilder(t, this, s, g)\n}\n\n/**\n * @file Triple Builder\n * higher level composite queries - not language or api elements\n * Class for enabling building of triples from pieces\n * type is add_quad / remove_quad / add_triple / remove_triple\n */\nfunction TripleBuilder(type, query, s, g){\n\t//what accumulation type are we\n\tif(type && type.indexOf(\":\") == -1) type = \"woql:\" + type\n\tthis.type = type;\n\tthis.cursor = query.cursor;\n\tthis.subject = (s ? s : false);\n\tthis.query = query\n\tthis.g = g;\n}\n\nTripleBuilder.prototype.label = function(l, lang){\n\tlang = (lang ? lang : \"en\");\n\tif(l.substring(0, 2) == \"v:\"){\n\t\tvar d = l;\n\t}\n\telse {\n\t\tvar d = {\"@value\": l, \"@type\": \"xsd:string\", \"@language\": lang }\n\t}\n\tvar x = this.addPO('rdfs:label', d);\n\treturn x;\n}\n\nTripleBuilder.prototype.graph = function(g){\n\tthis.g = g;\n}\n\n\nTripleBuilder.prototype.description = function(c, lang){\n\tlang = (lang ? lang : \"en\");\n\tif(c.substring(0, 2) == \"v:\"){\n\t\tvar d = c;\n\t}\n\telse {\n\t\tvar d = {\"@value\": c, \"@type\": \"xsd:string\", \"@language\": lang }\n\t}\n\treturn this.addPO('rdfs:comment', d);\n}\n\nTripleBuilder.prototype.addPO = function(p, o, g){\n\tg = g || this.g\n\tlet newq = false\n\tif(this.type == \"woql:Triple\") newq = new WOQLQuery().triple(this.subject, p, o)\n\telse if(this.type == \"woql:AddTriple\") newq = new WOQLQuery().add_triple(this.subject, p, o)\n\telse if(this.type == \"woql:DeleteTriple\") newq = new WOQLQuery().delete_triple(this.subject, p, o)\n\telse if(this.type == \"woql:Quad\") newq = new WOQLQuery().quad(this.subject, p, o, g)\n\telse if(this.type == \"woql:AddQuad\") newq = new WOQLQuery().add_quad(this.subject, p, o, g)\n\telse if(this.type == \"woql:DeleteQuad\") newq = new WOQLQuery().delete_quad(this.subject, p, o, g)\n\telse if(g) newq = new WOQLQuery().quad(this.subject, p, o, g)\n\telse newq = new WOQLQuery().triple(this.subject, p, o)\n\tthis.query.and(newq)\n}\n\nTripleBuilder.prototype.getO = function(s, p){\n\tif(this.cursor['@type'] == \"woql:And\"){\n\t\tfor(var i = 0; i<this.cursor['query_list'].length; i++){\n\t\t\tlet subq = this.cursor['query_list'][i][\"woql:query\"];\n\t\t\tif(subq.query[\"woql:subject\"] == s && subq.query[\"woql:predicate\"] == p) return subq.query[\"woql:object\"]\n\t\t}\n\t}\n\treturn false;\n}\n\nTripleBuilder.prototype.card = function(n, which){\n\tlet os = this.subject;\n\tthis.subject += \"_\" + which;\n\tthis.addPO('rdf:type', \"owl:Restriction\");\n\tthis.addPO(\"owl:onProperty\", os);\n\tswitch(which){\n\t\tcase \"max\": this.addPO(\"owl:maxCardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t\t\tbreak;\n\t\tcase \"min\": this.addPO(\"owl:minCardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t\t\tbreak;\n\t\tdefault: this.addPO(\"owl:cardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t}\n\tlet od = this.getO(os, \"rdfs:domain\");\n\tif(od){\n\t\tvar cardcls = this.subject;\n\t\tthis.subject = od;\n\t\tthis.addPO(\"rdfs:subClassOf\", cardcls);\n\t}\n\tthis.subject = os;\n\treturn this;\n};\n\n\n\n","const WOQLQuery = require('./woqlCore');\nconst UTILS = require('../utils');\n\n/**\n * Functions to manipulate and check the paging related properties of a query\n */\n\nWOQLQuery.prototype.getLimit = function(){\n\treturn this.getPagingProperty(\"limit\");\n}\n\nWOQLQuery.prototype.setLimit = function(l){\n\treturn this.setPagingProperty(\"limit\", l);\n}\n\nWOQLQuery.prototype.isPaged = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"limit\") return true;\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\treturn this.isPaged(q[prop][q[prop].length-1]);\n\t\t}\n\t}\n\treturn false;\n}\n\nWOQLQuery.prototype.getPage = function(){\n\tif(this.isPaged()){\n\t\tvar psize = this.getLimit();\n\t\tif(this.hasStart()){\n\t\t\tvar s = this.getStart();\n\t\t\treturn (parseInt(s / psize) + 1);\n\t\t}\n\t\telse return 1;\n\t}\n\telse return false;\n}\n\nWOQLQuery.prototype.setPage = function(pagenum){\n\tvar pstart = (this.getLimit() * (pagenum - 1));\n\tif(this.hasStart()){\n\t\tthis.setStart(pstart);\n\t}\n\telse {\n\t\tthis.addStart(pstart);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.nextPage = function(){\n\treturn this.setPage(this.getPage() + 1);\n}\n\nWOQLQuery.prototype.firstPage = function(){\n\treturn this.setPage(1);\n}\n\nWOQLQuery.prototype.previousPage = function(){\n\tconst npage = this.getPage() - 1;\n\tif(npage > 0) this.setPage(npage);\n\treturn this;\n}\n\nWOQLQuery.prototype.setPageSize = function(size){\n\tthis.setPagingProperty(\"limit\", size);\n\tif(this.hasStart()){\n\t\tthis.setStart(0);\n\t}\n\telse {\n\t\tthis.addStart(0);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.hasSelect = function(){\n\treturn (this.getPagingProperty(\"select\") ? true : false);\n}\n\nWOQLQuery.prototype.getSelectVariables = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"select\") {\n\t\t\tvar vars = q[prop].slice(0, q[prop].length - 1);\n\t\t\treturn vars;\n\t\t}\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar val = this.getSelectVariables(q[prop][q[prop].length-1]);\n\t\t\tif(typeof val != \"undefined\"){\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t}\n}\n\nWOQLQuery.prototype.hasStart = function(){\n\treturn (typeof this.getPagingProperty(\"start\") != \"undefined\");\n}\n\nWOQLQuery.prototype.getStart = function(){\n\treturn this.getPagingProperty(\"start\");\n}\n\nWOQLQuery.prototype.setStart = function(start){\n\treturn this.setPagingProperty(\"start\", start);\n}\n\nWOQLQuery.prototype.addStart = function(s){\n\tif(this.hasStart()) this.setStart(s);\n\telse {\n\t\tvar nq = {'start': [s, this.query]};\n\t\tthis.query = nq;\n\t}\n\treturn this;\n}\n\n\n/**\n * Returns the value of one of the 'paging' related properties (limit, start,...)\n */\nWOQLQuery.prototype.getPagingProperty = function(pageprop, q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == pageprop) return q[prop][0];\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar val = this.getPagingProperty(pageprop, q[prop][q[prop].length-1]);\n\t\t\tif(typeof val != \"undefined\"){\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Sets the value of one of the paging_transitive_properties properties\n */\nWOQLQuery.prototype.setPagingProperty = function(pageprop, val, q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == pageprop) {\n\t\t\tq[prop][0] = val;\n\t\t}\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tthis.setPagingProperty(pageprop, val, q[prop][q[prop].length-1]);\n\t\t}\n\t}\n\treturn this;\n}\n","const WOQLTableConfig = require('./viewer/tableConfig');\nconst WOQLChooserConfig = require('./viewer/chooserConfig');\nconst WOQLGraphConfig = require('./viewer/graphConfig');\nconst WOQLChartConfig = require('./viewer/chartConfig');\nconst WOQLStreamConfig = require('./viewer/streamConfig');\nconst FrameConfig = require('./viewer/frameConfig');\nconst WOQLRule = require('./woqlRule');\nconst FrameRule = require('./frameRule');\n\n/**\n * @constructor \n * We bundle the useful functions in a View object and just export that for ease of consumption\n */\nconst View = {};\n\nView.table = function(){ return new WOQLTableConfig(); }\nView.chart = function(){ return new WOQLChartConfig(); }\nView.graph = function(){ return new WOQLGraphConfig(); }\nView.chooser = function(){ return new WOQLChooserConfig(); }\nView.stream = function(){ return new WOQLStreamConfig(); }\nView.document = function(){ return new FrameConfig(); }\nView.loadConfig = function(config){\n\tif(config.table){\n\t\tvar view = new WOQLTableConfig();\n\t\tview.loadJSON(config.table, config.rules);\n\t}\n\telse if(config.chooser){\n\t\tvar view = new WOQLChooserConfig();\n\t\tview.loadJSON(config.chooser, config.rules);\n\t}\n\telse if(config.graph){\n\t\tvar view = new WOQLGraphConfig();\n\t\tview.loadJSON(config.graph, config.rules);\n\t}\n\telse if(config.chart){\n\t\tvar view = new WOQLChartConfig();\n\t\tview.loadJSON(config.chart, config.rules);\n\t}\n\telse if(config.stream){\n\t\tvar view = new WOQLStreamConfig();\n\t\tview.loadJSON(config.stream, config.rules);\n\t}\n\telse if(config.frame){\n\t\tvar view = new FrameConfig();\n\t\tview.loadJSON(config.frame, config.rules);\n\t}\n\treturn view;\n}\n\n/**\n * Shorthand functions for accessing the pattern matching capabilities\n */\nView.rule = function(type){ \n\tif(type && type == \"frame\") return new FrameRule(); \n\treturn new WOQLRule(); \n}\n\nView.pattern = function(type){ \n\tif(type && type == \"woql\") return new WOQLRule().pattern;\n\telse return new FrameRule().pattern;\n}\n\n/**\n * Called to match an entire row of results is matched by a set of rules\n * returns array of rules that matched\n */\nView.matchRow = function(rules, row, rownum, action){\n\treturn new WOQLRule().matchRow(rules, row, rownum, action);\n}\n\n/**\n * Called to test whether an entire column of results is matched by a set of rules\n * returns array of rules that matched\n */\nView.matchColumn = function(rules, key, action){\n\treturn new WOQLRule().matchColumn(rules, key, action);\n}\n\n/**\n * Called to test whether a specific cell is matched by a set of rules\n * returns array of rules that matched\n */\nView.matchCell = function(rules, row, key, rownum, action){\n\treturn new WOQLRule().matchCell(rules, row, key, rownum, action);\n}\n\n/**\n * Called to test whether a specific node is matched by a set of rules\n * returns array of rules that matched\n */\nView.matchNode = function(rules, row, key, nid, action){\n\treturn new WOQLRule().matchNode(rules, row, key, nid, action);\n}\n\n/**\n * Called to test whether a specific edge (source -> target) is matched by a set of rules\n * returns array of rules that matched\n */\nView.matchEdge = function(rules, row, keya, keyb, action){\n\treturn new WOQLRule().matchPair(rules, row, keya, keyb, action);\n}\n\n/**\n * Called to test whether a specific frame is matched by a set of rules\n */\nView.matchFrame = function(rules, frame, onmatch){\n\treturn new FrameRule().testRules(rules, frame, onmatch);\n}\n\nmodule.exports = View;\n","const FrameHelper = require('./utils');\nconst FrameRule = require('./frameRule');\n\n/**\n * @file Javascript Terminus Document Classes\n * @license Apache Version 2\n * Helper classes for accessing documents returned by the Terminus DB API programmatically\n * \n * @example\n * let doc = new TerminusDocument(client);\n * \n * //These set the objects document property and return promises:\n *  \n * doc.loadDocument(URL).then(() => console.log(this.document));\n * doc.loadComplete(URL, CLS).then(() => console.log(this.document))\n * doc.loadSchema(cls).then(() => console.log(this.document))\n * \n * //These just set the object's document property \n * doc.loadJSON(json_frames, cls) //console.log(this.document)\n * doc.loadDataFrames(json_frames, cls)\n * doc.loadClassFrames(json_frames, cls)\n * @example \n *\n * @description Represents a frame for programmatic access to object frame, anywhere within a document\n * Recursive data structure where this.children contains an indexed array of object frames\n * and this.dataframes contains a property indexed array of data frames\n * Every object frame carries a reference to its classframe\n * This gives us instructions as to how to create new frames according to the schema\n * After that it's turtles all the way down.\n * @param cls - ID of the class (URL)\n * @param classframe - an array of frames representing a class\n * @param archetypes list of class frames\n * @param parent parent object\n * @returns\n */\n\nfunction ObjectFrame(cls, dataframes, classframes, parent, parentframe) {\n\t// the class of the frame - mandatory\n\tthis.empty();\n\tthis.cls = cls;\n\n\t// array of frames representing the full class frame\n\t// (optional - required to be able to safely add missing properties)\n\tif (classframes && typeof classframes === 'object') {\n\t\tthis.loadClassFrames(classframes);\n\t}\n\tif (dataframes && typeof dataframes === 'object') {\n\t\tthis.originalFrames = dataframes;\n\t\tthis.loadDataFrames(dataframes);\n\t} else {\n\t\tthis.originalFrames = false;\n\t}\n\t// parent object frame\n\tthis.parent = parent;\n\t// original frame used by parent to create me\n\tthis.parentframe = parentframe;\n\t// set to true if this is a newly created document\n\tthis.newDoc = false;\n}\n\n/**\n * Loads class frames for the object's class - the instructions about how to put an object together\n */\nObjectFrame.prototype.loadClassFrames = function (classframes) {\n\tfor (let j = 0; j < classframes.length; j += 1) {\n\t\tif (classframes[j]['@context']) this.jsonld_context = classframes[j]['@context'];\n\n\t\tconst cf = new ClassFrame(classframes[j]);\n\t\tif (cf.isValid()) {\n\t\t\tif(!this.classframes) this.classframes = {};\n\t\t\tif(typeof this.classframes[classframes[j].property] === 'undefined') {\n\t\t\t\tthis.classframes[classframes[j].property] = [];\n\t\t\t}\n\t\t\tthis.classframes[classframes[j].property] = cf;\n\t\t\tif (cf.isObject() && this.properties[classframes[j].property]) {\n\t\t\t\tfor (let i = 0; i < this.properties[classframes[j].property].values.length; i += 1) {\n\t\t\t\t\tthis.properties[classframes[j].property].values[i].loadClassFrames(classframes[j].frame);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n};\n\n/**\n * Does this object have a schema loaded?\n */\nObjectFrame.prototype.hasSchema = function () {\n\treturn !FrameHelper.empty(this.classframes);\n};\n\n/*\n * Loads an array of data frames into the object's internal index\n * {property: [frames]}\n */\nObjectFrame.prototype.loadDataFrames = function (frames) {\n\tif (typeof frames !== 'object' || !frames.length) return undefined;\n\tif (!this.originalFrames) this.originalFrames = frames;\n\tif (!this.subjid && frames[0].domainValue) this.subjid = frames[0].domainValue;\n\tfor (let i = 0; i < frames.length; i += 1) {\n\t\tif (frames[i]['@context']) this.jsonld_context = frames[i]['@context'];\n\t\tlet cframe = this.getPropertyClassFrame(frames[i].property, frames[i]);\n\t\tif (cframe && cframe.isClassChoice()) {\n\t\t\tcframe = cframe.getChosenClassFrame(frames[i].range);\n\t\t\tif (!cframe) {\n\t\t\t\tconsole.log(`no choice frame ${frames[i].range}`);\n\t\t\t}\n\t\t} else if (cframe && cframe.isLogic()) {\n\t\t\tcframe = cframe.getChosenFrame(frames[i]);\n\t\t}\n\t\tif (cframe) {\n\t\t\tif (typeof this.properties[frames[i].property] === 'undefined') {\n\t\t\t\tthis.properties[frames[i].property] = new PropertyFrame(frames[i].property, cframe, this);\n\t\t\t}\n\t\t\tthis.properties[frames[i].property].addFrame(frames[i]);\n\t\t}\n\t}\n\treturn this;\n};\n\n/*\n * Serialises the javascript object as an array of frames\n */\nObjectFrame.prototype.getAsFrame = function (prop, parent) {\n\tif (this.parentframe) return this.parentframe;\n\tconst ff = { type: 'objectProperty', property: prop };\n\tff.range = this.cls;\n\tff.domain = parent.cls;\n\tff.domainValue = parent.subjid;\n\tff.frame = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tff.frame = ff.frame.concat(ff.frame, this.properties[prop].getAsFrames());\n\t}\n\treturn ff;\n};\n\nObjectFrame.prototype.getAsFrames = function (prop, parent) {\n\tvar frames = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tframes = frames.concat(frames, this.properties[prop].getAsFrames());\n\t}\n\treturn frames;\n}\n\n/**\n * Cleans out object and sets everything empty\n */\nObjectFrame.prototype.empty = function () {\n\t// all indexed by property\n\tthis.properties = {};\n\tthis.restrictions = {};\n\tthis.subjid = false;\n\tthis.cls = false;\n};\n\n/*\n * Resets object state to original state\n */\nObjectFrame.prototype.reset = function (prop) {\n\tif (prop) {\n\t\tconst props = [];\n\t\tfor (let i = 0; i < this.originalFrames.length; i += 1) {\n\t\t\tif (this.originalFrames[i].property === prop) {\n\t\t\t\tprops.push(this.originalFrames[i]);\n\t\t\t}\n\t\t}\n\t\tif (this.properties[prop]) this.properties[prop] = [];\n\t\tthis.loadDataFrames(props);\n\t} else {\n\t\tthis.restrictions = {};\n\t\tthis.properties = {};\n\t\tthis.loadDataFrames(this.originalFrames);\n\t}\n};\n\n/*\n * Clears out any specific information from a tree\n */\nObjectFrame.prototype.clear = function () {\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.properties[prop].clear();\n\t}\n\treturn this;\n};\n\n/*\n * Filters the frame and its children\n */\nObjectFrame.prototype.filter = function (rules, onmatch) {\n\tvar hits = new FrameRule().testRules(rules, this, onmatch);\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.properties[prop].filter(rules, onmatch);\n\t}\n\treturn this;\n};\n\n\n/**\n * If a class frame is present, it is returned for the given property\n * If no class frame is present and an instance frame is passed in the\n * this enables make it up as you go along editing\n * second argument a class frame will be created from the instance frame.\n */\nObjectFrame.prototype.getPropertyClassFrame = function (prop, instance) {\n\tif (this.classframes && typeof this.classframes === 'object' && typeof this.classframes[prop] === 'object') {\n\t\treturn this.classframes[prop];\n\t}\n\tif (instance) {\n\t\tconst cf = new ClassFrame(instance);\n\t\treturn cf;\n\t}\n\tif (this.properties[prop]) {\n\t\treturn new ClassFrame(this.properties[prop].values[0]);\n\t}\n\treturn false;\n};\n\n/*\n * Returns a list of properties - type can be filled|missing|all\n */\nObjectFrame.prototype.getProperties = function (type) {\n\tif(type == \"filled\" || !this.classframes){\n\t\treturn Object.keys(this.properties);\n\t}\n\tif (type == 'missing') {\n\t\tconst filled = Object.keys(this.properties);\n\t\tconst all = Object.keys(this.classframes);\n\t\tconst missing = [];\n\t\tfor (let i = 0; i < all.length; i++) {\n\t\t\tif (filled.indexOf(all[i]) == -1 && missing.indexOf(all[i]) == -1) {\n\t\t\t\tmissing.push(all[i]);\n\t\t\t}\n\t\t}\n\t\treturn missing;\n\t}\n\treturn Object.keys(this.classframes);\n};\n\n/**\n * Missing properties are those that are present in the classframe,\n * but not instantiated in the current object frame\n * for this to work we need to load the frame with the associated classframe\n */\nObjectFrame.prototype.getMissingPropertyList = function () {\n\tvar missing = this.getProperties(\"missing\");\n\tconst nmissing = [];\n\tfor (let i = 0; i < missing.length; i++) {\n\t\tconst cframe = this.getPropertyClassFrame(missing[i]);\n\t\tif(cframe){\n\t\t\tvar newb = { label: cframe.getLabel(), value: missing[i] };\n\t\t}\n\t\telse {\n\t\t\tvar newb = { label: missing[i], value: missing[i]};\n\t\t}\n\t\tnmissing.push(newb);\n\t}\n\treturn nmissing;\n};\n\n/**\n * List of properties that are filled in the object\n */\nObjectFrame.prototype.getFilledPropertyList = function () {\n\tvar props = this.getProperties(\"filled\");\n\tconst filled = [];\n\tfor (let i = 0; i < props.length; i++) {\n\t\tconst cframe = this.getPropertyClassFrame(props[i]);\n\t\tif(cframe){\n\t\t\tvar newb = { label: cframe.getLabel(), value: props[i] };\n\t\t}\n\t\telse {\n\t\t\tvar newb = { label: props[i], value: props[i]};\n\t\t}\n\t\tfilled.push(newb);\n\t}\n\treturn filled;\n};\n\n/*\n * Fills the object frame from the schema - adding all the necessary property frames, etc to make it complete\n */\nObjectFrame.prototype.fillFromSchema = function (newid) {\n\tif (newid) this.subjid = newid;\n\tnewid = (newid || FrameHelper.genBNID());\n\tconst properties = {};\n\tif(this.classframes){\n\t\tfor (const prop of Object.keys(this.classframes)) {\n\t\t\tconst pf = this.getPropertyClassFrame(prop);\n\t\t\tproperties[prop] = new PropertyFrame(prop, pf, this);\n\t\t\tproperties[prop].fillFromSchema(newid);\n\t\t}\n\t}\n\tthis.properties = properties;\n\tthis.originalFrames = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.originalFrames.push(this.properties[prop].getAsFrames());\n\t}\n\treturn this;\n};\n\n/*\n * Clones an object frame to be a copy of the current frame\n */\nObjectFrame.prototype.clone = function (newid) {\n\tconst properties = {};\n\tconst cloned = new ObjectFrame(this.cls, false, false, this.parent);\n\tcloned.classframes = this.classframes;\n\tcloned.subjid = newid;\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tproperties[prop] = this.properties[prop].clone();\n\t}\n\tcloned.properties = properties;\n\treturn cloned;\n};\n\n\n/**\n * Returns a child frame with a particular id\n * If the second parameter is included, it will only look in that specific property\n * Otherwise searches all properties for the child\n */\nObjectFrame.prototype.getChild = function (childid, prop) {\n\tlet pframe = this.getProperty(prop);\n\tfor (let i = 0; i < pframe.values.length; pframe++) {\n\t\tif (pframe.values[i].isObject() && pframe.values[i].subject === childid) return pframe.values[i];\n\t}\n\tif (!prop) {\n\t\tfor (const key of Object.keys(this.properties)) {\n\t\t\tfor (let i = 0; i < this.properties[key].values.length; i += 1) {\n\t\t\t\tif (this.properties[key].values[i].subject() === childid) return this.properties[key].values[i];\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.addProperty = function (prop, cls) {\n\tconst cframe = this.getPropertyClassFrame(prop);\n\tvar ndata = false;\n\tif(cframe){\n\t\tconst nprop = new PropertyFrame(prop, cframe, this);\n\t\tif(cframe.isObject()){\n\t\t\tif (!cframe.isClassChoice()) {\n\t\t\t\tndata = cframe.createEmpty(FrameHelper.genBNID());\n\t\t\t}\n\t\t\tif (cls) {\n\t\t\t\tndata = cframe.createEmptyChoice(cls, FrameHelper.genBNID());\n\t\t\t}\n\t\t\tconst clss = cframe.getClassChoices();\n\t\t\tif (clss && clss.length) {\n\t\t\t\tndata = cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tndata = cframe.createEmpty();\n\t\t}\n\t\tif(ndata){\n\t\t\tnprop.addValueFrame(ndata);\n\t\t}\n\t\tif (typeof this.properties[prop] === 'undefined') {\n\t\t\tthis.properties[prop] = [];\n\t\t}\n\t\tthis.properties[prop].push(nprop);\n\t\treturn nprop;\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.addPropertyValue = function (prop, value) {\n\tconst pframe = this.properties[prop];\n\treturn pframe.addValue(value);\n};\n\nObjectFrame.prototype.removeProperty = function (prop) {\n\tif (typeof this.properties[prop] !== 'undefined') {\n\t\tdelete (this.properties[prop]);\n\t}\n};\n\nObjectFrame.prototype.removePropertyValue = function (prop, value, index) {\n\tconst pframe = this.properties[prop];\n\tpframe.removeValue(value, index);\n\tif (pframe.values.length == 0) {\n\t\tthis.removeProperty(prop);\n\t}\n};\n\nObjectFrame.prototype.error = function (msg) {\n\tconsole.error(msg);\n};\n\nObjectFrame.prototype.extract = function(){\n\tvar extracts = {};\n\tfor(var prop in this.properties){\n\t\tfor(var i = 0; i<this.properties[prop].length; i++){\n\t\t\tvar extracted = this.properties[prop][i].extract();\n\t\t\tif(!FrameHelper.empty(extracted)){\n\t\t\t\tif(typeof extracts[prop] == \"undefined\") extracts[prop] = [];\n\t\t\t\textracts[prop] = extracts[prop].concat(extracted);\n\t\t\t}\n\t\t}\n\t}\n\tif(FrameHelper.empty(extracts) && this.parent){\n\t\treturn false;\n\t}\n\telse {\n\t\tvar ext = this.extractJSONLD(extracts);\n\t\treturn ext;\n\t}\n}\n\nObjectFrame.prototype.extractJSONLD = function(extracts){\n\textracts[\"@type\"] = this.cls;\n\tif(this.subject() != \"_:\")\textracts[\"@id\"] = this.subject();\n\tif(this.jsonld_context) extracts['@context'] = this.jsonld_context;\n\treturn extracts;\n}\n\n\nObjectFrame.prototype.subject = function () {\n\treturn this.subjid;\n};\n\nObjectFrame.prototype.get = ObjectFrame.prototype.subject;\nObjectFrame.prototype.set = function(val){\n\tthis.subjid = val;\n}\n\nObjectFrame.prototype.isObject = function () { return true; };\nObjectFrame.prototype.isProperty = function () { return false; };\nObjectFrame.prototype.isData = function () { return false; };\n\n\nObjectFrame.prototype.subjectClass = function () {\n\treturn this.cls;\n};\n\nObjectFrame.prototype.depth = function () {\n\tif (this.parent) return (this.parent.depth() + 1);\n\treturn 0;\n};\n\nObjectFrame.prototype.getProperty = function (prop) {\n\treturn this.properties[prop];\n};\n\nObjectFrame.prototype.first = function (prop) {\n\tif (this.properties && this.properties[prop]) {\n\t\treturn this.properties[prop].first();\n\t}\n};\n\nObjectFrame.prototype.property = function (prop) {\n\tif (this.parent) return this.parent.property();\n\treturn false;\n};\n\nObjectFrame.prototype.parentObject = function () {\n\tif (this.parent && this.parent.parent) {\n\t\treturn this.parent.parent;\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.root = function () {\n\tif (this.parent) return false;\n\treturn true;\n};\n\nObjectFrame.prototype.renderProperties = function () {\n\tconst props = this.sortProperties();\n\tconst nprops = [];\n\tfor (let i = 0; i < props.length; i++) {\n\t\tif (this.properties[props[i]].render) {\n\t\t\tconst rend = this.properties[props[i]].render(this.properties[props[i]]);\n\t\t\tif (rend) nprops.push(rend);\n\t\t}\n\t}\n\treturn nprops;\n};\n\nObjectFrame.prototype.sortProperties = function () {\n\tconst unsorted = Object.keys(this.properties);\n\tif (this.compare) {\n\t\treturn unsorted.sort((a, b) => this.compare(a, b, this));\n\t}\n\treturn unsorted.sort((a, b) => this.standardCompare(a, b, this));\n};\n\n/*\n * Label first, then datatype properties, then object properties\n */\nObjectFrame.prototype.standardCompare = function (a, b, doc) {\n\tif (a == 'rdfs:label') return -1;\n\tif (b == 'rdfs:label') return 1;\n\tif (a == 'rdfs:comment') return -1;\n\tif (b == 'rdfs:comment') return 1;\n\tif (doc.properties[a].isData() && doc.properties[b].isObject()) return -1;\n\tif (doc.properties[b].isData() && doc.properties[a].isObject()) return 1;\n\treturn 0;\n};\n\nObjectFrame.prototype.cardControlAllows = function(action){\n\tif(!this.parent) return true;\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nObjectFrame.prototype.isUpdated = function(){\n\tvar i = 0;\n\tfor(var prop in this.properties){\n\t\tif(this.originalFrames[i] != prop) return true;\n\t\tif(this.properties[prop].isUpdated()) return true;\n\t\ti++;\n\t}\n\tif(i != this.originalFrames.length) return true;\n\treturn false;\n}\n\nObjectFrame.prototype.isNew = function(){\n\treturn (this.subject().substring(0, 2) == \"_:\");\n}\n\nObjectFrame.prototype.getSummary = function(){\n\tvar ret = { status: \"ok\" };\n\tif(this.isUpdated()) ret.status = \"updated\";\n\tif(this.isNew()) ret.status = \"new\";\n\tret.propcount = 0;\n\tfor(var prop in this.properties){\n\t\tret.propcount++;\n\t}\n\tret.long = ret.propcount + \" properties\";\n\treturn ret;\n}\n\nfunction PropertyFrame(property, cframe, parent) {\n\tthis.predicate = property;\n\tthis.cframe = cframe;\n\tthis.parent = parent;\n\tthis.values = [];\n}\n\nPropertyFrame.prototype.addFrame = function (frame) {\n\tif(this.cframe.isData()){\n\t\tvar df = new DataFrame(frame, this, this.values.length);\n\t\tthis.values.push(df);\n\t} else {\n\t\tconst kid = new ObjectFrame(this.range(), this.cframe.frame, frame.frame, this, frame);\n\t\tthis.values.push(kid);\n\t}\n};\n\nPropertyFrame.prototype.addValueFrame = function (oframe) {\n\toframe.parent = this;\n\toframe.index = this.values.length;\n\tthis.values.push(oframe);\n};\n\n\nPropertyFrame.prototype.fillFromSchema = function (newid) {\n\tif (this.isData() || (this.isObject() && !this.isClassChoice())) {\n\t\tvar values = [];\n\t\tif (this.cframe.hasRestriction() && this.cframe.restriction.min) {\n\t\t\tfor (let i = 0; i < this.cframe.restriction.min; i += 1) {\n\t\t\t\tvar nframe = this.createEmpty(newid);\n\t\t\t\tnframe.parent = this;\n\t\t\t\tvalues.push(nframe);\n\t\t\t}\n\t\t} \n\t\telse {\n\t\t\tvar nframe = this.createEmpty(newid);\n\t\t\tnframe.parent = this;\n\t\t\tvalues.push(nframe);\n\t\t}\n\t\tthis.values = values;\n\t}\n\telse if (this.isClassChoice()) {\n\t\tconst clss = this.cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst empty = this.cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\tempty.parent = this;\n\t\t\tthis.values = [empty];\n\t\t}\n\t}\n};\n\nPropertyFrame.prototype.isData = function () {\n\treturn this.cframe.isData();\n};\n\nPropertyFrame.prototype.isObject = function () {\n\treturn this.cframe.isObject();\n};\n\nPropertyFrame.prototype.isProperty = function () {\n\treturn true;\n};\n\nPropertyFrame.prototype.property = function () {\n\treturn this.predicate;\n};\n\nPropertyFrame.prototype.extract = function () {\n \tconst extracts = [];\n \tfor (let i = 0; i < this.values.length; i++) {\n \t\tconst val = this.values[i].extract();\n \t\tif (val !== '' && val !== false && typeof val !== 'undefined') extracts.push(val);\n \t}\n\treturn extracts;\n};\n\nPropertyFrame.prototype.subject = function () {\n\treturn (this.parent ? this.parent.subject() : false);\n};\nPropertyFrame.prototype.subjectClass = function () {\n\treturn (this.parent ? this.parent.subjectClass() : false);\n};\nPropertyFrame.prototype.depth = function () {\n\treturn (this.parent ? this.parent.depth() : false);\n};\nPropertyFrame.prototype.updated = function () {\n\treturn (this.parent ? this.parent.childUpdated() : false);\n};\nPropertyFrame.prototype.range = function () {\n\treturn (this.cframe ? this.cframe.range : '');\n};\nPropertyFrame.prototype.getLabel = function () {\n\treturn (\n\t\tthis.cframe ? this.cframe.getLabel() : '');\n};\nPropertyFrame.prototype.getComment = function () {\n\treturn (this.cframe ? this.cframe.getComment() : false);\n};\nPropertyFrame.prototype.hasCardinalityRestriction = function () {\n\treturn (this.cframe ? this.cframe.hasRestriction() : false);\n};\nPropertyFrame.prototype.getRestriction = function () {\n\treturn (this.cframe ? this.cframe.restriction : false);\n};\nPropertyFrame.prototype.isClassChoice = function () {\n\treturn (this.cframe ? this.cframe.isClassChoice() : false);\n};\n\nPropertyFrame.prototype.deletePropertyValue = function (value, index) {\n\tthis.parent.removePropertyValue(this.property(), value, index);\n};\n\nPropertyFrame.prototype.get = function(){\n\tvar gets = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]) {\n\t\t\tvar x = this.values[i].get();\n\t\t\tif(x) gets.push(x);\n\t\t}\n\t}\n\treturn gets;\n}\n\nPropertyFrame.prototype.set = function(val){\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]) {\n\t\t\tthis.values[i].set(val);\n\t\t}\n\t}\n}\n\n\nPropertyFrame.prototype.clear = function(){\n\tfor(var i = 0 ; i<this.values.length; i++){\n\t\tthis.values[i].clear();\n\t}\n}\n\nPropertyFrame.prototype.clone = function(){\n\tconst cvalues = [];\n\tconst cloned = new PropertyFrame(this.predicate, this.cframe, this.parent);\n\tfor(var i = 0 ; i<this.values.length; i++){\n\t\tcvalues.push(this.values[i].clone());\n\t}\n\tcloned.values = cvalues;\n\treturn cloned;\n\t//\n}\n\nPropertyFrame.prototype.getAsFrames = function(){\n\tvar fs = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]){\n\t\t\tif(this.isData()){\n\t\t\t\tfs.push(this.values[i].getAsFrame());\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfs = fs.concat(this.values[i].getAsFrames());\n\t\t\t}\n\t\t}\n\t}\n\treturn fs;\n}\n\nPropertyFrame.prototype.createEmpty = function(){\n\tif (this.cframe.isData()) {\n\t\tconst df = this.cframe.copy();\n\t\tdf.set('');\n\t\treturn df;\n\t}\n\telse if (this.cframe.isObject()) {\n\t\tif (!this.cframe.isClassChoice()) {\n\t\t\tconst df = this.cframe.createEmpty(FrameHelper.genBNID());\n\t\t\treturn df;\n\t\t}\n\t\tconst clss = this.cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst df = this.cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\treturn df;\n\t\t}\n\t}\n}\n\nPropertyFrame.prototype.filter = function (rules, onmatch) {\n\tvar hits = new FrameRule().testRules(rules, this, onmatch);\n\tfor (var i = 0; i<this.values.length; i++){\n\t\tthis.values[i].filter(rules, onmatch);\n\t}\n\treturn this;\n}\n\n/*\n * Shorthand functions to make it easier to access the underlying data\n */\n\nPropertyFrame.prototype.first = function () {\n\tif (this.values && this.values[0]) {\n\t\treturn this.values[0].get();\n\t}\n};\n\nPropertyFrame.prototype.renderValues = function(){\n\tvar sortedVals = this.sortValues();\n\tvar vals = [];\n\tfor(var i = 0; i<sortedVals.length; i++){\n\t\tif(sortedVals[i] && sortedVals[i].render){\n\t\t\tvar rend = sortedVals[i].render(sortedVals[i]);\n\t\t\tif(rend) vals.push(rend);\n\t\t}\n\t}\n\treturn vals;\n};\n\nPropertyFrame.prototype.sortValues = function () {\n\tif (this.compare) {\n\t\treturn this.values.sort((a, b) => this.compare(a, b, this));\n\t}\n\treturn this.values;\n};\n\nPropertyFrame.prototype.cardControlAllows = function(action){\n\tif(this.cframe.hasRestriction()){\n\t\tvar rest = this.cframe.restriction;\n\t\tvar currentnum = this.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nPropertyFrame.prototype.isUpdated = function(){\n\treturn true;\n\tif(this.values.length != this.originalValues.length) return true;\n\tfor(var i = 0 ; i < this.values.length; i++){\n\t\tif(this.cframe && this.cframe.isData()){\n\t\t\tif(this.values[i].value() != this.originalValues[i]){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif(this.values[i].subject() != this.originalValues[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(this.values[i].isUpdated()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\n\nfunction DataFrame(frame, parent, index) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tthis.index = index;\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nDataFrame.prototype.load = function (frame) {\n\tif (typeof frame !== 'object') {\n\t\tthis.error('No frame passed to load');\n\t\treturn;\n\t}\n\t// all the meta-data carried in frames:\n\tthis.type = frame.type;\n\tthis.predicate = frame.property;\n\tthis.range = frame.range;\n\tthis.rangeValue = frame.rangeValue;\n\tthis.domain = frame.domain;\n\tthis.domainValue = frame.domainValue;\n\tthis.frame = frame.frame;\n\tthis.label = frame.label;\n\tthis.comment = frame.comment;\n\tconst { restriction } = frame;\n\tthis.restriction = false;\n\tif (restriction && typeof restriction === 'object') {\n\t\tthis.restriction = new Restriction(restriction);\n\t}\n};\n\nDataFrame.prototype.filter = function (rules, onmatch) {\n\tvar hits = new FrameRule().testRules(rules, this, onmatch);\n\treturn this;\n};\n\nDataFrame.prototype.delete = function () {\n\tthis.parent.deletePropertyValue(this.get(), this.index);\n};\n\nDataFrame.prototype.save = function () {\n\tif (this.parent) {\n\t\tthis.parent.save();\n\t}\n};\n\nDataFrame.prototype.reset = function () {\n\tthis.set(this.originalValue);\n\t// this.redraw();\n};\n\nDataFrame.prototype.clone = function () {\n\tconst newb = this.parent.addPropertyValue(this.get());\n\tconst nrend = this.copy(newb);\n\tnrend.setNew();\n\tnrend.mode = 'edit';\n\tnrend.index = this.parent.values.length;\n\tthis.parent.values.push(nrend);\n};\n\n\nDataFrame.prototype.depth = function () { return (this.parent ? this.parent.depth() : false); };\nDataFrame.prototype.property = function () { return (this.parent ? this.parent.property() : false); };\nDataFrame.prototype.subject = function () { return (this.parent ? this.parent.subject() : false); };\nDataFrame.prototype.subjectClass = function () { return (this.parent ? this.parent.subjectClass() : false); };\nDataFrame.prototype.type = function () {\treturn (this.range ? this.range : false); };\n\nDataFrame.prototype.isValidType = function (dt) {\n\tconst vtypes = ['datatypeProperty', 'objectProperty', 'restriction '];\n\tif (vtypes.indexOf(dt) === -1) return false;\n\treturn true;\n};\n\n\nDataFrame.prototype.getAsFrame = function () {\n\t const ff = { type: this.type, property: this.property() };\n\t if (this.range) ff.range = this.range;\n\t if (this.rangeValue) ff.rangeValue = this.rangeValue;\n\t if (this.domain) ff.domain = this.domain;\n\t if (this.domainValue) ff.domainValue = this.domainValue;\n\t if (this.frame) ff.frame = this.frame;\n\t if (this.label) ff.label = this.label;\n\t if (this.comment) ff.comment = this.comment;\n\t return ff;\n};\n\nDataFrame.prototype.hasRestriction = function () {\n\t if (this.restriction) {\n\t\t return this.restriction.hasCardRestriction();\n\t }\n\t return false;\n};\n\nDataFrame.prototype.copy = function (newid) {\n\tconst copy = new DataFrame(this, this.parent);\n\tif (newid) copy.domainValue = newid;\n\treturn copy;\n};\n\nDataFrame.prototype.getLabel = function () {\n\tlet lab = '';\n\tif(this.predicate == \"rdfs:label\") return \"Name\";\n\tif(this.predicate == \"rdfs:comment\") return \"Description\";\n\tif (this.label && typeof this.label === 'object') lab = this.label['@value'];\n\tif (this.label && typeof this.label === 'string') lab = this.label;\n\t// always return something\n\tif (!lab && this.property()) lab = FrameHelper.labelFromURL(this.property());\n\tif (!lab) lab = FrameHelper.labelFromURL(this.cls);\n\treturn lab;\n};\n\nDataFrame.prototype.getType = function () {\n\tif (this.range) return this.range;\n\tif (this.rangeValue && this.rangeValue.type) return this.rangeValue.type;\n\treturn false;\n};\n\nObjectFrame.prototype.getLabel = DataFrame.prototype.getLabel;\n\nDataFrame.prototype.getComment = function () {\n\tlet comment = '';\n\tif (this.comment && typeof this.comment === 'object') comment = this.comment['@value'];\n\tif (this.comment && typeof this.comment === 'string') comment = this.comment;\n\treturn comment;\n};\n\nObjectFrame.prototype.getComment = DataFrame.prototype.getComment;\n\n\nDataFrame.prototype.error = function (msg) {\n\tif (msg)\tthis.err = msg;\n\treturn this.err;\n};\n\nDataFrame.prototype.isValid = function () {\n\tif (!(this.type && this.isValidType(this.type))) {\n\t\tthis.error(`Missing or Illegal Frame Type ${this.type}`);\n\t\treturn false;\n\t}\n\tif (!(this.predicate)) {\n\t\tthis.error('Missing Frame Property');\n\t\treturn false;\n\t}\n\tif (!(this.domain)) {\n\t\tthis.error('Missing Frame Domain');\n\t\treturn false;\n\t}\n\tif (!(this.range)) {\n\t\tthis.error('Missing Frame Range');\n\t\treturn false;\n\t}\n\tif (this.isObjectProperty() && !(this.frame && typeof this.frame === 'object')) {\n\t\tthis.error('Missing Object Frame');\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nDataFrame.prototype.isObjectProperty = function () {\n\treturn this.type === 'objectProperty';\n};\n\nDataFrame.prototype.isDatatypeProperty = function () {\n\treturn this.type === 'datatypeProperty';\n};\n\nDataFrame.prototype.isLogic = function () {\n\tif (this.type === 'and' || this.type === 'or' || this.type === 'xor') {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.isRestriction = function () {\n\treturn this.type === 'restriction';\n};\n\nDataFrame.prototype.ftype = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isDatatypeProperty()) return 'data';\n\tif (this.isChoice()) return 'oneOf';\n\tif (this.isObject()) return 'object';\n\tif (this.isLogic()) return 'logic';\n\tif (this.isClassChoice()) return 'class_choice';\n\treturn undefined;\n};\n\n\nDataFrame.prototype.isClassChoice = function () {\n\treturn (this.frame && this.frame.type === 'class_choice');\n};\n\nDataFrame.prototype.isString = function () {\n\tif (this.range === FrameHelper.getStdURL('xsd', 'string')) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.getChoiceOptions = function () {\n\tconst opts = [];\n\tfor (let i = 0; i < this.frame.elements.length; i += 1) {\n\t\tconst option = {};\n\t\tif (this.frame.elements[i].label) {\n\t\t\toption.label = this.frame.elements[i].label['@value'];\n\t\t} else {\n\t\t\toption.label = FrameHelper.labelFromURL(this.frame.elements[i].class);\n\t\t}\n\t\toption.value = this.frame.elements[i].class;\n\t\topts.push(option);\n\t}\n\treturn opts;\n};\n\nDataFrame.prototype.lang = function () {\n\treturn 'en';\n};\n\nDataFrame.prototype.isChoice = function () {\n\treturn (this.frame && this.frame.type === 'oneOf');\n};\n\nDataFrame.prototype.isDocument = function () {\n\treturn (this.frame && this.frame.type === 'document');\n};\n\nDataFrame.prototype.isData = function () {\n\treturn (this.isDocument() || this.isChoice() || this.isDatatypeProperty());\n};\n\nDataFrame.prototype.isObject = function () {\n\treturn (this.isObjectProperty() && this.frame && !(this.isChoice() || this.isDocument()));\n};\n\nDataFrame.prototype.isProperty = function () {\n\treturn false;\n};\n\nDataFrame.prototype.getTypeShorthand = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isChoice()) return 'choice';\n\tconst sh = FrameHelper.getShorthand(this.getType());\n\treturn (sh || this.getType());\n};\n\nDataFrame.prototype.get = function () {\n\tif (this.contents) {\n\t\treturn this.contents;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue && typeof this.rangeValue['@value'] !== 'undefined') {\n\t\treturn this.rangeValue['@value'];\n\t}\n\tif (this.isChoice() || this.isDocument()) {\n\t\treturn this.frame.domainValue;\n\t}\n\treturn '';\n};\n\nDataFrame.prototype.set = function (value, normalizer) {\n\tif (normalizer) value = normalizer(value, this);\n\tthis.contents = value;\n\tif (this.isChoice() || this.isDocument()) {\n\t\tthis.frame.domainValue = value;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue) {\n\t\tthis.rangeValue['@value'] = value;\n\t}\n};\n\nDataFrame.prototype.clear = function () {\n\tif (this.isDocument() || this.isChoice() || this.isDatatypeProperty()) {\n\t\tthis.set('');\n\t}\n};\n\nDataFrame.prototype.cardControlAllows = function(action){\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nDataFrame.prototype.extract = function(){\n\tvar val = this.get();\n\tif(val !== \"\" && val !== false){\n\t\tif(this.isDatatypeProperty()){\n\t\t\tvar objlit = { \"@value\": this.get()}\n\t\t\tif(this.isString()) objlit[\"@language\"] = this.lang();\n\t\t\telse objlit[\"@type\"] = this.getType();\n\t\t\treturn objlit;\n\t\t}\n\t\telse if(this.isChoice() || this.isDocument()){\n\t\t\treturn {\"@id\": val}\n\t\t}\n\t}\n\treturn val;\n}\n\n\n/*\n * Class frames represent the archetypal version of a property frame as returned by the class frame api\n */\nfunction ClassFrame(frame, parent) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nClassFrame.prototype = DataFrame.prototype;\n\nClassFrame.prototype.loadFromObjectFrame = function (par, child) {\n\t// all the meta-data carried in frames:\n\tthis.type = 'objectProperty';\n\tthis.predicate = par.property;\n\tthis.range = par.range;\n\tthis.rangeValue = child.subjid;\n\tthis.domain = par.cls;\n\tthis.domainValue = par.subjid;\n\tthis.label = par.getLabel();\n\tthis.comment = par.getComment();\n\tthis.restriction = par.restriction;\n};\n\nClassFrame.prototype.createEmptyChoice = function (cls, newid) {\n\tconst cf = this.getChosenClassFrames(cls);\n\tconst objframe = new ObjectFrame(cls);\n\tif (newid) objframe.subjid = newid;\n\tobjframe.loadClassFrames(cf);\n\tconst fframe = objframe.fillFromSchema();\n\treturn fframe;\n};\n\nClassFrame.prototype.getChosenClassFrames = function (chosen) {\n\tlet nc = [];\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\tif (chosen === this.frame.operands[i][j].domain) {\n\t\t\t\tnc = nc.concat(this.frame.operands[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\treturn nc;\n};\n\nClassFrame.prototype.createEmpty = function (newid) {\n\tif (this.isObject()) {\n\t\tconst objframe = new ObjectFrame(this.range);\n\t\tif (newid) objframe.subjid = newid;\n\t\tobjframe.loadClassFrames(this.frame);\n\t\tconst fframe = objframe.fillFromSchema();\n\t\treturn fframe;\n\t}\n\tif (this.isData()) {\n\t\tconst dataframe = this.copy();\n\t\tdataframe.set('');\n\t\treturn dataframe;\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.cloneDataFrame = function (newid, other) {\n\treturn other;\n};\n\nClassFrame.prototype.clone = function (newid, other) {\n\tif (this.isObject()) {\n\t\tconsole.log('cannot clone class frame');\n\t} else if (this.isData()) {\n\t\treturn this.cloneDataFrame(newid, other);\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.getClassChoices = function () {\n\tconst choices = [];\n\tif (this.frame.operands) {\n\t\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\t\tconst domcls = this.frame.operands[i][j].domain;\n\t\t\t\tif (domcls && choices.indexOf(domcls) === -1) {\n\t\t\t\t\tchoices.push(domcls);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn choices;\n};\n\nClassFrame.prototype.getChosenClassFrame = function (chosen) {\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tconst operand = this.frame.operands[i];\n\t\tif (operand.length) {\n\t\t\tfor (let j = 0; j < operand.length; j += 1) {\n\t\t\t\tif (operand[j] && (chosen === operand[j].domain)) {\n\t\t\t\t\tconst cf = new ClassFrame(operand);\n\t\t\t\t\treturn cf;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (operand.range && chosen === operand.range) {\n\t\t\tconst cf = new ClassFrame(operand);\n\t\t\treturn cf;\n\t\t}\n\t}\n\treturn false;\n};\n\nClassFrame.prototype.getChosenFrame = function (dataframe) {\n\treturn dataframe;\n};\n\n\nfunction Restriction(restriction) {\n\tthis.min = 0;\n\tthis.max = 0;\n\tif (restriction) this.loadRestriction(restriction);\n}\n\nRestriction.prototype.hasCardRestriction = function () {\n\tif (this.min === 0 && this.max === 0) return false;\n\treturn true;\n};\n\nRestriction.prototype.loadRestriction = function (restriction) {\n\tif (typeof restriction.cardinality !== 'undefined') {\n\t\tthis.max = restriction.cardinality;\n\t\tthis.min = restriction.cardinality;\n\t} else if (typeof restriction.maxCardinality !== 'undefined') {\n\t\tthis.max = restriction.maxCardinality;\n\t} else if (typeof restriction.minCardinality !== 'undefined') {\n\t\tthis.min = restriction.minCardinality;\n\t} else if (typeof restriction.type !== 'undefined' && restriction.type === 'and' && typeof restriction.operands === 'object') {\n\t\tfor (let i = 0; i < restriction.operands.length; i += 1) {\n\t\t\tconst nrest = new Restriction(restriction.operands[i]);\n\t\t\tif (this.max === 0 && nrest.max > 0) this.max = nrest.max;\n\t\t\telse if (this.max > 0 && nrest.max > 0 && nrest.max < this.max) this.max = nrest.max;\n\t\t\tif (this.min === 0 && nrest.min > 0) this.min = nrest.min;\n\t\t\telse if (this.min > 0 && nrest.min > 0 && nrest.min > this.min) this.min = nrest.min;\n\t\t}\n\t}\n};\n\nmodule.exports = ObjectFrame;\n"],"sourceRoot":""}